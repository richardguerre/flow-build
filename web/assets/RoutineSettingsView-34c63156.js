import{m as O,r as h,a as R,o as N,j as e,p as E,q as Y,t as V,B,n as S,T as v,s as k,v as x,i as Q,w as z,F,C as W,x as U,y as H,z as G}from"./index-635bce38.js";import{C as J}from"./Checkbox-69e5192d.js";const K=function(){var i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RoutineSettingsViewQuery",selections:[{alias:null,args:null,concreteType:"Routine",kind:"LinkedField",name:"routines",plural:!0,selections:[i,n,a,{args:null,kind:"FragmentSpread",name:"RoutineSettingsViewActiveCheckbox_routine"},{args:null,kind:"FragmentSpread",name:"RoutineSettingsViewRepeats_routine"},{args:null,kind:"FragmentSpread",name:"RoutineSettingsViewDetailed_routine"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"RoutineSettingsViewQuery",selections:[{alias:null,args:null,concreteType:"Routine",kind:"LinkedField",name:"routines",plural:!0,selections:[i,n,a,{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repeats",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,concreteType:"RoutineStep",kind:"LinkedField",name:"steps",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stepSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSkip",storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"24512f11c8b387c9d385350bc3a29d25",id:null,metadata:{},name:"RoutineSettingsViewQuery",operationKind:"query",text:`query RoutineSettingsViewQuery {
  routines {
    id
    name
    time
    ...RoutineSettingsViewActiveCheckbox_routine
    ...RoutineSettingsViewRepeats_routine
    ...RoutineSettingsViewDetailed_routine
  }
}

fragment RoutineSettingsViewActiveCheckbox_routine on Routine {
  id
  isActive
}

fragment RoutineSettingsViewDetailed_routine on Routine {
  id
  name
  time
  actionName
  steps {
    pluginSlug
    stepSlug
    shouldSkip
  }
  ...RoutineSettingsViewActiveCheckbox_routine
  ...RoutineSettingsViewRepeats_routine
}

fragment RoutineSettingsViewRepeats_routine on Routine {
  id
  repeats
}
`}}}();K.hash="753c5cd9a52c45b0a329d54d0e939883";const X=K,j=function(){var i=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"RoutineSettingsViewCreateRoutineMutation",selections:[{alias:null,args:n,concreteType:"Routine",kind:"LinkedField",name:"createRoutine",plural:!1,selections:[a,{args:null,kind:"FragmentSpread",name:"RoutineSettingsView_routine"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"RoutineSettingsViewCreateRoutineMutation",selections:[{alias:null,args:n,concreteType:"Routine",kind:"LinkedField",name:"createRoutine",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repeats",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,concreteType:"RoutineStep",kind:"LinkedField",name:"steps",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stepSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSkip",storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"1a8e7315d5f645914f5b3019571534d6",id:null,metadata:{},name:"RoutineSettingsViewCreateRoutineMutation",operationKind:"mutation",text:`mutation RoutineSettingsViewCreateRoutineMutation(
  $input: MutationCreateRoutineInput!
) {
  createRoutine(input: $input) {
    id
    ...RoutineSettingsView_routine
  }
}

fragment RoutineSettingsViewActiveCheckbox_routine on Routine {
  id
  isActive
}

fragment RoutineSettingsViewDetailed_routine on Routine {
  id
  name
  time
  actionName
  steps {
    pluginSlug
    stepSlug
    shouldSkip
  }
  ...RoutineSettingsViewActiveCheckbox_routine
  ...RoutineSettingsViewRepeats_routine
}

fragment RoutineSettingsViewRepeats_routine on Routine {
  id
  repeats
}

fragment RoutineSettingsView_routine on Routine {
  id
  name
  time
  ...RoutineSettingsViewActiveCheckbox_routine
  ...RoutineSettingsViewRepeats_routine
  ...RoutineSettingsViewDetailed_routine
}
`}}}();j.hash="02bdd80c6832d40de2f3b0f56844c2f8";const P={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RoutineSettingsViewActiveCheckbox_routine",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null}],type:"Routine",abstractKey:null};P.hash="1dc31f036dc1e1c019f5285a84bd0fc4";const A=function(){var i=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"Routine",kind:"LinkedField",name:"updateRoutine",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"RoutineSettingsViewUpdateActiveMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"RoutineSettingsViewUpdateActiveMutation",selections:n},params:{cacheID:"a68600f2493b65c56566091e4c6ba8a0",id:null,metadata:{},name:"RoutineSettingsViewUpdateActiveMutation",operationKind:"mutation",text:`mutation RoutineSettingsViewUpdateActiveMutation(
  $input: MutationUpdateRoutineInput!
) {
  updateRoutine(input: $input) {
    id
    isActive
  }
}
`}}}();A.hash="1c0d9dc92314b633c08bd6cee0ab3e91";const D={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RoutineSettingsViewRepeats_routine",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repeats",storageKey:null}],type:"Routine",abstractKey:null};D.hash="883bdb2c013197954eafcbac59a7eb44";const _=function(){var i=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"Routine",kind:"LinkedField",name:"updateRoutine",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repeats",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"RoutineSettingsViewUpdateRepeatsMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"RoutineSettingsViewUpdateRepeatsMutation",selections:n},params:{cacheID:"64a299e42219212189f74449bf1c9051",id:null,metadata:{},name:"RoutineSettingsViewUpdateRepeatsMutation",operationKind:"mutation",text:`mutation RoutineSettingsViewUpdateRepeatsMutation(
  $input: MutationUpdateRoutineInput!
) {
  updateRoutine(input: $input) {
    id
    repeats
  }
}
`}}}();_.hash="71c0b7af79205dfed9d2505d00a94ac5";const C={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RoutineSettingsViewDetailed_routine",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,concreteType:"RoutineStep",kind:"LinkedField",name:"steps",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stepSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSkip",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"RoutineSettingsViewActiveCheckbox_routine"},{args:null,kind:"FragmentSpread",name:"RoutineSettingsViewRepeats_routine"}],type:"Routine",abstractKey:null};C.hash="b8856520ac4ca2227119bab4c6f95103";const M=function(){var i=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}];return{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"RoutineSettingsViewUpdateRoutineMutation",selections:[{alias:null,args:n,concreteType:"Routine",kind:"LinkedField",name:"updateRoutine",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RoutineSettingsViewDetailed_routine"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"RoutineSettingsViewUpdateRoutineMutation",selections:[{alias:null,args:n,concreteType:"Routine",kind:"LinkedField",name:"updateRoutine",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"actionName",storageKey:null},{alias:null,args:null,concreteType:"RoutineStep",kind:"LinkedField",name:"steps",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stepSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldSkip",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repeats",storageKey:null}],storageKey:null}]},params:{cacheID:"fccd455af2cc0abb8d167be1b0e64980",id:null,metadata:{},name:"RoutineSettingsViewUpdateRoutineMutation",operationKind:"mutation",text:`mutation RoutineSettingsViewUpdateRoutineMutation(
  $input: MutationUpdateRoutineInput!
) {
  updateRoutine(input: $input) {
    ...RoutineSettingsViewDetailed_routine
    id
  }
}

fragment RoutineSettingsViewActiveCheckbox_routine on Routine {
  id
  isActive
}

fragment RoutineSettingsViewDetailed_routine on Routine {
  id
  name
  time
  actionName
  steps {
    pluginSlug
    stepSlug
    shouldSkip
  }
  ...RoutineSettingsViewActiveCheckbox_routine
  ...RoutineSettingsViewRepeats_routine
}

fragment RoutineSettingsViewRepeats_routine on Routine {
  id
  repeats
}
`}}}();M.hash="447e3d96ba8804af5a76b6a78a8f0476";const te=()=>{var u;const{plugins:i}=O(),n=h.useLazyLoadQuery(X,{}),[a,r]=R.useState(((u=n.routines[0])==null?void 0:u.id)??null),[s]=N(j),o=async()=>{const c=await S.promise(s({variables:{input:{name:"New routine",actionName:"Plan",repeats:[],steps:[],time:"08:00"}},optimisticUpdater:b=>{const d=b.create(`client:newRoutine${new Date}`,"Routine");d.setValue("New routine","name"),d.setValue("Plan","actionName"),d.setValue("08:00","time"),d.setValue(!1,"isActive"),d.setValue([],"repeats"),d.setValue([],"steps");const w=b.getRoot(),f=w.getLinkedRecords("routines");w.setLinkedRecords([...f??[],d],"routines")}}),{loading:"Creating new routine...",success:"Routine created!",error:"Failed to create routine. Please try again."});r(c.createRoutine.id)};return e("div",{className:"bg-background-50 flex max-h-screen w-full flex-col gap-4 overflow-auto p-8",children:[e("h1",{className:"text-xl font-medium",children:"Routines"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:103,columnNumber:7},globalThis),e("div",{className:"grid grid-cols-[minmax(0,_576px)_minmax(0,_1fr)] gap-4",children:[e("div",{className:"flex flex-col items-start gap-2",children:[n.routines.map(c=>e("button",{className:"hover:bg-background-100 flex w-full justify-between gap-4 rounded-md px-4 py-2 transition-colors",onClick:()=>r(c.id),children:[e("div",{className:"flex items-center gap-2",children:[e(L,{routine:c},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:112,columnNumber:17},globalThis),c.name]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:111,columnNumber:15},globalThis),e("div",{className:"flex items-center gap-2",children:[e($,{routine:c},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:116,columnNumber:17},globalThis),e(E,{className:"bg-gray-200 text-gray-600",children:c.time},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:117,columnNumber:17},globalThis),e(Y,{className:V(a===c.id?"text-foreground-900":"text-foreground-700")},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:118,columnNumber:17},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:115,columnNumber:15},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:107,columnNumber:13},globalThis)),e(B,{tertiary:!0,sm:!0,onClick:o,children:"New routine"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:126,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:105,columnNumber:9},globalThis),a&&e(ee,{routine:n.routines.find(c=>c.id===a),plugins:i},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:131,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:104,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:102,columnNumber:5},globalThis)},L=i=>{const n=h.useFragment(P,i.routine),[a]=N(A),r=(s,o)=>{S.promise(a({variables:{input:{routineId:s,isActive:o}},optimisticResponse:{updateRoutine:{id:s,isActive:o}}}),{loading:"Updating routine...",success:"Routine updated!",error:"Failed to update routine. Please try again."})};return e(J,{checked:n.isActive,onCheckedChange:s=>r(n.id,!!s)},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:176,columnNumber:5},globalThis)},Z=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],$=i=>{const n=h.useFragment(D,i.routine),[a]=N(_),r=s=>{const o=n.repeats.includes(s)?n.repeats.filter(u=>u!==s):[...n.repeats,s];S.promise(a({variables:{input:{routineId:n.id,repeats:o}},optimisticResponse:{updateRoutine:{id:n.id,repeats:o}}}),{loading:"Updating routine...",success:"Routine updated!",error:"Failed to update routine. Please try again."})};return e("div",{className:"flex gap-1",children:Z.map(s=>e(v,{children:[e(k,{asChild:!0,children:e("button",{onClick:()=>r(s),type:"button",className:V("flex h-7 w-7 appearance-none items-center justify-center rounded-full text-xs",n.repeats.includes(s)?"bg-primary-100 text-primary-600":"bg-gray-200 text-gray-600"),children:s[0]},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:234,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:233,columnNumber:11},globalThis),e(x,{children:s[0]+s.slice(1).toLowerCase()},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:247,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:232,columnNumber:9},globalThis))},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:230,columnNumber:5},globalThis)},ee=i=>{const n=h.useFragment(C,i.routine),[a]=N(M),{register:r,control:s,handleSubmit:o,formState:u,watch:c,reset:b}=Q({mode:"onChange"}),d=c(),[,,w]=z({values:d,isDirty:u.isDirty,isValid:u.isValid},1e3,({values:t,isDirty:l,isValid:m})=>{!l||!m||f(t)}),f=t=>{w(),S.promise(a({variables:{input:{routineId:n.id,name:t.name,time:t.time,actionName:t.actionName,steps:t.steps.map(l=>({pluginSlug:l.pluginSlug,stepSlug:l.stepSlug,shouldSkip:l.shouldSkip}))}}}),{loading:"Updating routine...",success:"Routine updated!",error:"Failed to update routine. Please try again."})},y=R.useMemo(()=>Object.entries(i.plugins).flatMap(([t,l])=>Object.keys(l.routineSteps??{}).map(m=>({id:`${t}_${m}_${Math.random()}`,pluginSlug:t,stepSlug:m,shouldSkip:!1}))),[i.plugins]);return R.useEffect(()=>{const t=n.steps.map(l=>({id:`${l.pluginSlug}_${l.stepSlug}_${Math.random()}`,...l}));b({name:n.name,time:n.time,actionName:n.actionName,steps:t})},[n.name,n.actionName,n.time,n.steps]),e("form",{onSubmit:o(f),className:"bg-background-50 flex w-full flex-col gap-4 rounded-md p-6 shadow",children:[e("div",{className:"flex items-center gap-2",children:[e(L,{routine:n},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:362,columnNumber:9},globalThis),e("input",{className:"hover:text-primary-500 w-fit appearance-none rounded bg-transparent text-2xl font-semibold focus:outline-none active:outline-none",defaultValue:n.name,...r("name",{required:!0})},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:363,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:361,columnNumber:7},globalThis),e("div",{className:"flex items-center gap-2",children:[e($,{routine:n},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:370,columnNumber:9},globalThis),e(F,{type:"time",defaultValue:n.time,...r("time",{required:!0})},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:371,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:369,columnNumber:7},globalThis),e(F,{label:"Action label",description:"Label of the button shown in the Kanban view to start the routine.",className:"max-w-xs",defaultValue:n.actionName,...r("actionName",{required:!0})},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:377,columnNumber:7},globalThis),e("div",{className:"flex flex-col gap-1",children:[e("h2",{className:"text-foreground-900 text-base font-medium",children:"Steps"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:385,columnNumber:9},globalThis),e("div",{className:"text-foreground-700",children:"Steps are executed in the order they are listed. Drag and drop to reorder them."},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:386,columnNumber:9},globalThis),e(W,{name:"steps",control:s,defaultValue:[],render:({field:t})=>e(U.ReactSortable,{className:"max-h-70 min-h-8 overflow-auto",list:t.value,setList:t.onChange,group:"shared",children:t.value.map(l=>e(T,{step:l,plugins:i.plugins,withActions:!0,onSkipChange:(m,p)=>{const g=t.value.findIndex(q=>q.id===m);if(g===-1)return;const I={...t.value[g],shouldSkip:p};t.onChange([...t.value.slice(0,g),I,...t.value.slice(g+1)])},onRemove:m=>{const p=t.value.findIndex(g=>g.id===m);p!==-1&&t.onChange([...t.value.slice(0,p),...t.value.slice(p+1)])}},l.id,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:401,columnNumber:17},globalThis))},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:394,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:389,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:384,columnNumber:7},globalThis),e("div",{className:"flex flex-col gap-1",children:[e("h2",{className:"text-foreground-900 text-base font-medium",children:"Add steps"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:431,columnNumber:9},globalThis),e("div",{className:"text-foreground-700",children:"Add steps to your routine by dragging them from the list below to the list above."},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:432,columnNumber:9},globalThis),e(U.ReactSortable,{className:"max-h-66 overflow-auto",list:y,setList:()=>{},group:"shared",children:y.map(t=>e(T,{step:t,plugins:i.plugins},t.id,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:442,columnNumber:13},globalThis))},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:435,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:430,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:357,columnNumber:5},globalThis)},T=i=>{var s,o;const n=e("div",{className:"bg-background-50 absolute right-0 flex items-center justify-end gap-4 px-4",children:[e(v,{children:[e(k,{asChild:!0,children:e("button",{className:V("flex h-6 w-6 items-center justify-center rounded-full",i.step.shouldSkip?"bg-primary-100 text-primary-600":"bg-gray-200 text-gray-600"),onClick:()=>{var u;return(u=i.onSkipChange)==null?void 0:u.call(i,i.step.id,!i.step.shouldSkip)},children:e(H,{size:"16"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:470,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:461,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:460,columnNumber:9},globalThis),e(x,{className:"max-w-sm p-3",children:["Whether to skip the step if the routine preceding this routine was done.",e("br",{},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:475,columnNumber:11},globalThis),e("br",{},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:476,columnNumber:11},globalThis),"For example, skip retroing on yesterday if you already did a retro yesterday."]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:473,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:459,columnNumber:7},globalThis),e(v,{children:[e(k,{asChild:!0,children:e("button",{className:"bg-negative-100 text-negative-600 flex h-6 w-6 items-center justify-center rounded-full",onClick:()=>{var u;return(u=i.onRemove)==null?void 0:u.call(i,i.step.id)},children:e(G,{size:"16"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:486,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:482,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:481,columnNumber:9},globalThis),e(x,{children:"Remove step"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:489,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:480,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:458,columnNumber:5},globalThis),a=i.plugins[i.step.pluginSlug];if(!((s=a==null?void 0:a.routineSteps)!=null&&s[i.step.stepSlug]))return e("div",{id:i.step.id,className:"relative",children:[i.step.stepSlug," ",i.step.pluginSlug," (plugin not installed anymore)",i.withActions&&n]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:497,columnNumber:7},globalThis);const r=(o=a.routineSteps)==null?void 0:o[i.step.stepSlug];return e("div",{id:i.step.id,className:"bg-background-50 relative flex cursor-grab items-center gap-2 rounded px-4 py-2",children:[e("div",{className:"shrink-0 font-medium",children:r.name},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:510,columnNumber:7},globalThis),e("div",{className:"text-foreground-700 shrink-0 text-sm",children:["(",a.name,")"]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:511,columnNumber:7},globalThis),e("div",{className:"text-foreground-700 truncate text-sm",children:r.description},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:512,columnNumber:7},globalThis),i.withActions&&n]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/RoutineSettingsView.tsx",lineNumber:506,columnNumber:5},globalThis)};export{te as default};
