import{j as e,h as w,i as h,F as u,B as m,k as N,a as v,n as P,l as i}from"./index-635bce38.js";const g=function(){var s=[{defaultValue:null,kind:"LocalArgument",name:"input"}],r=[{alias:"newToken",args:[{kind:"Variable",name:"input",variableName:"input"}],kind:"ScalarField",name:"changePassword",storageKey:null}];return{fragment:{argumentDefinitions:s,kind:"Fragment",metadata:null,name:"GeneralSettingsViewChangePasswordMutation",selections:r,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:s,kind:"Operation",name:"GeneralSettingsViewChangePasswordMutation",selections:r},params:{cacheID:"6fa91b38968cfe09504f4f102ec432ce",id:null,metadata:{},name:"GeneralSettingsViewChangePasswordMutation",operationKind:"mutation",text:`mutation GeneralSettingsViewChangePasswordMutation(
  $input: MutationChangePasswordInput!
) {
  newToken: changePassword(input: $input)
}
`}}}();g.hash="10003f56ffad278cf6521eb39ce5b69f";const f=function(){var s=[{alias:null,args:null,kind:"ScalarField",name:"logout",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"GeneralSettingsViewLogoutMutation",selections:s,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"GeneralSettingsViewLogoutMutation",selections:s},params:{cacheID:"1ac28a93faab21c06a11e063ca1de59e",id:null,metadata:{},name:"GeneralSettingsViewLogoutMutation",operationKind:"mutation",text:`mutation GeneralSettingsViewLogoutMutation {
  logout
}
`}}}();f.hash="6b42c965d968abafa0d1352a793751e6";const k=()=>e("div",{className:"flex flex-col gap-8 p-8",children:[e(S,{},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:14,columnNumber:7},globalThis),e(x,{},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:15,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:13,columnNumber:5},globalThis),S=()=>{const[s,r]=w(g),{register:a,handleSubmit:l,formState:n,setError:c,reset:o}=h(),b=d=>{s({variables:{input:{oldPassword:d.oldPassword,newPassword:d.newPassword}},onError:t=>c("newPasswordConfirm",{message:t.message}),onCompleted:t=>{P.success("Password changed successfully.");const p=window.localStorage.getItem(i);console.info(`${p} is no longer valid.`),console.info(`New token: ${t.newToken}`),window.localStorage.setItem(i,t.newToken),o()}})};return e("form",{className:"flex flex-col items-start gap-2",children:[e(u,{type:"password",label:"Old password",...a("oldPassword",{required:"Please enter your current password."})},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:58,columnNumber:7},globalThis),e(u,{type:"password",label:"New password",...a("newPassword",{required:"Please enter your new password."}),error:n.errors.newPassword,hasError:!!n.errors.newPasswordConfirm},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:63,columnNumber:7},globalThis),e(u,{type:"password",label:"Confirm new password",...a("newPasswordConfirm",{required:"Please confirm your new password.",minLength:{value:8,message:"Your new password must be at least 8 characters long."}}),error:n.errors.newPasswordConfirm},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:70,columnNumber:7},globalThis),e(m,{onClick:l(b),loading:r,children:"Change password"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:82,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:57,columnNumber:5},globalThis)},x=()=>{const s=N(),[r,a]=w(f),[l,n]=v.useState();return e("div",{className:"flex flex-col items-start gap-2",children:[e("div",{children:"Before logging out, remember to save your password so you can log back in."},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:113,columnNumber:7},globalThis),e(m,{danger:!0,onClick:()=>{r({variables:{},onError:o=>n(o.message),onCompleted:()=>{const o=window.localStorage.getItem(i);console.info(`${o} is no longer valid.`),window.localStorage.removeItem(i),s("/login")}})},loading:a,children:"Logout"},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:114,columnNumber:7},globalThis),e("div",{className:"text-negative-500 text-sm",children:l},void 0,!1,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:117,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/richardguerre/Projects/flow/apps/web/src/views/GeneralSettingsView.tsx",lineNumber:112,columnNumber:5},globalThis)};export{k as default};
