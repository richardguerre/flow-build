var KSe=Object.defineProperty;var USe=(n,e,t)=>e in n?KSe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Oj=(n,e,t)=>(USe(n,typeof e!="symbol"?e+"":e,t),t);function Cte(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();const HSe="modulepreload",WSe=function(n){return"/"+n},Pj={},Go=function(n,e,t){if(!e||e.length===0)return n();const r=document.getElementsByTagName("link");return Promise.all(e.map(i=>{if(i=WSe(i),i in Pj)return;Pj[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(t)for(let l=r.length-1;l>=0;l--){const c=r[l];if(c.href===i&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":HSe,!s&&(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),s)return new Promise((l,c)=>{a.addEventListener("load",l),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>n()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zL(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Mte={exports:{}},WT={},Tte={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fk=Symbol.for("react.element"),GSe=Symbol.for("react.portal"),JSe=Symbol.for("react.fragment"),QSe=Symbol.for("react.strict_mode"),YSe=Symbol.for("react.profiler"),XSe=Symbol.for("react.provider"),ZSe=Symbol.for("react.context"),ewe=Symbol.for("react.forward_ref"),twe=Symbol.for("react.suspense"),nwe=Symbol.for("react.memo"),rwe=Symbol.for("react.lazy"),Dj=Symbol.iterator;function iwe(n){return n===null||typeof n!="object"?null:(n=Dj&&n[Dj]||n["@@iterator"],typeof n=="function"?n:null)}var _te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ate=Object.assign,Ite={};function p0(n,e,t){this.props=n,this.context=e,this.refs=Ite,this.updater=t||_te}p0.prototype.isReactComponent={};p0.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};p0.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Rte(){}Rte.prototype=p0.prototype;function BL(n,e,t){this.props=n,this.context=e,this.refs=Ite,this.updater=t||_te}var jL=BL.prototype=new Rte;jL.constructor=BL;Ate(jL,p0.prototype);jL.isPureReactComponent=!0;var Nj=Array.isArray,Ote=Object.prototype.hasOwnProperty,VL={current:null},Pte={key:!0,ref:!0,__self:!0,__source:!0};function Dte(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ote.call(e,r)&&!Pte.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Fk,type:n,key:s,ref:o,props:i,_owner:VL.current}}function swe(n,e){return{$$typeof:Fk,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function qL(n){return typeof n=="object"&&n!==null&&n.$$typeof===Fk}function owe(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Fj=/\/+/g;function i2(n,e){return typeof n=="object"&&n!==null&&n.key!=null?owe(""+n.key):e.toString(36)}function gw(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Fk:case GSe:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+i2(o,0):r,Nj(i)?(t="",n!=null&&(t=n.replace(Fj,"$&/")+"/"),gw(i,e,t,"",function(c){return c})):i!=null&&(qL(i)&&(i=swe(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Fj,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Nj(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+i2(s,a);o+=gw(s,e,t,l,i)}else if(l=iwe(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+i2(s,a++),o+=gw(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function B1(n,e,t){if(n==null)return n;var r=[],i=0;return gw(n,r,"","",function(s){return e.call(t,s,i++)}),r}function awe(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Hi={current:null},yw={transition:null},lwe={ReactCurrentDispatcher:Hi,ReactCurrentBatchConfig:yw,ReactCurrentOwner:VL};Ze.Children={map:B1,forEach:function(n,e,t){B1(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return B1(n,function(){e++}),e},toArray:function(n){return B1(n,function(e){return e})||[]},only:function(n){if(!qL(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ze.Component=p0;Ze.Fragment=JSe;Ze.Profiler=YSe;Ze.PureComponent=BL;Ze.StrictMode=QSe;Ze.Suspense=twe;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lwe;Ze.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Ate({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=VL.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Ote.call(e,l)&&!Pte.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Fk,type:n.type,key:i,ref:s,props:r,_owner:o}};Ze.createContext=function(n){return n={$$typeof:ZSe,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:XSe,_context:n},n.Consumer=n};Ze.createElement=Dte;Ze.createFactory=function(n){var e=Dte.bind(null,n);return e.type=n,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(n){return{$$typeof:ewe,render:n}};Ze.isValidElement=qL;Ze.lazy=function(n){return{$$typeof:rwe,_payload:{_status:-1,_result:n},_init:awe}};Ze.memo=function(n,e){return{$$typeof:nwe,type:n,compare:e===void 0?null:e}};Ze.startTransition=function(n){var e=yw.transition;yw.transition={};try{n()}finally{yw.transition=e}};Ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ze.useCallback=function(n,e){return Hi.current.useCallback(n,e)};Ze.useContext=function(n){return Hi.current.useContext(n)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(n){return Hi.current.useDeferredValue(n)};Ze.useEffect=function(n,e){return Hi.current.useEffect(n,e)};Ze.useId=function(){return Hi.current.useId()};Ze.useImperativeHandle=function(n,e,t){return Hi.current.useImperativeHandle(n,e,t)};Ze.useInsertionEffect=function(n,e){return Hi.current.useInsertionEffect(n,e)};Ze.useLayoutEffect=function(n,e){return Hi.current.useLayoutEffect(n,e)};Ze.useMemo=function(n,e){return Hi.current.useMemo(n,e)};Ze.useReducer=function(n,e,t){return Hi.current.useReducer(n,e,t)};Ze.useRef=function(n){return Hi.current.useRef(n)};Ze.useState=function(n){return Hi.current.useState(n)};Ze.useSyncExternalStore=function(n,e,t){return Hi.current.useSyncExternalStore(n,e,t)};Ze.useTransition=function(){return Hi.current.useTransition()};Ze.version="18.2.0";Tte.exports=Ze;var v=Tte.exports;const ee=tu(v),KL=Cte({__proto__:null,default:ee},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cwe=v,uwe=Symbol.for("react.element"),dwe=Symbol.for("react.fragment"),fwe=Object.prototype.hasOwnProperty,hwe=cwe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pwe={key:!0,ref:!0,__self:!0,__source:!0};function Nte(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fwe.call(e,r)&&!pwe.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:uwe,type:n,key:s,ref:o,props:i,_owner:hwe.current}}WT.Fragment=dwe;WT.jsx=Nte;WT.jsxs=Nte;Mte.exports=WT;var UL=Mte.exports;const ls=UL.Fragment,_=UL.jsx,de=UL.jsxs;var BD={},Fte={exports:{}},oo={},Lte={exports:{}},zte={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,O){var z=F.length;F.push(O);e:for(;0<z;){var j=z-1>>>1,K=F[j];if(0<i(K,O))F[j]=O,F[z]=K,z=j;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var O=F[0],z=F.pop();if(z!==O){F[0]=z;e:for(var j=0,K=F.length,Z=K>>>1;j<Z;){var te=2*(j+1)-1,pe=F[te],he=te+1,se=F[he];if(0>i(pe,z))he<K&&0>i(se,pe)?(F[j]=se,F[he]=z,j=he):(F[j]=pe,F[te]=z,j=te);else if(he<K&&0>i(se,z))F[j]=se,F[he]=z,j=he;else break e}}return O}function i(F,O){var z=F.sortIndex-O.sortIndex;return z!==0?z:F.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var O=t(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=F)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(c)}}function S(F){if(m=!1,b(F),!p)if(t(l)!==null)p=!0,A(w);else{var O=t(c);O!==null&&L(S,O.startTime-F)}}function w(F,O){p=!1,m&&(m=!1,y(E),E=-1),h=!0;var z=f;try{for(b(O),d=t(l);d!==null&&(!(d.expirationTime>O)||F&&!P());){var j=d.callback;if(typeof j=="function"){d.callback=null,f=d.priorityLevel;var K=j(d.expirationTime<=O);O=n.unstable_now(),typeof K=="function"?d.callback=K:d===t(l)&&r(l),b(O)}else r(l);d=t(l)}if(d!==null)var Z=!0;else{var te=t(c);te!==null&&L(S,te.startTime-O),Z=!1}return Z}finally{d=null,f=z,h=!1}}var x=!1,$=null,E=-1,C=5,M=-1;function P(){return!(n.unstable_now()-M<C)}function I(){if($!==null){var F=n.unstable_now();M=F;var O=!0;try{O=$(!0,F)}finally{O?N():(x=!1,$=null)}}else x=!1}var N;if(typeof k=="function")N=function(){k(I)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,R=T.port2;T.port1.onmessage=I,N=function(){R.postMessage(null)}}else N=function(){g(I,0)};function A(F){$=F,x||(x=!0,N())}function L(F,O){E=g(function(){F(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){p||h||(p=!0,A(w))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var z=f;f=O;try{return F()}finally{f=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,O){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=f;f=F;try{return O()}finally{f=z}},n.unstable_scheduleCallback=function(F,O,z){var j=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?j+z:j):z=j,F){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,F={id:u++,callback:O,priorityLevel:F,startTime:z,expirationTime:K,sortIndex:-1},z>j?(F.sortIndex=z,e(c,F),t(l)===null&&F===t(c)&&(m?(y(E),E=-1):m=!0,L(S,z-j))):(F.sortIndex=K,e(l,F),p||h||(p=!0,A(w))),F},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(F){var O=f;return function(){var z=f;f=O;try{return F.apply(this,arguments)}finally{f=z}}}})(zte);Lte.exports=zte;var mwe=Lte.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bte=v,eo=mwe;function re(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jte=new Set,Rb={};function rp(n,e){Bg(n,e),Bg(n+"Capture",e)}function Bg(n,e){for(Rb[n]=e,n=0;n<e.length;n++)jte.add(e[n])}var Vc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jD=Object.prototype.hasOwnProperty,gwe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lj={},zj={};function ywe(n){return jD.call(zj,n)?!0:jD.call(Lj,n)?!1:gwe.test(n)?zj[n]=!0:(Lj[n]=!0,!1)}function vwe(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function bwe(n,e,t,r){if(e===null||typeof e>"u"||vwe(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){mr[n]=new Wi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];mr[e]=new Wi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){mr[n]=new Wi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){mr[n]=new Wi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){mr[n]=new Wi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){mr[n]=new Wi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){mr[n]=new Wi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){mr[n]=new Wi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){mr[n]=new Wi(n,5,!1,n.toLowerCase(),null,!1,!1)});var HL=/[\-:]([a-z])/g;function WL(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(HL,WL);mr[e]=new Wi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(HL,WL);mr[e]=new Wi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(HL,WL);mr[e]=new Wi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){mr[n]=new Wi(n,1,!1,n.toLowerCase(),null,!1,!1)});mr.xlinkHref=new Wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){mr[n]=new Wi(n,1,!1,n.toLowerCase(),null,!0,!0)});function GL(n,e,t,r){var i=mr.hasOwnProperty(e)?mr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bwe(e,t,i,r)&&(t=null),r||i===null?ywe(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var nu=Bte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j1=Symbol.for("react.element"),Qm=Symbol.for("react.portal"),Ym=Symbol.for("react.fragment"),JL=Symbol.for("react.strict_mode"),VD=Symbol.for("react.profiler"),Vte=Symbol.for("react.provider"),qte=Symbol.for("react.context"),QL=Symbol.for("react.forward_ref"),qD=Symbol.for("react.suspense"),KD=Symbol.for("react.suspense_list"),YL=Symbol.for("react.memo"),_u=Symbol.for("react.lazy"),Kte=Symbol.for("react.offscreen"),Bj=Symbol.iterator;function ly(n){return n===null||typeof n!="object"?null:(n=Bj&&n[Bj]||n["@@iterator"],typeof n=="function"?n:null)}var Ut=Object.assign,s2;function Yy(n){if(s2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);s2=e&&e[1]||""}return`
`+s2+n}var o2=!1;function a2(n,e){if(!n||o2)return"";o2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{o2=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Yy(n):""}function kwe(n){switch(n.tag){case 5:return Yy(n.type);case 16:return Yy("Lazy");case 13:return Yy("Suspense");case 19:return Yy("SuspenseList");case 0:case 2:case 15:return n=a2(n.type,!1),n;case 11:return n=a2(n.type.render,!1),n;case 1:return n=a2(n.type,!0),n;default:return""}}function UD(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ym:return"Fragment";case Qm:return"Portal";case VD:return"Profiler";case JL:return"StrictMode";case qD:return"Suspense";case KD:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case qte:return(n.displayName||"Context")+".Consumer";case Vte:return(n._context.displayName||"Context")+".Provider";case QL:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case YL:return e=n.displayName||null,e!==null?e:UD(n.type)||"Memo";case _u:e=n._payload,n=n._init;try{return UD(n(e))}catch{}}return null}function xwe(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return UD(e);case 8:return e===JL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xd(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ute(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Swe(n){var e=Ute(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function V1(n){n._valueTracker||(n._valueTracker=Swe(n))}function Hte(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Ute(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function x$(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function HD(n,e){var t=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function jj(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=xd(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wte(n,e){e=e.checked,e!=null&&GL(n,"checked",e,!1)}function WD(n,e){Wte(n,e);var t=xd(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?GD(n,e.type,t):e.hasOwnProperty("defaultValue")&&GD(n,e.type,xd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Vj(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function GD(n,e,t){(e!=="number"||x$(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Xy=Array.isArray;function xg(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+xd(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function JD(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function qj(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(re(92));if(Xy(t)){if(1<t.length)throw Error(re(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:xd(t)}}function Gte(n,e){var t=xd(e.value),r=xd(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Kj(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Jte(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QD(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Jte(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var q1,Qte=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(q1=q1||document.createElement("div"),q1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=q1.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ob(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var vv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wwe=["Webkit","ms","Moz","O"];Object.keys(vv).forEach(function(n){wwe.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),vv[e]=vv[n]})});function Yte(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||vv.hasOwnProperty(n)&&vv[n]?(""+e).trim():e+"px"}function Xte(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Yte(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var $we=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function YD(n,e){if(e){if($we[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function XD(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZD=null;function XL(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var eN=null,Sg=null,wg=null;function Uj(n){if(n=Bk(n)){if(typeof eN!="function")throw Error(re(280));var e=n.stateNode;e&&(e=XT(e),eN(n.stateNode,n.type,e))}}function Zte(n){Sg?wg?wg.push(n):wg=[n]:Sg=n}function ene(){if(Sg){var n=Sg,e=wg;if(wg=Sg=null,Uj(n),e)for(n=0;n<e.length;n++)Uj(e[n])}}function tne(n,e){return n(e)}function nne(){}var l2=!1;function rne(n,e,t){if(l2)return n(e,t);l2=!0;try{return tne(n,e,t)}finally{l2=!1,(Sg!==null||wg!==null)&&(nne(),ene())}}function Pb(n,e){var t=n.stateNode;if(t===null)return null;var r=XT(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(re(231,e,typeof t));return t}var tN=!1;if(Vc)try{var cy={};Object.defineProperty(cy,"passive",{get:function(){tN=!0}}),window.addEventListener("test",cy,cy),window.removeEventListener("test",cy,cy)}catch{tN=!1}function Ewe(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var bv=!1,S$=null,w$=!1,nN=null,Cwe={onError:function(n){bv=!0,S$=n}};function Mwe(n,e,t,r,i,s,o,a,l){bv=!1,S$=null,Ewe.apply(Cwe,arguments)}function Twe(n,e,t,r,i,s,o,a,l){if(Mwe.apply(this,arguments),bv){if(bv){var c=S$;bv=!1,S$=null}else throw Error(re(198));w$||(w$=!0,nN=c)}}function ip(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ine(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Hj(n){if(ip(n)!==n)throw Error(re(188))}function _we(n){var e=n.alternate;if(!e){if(e=ip(n),e===null)throw Error(re(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Hj(i),n;if(s===r)return Hj(i),e;s=s.sibling}throw Error(re(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(t.alternate!==r)throw Error(re(190))}if(t.tag!==3)throw Error(re(188));return t.stateNode.current===t?n:e}function sne(n){return n=_we(n),n!==null?one(n):null}function one(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=one(n);if(e!==null)return e;n=n.sibling}return null}var ane=eo.unstable_scheduleCallback,Wj=eo.unstable_cancelCallback,Awe=eo.unstable_shouldYield,Iwe=eo.unstable_requestPaint,En=eo.unstable_now,Rwe=eo.unstable_getCurrentPriorityLevel,ZL=eo.unstable_ImmediatePriority,lne=eo.unstable_UserBlockingPriority,$$=eo.unstable_NormalPriority,Owe=eo.unstable_LowPriority,cne=eo.unstable_IdlePriority,GT=null,Zl=null;function Pwe(n){if(Zl&&typeof Zl.onCommitFiberRoot=="function")try{Zl.onCommitFiberRoot(GT,n,void 0,(n.current.flags&128)===128)}catch{}}var xa=Math.clz32?Math.clz32:Fwe,Dwe=Math.log,Nwe=Math.LN2;function Fwe(n){return n>>>=0,n===0?32:31-(Dwe(n)/Nwe|0)|0}var K1=64,U1=4194304;function Zy(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function E$(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Zy(a):(s&=o,s!==0&&(r=Zy(s)))}else o=t&~i,o!==0?r=Zy(o):s!==0&&(r=Zy(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-xa(e),i=1<<t,r|=n[t],e&=~i;return r}function Lwe(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zwe(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-xa(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Lwe(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function rN(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function une(){var n=K1;return K1<<=1,!(K1&4194240)&&(K1=64),n}function c2(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Lk(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-xa(e),n[e]=t}function Bwe(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-xa(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function e4(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-xa(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var pt=0;function dne(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var fne,t4,hne,pne,mne,iN=!1,H1=[],ad=null,ld=null,cd=null,Db=new Map,Nb=new Map,ju=[],jwe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gj(n,e){switch(n){case"focusin":case"focusout":ad=null;break;case"dragenter":case"dragleave":ld=null;break;case"mouseover":case"mouseout":cd=null;break;case"pointerover":case"pointerout":Db.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nb.delete(e.pointerId)}}function uy(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bk(e),e!==null&&t4(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Vwe(n,e,t,r,i){switch(e){case"focusin":return ad=uy(ad,n,e,t,r,i),!0;case"dragenter":return ld=uy(ld,n,e,t,r,i),!0;case"mouseover":return cd=uy(cd,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Db.set(s,uy(Db.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Nb.set(s,uy(Nb.get(s)||null,n,e,t,r,i)),!0}return!1}function gne(n){var e=zf(n.target);if(e!==null){var t=ip(e);if(t!==null){if(e=t.tag,e===13){if(e=ine(t),e!==null){n.blockedOn=e,mne(n.priority,function(){hne(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vw(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=sN(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);ZD=r,t.target.dispatchEvent(r),ZD=null}else return e=Bk(t),e!==null&&t4(e),n.blockedOn=t,!1;e.shift()}return!0}function Jj(n,e,t){vw(n)&&t.delete(e)}function qwe(){iN=!1,ad!==null&&vw(ad)&&(ad=null),ld!==null&&vw(ld)&&(ld=null),cd!==null&&vw(cd)&&(cd=null),Db.forEach(Jj),Nb.forEach(Jj)}function dy(n,e){n.blockedOn===e&&(n.blockedOn=null,iN||(iN=!0,eo.unstable_scheduleCallback(eo.unstable_NormalPriority,qwe)))}function Fb(n){function e(i){return dy(i,n)}if(0<H1.length){dy(H1[0],n);for(var t=1;t<H1.length;t++){var r=H1[t];r.blockedOn===n&&(r.blockedOn=null)}}for(ad!==null&&dy(ad,n),ld!==null&&dy(ld,n),cd!==null&&dy(cd,n),Db.forEach(e),Nb.forEach(e),t=0;t<ju.length;t++)r=ju[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<ju.length&&(t=ju[0],t.blockedOn===null);)gne(t),t.blockedOn===null&&ju.shift()}var $g=nu.ReactCurrentBatchConfig,C$=!0;function Kwe(n,e,t,r){var i=pt,s=$g.transition;$g.transition=null;try{pt=1,n4(n,e,t,r)}finally{pt=i,$g.transition=s}}function Uwe(n,e,t,r){var i=pt,s=$g.transition;$g.transition=null;try{pt=4,n4(n,e,t,r)}finally{pt=i,$g.transition=s}}function n4(n,e,t,r){if(C$){var i=sN(n,e,t,r);if(i===null)b2(n,e,r,M$,t),Gj(n,r);else if(Vwe(i,n,e,t,r))r.stopPropagation();else if(Gj(n,r),e&4&&-1<jwe.indexOf(n)){for(;i!==null;){var s=Bk(i);if(s!==null&&fne(s),s=sN(n,e,t,r),s===null&&b2(n,e,r,M$,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else b2(n,e,r,null,t)}}var M$=null;function sN(n,e,t,r){if(M$=null,n=XL(r),n=zf(n),n!==null)if(e=ip(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ine(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return M$=n,null}function yne(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rwe()){case ZL:return 1;case lne:return 4;case $$:case Owe:return 16;case cne:return 536870912;default:return 16}default:return 16}}var Qu=null,r4=null,bw=null;function vne(){if(bw)return bw;var n,e=r4,t=e.length,r,i="value"in Qu?Qu.value:Qu.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return bw=i.slice(n,1<r?1-r:void 0)}function kw(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function W1(){return!0}function Qj(){return!1}function ao(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?W1:Qj,this.isPropagationStopped=Qj,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=W1)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=W1)},persist:function(){},isPersistent:W1}),e}var m0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i4=ao(m0),zk=Ut({},m0,{view:0,detail:0}),Hwe=ao(zk),u2,d2,fy,JT=Ut({},zk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s4,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fy&&(fy&&n.type==="mousemove"?(u2=n.screenX-fy.screenX,d2=n.screenY-fy.screenY):d2=u2=0,fy=n),u2)},movementY:function(n){return"movementY"in n?n.movementY:d2}}),Yj=ao(JT),Wwe=Ut({},JT,{dataTransfer:0}),Gwe=ao(Wwe),Jwe=Ut({},zk,{relatedTarget:0}),f2=ao(Jwe),Qwe=Ut({},m0,{animationName:0,elapsedTime:0,pseudoElement:0}),Ywe=ao(Qwe),Xwe=Ut({},m0,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zwe=ao(Xwe),e$e=Ut({},m0,{data:0}),Xj=ao(e$e),t$e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n$e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r$e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i$e(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=r$e[n])?!!e[n]:!1}function s4(){return i$e}var s$e=Ut({},zk,{key:function(n){if(n.key){var e=t$e[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=kw(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?n$e[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s4,charCode:function(n){return n.type==="keypress"?kw(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kw(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),o$e=ao(s$e),a$e=Ut({},JT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zj=ao(a$e),l$e=Ut({},zk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s4}),c$e=ao(l$e),u$e=Ut({},m0,{propertyName:0,elapsedTime:0,pseudoElement:0}),d$e=ao(u$e),f$e=Ut({},JT,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),h$e=ao(f$e),p$e=[9,13,27,32],o4=Vc&&"CompositionEvent"in window,kv=null;Vc&&"documentMode"in document&&(kv=document.documentMode);var m$e=Vc&&"TextEvent"in window&&!kv,bne=Vc&&(!o4||kv&&8<kv&&11>=kv),eV=String.fromCharCode(32),tV=!1;function kne(n,e){switch(n){case"keyup":return p$e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xne(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xm=!1;function g$e(n,e){switch(n){case"compositionend":return xne(e);case"keypress":return e.which!==32?null:(tV=!0,eV);case"textInput":return n=e.data,n===eV&&tV?null:n;default:return null}}function y$e(n,e){if(Xm)return n==="compositionend"||!o4&&kne(n,e)?(n=vne(),bw=r4=Qu=null,Xm=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bne&&e.locale!=="ko"?null:e.data;default:return null}}var v$e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nV(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!v$e[n.type]:e==="textarea"}function Sne(n,e,t,r){Zte(r),e=T$(e,"onChange"),0<e.length&&(t=new i4("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var xv=null,Lb=null;function b$e(n){One(n,0)}function QT(n){var e=tg(n);if(Hte(e))return n}function k$e(n,e){if(n==="change")return e}var wne=!1;if(Vc){var h2;if(Vc){var p2="oninput"in document;if(!p2){var rV=document.createElement("div");rV.setAttribute("oninput","return;"),p2=typeof rV.oninput=="function"}h2=p2}else h2=!1;wne=h2&&(!document.documentMode||9<document.documentMode)}function iV(){xv&&(xv.detachEvent("onpropertychange",$ne),Lb=xv=null)}function $ne(n){if(n.propertyName==="value"&&QT(Lb)){var e=[];Sne(e,Lb,n,XL(n)),rne(b$e,e)}}function x$e(n,e,t){n==="focusin"?(iV(),xv=e,Lb=t,xv.attachEvent("onpropertychange",$ne)):n==="focusout"&&iV()}function S$e(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return QT(Lb)}function w$e(n,e){if(n==="click")return QT(e)}function $$e(n,e){if(n==="input"||n==="change")return QT(e)}function E$e(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Wa=typeof Object.is=="function"?Object.is:E$e;function zb(n,e){if(Wa(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!jD.call(e,i)||!Wa(n[i],e[i]))return!1}return!0}function sV(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function oV(n,e){var t=sV(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=sV(t)}}function Ene(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Ene(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Cne(){for(var n=window,e=x$();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=x$(n.document)}return e}function a4(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function C$e(n){var e=Cne(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Ene(t.ownerDocument.documentElement,t)){if(r!==null&&a4(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=oV(t,s);var o=oV(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var M$e=Vc&&"documentMode"in document&&11>=document.documentMode,Zm=null,oN=null,Sv=null,aN=!1;function aV(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;aN||Zm==null||Zm!==x$(r)||(r=Zm,"selectionStart"in r&&a4(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sv&&zb(Sv,r)||(Sv=r,r=T$(oN,"onSelect"),0<r.length&&(e=new i4("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Zm)))}function G1(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var eg={animationend:G1("Animation","AnimationEnd"),animationiteration:G1("Animation","AnimationIteration"),animationstart:G1("Animation","AnimationStart"),transitionend:G1("Transition","TransitionEnd")},m2={},Mne={};Vc&&(Mne=document.createElement("div").style,"AnimationEvent"in window||(delete eg.animationend.animation,delete eg.animationiteration.animation,delete eg.animationstart.animation),"TransitionEvent"in window||delete eg.transitionend.transition);function YT(n){if(m2[n])return m2[n];if(!eg[n])return n;var e=eg[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Mne)return m2[n]=e[t];return n}var Tne=YT("animationend"),_ne=YT("animationiteration"),Ane=YT("animationstart"),Ine=YT("transitionend"),Rne=new Map,lV="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pd(n,e){Rne.set(n,e),rp(e,[n])}for(var g2=0;g2<lV.length;g2++){var y2=lV[g2],T$e=y2.toLowerCase(),_$e=y2[0].toUpperCase()+y2.slice(1);Pd(T$e,"on"+_$e)}Pd(Tne,"onAnimationEnd");Pd(_ne,"onAnimationIteration");Pd(Ane,"onAnimationStart");Pd("dblclick","onDoubleClick");Pd("focusin","onFocus");Pd("focusout","onBlur");Pd(Ine,"onTransitionEnd");Bg("onMouseEnter",["mouseout","mouseover"]);Bg("onMouseLeave",["mouseout","mouseover"]);Bg("onPointerEnter",["pointerout","pointerover"]);Bg("onPointerLeave",["pointerout","pointerover"]);rp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rp("onBeforeInput",["compositionend","keypress","textInput","paste"]);rp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ev="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A$e=new Set("cancel close invalid load scroll toggle".split(" ").concat(ev));function cV(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Twe(r,e,void 0,n),n.currentTarget=null}function One(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;cV(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;cV(i,a,c),s=l}}}if(w$)throw n=nN,w$=!1,nN=null,n}function Mt(n,e){var t=e[fN];t===void 0&&(t=e[fN]=new Set);var r=n+"__bubble";t.has(r)||(Pne(e,n,2,!1),t.add(r))}function v2(n,e,t){var r=0;e&&(r|=4),Pne(t,n,r,e)}var J1="_reactListening"+Math.random().toString(36).slice(2);function Bb(n){if(!n[J1]){n[J1]=!0,jte.forEach(function(t){t!=="selectionchange"&&(A$e.has(t)||v2(t,!1,n),v2(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[J1]||(e[J1]=!0,v2("selectionchange",!1,e))}}function Pne(n,e,t,r){switch(yne(e)){case 1:var i=Kwe;break;case 4:i=Uwe;break;default:i=n4}t=i.bind(null,e,t,n),i=void 0,!tN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function b2(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=zf(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}rne(function(){var c=s,u=XL(t),d=[];e:{var f=Rne.get(n);if(f!==void 0){var h=i4,p=n;switch(n){case"keypress":if(kw(t)===0)break e;case"keydown":case"keyup":h=o$e;break;case"focusin":p="focus",h=f2;break;case"focusout":p="blur",h=f2;break;case"beforeblur":case"afterblur":h=f2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Yj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Gwe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=c$e;break;case Tne:case _ne:case Ane:h=Ywe;break;case Ine:h=d$e;break;case"scroll":h=Hwe;break;case"wheel":h=h$e;break;case"copy":case"cut":case"paste":h=Zwe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Zj}var m=(e&4)!==0,g=!m&&n==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var k=c,b;k!==null;){b=k;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,y!==null&&(S=Pb(k,y),S!=null&&m.push(jb(k,S,b)))),g)break;k=k.return}0<m.length&&(f=new h(f,p,null,t,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",f&&t!==ZD&&(p=t.relatedTarget||t.fromElement)&&(zf(p)||p[qc]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=t.relatedTarget||t.toElement,h=c,p=p?zf(p):null,p!==null&&(g=ip(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=Yj,S="onMouseLeave",y="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(m=Zj,S="onPointerLeave",y="onPointerEnter",k="pointer"),g=h==null?f:tg(h),b=p==null?f:tg(p),f=new m(S,k+"leave",h,t,u),f.target=g,f.relatedTarget=b,S=null,zf(u)===c&&(m=new m(y,k+"enter",p,t,u),m.target=b,m.relatedTarget=g,S=m),g=S,h&&p)t:{for(m=h,y=p,k=0,b=m;b;b=Fp(b))k++;for(b=0,S=y;S;S=Fp(S))b++;for(;0<k-b;)m=Fp(m),k--;for(;0<b-k;)y=Fp(y),b--;for(;k--;){if(m===y||y!==null&&m===y.alternate)break t;m=Fp(m),y=Fp(y)}m=null}else m=null;h!==null&&uV(d,f,h,m,!1),p!==null&&g!==null&&uV(d,g,p,m,!0)}}e:{if(f=c?tg(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var w=k$e;else if(nV(f))if(wne)w=$$e;else{w=S$e;var x=x$e}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=w$e);if(w&&(w=w(n,c))){Sne(d,w,t,u);break e}x&&x(n,f,c),n==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&GD(f,"number",f.value)}switch(x=c?tg(c):window,n){case"focusin":(nV(x)||x.contentEditable==="true")&&(Zm=x,oN=c,Sv=null);break;case"focusout":Sv=oN=Zm=null;break;case"mousedown":aN=!0;break;case"contextmenu":case"mouseup":case"dragend":aN=!1,aV(d,t,u);break;case"selectionchange":if(M$e)break;case"keydown":case"keyup":aV(d,t,u)}var $;if(o4)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Xm?kne(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(bne&&t.locale!=="ko"&&(Xm||E!=="onCompositionStart"?E==="onCompositionEnd"&&Xm&&($=vne()):(Qu=u,r4="value"in Qu?Qu.value:Qu.textContent,Xm=!0)),x=T$(c,E),0<x.length&&(E=new Xj(E,n,null,t,u),d.push({event:E,listeners:x}),$?E.data=$:($=xne(t),$!==null&&(E.data=$)))),($=m$e?g$e(n,t):y$e(n,t))&&(c=T$(c,"onBeforeInput"),0<c.length&&(u=new Xj("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=$))}One(d,e)})}function jb(n,e,t){return{instance:n,listener:e,currentTarget:t}}function T$(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Pb(n,t),s!=null&&r.unshift(jb(n,s,i)),s=Pb(n,e),s!=null&&r.push(jb(n,s,i))),n=n.return}return r}function Fp(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function uV(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Pb(t,s),l!=null&&o.unshift(jb(t,l,a))):i||(l=Pb(t,s),l!=null&&o.push(jb(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var I$e=/\r\n?/g,R$e=/\u0000|\uFFFD/g;function dV(n){return(typeof n=="string"?n:""+n).replace(I$e,`
`).replace(R$e,"")}function Q1(n,e,t){if(e=dV(e),dV(n)!==e&&t)throw Error(re(425))}function _$(){}var lN=null,cN=null;function uN(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dN=typeof setTimeout=="function"?setTimeout:void 0,O$e=typeof clearTimeout=="function"?clearTimeout:void 0,fV=typeof Promise=="function"?Promise:void 0,P$e=typeof queueMicrotask=="function"?queueMicrotask:typeof fV<"u"?function(n){return fV.resolve(null).then(n).catch(D$e)}:dN;function D$e(n){setTimeout(function(){throw n})}function k2(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Fb(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Fb(e)}function ud(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function hV(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var g0=Math.random().toString(36).slice(2),jl="__reactFiber$"+g0,Vb="__reactProps$"+g0,qc="__reactContainer$"+g0,fN="__reactEvents$"+g0,N$e="__reactListeners$"+g0,F$e="__reactHandles$"+g0;function zf(n){var e=n[jl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[qc]||t[jl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=hV(n);n!==null;){if(t=n[jl])return t;n=hV(n)}return e}n=t,t=n.parentNode}return null}function Bk(n){return n=n[jl]||n[qc],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function tg(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(re(33))}function XT(n){return n[Vb]||null}var hN=[],ng=-1;function Dd(n){return{current:n}}function _t(n){0>ng||(n.current=hN[ng],hN[ng]=null,ng--)}function wt(n,e){ng++,hN[ng]=n.current,n.current=e}var Sd={},Rr=Dd(Sd),us=Dd(!1),Lh=Sd;function jg(n,e){var t=n.type.contextTypes;if(!t)return Sd;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ds(n){return n=n.childContextTypes,n!=null}function A$(){_t(us),_t(Rr)}function pV(n,e,t){if(Rr.current!==Sd)throw Error(re(168));wt(Rr,e),wt(us,t)}function Dne(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(re(108,xwe(n)||"Unknown",i));return Ut({},t,r)}function I$(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Sd,Lh=Rr.current,wt(Rr,n),wt(us,us.current),!0}function mV(n,e,t){var r=n.stateNode;if(!r)throw Error(re(169));t?(n=Dne(n,e,Lh),r.__reactInternalMemoizedMergedChildContext=n,_t(us),_t(Rr),wt(Rr,n)):_t(us),wt(us,t)}var Ac=null,ZT=!1,x2=!1;function Nne(n){Ac===null?Ac=[n]:Ac.push(n)}function L$e(n){ZT=!0,Nne(n)}function Nd(){if(!x2&&Ac!==null){x2=!0;var n=0,e=pt;try{var t=Ac;for(pt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ac=null,ZT=!1}catch(i){throw Ac!==null&&(Ac=Ac.slice(n+1)),ane(ZL,Nd),i}finally{pt=e,x2=!1}}return null}var rg=[],ig=0,R$=null,O$=0,$o=[],Eo=0,zh=null,Pc=1,Dc="";function Ef(n,e){rg[ig++]=O$,rg[ig++]=R$,R$=n,O$=e}function Fne(n,e,t){$o[Eo++]=Pc,$o[Eo++]=Dc,$o[Eo++]=zh,zh=n;var r=Pc;n=Dc;var i=32-xa(r)-1;r&=~(1<<i),t+=1;var s=32-xa(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pc=1<<32-xa(e)+i|t<<i|r,Dc=s+n}else Pc=1<<s|t<<i|r,Dc=n}function l4(n){n.return!==null&&(Ef(n,1),Fne(n,1,0))}function c4(n){for(;n===R$;)R$=rg[--ig],rg[ig]=null,O$=rg[--ig],rg[ig]=null;for(;n===zh;)zh=$o[--Eo],$o[Eo]=null,Dc=$o[--Eo],$o[Eo]=null,Pc=$o[--Eo],$o[Eo]=null}var Js=null,Ws=null,Pt=!1,ca=null;function Lne(n,e){var t=Ro(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function gV(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Js=n,Ws=ud(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Js=n,Ws=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=zh!==null?{id:Pc,overflow:Dc}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ro(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Js=n,Ws=null,!0):!1;default:return!1}}function pN(n){return(n.mode&1)!==0&&(n.flags&128)===0}function mN(n){if(Pt){var e=Ws;if(e){var t=e;if(!gV(n,e)){if(pN(n))throw Error(re(418));e=ud(t.nextSibling);var r=Js;e&&gV(n,e)?Lne(r,t):(n.flags=n.flags&-4097|2,Pt=!1,Js=n)}}else{if(pN(n))throw Error(re(418));n.flags=n.flags&-4097|2,Pt=!1,Js=n}}}function yV(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Js=n}function Y1(n){if(n!==Js)return!1;if(!Pt)return yV(n),Pt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!uN(n.type,n.memoizedProps)),e&&(e=Ws)){if(pN(n))throw zne(),Error(re(418));for(;e;)Lne(n,e),e=ud(e.nextSibling)}if(yV(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(re(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ws=ud(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ws=null}}else Ws=Js?ud(n.stateNode.nextSibling):null;return!0}function zne(){for(var n=Ws;n;)n=ud(n.nextSibling)}function Vg(){Ws=Js=null,Pt=!1}function u4(n){ca===null?ca=[n]:ca.push(n)}var z$e=nu.ReactCurrentBatchConfig;function sa(n,e){if(n&&n.defaultProps){e=Ut({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var P$=Dd(null),D$=null,sg=null,d4=null;function f4(){d4=sg=D$=null}function h4(n){var e=P$.current;_t(P$),n._currentValue=e}function gN(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Eg(n,e){D$=n,d4=sg=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(cs=!0),n.firstContext=null)}function Lo(n){var e=n._currentValue;if(d4!==n)if(n={context:n,memoizedValue:e,next:null},sg===null){if(D$===null)throw Error(re(308));sg=n,D$.dependencies={lanes:0,firstContext:n}}else sg=sg.next=n;return e}var Bf=null;function p4(n){Bf===null?Bf=[n]:Bf.push(n)}function Bne(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,p4(e)):(t.next=i.next,i.next=t),e.interleaved=t,Kc(n,r)}function Kc(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Au=!1;function m4(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jne(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Nc(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function dd(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Kc(n,t)}return i=r.interleaved,i===null?(e.next=e,p4(r)):(e.next=i.next,i.next=e),r.interleaved=e,Kc(n,t)}function xw(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,e4(n,t)}}function vV(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function N$(n,e,t,r){var i=n.updateQueue;Au=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,m=a;switch(f=e,h=t,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ut({},d,f);break e;case 2:Au=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);jh|=o,n.lanes=o,n.memoizedState=d}}function bV(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(re(191,i));i.call(r)}}}var Vne=new Bte.Component().refs;function yN(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Ut({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var e_={isMounted:function(n){return(n=n._reactInternals)?ip(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=zi(),i=hd(n),s=Nc(r,i);s.payload=e,t!=null&&(s.callback=t),e=dd(n,s,i),e!==null&&(Sa(e,n,i,r),xw(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=zi(),i=hd(n),s=Nc(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=dd(n,s,i),e!==null&&(Sa(e,n,i,r),xw(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=zi(),r=hd(n),i=Nc(t,r);i.tag=2,e!=null&&(i.callback=e),e=dd(n,i,r),e!==null&&(Sa(e,n,r,t),xw(e,n,r))}};function kV(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!zb(t,r)||!zb(i,s):!0}function qne(n,e,t){var r=!1,i=Sd,s=e.contextType;return typeof s=="object"&&s!==null?s=Lo(s):(i=ds(e)?Lh:Rr.current,r=e.contextTypes,s=(r=r!=null)?jg(n,i):Sd),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=e_,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function xV(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&e_.enqueueReplaceState(e,e.state,null)}function vN(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Vne,m4(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Lo(s):(s=ds(e)?Lh:Rr.current,i.context=jg(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yN(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&e_.enqueueReplaceState(i,i.state,null),N$(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function hy(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(re(309));var r=t.stateNode}if(!r)throw Error(re(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Vne&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(re(284));if(!t._owner)throw Error(re(290,n))}return n}function X1(n,e){throw n=Object.prototype.toString.call(e),Error(re(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function SV(n){var e=n._init;return e(n._payload)}function Kne(n){function e(y,k){if(n){var b=y.deletions;b===null?(y.deletions=[k],y.flags|=16):b.push(k)}}function t(y,k){if(!n)return null;for(;k!==null;)e(y,k),k=k.sibling;return null}function r(y,k){for(y=new Map;k!==null;)k.key!==null?y.set(k.key,k):y.set(k.index,k),k=k.sibling;return y}function i(y,k){return y=pd(y,k),y.index=0,y.sibling=null,y}function s(y,k,b){return y.index=b,n?(b=y.alternate,b!==null?(b=b.index,b<k?(y.flags|=2,k):b):(y.flags|=2,k)):(y.flags|=1048576,k)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,k,b,S){return k===null||k.tag!==6?(k=T2(b,y.mode,S),k.return=y,k):(k=i(k,b),k.return=y,k)}function l(y,k,b,S){var w=b.type;return w===Ym?u(y,k,b.props.children,S,b.key):k!==null&&(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_u&&SV(w)===k.type)?(S=i(k,b.props),S.ref=hy(y,k,b),S.return=y,S):(S=Mw(b.type,b.key,b.props,null,y.mode,S),S.ref=hy(y,k,b),S.return=y,S)}function c(y,k,b,S){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=_2(b,y.mode,S),k.return=y,k):(k=i(k,b.children||[]),k.return=y,k)}function u(y,k,b,S,w){return k===null||k.tag!==7?(k=Sh(b,y.mode,S,w),k.return=y,k):(k=i(k,b),k.return=y,k)}function d(y,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=T2(""+k,y.mode,b),k.return=y,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case j1:return b=Mw(k.type,k.key,k.props,null,y.mode,b),b.ref=hy(y,null,k),b.return=y,b;case Qm:return k=_2(k,y.mode,b),k.return=y,k;case _u:var S=k._init;return d(y,S(k._payload),b)}if(Xy(k)||ly(k))return k=Sh(k,y.mode,b,null),k.return=y,k;X1(y,k)}return null}function f(y,k,b,S){var w=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,k,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case j1:return b.key===w?l(y,k,b,S):null;case Qm:return b.key===w?c(y,k,b,S):null;case _u:return w=b._init,f(y,k,w(b._payload),S)}if(Xy(b)||ly(b))return w!==null?null:u(y,k,b,S,null);X1(y,b)}return null}function h(y,k,b,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(b)||null,a(k,y,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case j1:return y=y.get(S.key===null?b:S.key)||null,l(k,y,S,w);case Qm:return y=y.get(S.key===null?b:S.key)||null,c(k,y,S,w);case _u:var x=S._init;return h(y,k,b,x(S._payload),w)}if(Xy(S)||ly(S))return y=y.get(b)||null,u(k,y,S,w,null);X1(k,S)}return null}function p(y,k,b,S){for(var w=null,x=null,$=k,E=k=0,C=null;$!==null&&E<b.length;E++){$.index>E?(C=$,$=null):C=$.sibling;var M=f(y,$,b[E],S);if(M===null){$===null&&($=C);break}n&&$&&M.alternate===null&&e(y,$),k=s(M,k,E),x===null?w=M:x.sibling=M,x=M,$=C}if(E===b.length)return t(y,$),Pt&&Ef(y,E),w;if($===null){for(;E<b.length;E++)$=d(y,b[E],S),$!==null&&(k=s($,k,E),x===null?w=$:x.sibling=$,x=$);return Pt&&Ef(y,E),w}for($=r(y,$);E<b.length;E++)C=h($,y,E,b[E],S),C!==null&&(n&&C.alternate!==null&&$.delete(C.key===null?E:C.key),k=s(C,k,E),x===null?w=C:x.sibling=C,x=C);return n&&$.forEach(function(P){return e(y,P)}),Pt&&Ef(y,E),w}function m(y,k,b,S){var w=ly(b);if(typeof w!="function")throw Error(re(150));if(b=w.call(b),b==null)throw Error(re(151));for(var x=w=null,$=k,E=k=0,C=null,M=b.next();$!==null&&!M.done;E++,M=b.next()){$.index>E?(C=$,$=null):C=$.sibling;var P=f(y,$,M.value,S);if(P===null){$===null&&($=C);break}n&&$&&P.alternate===null&&e(y,$),k=s(P,k,E),x===null?w=P:x.sibling=P,x=P,$=C}if(M.done)return t(y,$),Pt&&Ef(y,E),w;if($===null){for(;!M.done;E++,M=b.next())M=d(y,M.value,S),M!==null&&(k=s(M,k,E),x===null?w=M:x.sibling=M,x=M);return Pt&&Ef(y,E),w}for($=r(y,$);!M.done;E++,M=b.next())M=h($,y,E,M.value,S),M!==null&&(n&&M.alternate!==null&&$.delete(M.key===null?E:M.key),k=s(M,k,E),x===null?w=M:x.sibling=M,x=M);return n&&$.forEach(function(I){return e(y,I)}),Pt&&Ef(y,E),w}function g(y,k,b,S){if(typeof b=="object"&&b!==null&&b.type===Ym&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case j1:e:{for(var w=b.key,x=k;x!==null;){if(x.key===w){if(w=b.type,w===Ym){if(x.tag===7){t(y,x.sibling),k=i(x,b.props.children),k.return=y,y=k;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_u&&SV(w)===x.type){t(y,x.sibling),k=i(x,b.props),k.ref=hy(y,x,b),k.return=y,y=k;break e}t(y,x);break}else e(y,x);x=x.sibling}b.type===Ym?(k=Sh(b.props.children,y.mode,S,b.key),k.return=y,y=k):(S=Mw(b.type,b.key,b.props,null,y.mode,S),S.ref=hy(y,k,b),S.return=y,y=S)}return o(y);case Qm:e:{for(x=b.key;k!==null;){if(k.key===x)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){t(y,k.sibling),k=i(k,b.children||[]),k.return=y,y=k;break e}else{t(y,k);break}else e(y,k);k=k.sibling}k=_2(b,y.mode,S),k.return=y,y=k}return o(y);case _u:return x=b._init,g(y,k,x(b._payload),S)}if(Xy(b))return p(y,k,b,S);if(ly(b))return m(y,k,b,S);X1(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(t(y,k.sibling),k=i(k,b),k.return=y,y=k):(t(y,k),k=T2(b,y.mode,S),k.return=y,y=k),o(y)):t(y,k)}return g}var qg=Kne(!0),Une=Kne(!1),jk={},ec=Dd(jk),qb=Dd(jk),Kb=Dd(jk);function jf(n){if(n===jk)throw Error(re(174));return n}function g4(n,e){switch(wt(Kb,e),wt(qb,n),wt(ec,jk),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:QD(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=QD(e,n)}_t(ec),wt(ec,e)}function Kg(){_t(ec),_t(qb),_t(Kb)}function Hne(n){jf(Kb.current);var e=jf(ec.current),t=QD(e,n.type);e!==t&&(wt(qb,n),wt(ec,t))}function y4(n){qb.current===n&&(_t(ec),_t(qb))}var Vt=Dd(0);function F$(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var S2=[];function v4(){for(var n=0;n<S2.length;n++)S2[n]._workInProgressVersionPrimary=null;S2.length=0}var Sw=nu.ReactCurrentDispatcher,w2=nu.ReactCurrentBatchConfig,Bh=0,Kt=null,Ln=null,Wn=null,L$=!1,wv=!1,Ub=0,B$e=0;function vr(){throw Error(re(321))}function b4(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Wa(n[t],e[t]))return!1;return!0}function k4(n,e,t,r,i,s){if(Bh=s,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sw.current=n===null||n.memoizedState===null?K$e:U$e,n=t(r,i),wv){s=0;do{if(wv=!1,Ub=0,25<=s)throw Error(re(301));s+=1,Wn=Ln=null,e.updateQueue=null,Sw.current=H$e,n=t(r,i)}while(wv)}if(Sw.current=z$,e=Ln!==null&&Ln.next!==null,Bh=0,Wn=Ln=Kt=null,L$=!1,e)throw Error(re(300));return n}function x4(){var n=Ub!==0;return Ub=0,n}function hl(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?Kt.memoizedState=Wn=n:Wn=Wn.next=n,Wn}function zo(){if(Ln===null){var n=Kt.alternate;n=n!==null?n.memoizedState:null}else n=Ln.next;var e=Wn===null?Kt.memoizedState:Wn.next;if(e!==null)Wn=e,Ln=n;else{if(n===null)throw Error(re(310));Ln=n,n={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Wn===null?Kt.memoizedState=Wn=n:Wn=Wn.next=n}return Wn}function Hb(n,e){return typeof e=="function"?e(n):e}function $2(n){var e=zo(),t=e.queue;if(t===null)throw Error(re(311));t.lastRenderedReducer=n;var r=Ln,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Bh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Kt.lanes|=u,jh|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Wa(r,e.memoizedState)||(cs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Kt.lanes|=s,jh|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function E2(n){var e=zo(),t=e.queue;if(t===null)throw Error(re(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Wa(s,e.memoizedState)||(cs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Wne(){}function Gne(n,e){var t=Kt,r=zo(),i=e(),s=!Wa(r.memoizedState,i);if(s&&(r.memoizedState=i,cs=!0),r=r.queue,S4(Yne.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Wn!==null&&Wn.memoizedState.tag&1){if(t.flags|=2048,Wb(9,Qne.bind(null,t,r,i,e),void 0,null),tr===null)throw Error(re(349));Bh&30||Jne(t,e,i)}return i}function Jne(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Qne(n,e,t,r){e.value=t,e.getSnapshot=r,Xne(e)&&Zne(n)}function Yne(n,e,t){return t(function(){Xne(e)&&Zne(n)})}function Xne(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Wa(n,t)}catch{return!0}}function Zne(n){var e=Kc(n,1);e!==null&&Sa(e,n,1,-1)}function wV(n){var e=hl();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hb,lastRenderedState:n},e.queue=n,n=n.dispatch=q$e.bind(null,Kt,n),[e.memoizedState,n]}function Wb(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function ere(){return zo().memoizedState}function ww(n,e,t,r){var i=hl();Kt.flags|=n,i.memoizedState=Wb(1|e,t,void 0,r===void 0?null:r)}function t_(n,e,t,r){var i=zo();r=r===void 0?null:r;var s=void 0;if(Ln!==null){var o=Ln.memoizedState;if(s=o.destroy,r!==null&&b4(r,o.deps)){i.memoizedState=Wb(e,t,s,r);return}}Kt.flags|=n,i.memoizedState=Wb(1|e,t,s,r)}function $V(n,e){return ww(8390656,8,n,e)}function S4(n,e){return t_(2048,8,n,e)}function tre(n,e){return t_(4,2,n,e)}function nre(n,e){return t_(4,4,n,e)}function rre(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ire(n,e,t){return t=t!=null?t.concat([n]):null,t_(4,4,rre.bind(null,e,n),t)}function w4(){}function sre(n,e){var t=zo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&b4(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function ore(n,e){var t=zo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&b4(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function are(n,e,t){return Bh&21?(Wa(t,e)||(t=une(),Kt.lanes|=t,jh|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,cs=!0),n.memoizedState=t)}function j$e(n,e){var t=pt;pt=t!==0&&4>t?t:4,n(!0);var r=w2.transition;w2.transition={};try{n(!1),e()}finally{pt=t,w2.transition=r}}function lre(){return zo().memoizedState}function V$e(n,e,t){var r=hd(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},cre(n))ure(e,t);else if(t=Bne(n,e,t,r),t!==null){var i=zi();Sa(t,n,r,i),dre(t,e,r)}}function q$e(n,e,t){var r=hd(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(cre(n))ure(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Wa(a,o)){var l=e.interleaved;l===null?(i.next=i,p4(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Bne(n,e,i,r),t!==null&&(i=zi(),Sa(t,n,r,i),dre(t,e,r))}}function cre(n){var e=n.alternate;return n===Kt||e!==null&&e===Kt}function ure(n,e){wv=L$=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function dre(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,e4(n,t)}}var z$={readContext:Lo,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},K$e={readContext:Lo,useCallback:function(n,e){return hl().memoizedState=[n,e===void 0?null:e],n},useContext:Lo,useEffect:$V,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ww(4194308,4,rre.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ww(4194308,4,n,e)},useInsertionEffect:function(n,e){return ww(4,2,n,e)},useMemo:function(n,e){var t=hl();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=hl();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=V$e.bind(null,Kt,n),[r.memoizedState,n]},useRef:function(n){var e=hl();return n={current:n},e.memoizedState=n},useState:wV,useDebugValue:w4,useDeferredValue:function(n){return hl().memoizedState=n},useTransition:function(){var n=wV(!1),e=n[0];return n=j$e.bind(null,n[1]),hl().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Kt,i=hl();if(Pt){if(t===void 0)throw Error(re(407));t=t()}else{if(t=e(),tr===null)throw Error(re(349));Bh&30||Jne(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,$V(Yne.bind(null,r,s,n),[n]),r.flags|=2048,Wb(9,Qne.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=hl(),e=tr.identifierPrefix;if(Pt){var t=Dc,r=Pc;t=(r&~(1<<32-xa(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ub++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=B$e++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},U$e={readContext:Lo,useCallback:sre,useContext:Lo,useEffect:S4,useImperativeHandle:ire,useInsertionEffect:tre,useLayoutEffect:nre,useMemo:ore,useReducer:$2,useRef:ere,useState:function(){return $2(Hb)},useDebugValue:w4,useDeferredValue:function(n){var e=zo();return are(e,Ln.memoizedState,n)},useTransition:function(){var n=$2(Hb)[0],e=zo().memoizedState;return[n,e]},useMutableSource:Wne,useSyncExternalStore:Gne,useId:lre,unstable_isNewReconciler:!1},H$e={readContext:Lo,useCallback:sre,useContext:Lo,useEffect:S4,useImperativeHandle:ire,useInsertionEffect:tre,useLayoutEffect:nre,useMemo:ore,useReducer:E2,useRef:ere,useState:function(){return E2(Hb)},useDebugValue:w4,useDeferredValue:function(n){var e=zo();return Ln===null?e.memoizedState=n:are(e,Ln.memoizedState,n)},useTransition:function(){var n=E2(Hb)[0],e=zo().memoizedState;return[n,e]},useMutableSource:Wne,useSyncExternalStore:Gne,useId:lre,unstable_isNewReconciler:!1};function Ug(n,e){try{var t="",r=e;do t+=kwe(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function C2(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function bN(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var W$e=typeof WeakMap=="function"?WeakMap:Map;function fre(n,e,t){t=Nc(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){j$||(j$=!0,_N=r),bN(n,e)},t}function hre(n,e,t){t=Nc(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){bN(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){bN(n,e),typeof r!="function"&&(fd===null?fd=new Set([this]):fd.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function EV(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new W$e;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=aEe.bind(null,n,e,t),e.then(n,n))}function CV(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function MV(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Nc(-1,1),e.tag=2,dd(t,e,1))),t.lanes|=1),n)}var G$e=nu.ReactCurrentOwner,cs=!1;function Di(n,e,t,r){e.child=n===null?Une(e,null,t,r):qg(e,n.child,t,r)}function TV(n,e,t,r,i){t=t.render;var s=e.ref;return Eg(e,i),r=k4(n,e,t,r,s,i),t=x4(),n!==null&&!cs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Uc(n,e,i)):(Pt&&t&&l4(e),e.flags|=1,Di(n,e,r,i),e.child)}function _V(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!I4(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,pre(n,e,s,r,i)):(n=Mw(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:zb,t(o,r)&&n.ref===e.ref)return Uc(n,e,i)}return e.flags|=1,n=pd(s,r),n.ref=e.ref,n.return=e,e.child=n}function pre(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(zb(s,r)&&n.ref===e.ref)if(cs=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(cs=!0);else return e.lanes=n.lanes,Uc(n,e,i)}return kN(n,e,t,r,i)}function mre(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(ag,$s),$s|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,wt(ag,$s),$s|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,wt(ag,$s),$s|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,wt(ag,$s),$s|=r;return Di(n,e,i,t),e.child}function gre(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function kN(n,e,t,r,i){var s=ds(t)?Lh:Rr.current;return s=jg(e,s),Eg(e,i),t=k4(n,e,t,r,s,i),r=x4(),n!==null&&!cs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Uc(n,e,i)):(Pt&&r&&l4(e),e.flags|=1,Di(n,e,t,i),e.child)}function AV(n,e,t,r,i){if(ds(t)){var s=!0;I$(e)}else s=!1;if(Eg(e,i),e.stateNode===null)$w(n,e),qne(e,t,r),vN(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Lo(c):(c=ds(t)?Lh:Rr.current,c=jg(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&xV(e,o,r,c),Au=!1;var f=e.memoizedState;o.state=f,N$(e,r,o,i),l=e.memoizedState,a!==r||f!==l||us.current||Au?(typeof u=="function"&&(yN(e,t,u,r),l=e.memoizedState),(a=Au||kV(e,t,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jne(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:sa(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Lo(l):(l=ds(t)?Lh:Rr.current,l=jg(e,l));var h=t.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&xV(e,o,r,l),Au=!1,f=e.memoizedState,o.state=f,N$(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||us.current||Au?(typeof h=="function"&&(yN(e,t,h,r),p=e.memoizedState),(c=Au||kV(e,t,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return xN(n,e,t,r,s,i)}function xN(n,e,t,r,i,s){gre(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&mV(e,t,!1),Uc(n,e,s);r=e.stateNode,G$e.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=qg(e,n.child,null,s),e.child=qg(e,null,a,s)):Di(n,e,a,s),e.memoizedState=r.state,i&&mV(e,t,!0),e.child}function yre(n){var e=n.stateNode;e.pendingContext?pV(n,e.pendingContext,e.pendingContext!==e.context):e.context&&pV(n,e.context,!1),g4(n,e.containerInfo)}function IV(n,e,t,r,i){return Vg(),u4(i),e.flags|=256,Di(n,e,t,r),e.child}var SN={dehydrated:null,treeContext:null,retryLane:0};function wN(n){return{baseLanes:n,cachePool:null,transitions:null}}function vre(n,e,t){var r=e.pendingProps,i=Vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),wt(Vt,i&1),n===null)return mN(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=i_(o,r,0,null),n=Sh(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=wN(t),e.memoizedState=SN,n):$4(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return J$e(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=pd(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=pd(a,s):(s=Sh(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?wN(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=SN,r}return s=n.child,n=s.sibling,r=pd(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function $4(n,e){return e=i_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Z1(n,e,t,r){return r!==null&&u4(r),qg(e,n.child,null,t),n=$4(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function J$e(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=C2(Error(re(422))),Z1(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=i_({mode:"visible",children:r.children},i,0,null),s=Sh(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&qg(e,n.child,null,o),e.child.memoizedState=wN(o),e.memoizedState=SN,s);if(!(e.mode&1))return Z1(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(re(419)),r=C2(s,r,void 0),Z1(n,e,o,r)}if(a=(o&n.childLanes)!==0,cs||a){if(r=tr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Kc(n,i),Sa(r,n,i,-1))}return A4(),r=C2(Error(re(421))),Z1(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=lEe.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Ws=ud(i.nextSibling),Js=e,Pt=!0,ca=null,n!==null&&($o[Eo++]=Pc,$o[Eo++]=Dc,$o[Eo++]=zh,Pc=n.id,Dc=n.overflow,zh=e),e=$4(e,r.children),e.flags|=4096,e)}function RV(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),gN(n.return,e,t)}function M2(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function bre(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Di(n,e,r.children,t),r=Vt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&RV(n,t,e);else if(n.tag===19)RV(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(wt(Vt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&F$(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),M2(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&F$(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}M2(e,!0,t,null,s);break;case"together":M2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $w(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Uc(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),jh|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(re(153));if(e.child!==null){for(n=e.child,t=pd(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=pd(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Q$e(n,e,t){switch(e.tag){case 3:yre(e),Vg();break;case 5:Hne(e);break;case 1:ds(e.type)&&I$(e);break;case 4:g4(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;wt(P$,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wt(Vt,Vt.current&1),e.flags|=128,null):t&e.child.childLanes?vre(n,e,t):(wt(Vt,Vt.current&1),n=Uc(n,e,t),n!==null?n.sibling:null);wt(Vt,Vt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return bre(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wt(Vt,Vt.current),r)break;return null;case 22:case 23:return e.lanes=0,mre(n,e,t)}return Uc(n,e,t)}var kre,$N,xre,Sre;kre=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};$N=function(){};xre=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,jf(ec.current);var s=null;switch(t){case"input":i=HD(n,i),r=HD(n,r),s=[];break;case"select":i=Ut({},i,{value:void 0}),r=Ut({},r,{value:void 0}),s=[];break;case"textarea":i=JD(n,i),r=JD(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=_$)}YD(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rb.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rb.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Mt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Sre=function(n,e,t,r){t!==r&&(e.flags|=4)};function py(n,e){if(!Pt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function br(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Y$e(n,e,t){var r=e.pendingProps;switch(c4(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(e),null;case 1:return ds(e.type)&&A$(),br(e),null;case 3:return r=e.stateNode,Kg(),_t(us),_t(Rr),v4(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Y1(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ca!==null&&(RN(ca),ca=null))),$N(n,e),br(e),null;case 5:y4(e);var i=jf(Kb.current);if(t=e.type,n!==null&&e.stateNode!=null)xre(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return br(e),null}if(n=jf(ec.current),Y1(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[jl]=e,r[Vb]=s,n=(e.mode&1)!==0,t){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(i=0;i<ev.length;i++)Mt(ev[i],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":jj(r,s),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Mt("invalid",r);break;case"textarea":qj(r,s),Mt("invalid",r)}YD(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Q1(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Q1(r.textContent,a,n),i=["children",""+a]):Rb.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mt("scroll",r)}switch(t){case"input":V1(r),Vj(r,s,!0);break;case"textarea":V1(r),Kj(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=_$)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Jte(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[jl]=e,n[Vb]=r,kre(n,e,!1,!1),e.stateNode=n;e:{switch(o=XD(t,r),t){case"dialog":Mt("cancel",n),Mt("close",n),i=r;break;case"iframe":case"object":case"embed":Mt("load",n),i=r;break;case"video":case"audio":for(i=0;i<ev.length;i++)Mt(ev[i],n);i=r;break;case"source":Mt("error",n),i=r;break;case"img":case"image":case"link":Mt("error",n),Mt("load",n),i=r;break;case"details":Mt("toggle",n),i=r;break;case"input":jj(n,r),i=HD(n,r),Mt("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Ut({},r,{value:void 0}),Mt("invalid",n);break;case"textarea":qj(n,r),i=JD(n,r),Mt("invalid",n);break;default:i=r}YD(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Xte(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Qte(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ob(n,l):typeof l=="number"&&Ob(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rb.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Mt("scroll",n):l!=null&&GL(n,s,l,o))}switch(t){case"input":V1(n),Vj(n,r,!1);break;case"textarea":V1(n),Kj(n);break;case"option":r.value!=null&&n.setAttribute("value",""+xd(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?xg(n,!!r.multiple,s,!1):r.defaultValue!=null&&xg(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=_$)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return br(e),null;case 6:if(n&&e.stateNode!=null)Sre(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(t=jf(Kb.current),jf(ec.current),Y1(e)){if(r=e.stateNode,t=e.memoizedProps,r[jl]=e,(s=r.nodeValue!==t)&&(n=Js,n!==null))switch(n.tag){case 3:Q1(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Q1(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[jl]=e,e.stateNode=r}return br(e),null;case 13:if(_t(Vt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pt&&Ws!==null&&e.mode&1&&!(e.flags&128))zne(),Vg(),e.flags|=98560,s=!1;else if(s=Y1(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[jl]=e}else Vg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;br(e),s=!1}else ca!==null&&(RN(ca),ca=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Vt.current&1?zn===0&&(zn=3):A4())),e.updateQueue!==null&&(e.flags|=4),br(e),null);case 4:return Kg(),$N(n,e),n===null&&Bb(e.stateNode.containerInfo),br(e),null;case 10:return h4(e.type._context),br(e),null;case 17:return ds(e.type)&&A$(),br(e),null;case 19:if(_t(Vt),s=e.memoizedState,s===null)return br(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)py(s,!1);else{if(zn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=F$(n),o!==null){for(e.flags|=128,py(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return wt(Vt,Vt.current&1|2),e.child}n=n.sibling}s.tail!==null&&En()>Hg&&(e.flags|=128,r=!0,py(s,!1),e.lanes=4194304)}else{if(!r)if(n=F$(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),py(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pt)return br(e),null}else 2*En()-s.renderingStartTime>Hg&&t!==1073741824&&(e.flags|=128,r=!0,py(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=En(),e.sibling=null,t=Vt.current,wt(Vt,r?t&1|2:t&1),e):(br(e),null);case 22:case 23:return _4(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$s&1073741824&&(br(e),e.subtreeFlags&6&&(e.flags|=8192)):br(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function X$e(n,e){switch(c4(e),e.tag){case 1:return ds(e.type)&&A$(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Kg(),_t(us),_t(Rr),v4(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return y4(e),null;case 13:if(_t(Vt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Vg()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return _t(Vt),null;case 4:return Kg(),null;case 10:return h4(e.type._context),null;case 22:case 23:return _4(),null;case 24:return null;default:return null}}var ex=!1,$r=!1,Z$e=typeof WeakSet=="function"?WeakSet:Set,ve=null;function og(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){yn(n,e,r)}else t.current=null}function EN(n,e,t){try{t()}catch(r){yn(n,e,r)}}var OV=!1;function eEe(n,e){if(lN=C$,n=Cne(),a4(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,f=null;t:for(;;){for(var h;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===n)break t;if(f===t&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(cN={focusedElem:n,selectionRange:t},C$=!1,ve=e;ve!==null;)if(e=ve,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ve=n;else for(;ve!==null;){e=ve;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,k=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:sa(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(S){yn(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}return p=OV,OV=!1,p}function $v(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&EN(e,t,s)}i=i.next}while(i!==r)}}function n_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function CN(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function wre(n){var e=n.alternate;e!==null&&(n.alternate=null,wre(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[jl],delete e[Vb],delete e[fN],delete e[N$e],delete e[F$e])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function $re(n){return n.tag===5||n.tag===3||n.tag===4}function PV(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$re(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function MN(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=_$));else if(r!==4&&(n=n.child,n!==null))for(MN(n,e,t),n=n.sibling;n!==null;)MN(n,e,t),n=n.sibling}function TN(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(TN(n,e,t),n=n.sibling;n!==null;)TN(n,e,t),n=n.sibling}var ur=null,oa=!1;function hu(n,e,t){for(t=t.child;t!==null;)Ere(n,e,t),t=t.sibling}function Ere(n,e,t){if(Zl&&typeof Zl.onCommitFiberUnmount=="function")try{Zl.onCommitFiberUnmount(GT,t)}catch{}switch(t.tag){case 5:$r||og(t,e);case 6:var r=ur,i=oa;ur=null,hu(n,e,t),ur=r,oa=i,ur!==null&&(oa?(n=ur,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ur.removeChild(t.stateNode));break;case 18:ur!==null&&(oa?(n=ur,t=t.stateNode,n.nodeType===8?k2(n.parentNode,t):n.nodeType===1&&k2(n,t),Fb(n)):k2(ur,t.stateNode));break;case 4:r=ur,i=oa,ur=t.stateNode.containerInfo,oa=!0,hu(n,e,t),ur=r,oa=i;break;case 0:case 11:case 14:case 15:if(!$r&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&EN(t,e,o),i=i.next}while(i!==r)}hu(n,e,t);break;case 1:if(!$r&&(og(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){yn(t,e,a)}hu(n,e,t);break;case 21:hu(n,e,t);break;case 22:t.mode&1?($r=(r=$r)||t.memoizedState!==null,hu(n,e,t),$r=r):hu(n,e,t);break;default:hu(n,e,t)}}function DV(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Z$e),e.forEach(function(r){var i=cEe.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Zo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ur=a.stateNode,oa=!1;break e;case 3:ur=a.stateNode.containerInfo,oa=!0;break e;case 4:ur=a.stateNode.containerInfo,oa=!0;break e}a=a.return}if(ur===null)throw Error(re(160));Ere(s,o,i),ur=null,oa=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){yn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cre(e,n),e=e.sibling}function Cre(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zo(e,n),cl(n),r&4){try{$v(3,n,n.return),n_(3,n)}catch(m){yn(n,n.return,m)}try{$v(5,n,n.return)}catch(m){yn(n,n.return,m)}}break;case 1:Zo(e,n),cl(n),r&512&&t!==null&&og(t,t.return);break;case 5:if(Zo(e,n),cl(n),r&512&&t!==null&&og(t,t.return),n.flags&32){var i=n.stateNode;try{Ob(i,"")}catch(m){yn(n,n.return,m)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Wte(i,s),XD(a,o);var c=XD(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Xte(i,d):u==="dangerouslySetInnerHTML"?Qte(i,d):u==="children"?Ob(i,d):GL(i,u,d,c)}switch(a){case"input":WD(i,s);break;case"textarea":Gte(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?xg(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?xg(i,!!s.multiple,s.defaultValue,!0):xg(i,!!s.multiple,s.multiple?[]:"",!1))}i[Vb]=s}catch(m){yn(n,n.return,m)}}break;case 6:if(Zo(e,n),cl(n),r&4){if(n.stateNode===null)throw Error(re(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(m){yn(n,n.return,m)}}break;case 3:if(Zo(e,n),cl(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Fb(e.containerInfo)}catch(m){yn(n,n.return,m)}break;case 4:Zo(e,n),cl(n);break;case 13:Zo(e,n),cl(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(M4=En())),r&4&&DV(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?($r=(c=$r)||u,Zo(e,n),$r=c):Zo(e,n),cl(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(ve=n,u=n.child;u!==null;){for(d=ve=u;ve!==null;){switch(f=ve,h=f.child,f.tag){case 0:case 11:case 14:case 15:$v(4,f,f.return);break;case 1:og(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){yn(r,t,m)}}break;case 5:og(f,f.return);break;case 22:if(f.memoizedState!==null){FV(d);continue}}h!==null?(h.return=f,ve=h):FV(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Yte("display",o))}catch(m){yn(n,n.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){yn(n,n.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Zo(e,n),cl(n),r&4&&DV(n);break;case 21:break;default:Zo(e,n),cl(n)}}function cl(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if($re(t)){var r=t;break e}t=t.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ob(i,""),r.flags&=-33);var s=PV(n);TN(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PV(n);MN(n,a,o);break;default:throw Error(re(161))}}catch(l){yn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function tEe(n,e,t){ve=n,Mre(n)}function Mre(n,e,t){for(var r=(n.mode&1)!==0;ve!==null;){var i=ve,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ex;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||$r;a=ex;var c=$r;if(ex=o,($r=l)&&!c)for(ve=i;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?LV(i):l!==null?(l.return=o,ve=l):LV(i);for(;s!==null;)ve=s,Mre(s),s=s.sibling;ve=i,ex=a,$r=c}NV(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ve=s):NV(n)}}function NV(n){for(;ve!==null;){var e=ve;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$r||n_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$r)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:sa(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bV(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}bV(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Fb(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}$r||e.flags&512&&CN(e)}catch(f){yn(e,e.return,f)}}if(e===n){ve=null;break}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}}function FV(n){for(;ve!==null;){var e=ve;if(e===n){ve=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ve=t;break}ve=e.return}}function LV(n){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{n_(4,e)}catch(l){yn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){yn(e,i,l)}}var s=e.return;try{CN(e)}catch(l){yn(e,s,l)}break;case 5:var o=e.return;try{CN(e)}catch(l){yn(e,o,l)}}}catch(l){yn(e,e.return,l)}if(e===n){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var nEe=Math.ceil,B$=nu.ReactCurrentDispatcher,E4=nu.ReactCurrentOwner,Do=nu.ReactCurrentBatchConfig,rt=0,tr=null,In=null,pr=0,$s=0,ag=Dd(0),zn=0,Gb=null,jh=0,r_=0,C4=0,Ev=null,ss=null,M4=0,Hg=1/0,Cc=null,j$=!1,_N=null,fd=null,tx=!1,Yu=null,V$=0,Cv=0,AN=null,Ew=-1,Cw=0;function zi(){return rt&6?En():Ew!==-1?Ew:Ew=En()}function hd(n){return n.mode&1?rt&2&&pr!==0?pr&-pr:z$e.transition!==null?(Cw===0&&(Cw=une()),Cw):(n=pt,n!==0||(n=window.event,n=n===void 0?16:yne(n.type)),n):1}function Sa(n,e,t,r){if(50<Cv)throw Cv=0,AN=null,Error(re(185));Lk(n,t,r),(!(rt&2)||n!==tr)&&(n===tr&&(!(rt&2)&&(r_|=t),zn===4&&Vu(n,pr)),fs(n,r),t===1&&rt===0&&!(e.mode&1)&&(Hg=En()+500,ZT&&Nd()))}function fs(n,e){var t=n.callbackNode;zwe(n,e);var r=E$(n,n===tr?pr:0);if(r===0)t!==null&&Wj(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Wj(t),e===1)n.tag===0?L$e(zV.bind(null,n)):Nne(zV.bind(null,n)),P$e(function(){!(rt&6)&&Nd()}),t=null;else{switch(dne(r)){case 1:t=ZL;break;case 4:t=lne;break;case 16:t=$$;break;case 536870912:t=cne;break;default:t=$$}t=Dre(t,Tre.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Tre(n,e){if(Ew=-1,Cw=0,rt&6)throw Error(re(327));var t=n.callbackNode;if(Cg()&&n.callbackNode!==t)return null;var r=E$(n,n===tr?pr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=q$(n,r);else{e=r;var i=rt;rt|=2;var s=Are();(tr!==n||pr!==e)&&(Cc=null,Hg=En()+500,xh(n,e));do try{sEe();break}catch(a){_re(n,a)}while(1);f4(),B$.current=s,rt=i,In!==null?e=0:(tr=null,pr=0,e=zn)}if(e!==0){if(e===2&&(i=rN(n),i!==0&&(r=i,e=IN(n,i))),e===1)throw t=Gb,xh(n,0),Vu(n,r),fs(n,En()),t;if(e===6)Vu(n,r);else{if(i=n.current.alternate,!(r&30)&&!rEe(i)&&(e=q$(n,r),e===2&&(s=rN(n),s!==0&&(r=s,e=IN(n,s))),e===1))throw t=Gb,xh(n,0),Vu(n,r),fs(n,En()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:Cf(n,ss,Cc);break;case 3:if(Vu(n,r),(r&130023424)===r&&(e=M4+500-En(),10<e)){if(E$(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){zi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=dN(Cf.bind(null,n,ss,Cc),e);break}Cf(n,ss,Cc);break;case 4:if(Vu(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-xa(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=En()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nEe(r/1960))-r,10<r){n.timeoutHandle=dN(Cf.bind(null,n,ss,Cc),r);break}Cf(n,ss,Cc);break;case 5:Cf(n,ss,Cc);break;default:throw Error(re(329))}}}return fs(n,En()),n.callbackNode===t?Tre.bind(null,n):null}function IN(n,e){var t=Ev;return n.current.memoizedState.isDehydrated&&(xh(n,e).flags|=256),n=q$(n,e),n!==2&&(e=ss,ss=t,e!==null&&RN(e)),n}function RN(n){ss===null?ss=n:ss.push.apply(ss,n)}function rEe(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Wa(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vu(n,e){for(e&=~C4,e&=~r_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-xa(e),r=1<<t;n[t]=-1,e&=~r}}function zV(n){if(rt&6)throw Error(re(327));Cg();var e=E$(n,0);if(!(e&1))return fs(n,En()),null;var t=q$(n,e);if(n.tag!==0&&t===2){var r=rN(n);r!==0&&(e=r,t=IN(n,r))}if(t===1)throw t=Gb,xh(n,0),Vu(n,e),fs(n,En()),t;if(t===6)throw Error(re(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Cf(n,ss,Cc),fs(n,En()),null}function T4(n,e){var t=rt;rt|=1;try{return n(e)}finally{rt=t,rt===0&&(Hg=En()+500,ZT&&Nd())}}function Vh(n){Yu!==null&&Yu.tag===0&&!(rt&6)&&Cg();var e=rt;rt|=1;var t=Do.transition,r=pt;try{if(Do.transition=null,pt=1,n)return n()}finally{pt=r,Do.transition=t,rt=e,!(rt&6)&&Nd()}}function _4(){$s=ag.current,_t(ag)}function xh(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,O$e(t)),In!==null)for(t=In.return;t!==null;){var r=t;switch(c4(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&A$();break;case 3:Kg(),_t(us),_t(Rr),v4();break;case 5:y4(r);break;case 4:Kg();break;case 13:_t(Vt);break;case 19:_t(Vt);break;case 10:h4(r.type._context);break;case 22:case 23:_4()}t=t.return}if(tr=n,In=n=pd(n.current,null),pr=$s=e,zn=0,Gb=null,C4=r_=jh=0,ss=Ev=null,Bf!==null){for(e=0;e<Bf.length;e++)if(t=Bf[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Bf=null}return n}function _re(n,e){do{var t=In;try{if(f4(),Sw.current=z$,L$){for(var r=Kt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}L$=!1}if(Bh=0,Wn=Ln=Kt=null,wv=!1,Ub=0,E4.current=null,t===null||t.return===null){zn=1,Gb=e,In=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=pr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=CV(o);if(h!==null){h.flags&=-257,MV(h,o,a,s,e),h.mode&1&&EV(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){EV(s,c,e),A4();break e}l=Error(re(426))}}else if(Pt&&a.mode&1){var g=CV(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),MV(g,o,a,s,e),u4(Ug(l,a));break e}}s=l=Ug(l,a),zn!==4&&(zn=2),Ev===null?Ev=[s]:Ev.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=fre(s,l,e);vV(s,y);break e;case 1:a=l;var k=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(fd===null||!fd.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=hre(s,a,e);vV(s,S);break e}}s=s.return}while(s!==null)}Rre(t)}catch(w){e=w,In===t&&t!==null&&(In=t=t.return);continue}break}while(1)}function Are(){var n=B$.current;return B$.current=z$,n===null?z$:n}function A4(){(zn===0||zn===3||zn===2)&&(zn=4),tr===null||!(jh&268435455)&&!(r_&268435455)||Vu(tr,pr)}function q$(n,e){var t=rt;rt|=2;var r=Are();(tr!==n||pr!==e)&&(Cc=null,xh(n,e));do try{iEe();break}catch(i){_re(n,i)}while(1);if(f4(),rt=t,B$.current=r,In!==null)throw Error(re(261));return tr=null,pr=0,zn}function iEe(){for(;In!==null;)Ire(In)}function sEe(){for(;In!==null&&!Awe();)Ire(In)}function Ire(n){var e=Pre(n.alternate,n,$s);n.memoizedProps=n.pendingProps,e===null?Rre(n):In=e,E4.current=null}function Rre(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=X$e(t,e),t!==null){t.flags&=32767,In=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{zn=6,In=null;return}}else if(t=Y$e(t,e,$s),t!==null){In=t;return}if(e=e.sibling,e!==null){In=e;return}In=e=n}while(e!==null);zn===0&&(zn=5)}function Cf(n,e,t){var r=pt,i=Do.transition;try{Do.transition=null,pt=1,oEe(n,e,t,r)}finally{Do.transition=i,pt=r}return null}function oEe(n,e,t,r){do Cg();while(Yu!==null);if(rt&6)throw Error(re(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(re(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Bwe(n,s),n===tr&&(In=tr=null,pr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||tx||(tx=!0,Dre($$,function(){return Cg(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Do.transition,Do.transition=null;var o=pt;pt=1;var a=rt;rt|=4,E4.current=null,eEe(n,t),Cre(t,n),C$e(cN),C$=!!lN,cN=lN=null,n.current=t,tEe(t),Iwe(),rt=a,pt=o,Do.transition=s}else n.current=t;if(tx&&(tx=!1,Yu=n,V$=i),s=n.pendingLanes,s===0&&(fd=null),Pwe(t.stateNode),fs(n,En()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(j$)throw j$=!1,n=_N,_N=null,n;return V$&1&&n.tag!==0&&Cg(),s=n.pendingLanes,s&1?n===AN?Cv++:(Cv=0,AN=n):Cv=0,Nd(),null}function Cg(){if(Yu!==null){var n=dne(V$),e=Do.transition,t=pt;try{if(Do.transition=null,pt=16>n?16:n,Yu===null)var r=!1;else{if(n=Yu,Yu=null,V$=0,rt&6)throw Error(re(331));var i=rt;for(rt|=4,ve=n.current;ve!==null;){var s=ve,o=s.child;if(ve.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ve=c;ve!==null;){var u=ve;switch(u.tag){case 0:case 11:case 15:$v(8,u,s)}var d=u.child;if(d!==null)d.return=u,ve=d;else for(;ve!==null;){u=ve;var f=u.sibling,h=u.return;if(wre(u),u===c){ve=null;break}if(f!==null){f.return=h,ve=f;break}ve=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ve=o;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$v(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ve=y;break e}ve=s.return}}var k=n.current;for(ve=k;ve!==null;){o=ve;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ve=b;else e:for(o=k;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:n_(9,a)}}catch(w){yn(a,a.return,w)}if(a===o){ve=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ve=S;break e}ve=a.return}}if(rt=i,Nd(),Zl&&typeof Zl.onPostCommitFiberRoot=="function")try{Zl.onPostCommitFiberRoot(GT,n)}catch{}r=!0}return r}finally{pt=t,Do.transition=e}}return!1}function BV(n,e,t){e=Ug(t,e),e=fre(n,e,1),n=dd(n,e,1),e=zi(),n!==null&&(Lk(n,1,e),fs(n,e))}function yn(n,e,t){if(n.tag===3)BV(n,n,t);else for(;e!==null;){if(e.tag===3){BV(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fd===null||!fd.has(r))){n=Ug(t,n),n=hre(e,n,1),e=dd(e,n,1),n=zi(),e!==null&&(Lk(e,1,n),fs(e,n));break}}e=e.return}}function aEe(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=zi(),n.pingedLanes|=n.suspendedLanes&t,tr===n&&(pr&t)===t&&(zn===4||zn===3&&(pr&130023424)===pr&&500>En()-M4?xh(n,0):C4|=t),fs(n,e)}function Ore(n,e){e===0&&(n.mode&1?(e=U1,U1<<=1,!(U1&130023424)&&(U1=4194304)):e=1);var t=zi();n=Kc(n,e),n!==null&&(Lk(n,e,t),fs(n,t))}function lEe(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Ore(n,t)}function cEe(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),Ore(n,t)}var Pre;Pre=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||us.current)cs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return cs=!1,Q$e(n,e,t);cs=!!(n.flags&131072)}else cs=!1,Pt&&e.flags&1048576&&Fne(e,O$,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$w(n,e),n=e.pendingProps;var i=jg(e,Rr.current);Eg(e,t),i=k4(null,e,r,n,i,t);var s=x4();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ds(r)?(s=!0,I$(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,m4(e),i.updater=e_,e.stateNode=i,i._reactInternals=e,vN(e,r,n,t),e=xN(null,e,r,!0,s,t)):(e.tag=0,Pt&&s&&l4(e),Di(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch($w(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dEe(r),n=sa(r,n),i){case 0:e=kN(null,e,r,n,t);break e;case 1:e=AV(null,e,r,n,t);break e;case 11:e=TV(null,e,r,n,t);break e;case 14:e=_V(null,e,r,sa(r.type,n),t);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sa(r,i),kN(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sa(r,i),AV(n,e,r,i,t);case 3:e:{if(yre(e),n===null)throw Error(re(387));r=e.pendingProps,s=e.memoizedState,i=s.element,jne(n,e),N$(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ug(Error(re(423)),e),e=IV(n,e,r,t,i);break e}else if(r!==i){i=Ug(Error(re(424)),e),e=IV(n,e,r,t,i);break e}else for(Ws=ud(e.stateNode.containerInfo.firstChild),Js=e,Pt=!0,ca=null,t=Une(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Vg(),r===i){e=Uc(n,e,t);break e}Di(n,e,r,t)}e=e.child}return e;case 5:return Hne(e),n===null&&mN(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,uN(r,i)?o=null:s!==null&&uN(r,s)&&(e.flags|=32),gre(n,e),Di(n,e,o,t),e.child;case 6:return n===null&&mN(e),null;case 13:return vre(n,e,t);case 4:return g4(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=qg(e,null,r,t):Di(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sa(r,i),TV(n,e,r,i,t);case 7:return Di(n,e,e.pendingProps,t),e.child;case 8:return Di(n,e,e.pendingProps.children,t),e.child;case 12:return Di(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,wt(P$,r._currentValue),r._currentValue=o,s!==null)if(Wa(s.value,o)){if(s.children===i.children&&!us.current){e=Uc(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Nc(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),gN(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(re(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),gN(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Di(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Eg(e,t),i=Lo(i),r=r(i),e.flags|=1,Di(n,e,r,t),e.child;case 14:return r=e.type,i=sa(r,e.pendingProps),i=sa(r.type,i),_V(n,e,r,i,t);case 15:return pre(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sa(r,i),$w(n,e),e.tag=1,ds(r)?(n=!0,I$(e)):n=!1,Eg(e,t),qne(e,r,i),vN(e,r,i,t),xN(null,e,r,!0,n,t);case 19:return bre(n,e,t);case 22:return mre(n,e,t)}throw Error(re(156,e.tag))};function Dre(n,e){return ane(n,e)}function uEe(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ro(n,e,t,r){return new uEe(n,e,t,r)}function I4(n){return n=n.prototype,!(!n||!n.isReactComponent)}function dEe(n){if(typeof n=="function")return I4(n)?1:0;if(n!=null){if(n=n.$$typeof,n===QL)return 11;if(n===YL)return 14}return 2}function pd(n,e){var t=n.alternate;return t===null?(t=Ro(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Mw(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")I4(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ym:return Sh(t.children,i,s,e);case JL:o=8,i|=8;break;case VD:return n=Ro(12,t,e,i|2),n.elementType=VD,n.lanes=s,n;case qD:return n=Ro(13,t,e,i),n.elementType=qD,n.lanes=s,n;case KD:return n=Ro(19,t,e,i),n.elementType=KD,n.lanes=s,n;case Kte:return i_(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Vte:o=10;break e;case qte:o=9;break e;case QL:o=11;break e;case YL:o=14;break e;case _u:o=16,r=null;break e}throw Error(re(130,n==null?n:typeof n,""))}return e=Ro(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Sh(n,e,t,r){return n=Ro(7,n,r,e),n.lanes=t,n}function i_(n,e,t,r){return n=Ro(22,n,r,e),n.elementType=Kte,n.lanes=t,n.stateNode={isHidden:!1},n}function T2(n,e,t){return n=Ro(6,n,null,e),n.lanes=t,n}function _2(n,e,t){return e=Ro(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function fEe(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c2(0),this.expirationTimes=c2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c2(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function R4(n,e,t,r,i,s,o,a,l){return n=new fEe(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ro(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},m4(s),n}function hEe(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qm,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Nre(n){if(!n)return Sd;n=n._reactInternals;e:{if(ip(n)!==n||n.tag!==1)throw Error(re(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ds(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(n.tag===1){var t=n.type;if(ds(t))return Dne(n,t,e)}return e}function Fre(n,e,t,r,i,s,o,a,l){return n=R4(t,r,!0,n,i,s,o,a,l),n.context=Nre(null),t=n.current,r=zi(),i=hd(t),s=Nc(r,i),s.callback=e??null,dd(t,s,i),n.current.lanes=i,Lk(n,i,r),fs(n,r),n}function s_(n,e,t,r){var i=e.current,s=zi(),o=hd(i);return t=Nre(t),e.context===null?e.context=t:e.pendingContext=t,e=Nc(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=dd(i,e,o),n!==null&&(Sa(n,i,o,s),xw(n,i,o)),o}function K$(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function jV(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function O4(n,e){jV(n,e),(n=n.alternate)&&jV(n,e)}function pEe(){return null}var Lre=typeof reportError=="function"?reportError:function(n){console.error(n)};function P4(n){this._internalRoot=n}o_.prototype.render=P4.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(re(409));s_(n,e,null,null)};o_.prototype.unmount=P4.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Vh(function(){s_(null,n,null,null)}),e[qc]=null}};function o_(n){this._internalRoot=n}o_.prototype.unstable_scheduleHydration=function(n){if(n){var e=pne();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ju.length&&e!==0&&e<ju[t].priority;t++);ju.splice(t,0,n),t===0&&gne(n)}};function D4(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function VV(){}function mEe(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=K$(o);s.call(c)}}var o=Fre(e,r,n,0,null,!1,!1,"",VV);return n._reactRootContainer=o,n[qc]=o.current,Bb(n.nodeType===8?n.parentNode:n),Vh(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=K$(l);a.call(c)}}var l=R4(n,0,!1,null,null,!1,!1,"",VV);return n._reactRootContainer=l,n[qc]=l.current,Bb(n.nodeType===8?n.parentNode:n),Vh(function(){s_(e,l,t,r)}),l}function l_(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=K$(o);a.call(l)}}s_(e,o,n,i)}else o=mEe(t,e,n,i,r);return K$(o)}fne=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Zy(e.pendingLanes);t!==0&&(e4(e,t|1),fs(e,En()),!(rt&6)&&(Hg=En()+500,Nd()))}break;case 13:Vh(function(){var r=Kc(n,1);if(r!==null){var i=zi();Sa(r,n,1,i)}}),O4(n,1)}};t4=function(n){if(n.tag===13){var e=Kc(n,134217728);if(e!==null){var t=zi();Sa(e,n,134217728,t)}O4(n,134217728)}};hne=function(n){if(n.tag===13){var e=hd(n),t=Kc(n,e);if(t!==null){var r=zi();Sa(t,n,e,r)}O4(n,e)}};pne=function(){return pt};mne=function(n,e){var t=pt;try{return pt=n,e()}finally{pt=t}};eN=function(n,e,t){switch(e){case"input":if(WD(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=XT(r);if(!i)throw Error(re(90));Hte(r),WD(r,i)}}}break;case"textarea":Gte(n,t);break;case"select":e=t.value,e!=null&&xg(n,!!t.multiple,e,!1)}};tne=T4;nne=Vh;var gEe={usingClientEntryPoint:!1,Events:[Bk,tg,XT,Zte,ene,T4]},my={findFiberByHostInstance:zf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},yEe={bundleType:my.bundleType,version:my.version,rendererPackageName:my.rendererPackageName,rendererConfig:my.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nu.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sne(n),n===null?null:n.stateNode},findFiberByHostInstance:my.findFiberByHostInstance||pEe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nx.isDisabled&&nx.supportsFiber)try{GT=nx.inject(yEe),Zl=nx}catch{}}oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gEe;oo.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D4(e))throw Error(re(200));return hEe(n,e,null,t)};oo.createRoot=function(n,e){if(!D4(n))throw Error(re(299));var t=!1,r="",i=Lre;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=R4(n,1,!1,null,null,t,!1,r,i),n[qc]=e.current,Bb(n.nodeType===8?n.parentNode:n),new P4(e)};oo.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(re(188)):(n=Object.keys(n).join(","),Error(re(268,n)));return n=sne(e),n=n===null?null:n.stateNode,n};oo.flushSync=function(n){return Vh(n)};oo.hydrate=function(n,e,t){if(!a_(e))throw Error(re(200));return l_(null,n,e,!0,t)};oo.hydrateRoot=function(n,e,t){if(!D4(n))throw Error(re(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Lre;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Fre(e,null,n,1,t??null,i,!1,s,o),n[qc]=e.current,Bb(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new o_(e)};oo.render=function(n,e,t){if(!a_(e))throw Error(re(200));return l_(null,n,e,!1,t)};oo.unmountComponentAtNode=function(n){if(!a_(n))throw Error(re(40));return n._reactRootContainer?(Vh(function(){l_(null,null,n,!1,function(){n._reactRootContainer=null,n[qc]=null})}),!0):!1};oo.unstable_batchedUpdates=T4;oo.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!a_(t))throw Error(re(200));if(n==null||n._reactInternals===void 0)throw Error(re(38));return l_(n,e,t,!1,r)};oo.version="18.2.0-next-9e3b772b8-20220608";function zre(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zre)}catch(n){console.error(n)}}zre(),Fte.exports=oo;var Za=Fte.exports;const Vk=tu(Za),vEe=Cte({__proto__:null,default:Vk},[Za]);var qV=Za;BD.createRoot=qV.createRoot,BD.hydrateRoot=qV.hydrateRoot;/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jt(){return jt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jt.apply(this,arguments)}var $n;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})($n||($n={}));const KV="popstate";function bEe(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Jb("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:qh(i)}return xEe(e,t,null,n)}function We(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Wg(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kEe(){return Math.random().toString(36).substr(2,8)}function UV(n,e){return{usr:n.state,key:n.key,idx:e}}function Jb(n,e,t,r){return t===void 0&&(t=null),jt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ru(e):e,{state:t,key:e&&e.key||r||kEe()})}function qh(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ru(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function xEe(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=$n.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(jt({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=$n.Pop;let g=u(),y=g==null?null:g-c;c=g,l&&l({action:a,location:m.location,delta:y})}function f(g,y){a=$n.Push;let k=Jb(m.location,g,y);t&&t(k,g),c=u()+1;let b=UV(k,c),S=m.createHref(k);try{o.pushState(b,"",S)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(S)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a=$n.Replace;let k=Jb(m.location,g,y);t&&t(k,g),c=u();let b=UV(k,c),S=m.createHref(k);o.replaceState(b,"",S),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof g=="string"?g:qh(g);return k=k.replace(/ $/,"%20"),We(y,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,y)}let m={get action(){return a},get location(){return n(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(KV,d),l=g,()=>{i.removeEventListener(KV,d),l=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(g){return o.go(g)}};return m}var mn;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(mn||(mn={}));const SEe=new Set(["lazy","caseSensitive","path","id","index","children"]);function wEe(n){return n.index===!0}function ON(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((i,s)=>{let o=[...t,s],a=typeof i.id=="string"?i.id:o.join("-");if(We(i.index!==!0||!i.children,"Cannot specify children on an index route"),We(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),wEe(i)){let l=jt({},i,e(i),{id:a});return r[a]=l,l}else{let l=jt({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=ON(i.children,e,o,r)),l}})}function lg(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?ru(e):e,i=y0(r.pathname||"/",t);if(i==null)return null;let s=jre(n);$Ee(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=NEe(i);o=OEe(s[a],l)}return o}function Bre(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function jre(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Fc([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(We(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),jre(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:IEe(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Vre(s.path))i(s,o,l)}),e}function Vre(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Vre(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function $Ee(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:REe(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const EEe=/^:[\w-]+$/,CEe=3,MEe=2,TEe=1,_Ee=10,AEe=-2,HV=n=>n==="*";function IEe(n,e){let t=n.split("/"),r=t.length;return t.some(HV)&&(r+=AEe),e&&(r+=MEe),t.filter(i=>!HV(i)).reduce((i,s)=>i+(EEe.test(s)?CEe:s===""?TEe:_Ee),r)}function REe(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function OEe(n,e){let{routesMeta:t}=n,r={},i="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=PEe({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:Fc([i,u.pathname]),pathnameBase:zEe(Fc([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Fc([i,u.pathnameBase]))}return s}function PEe(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=DEe(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?c[f]=void 0:c[f]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function DEe(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Wg(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function NEe(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wg(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function y0(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function FEe(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ru(n):n;return{pathname:t?t.startsWith("/")?t:LEe(t,e):e,search:BEe(r),hash:jEe(i)}}function LEe(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function A2(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qre(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function N4(n,e){let t=qre(n);return e?t.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function F4(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=ru(n):(i=jt({},n),We(!i.pathname||!i.pathname.includes("?"),A2("?","pathname","search",i)),We(!i.pathname||!i.pathname.includes("#"),A2("#","pathname","hash",i)),We(!i.search||!i.search.includes("#"),A2("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=FEe(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Fc=n=>n.join("/").replace(/\/\/+/g,"/"),zEe=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),BEe=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jEe=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,I2=function(e,t){t===void 0&&(t=302);let r=t;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",e),new Response(null,jt({},r,{headers:i}))};class L4{constructor(e,t,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=t||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Kre(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Ure=["post","put","patch","delete"],VEe=new Set(Ure),qEe=["get",...Ure],KEe=new Set(qEe),UEe=new Set([301,302,303,307,308]),HEe=new Set([307,308]),R2={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},WEe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gy={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Hre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GEe=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),Wre="remix-router-transitions";function JEe(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;We(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(n.mapRouteProperties)i=n.mapRouteProperties;else if(n.detectErrorBoundary){let q=n.detectErrorBoundary;i=W=>({hasErrorBoundary:q(W)})}else i=GEe;let s={},o=ON(n.routes,i,void 0,s),a,l=n.basename||"/",c=jt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},n.future),u=null,d=new Set,f=null,h=null,p=null,m=n.hydrationData!=null,g=lg(o,n.history.location,l),y=null;if(g==null){let q=ko(404,{pathname:n.history.location.pathname}),{matches:W,route:X}=eq(o);g=W,y={[X.id]:q}}let k,b=g.some(q=>q.route.lazy),S=g.some(q=>q.route.loader);if(b)k=!1;else if(!S)k=!0;else if(c.v7_partialHydration){let q=n.hydrationData?n.hydrationData.loaderData:null,W=n.hydrationData?n.hydrationData.errors:null;k=g.every(X=>X.route.loader&&X.route.loader.hydrate!==!0&&(q&&q[X.route.id]!==void 0||W&&W[X.route.id]!==void 0))}else k=n.hydrationData!=null;let w,x={historyAction:n.history.action,location:n.history.location,matches:g,initialized:k,navigation:R2,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||y,fetchers:new Map,blockers:new Map},$=$n.Pop,E=!1,C,M=!1,P=new Map,I=null,N=!1,T=!1,R=[],A=[],L=new Map,F=0,O=-1,z=new Map,j=new Set,K=new Map,Z=new Map,te=new Set,pe=new Map,he=new Map,se=!1;function ke(){if(u=n.history.listen(q=>{let{action:W,location:X,delta:fe}=q;if(se){se=!1;return}Wg(he.size===0||fe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let we=Aj({currentLocation:x.location,nextLocation:X,historyAction:W});if(we&&fe!=null){se=!0,n.history.go(fe*-1),vf(we,{state:"blocked",location:X,proceed(){vf(we,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),n.history.go(fe)},reset(){let Ue=new Map(x.blockers);Ue.set(we,gy),ye({blockers:Ue})}});return}return Ft(W,X)}),t){oCe(e,P);let q=()=>aCe(e,P);e.addEventListener("pagehide",q),I=()=>e.removeEventListener("pagehide",q)}return x.initialized||Ft($n.Pop,x.location,{initialHydration:!0}),w}function xe(){u&&u(),I&&I(),d.clear(),C&&C.abort(),x.fetchers.forEach((q,W)=>Sn(W)),x.blockers.forEach((q,W)=>F1(W))}function be(q){return d.add(q),()=>d.delete(q)}function ye(q,W){W===void 0&&(W={}),x=jt({},x,q);let X=[],fe=[];c.v7_fetcherPersist&&x.fetchers.forEach((we,Ue)=>{we.state==="idle"&&(te.has(Ue)?fe.push(Ue):X.push(Ue))}),[...d].forEach(we=>we(x,{deletedFetchers:fe,unstable_viewTransitionOpts:W.viewTransitionOpts,unstable_flushSync:W.flushSync===!0})),c.v7_fetcherPersist&&(X.forEach(we=>x.fetchers.delete(we)),fe.forEach(we=>Sn(we)))}function Re(q,W,X){var fe,we;let{flushSync:Ue}=X===void 0?{}:X,Pe=x.actionData!=null&&x.navigation.formMethod!=null&&aa(x.navigation.formMethod)&&x.navigation.state==="loading"&&((fe=q.state)==null?void 0:fe._isRedirect)!==!0,Ae;W.actionData?Object.keys(W.actionData).length>0?Ae=W.actionData:Ae=null:Pe?Ae=x.actionData:Ae=null;let Te=W.loaderData?ZV(x.loaderData,W.loaderData,W.matches||[],W.errors):x.loaderData,et=x.blockers;et.size>0&&(et=new Map(et),et.forEach((kt,ar)=>et.set(ar,gy)));let qn=E===!0||x.navigation.formMethod!=null&&aa(x.navigation.formMethod)&&((we=q.state)==null?void 0:we._isRedirect)!==!0;a&&(o=a,a=void 0),N||$===$n.Pop||($===$n.Push?n.history.push(q,q.state):$===$n.Replace&&n.history.replace(q,q.state));let ze;if($===$n.Pop){let kt=P.get(x.location.pathname);kt&&kt.has(q.pathname)?ze={currentLocation:x.location,nextLocation:q}:P.has(q.pathname)&&(ze={currentLocation:q,nextLocation:x.location})}else if(M){let kt=P.get(x.location.pathname);kt?kt.add(q.pathname):(kt=new Set([q.pathname]),P.set(x.location.pathname,kt)),ze={currentLocation:x.location,nextLocation:q}}ye(jt({},W,{actionData:Ae,loaderData:Te,historyAction:$,location:q,initialized:!0,navigation:R2,revalidation:"idle",restoreScrollPosition:Rj(q,W.matches||x.matches),preventScrollReset:qn,blockers:et}),{viewTransitionOpts:ze,flushSync:Ue===!0}),$=$n.Pop,E=!1,M=!1,N=!1,T=!1,R=[],A=[]}async function ft(q,W){if(typeof q=="number"){n.history.go(q);return}let X=PN(x.location,x.matches,l,c.v7_prependBasename,q,c.v7_relativeSplatPath,W==null?void 0:W.fromRouteId,W==null?void 0:W.relative),{path:fe,submission:we,error:Ue}=WV(c.v7_normalizeFormMethod,!1,X,W),Pe=x.location,Ae=Jb(x.location,fe,W&&W.state);Ae=jt({},Ae,n.history.encodeLocation(Ae));let Te=W&&W.replace!=null?W.replace:void 0,et=$n.Push;Te===!0?et=$n.Replace:Te===!1||we!=null&&aa(we.formMethod)&&we.formAction===x.location.pathname+x.location.search&&(et=$n.Replace);let qn=W&&"preventScrollReset"in W?W.preventScrollReset===!0:void 0,ze=(W&&W.unstable_flushSync)===!0,kt=Aj({currentLocation:Pe,nextLocation:Ae,historyAction:et});if(kt){vf(kt,{state:"blocked",location:Ae,proceed(){vf(kt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ae}),ft(q,W)},reset(){let ar=new Map(x.blockers);ar.set(kt,gy),ye({blockers:ar})}});return}return await Ft(et,Ae,{submission:we,pendingError:Ue,preventScrollReset:qn,replace:W&&W.replace,enableViewTransition:W&&W.unstable_viewTransition,flushSync:ze})}function nt(){if(ie(),ye({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){Ft(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}Ft($||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation})}}async function Ft(q,W,X){C&&C.abort(),C=null,$=q,N=(X&&X.startUninterruptedRevalidation)===!0,jSe(x.location,x.matches),E=(X&&X.preventScrollReset)===!0,M=(X&&X.enableViewTransition)===!0;let fe=a||o,we=X&&X.overrideNavigation,Ue=lg(fe,W,l),Pe=(X&&X.flushSync)===!0;if(!Ue){let ar=ko(404,{pathname:W.pathname}),{matches:vs,route:Kn}=eq(fe);e2(),Re(W,{matches:vs,loaderData:{},errors:{[Kn.id]:ar}},{flushSync:Pe});return}if(x.initialized&&!T&&eCe(x.location,W)&&!(X&&X.submission&&aa(X.submission.formMethod))){Re(W,{matches:Ue},{flushSync:Pe});return}C=new AbortController;let Ae=vy(n.history,W,C.signal,X&&X.submission),Te,et;if(X&&X.pendingError)et={[Mv(Ue).route.id]:X.pendingError};else if(X&&X.submission&&aa(X.submission.formMethod)){let ar=await ts(Ae,W,X.submission,Ue,{replace:X.replace,flushSync:Pe});if(ar.shortCircuited)return;Te=ar.pendingActionData,et=ar.pendingActionError,we=O2(W,X.submission),Pe=!1,Ae=new Request(Ae.url,{signal:Ae.signal})}let{shortCircuited:qn,loaderData:ze,errors:kt}=await ys(Ae,W,Ue,we,X&&X.submission,X&&X.fetcherSubmission,X&&X.replace,X&&X.initialHydration===!0,Pe,Te,et);qn||(C=null,Re(W,jt({matches:Ue},Te?{actionData:Te}:{},{loaderData:ze,errors:kt})))}async function ts(q,W,X,fe,we){we===void 0&&(we={}),ie();let Ue=iCe(W,X);ye({navigation:Ue},{flushSync:we.flushSync===!0});let Pe,Ae=NN(fe,W);if(!Ae.route.action&&!Ae.route.lazy)Pe={type:mn.error,error:ko(405,{method:q.method,pathname:W.pathname,routeId:Ae.route.id})};else if(Pe=await yy("action",q,Ae,fe,s,i,l,c.v7_relativeSplatPath),q.signal.aborted)return{shortCircuited:!0};if(qf(Pe)){let Te;return we&&we.replace!=null?Te=we.replace:Te=Pe.location===x.location.pathname+x.location.search,await ue(x,Pe,{submission:X,replace:Te}),{shortCircuited:!0}}if(cg(Pe)){let Te=Mv(fe,Ae.route.id);return(we&&we.replace)!==!0&&($=$n.Push),{pendingActionData:{},pendingActionError:{[Te.route.id]:Pe.error}}}if(Vf(Pe))throw ko(400,{type:"defer-action"});return{pendingActionData:{[Ae.route.id]:Pe.data}}}async function ys(q,W,X,fe,we,Ue,Pe,Ae,Te,et,qn){let ze=fe||O2(W,we),kt=we||Ue||rq(ze),ar=a||o,[vs,Kn]=GV(n.history,x,X,kt,W,c.v7_partialHydration&&Ae===!0,T,R,A,te,K,j,ar,l,et,qn);if(e2(lt=>!(X&&X.some(mt=>mt.route.id===lt))||vs&&vs.some(mt=>mt.route.id===lt)),O=++F,vs.length===0&&Kn.length===0){let lt=Op();return Re(W,jt({matches:X,loaderData:{},errors:qn||null},et?{actionData:et}:{},lt?{fetchers:new Map(x.fetchers)}:{}),{flushSync:Te}),{shortCircuited:!0}}if(!N&&(!c.v7_partialHydration||!Ae)){Kn.forEach(mt=>{let ns=x.fetchers.get(mt.key),z1=by(void 0,ns?ns.data:void 0);x.fetchers.set(mt.key,z1)});let lt=et||x.actionData;ye(jt({navigation:ze},lt?Object.keys(lt).length===0?{actionData:null}:{actionData:lt}:{},Kn.length>0?{fetchers:new Map(x.fetchers)}:{}),{flushSync:Te})}Kn.forEach(lt=>{L.has(lt.key)&&wn(lt.key),lt.controller&&L.set(lt.key,lt.controller)});let Pp=()=>Kn.forEach(lt=>wn(lt.key));C&&C.signal.addEventListener("abort",Pp);let{results:t2,loaderResults:Dp,fetcherResults:fu}=await oe(x.matches,X,vs,Kn,q);if(q.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Pp),Kn.forEach(lt=>L.delete(lt.key));let bf=tq(t2);if(bf){if(bf.idx>=vs.length){let lt=Kn[bf.idx-vs.length].key;j.add(lt)}return await ue(x,bf.result,{replace:Pe}),{shortCircuited:!0}}let{loaderData:n2,errors:ay}=XV(x,X,vs,Dp,qn,Kn,fu,pe);pe.forEach((lt,mt)=>{lt.subscribe(ns=>{(ns||lt.done)&&pe.delete(mt)})}),c.v7_partialHydration&&Ae&&x.errors&&Object.entries(x.errors).filter(lt=>{let[mt]=lt;return!vs.some(ns=>ns.route.id===mt)}).forEach(lt=>{let[mt,ns]=lt;ay=Object.assign(ay||{},{[mt]:ns})});let r2=Op(),Np=D1(O),L1=r2||Np||Kn.length>0;return jt({loaderData:n2,errors:ay},L1?{fetchers:new Map(x.fetchers)}:{})}function B(q,W,X,fe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");L.has(q)&&wn(q);let we=(fe&&fe.unstable_flushSync)===!0,Ue=a||o,Pe=PN(x.location,x.matches,l,c.v7_prependBasename,X,c.v7_relativeSplatPath,W,fe==null?void 0:fe.relative),Ae=lg(Ue,Pe,l);if(!Ae){Ke(q,W,ko(404,{pathname:Pe}),{flushSync:we});return}let{path:Te,submission:et,error:qn}=WV(c.v7_normalizeFormMethod,!0,Pe,fe);if(qn){Ke(q,W,qn,{flushSync:we});return}let ze=NN(Ae,Te);if(E=(fe&&fe.preventScrollReset)===!0,et&&aa(et.formMethod)){U(q,W,Te,ze,Ae,we,et);return}K.set(q,{routeId:W,path:Te}),J(q,W,Te,ze,Ae,we,et)}async function U(q,W,X,fe,we,Ue,Pe){if(ie(),K.delete(q),!fe.route.action&&!fe.route.lazy){let mt=ko(405,{method:Pe.formMethod,pathname:X,routeId:W});Ke(q,W,mt,{flushSync:Ue});return}let Ae=x.fetchers.get(q);ge(q,sCe(Pe,Ae),{flushSync:Ue});let Te=new AbortController,et=vy(n.history,X,Te.signal,Pe);L.set(q,Te);let qn=F,ze=await yy("action",et,fe,we,s,i,l,c.v7_relativeSplatPath);if(et.signal.aborted){L.get(q)===Te&&L.delete(q);return}if(c.v7_fetcherPersist&&te.has(q)){if(qf(ze)||cg(ze)){ge(q,ku(void 0));return}}else{if(qf(ze))if(L.delete(q),O>qn){ge(q,ku(void 0));return}else return j.add(q),ge(q,by(Pe)),ue(x,ze,{fetcherSubmission:Pe});if(cg(ze)){Ke(q,W,ze.error);return}}if(Vf(ze))throw ko(400,{type:"defer-action"});let kt=x.navigation.location||x.location,ar=vy(n.history,kt,Te.signal),vs=a||o,Kn=x.navigation.state!=="idle"?lg(vs,x.navigation.location,l):x.matches;We(Kn,"Didn't find any matches after fetcher action");let Pp=++F;z.set(q,Pp);let t2=by(Pe,ze.data);x.fetchers.set(q,t2);let[Dp,fu]=GV(n.history,x,Kn,Pe,kt,!1,T,R,A,te,K,j,vs,l,{[fe.route.id]:ze.data},void 0);fu.filter(mt=>mt.key!==q).forEach(mt=>{let ns=mt.key,z1=x.fetchers.get(ns),qSe=by(void 0,z1?z1.data:void 0);x.fetchers.set(ns,qSe),L.has(ns)&&wn(ns),mt.controller&&L.set(ns,mt.controller)}),ye({fetchers:new Map(x.fetchers)});let bf=()=>fu.forEach(mt=>wn(mt.key));Te.signal.addEventListener("abort",bf);let{results:n2,loaderResults:ay,fetcherResults:r2}=await oe(x.matches,Kn,Dp,fu,ar);if(Te.signal.aborted)return;Te.signal.removeEventListener("abort",bf),z.delete(q),L.delete(q),fu.forEach(mt=>L.delete(mt.key));let Np=tq(n2);if(Np){if(Np.idx>=Dp.length){let mt=fu[Np.idx-Dp.length].key;j.add(mt)}return ue(x,Np.result)}let{loaderData:L1,errors:lt}=XV(x,x.matches,Dp,ay,void 0,fu,r2,pe);if(x.fetchers.has(q)){let mt=ku(ze.data);x.fetchers.set(q,mt)}D1(Pp),x.navigation.state==="loading"&&Pp>O?(We($,"Expected pending action"),C&&C.abort(),Re(x.navigation.location,{matches:Kn,loaderData:L1,errors:lt,fetchers:new Map(x.fetchers)})):(ye({errors:lt,loaderData:ZV(x.loaderData,L1,Kn,lt),fetchers:new Map(x.fetchers)}),T=!1)}async function J(q,W,X,fe,we,Ue,Pe){let Ae=x.fetchers.get(q);ge(q,by(Pe,Ae?Ae.data:void 0),{flushSync:Ue});let Te=new AbortController,et=vy(n.history,X,Te.signal);L.set(q,Te);let qn=F,ze=await yy("loader",et,fe,we,s,i,l,c.v7_relativeSplatPath);if(Vf(ze)&&(ze=await Qre(ze,et.signal,!0)||ze),L.get(q)===Te&&L.delete(q),!et.signal.aborted){if(te.has(q)){ge(q,ku(void 0));return}if(qf(ze))if(O>qn){ge(q,ku(void 0));return}else{j.add(q),await ue(x,ze);return}if(cg(ze)){Ke(q,W,ze.error);return}We(!Vf(ze),"Unhandled fetcher deferred data"),ge(q,ku(ze.data))}}async function ue(q,W,X){let{submission:fe,fetcherSubmission:we,replace:Ue}=X===void 0?{}:X;W.revalidate&&(T=!0);let Pe=Jb(q.location,W.location,{_isRedirect:!0});if(We(Pe,"Expected a location on the redirect navigation"),t){let kt=!1;if(W.reloadDocument)kt=!0;else if(Hre.test(W.location)){const ar=n.history.createURL(W.location);kt=ar.origin!==e.location.origin||y0(ar.pathname,l)==null}if(kt){Ue?e.location.replace(W.location):e.location.assign(W.location);return}}C=null;let Ae=Ue===!0?$n.Replace:$n.Push,{formMethod:Te,formAction:et,formEncType:qn}=q.navigation;!fe&&!we&&Te&&et&&qn&&(fe=rq(q.navigation));let ze=fe||we;if(HEe.has(W.status)&&ze&&aa(ze.formMethod))await Ft(Ae,Pe,{submission:jt({},ze,{formAction:W.location}),preventScrollReset:E});else{let kt=O2(Pe,fe);await Ft(Ae,Pe,{overrideNavigation:kt,fetcherSubmission:we,preventScrollReset:E})}}async function oe(q,W,X,fe,we){let Ue=await Promise.all([...X.map(Te=>yy("loader",we,Te,W,s,i,l,c.v7_relativeSplatPath)),...fe.map(Te=>Te.matches&&Te.match&&Te.controller?yy("loader",vy(n.history,Te.path,Te.controller.signal),Te.match,Te.matches,s,i,l,c.v7_relativeSplatPath):{type:mn.error,error:ko(404,{pathname:Te.path})})]),Pe=Ue.slice(0,X.length),Ae=Ue.slice(X.length);return await Promise.all([nq(q,X,Pe,Pe.map(()=>we.signal),!1,x.loaderData),nq(q,fe.map(Te=>Te.match),Ae,fe.map(Te=>Te.controller?Te.controller.signal:null),!0)]),{results:Ue,loaderResults:Pe,fetcherResults:Ae}}function ie(){T=!0,R.push(...e2()),K.forEach((q,W)=>{L.has(W)&&(A.push(W),wn(W))})}function ge(q,W,X){X===void 0&&(X={}),x.fetchers.set(q,W),ye({fetchers:new Map(x.fetchers)},{flushSync:(X&&X.flushSync)===!0})}function Ke(q,W,X,fe){fe===void 0&&(fe={});let we=Mv(x.matches,W);Sn(q),ye({errors:{[we.route.id]:X},fetchers:new Map(x.fetchers)},{flushSync:(fe&&fe.flushSync)===!0})}function It(q){return c.v7_fetcherPersist&&(Z.set(q,(Z.get(q)||0)+1),te.has(q)&&te.delete(q)),x.fetchers.get(q)||WEe}function Sn(q){let W=x.fetchers.get(q);L.has(q)&&!(W&&W.state==="loading"&&z.has(q))&&wn(q),K.delete(q),z.delete(q),j.delete(q),te.delete(q),x.fetchers.delete(q)}function Xo(q){if(c.v7_fetcherPersist){let W=(Z.get(q)||0)-1;W<=0?(Z.delete(q),te.add(q)):Z.set(q,W)}else Sn(q);ye({fetchers:new Map(x.fetchers)})}function wn(q){let W=L.get(q);We(W,"Expected fetch controller: "+q),W.abort(),L.delete(q)}function Rp(q){for(let W of q){let X=It(W),fe=ku(X.data);x.fetchers.set(W,fe)}}function Op(){let q=[],W=!1;for(let X of j){let fe=x.fetchers.get(X);We(fe,"Expected fetcher: "+X),fe.state==="loading"&&(j.delete(X),q.push(X),W=!0)}return Rp(q),W}function D1(q){let W=[];for(let[X,fe]of z)if(fe<q){let we=x.fetchers.get(X);We(we,"Expected fetcher: "+X),we.state==="loading"&&(wn(X),z.delete(X),W.push(X))}return Rp(W),W.length>0}function N1(q,W){let X=x.blockers.get(q)||gy;return he.get(q)!==W&&he.set(q,W),X}function F1(q){x.blockers.delete(q),he.delete(q)}function vf(q,W){let X=x.blockers.get(q)||gy;We(X.state==="unblocked"&&W.state==="blocked"||X.state==="blocked"&&W.state==="blocked"||X.state==="blocked"&&W.state==="proceeding"||X.state==="blocked"&&W.state==="unblocked"||X.state==="proceeding"&&W.state==="unblocked","Invalid blocker state transition: "+X.state+" -> "+W.state);let fe=new Map(x.blockers);fe.set(q,W),ye({blockers:fe})}function Aj(q){let{currentLocation:W,nextLocation:X,historyAction:fe}=q;if(he.size===0)return;he.size>1&&Wg(!1,"A router only supports one blocker at a time");let we=Array.from(he.entries()),[Ue,Pe]=we[we.length-1],Ae=x.blockers.get(Ue);if(!(Ae&&Ae.state==="proceeding")&&Pe({currentLocation:W,nextLocation:X,historyAction:fe}))return Ue}function e2(q){let W=[];return pe.forEach((X,fe)=>{(!q||q(fe))&&(X.cancel(),W.push(fe),pe.delete(fe))}),W}function BSe(q,W,X){if(f=q,p=W,h=X||null,!m&&x.navigation===R2){m=!0;let fe=Rj(x.location,x.matches);fe!=null&&ye({restoreScrollPosition:fe})}return()=>{f=null,p=null,h=null}}function Ij(q,W){return h&&h(q,W.map(fe=>Bre(fe,x.loaderData)))||q.key}function jSe(q,W){if(f&&p){let X=Ij(q,W);f[X]=p()}}function Rj(q,W){if(f){let X=Ij(q,W),fe=f[X];if(typeof fe=="number")return fe}return null}function VSe(q){s={},a=ON(q,i,void 0,s)}return w={get basename(){return l},get future(){return c},get state(){return x},get routes(){return o},get window(){return e},initialize:ke,subscribe:be,enableScrollRestoration:BSe,navigate:ft,fetch:B,revalidate:nt,createHref:q=>n.history.createHref(q),encodeLocation:q=>n.history.encodeLocation(q),getFetcher:It,deleteFetcher:Xo,dispose:xe,getBlocker:N1,deleteBlocker:F1,_internalFetchControllers:L,_internalActiveDeferreds:pe,_internalSetRoutes:VSe},w}function QEe(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function PN(n,e,t,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let u=F4(i||".",N4(l,s),y0(n.pathname,t)||n.pathname,a==="path");return i==null&&(u.search=n.search,u.hash=n.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!z4(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Fc([t,u.pathname])),qh(u)}function WV(n,e,t,r){if(!r||!QEe(r))return{path:t};if(r.formMethod&&!rCe(r.formMethod))return{path:t,error:ko(405,{method:r.formMethod})};let i=()=>({path:t,error:ko(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=n?s.toUpperCase():s.toLowerCase(),a=Jre(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!aa(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,p)=>{let[m,g]=p;return""+h+m+"="+g+`
`},""):String(r.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!aa(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}We(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=DN(r.formData),c=r.formData;else if(r.body instanceof FormData)l=DN(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=YV(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=YV(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(aa(u.formMethod))return{path:t,submission:u};let d=ru(t);return e&&d.search&&z4(d.search)&&l.append("index",""),d.search="?"+l,{path:qh(d),submission:u}}function YEe(n,e){let t=n;if(e){let r=n.findIndex(i=>i.route.id===e);r>=0&&(t=n.slice(0,r))}return t}function GV(n,e,t,r,i,s,o,a,l,c,u,d,f,h,p,m){let g=m?Object.values(m)[0]:p?Object.values(p)[0]:void 0,y=n.createURL(e.location),k=n.createURL(i),b=m?Object.keys(m)[0]:void 0,w=YEe(t,b).filter(($,E)=>{let{route:C}=$;if(C.lazy)return!0;if(C.loader==null)return!1;if(s)return C.loader.hydrate?!0:e.loaderData[C.id]===void 0&&(!e.errors||e.errors[C.id]===void 0);if(XEe(e.loaderData,e.matches[E],$)||a.some(I=>I===$.route.id))return!0;let M=e.matches[E],P=$;return JV($,jt({currentUrl:y,currentParams:M.params,nextUrl:k,nextParams:P.params},r,{actionResult:g,defaultShouldRevalidate:o||y.pathname+y.search===k.pathname+k.search||y.search!==k.search||Gre(M,P)}))}),x=[];return u.forEach(($,E)=>{if(s||!t.some(N=>N.route.id===$.routeId)||c.has(E))return;let C=lg(f,$.path,h);if(!C){x.push({key:E,routeId:$.routeId,path:$.path,matches:null,match:null,controller:null});return}let M=e.fetchers.get(E),P=NN(C,$.path),I=!1;d.has(E)?I=!1:l.includes(E)?I=!0:M&&M.state!=="idle"&&M.data===void 0?I=o:I=JV(P,jt({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:k,nextParams:t[t.length-1].params},r,{actionResult:g,defaultShouldRevalidate:o})),I&&x.push({key:E,routeId:$.routeId,path:$.path,matches:C,match:P,controller:new AbortController})}),[w,x]}function XEe(n,e,t){let r=!e||t.route.id!==e.route.id,i=n[t.route.id]===void 0;return r||i}function Gre(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function JV(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}async function QV(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let i=t[n.id];We(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Wg(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!SEe.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,jt({},e(i),{lazy:void 0}))}async function yy(n,e,t,r,i,s,o,a,l){l===void 0&&(l={});let c,u,d,f=m=>{let g,y=new Promise((k,b)=>g=b);return d=()=>g(),e.signal.addEventListener("abort",d),Promise.race([m({request:e,params:t.params,context:l.requestContext}),y])};try{let m=t.route[n];if(t.route.lazy)if(m){let g,y=await Promise.all([f(m).catch(k=>{g=k}),QV(t.route,s,i)]);if(g)throw g;u=y[0]}else if(await QV(t.route,s,i),m=t.route[n],m)u=await f(m);else if(n==="action"){let g=new URL(e.url),y=g.pathname+g.search;throw ko(405,{method:e.method,pathname:y,routeId:t.route.id})}else return{type:mn.data,data:void 0};else if(m)u=await f(m);else{let g=new URL(e.url),y=g.pathname+g.search;throw ko(404,{pathname:y})}We(u!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(m){c=mn.error,u=m}finally{d&&e.signal.removeEventListener("abort",d)}if(nCe(u)){let m=u.status;if(UEe.has(m)){let y=u.headers.get("Location");if(We(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!Hre.test(y))y=PN(new URL(e.url),r.slice(0,r.indexOf(t)+1),o,!0,y,a);else if(!l.isStaticRequest){let k=new URL(e.url),b=y.startsWith("//")?new URL(k.protocol+y):new URL(y),S=y0(b.pathname,o)!=null;b.origin===k.origin&&S&&(y=b.pathname+b.search+b.hash)}if(l.isStaticRequest)throw u.headers.set("Location",y),u;return{type:mn.redirect,status:m,location:y,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:c===mn.error?mn.error:mn.data,response:u};let g;try{let y=u.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?u.body==null?g=null:g=await u.json():g=await u.text()}catch(y){return{type:mn.error,error:y}}return c===mn.error?{type:c,error:new L4(m,u.statusText,g),headers:u.headers}:{type:mn.data,data:g,statusCode:u.status,headers:u.headers}}if(c===mn.error)return{type:c,error:u};if(tCe(u)){var h,p;return{type:mn.deferred,deferredData:u,statusCode:(h=u.init)==null?void 0:h.status,headers:((p=u.init)==null?void 0:p.headers)&&new Headers(u.init.headers)}}return{type:mn.data,data:u}}function vy(n,e,t,r){let i=n.createURL(Jre(e)).toString(),s={signal:t};if(r&&aa(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=DN(r.formData):s.body=r.formData}return new Request(i,s)}function DN(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function YV(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function ZEe(n,e,t,r,i){let s={},o=null,a,l=!1,c={};return t.forEach((u,d)=>{let f=e[d].route.id;if(We(!qf(u),"Cannot handle redirect results in processLoaderData"),cg(u)){let h=Mv(n,f),p=u.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[h.route.id]==null&&(o[h.route.id]=p),s[f]=void 0,l||(l=!0,a=Kre(u.error)?u.error.status:500),u.headers&&(c[f]=u.headers)}else Vf(u)?(i.set(f,u.deferredData),s[f]=u.deferredData.data):s[f]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[f]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function XV(n,e,t,r,i,s,o,a){let{loaderData:l,errors:c}=ZEe(e,t,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:f,controller:h}=s[u];We(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(h&&h.signal.aborted))if(cg(p)){let m=Mv(n.matches,f==null?void 0:f.route.id);c&&c[m.route.id]||(c=jt({},c,{[m.route.id]:p.error})),n.fetchers.delete(d)}else if(qf(p))We(!1,"Unhandled fetcher revalidation redirect");else if(Vf(p))We(!1,"Unhandled fetcher deferred data");else{let m=ku(p.data);n.fetchers.set(d,m)}}return{loaderData:l,errors:c}}function ZV(n,e,t,r){let i=jt({},e);for(let s of t){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):n[o]!==void 0&&s.route.loader&&(i[o]=n[o]),r&&r.hasOwnProperty(o))break}return i}function Mv(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function eq(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ko(n,e){let{pathname:t,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return n===400?(o="Bad Request",i&&t&&r?a="You made a "+i+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):n===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+t+'"'):n===404?(o="Not Found",a='No route matches URL "'+t+'"'):n===405&&(o="Method Not Allowed",i&&t&&r?a="You made a "+i.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new L4(n||500,o,new Error(a),!0)}function tq(n){for(let e=n.length-1;e>=0;e--){let t=n[e];if(qf(t))return{result:t,idx:e}}}function Jre(n){let e=typeof n=="string"?ru(n):n;return qh(jt({},e,{hash:""}))}function eCe(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function Vf(n){return n.type===mn.deferred}function cg(n){return n.type===mn.error}function qf(n){return(n&&n.type)===mn.redirect}function tCe(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function nCe(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function rCe(n){return KEe.has(n.toLowerCase())}function aa(n){return VEe.has(n.toLowerCase())}async function nq(n,e,t,r,i,s){for(let o=0;o<t.length;o++){let a=t[o],l=e[o];if(!l)continue;let c=n.find(d=>d.route.id===l.route.id),u=c!=null&&!Gre(c,l)&&(s&&s[l.route.id])!==void 0;if(Vf(a)&&(i||u)){let d=r[o];We(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await Qre(a,d,i).then(f=>{f&&(t[o]=f||t[o])})}}}async function Qre(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:mn.data,data:n.deferredData.unwrappedData}}catch(i){return{type:mn.error,error:i}}return{type:mn.data,data:n.deferredData.data}}}function z4(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function NN(n,e){let t=typeof e=="string"?ru(e).search:e.search;if(n[n.length-1].route.index&&z4(t||""))return n[n.length-1];let r=qre(n);return r[r.length-1]}function rq(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:s,json:o}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:o,text:void 0}}}function O2(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function iCe(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function by(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function sCe(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ku(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function oCe(n,e){try{let t=n.sessionStorage.getItem(Wre);if(t){let r=JSON.parse(t);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function aCe(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(Wre,JSON.stringify(t))}catch(r){Wg(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qb(){return Qb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qb.apply(this,arguments)}const c_=v.createContext(null),Yre=v.createContext(null),sp=v.createContext(null),u_=v.createContext(null),iu=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Xre=v.createContext(null);function lCe(n,e){let{relative:t}=e===void 0?{}:e;qk()||We(!1);let{basename:r,navigator:i}=v.useContext(sp),{hash:s,pathname:o,search:a}=rie(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:Fc([r,o])),i.createHref({pathname:l,search:a,hash:s})}function qk(){return v.useContext(u_)!=null}function Kk(){return qk()||We(!1),v.useContext(u_).location}function Zre(n){v.useContext(sp).static||v.useLayoutEffect(n)}function eie(){let{isDataRoute:n}=v.useContext(iu);return n?xCe():cCe()}function cCe(){qk()||We(!1);let n=v.useContext(c_),{basename:e,future:t,navigator:r}=v.useContext(sp),{matches:i}=v.useContext(iu),{pathname:s}=Kk(),o=JSON.stringify(N4(i,t.v7_relativeSplatPath)),a=v.useRef(!1);return Zre(()=>{a.current=!0}),v.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=F4(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Fc([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,n])}const tie=v.createContext(null);function P_n(){return v.useContext(tie)}function uCe(n){let e=v.useContext(iu).outlet;return e&&v.createElement(tie.Provider,{value:n},e)}function nie(){let{matches:n}=v.useContext(iu),e=n[n.length-1];return e?e.params:{}}function rie(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=v.useContext(sp),{matches:i}=v.useContext(iu),{pathname:s}=Kk(),o=JSON.stringify(N4(i,r.v7_relativeSplatPath));return v.useMemo(()=>F4(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function dCe(n,e,t,r){qk()||We(!1);let{navigator:i}=v.useContext(sp),{matches:s}=v.useContext(iu),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Kk(),u;if(e){var d;let g=typeof e=="string"?ru(e):e;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||We(!1),u=g}else u=c;let f=u.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=lg(n,{pathname:h}),m=gCe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Fc([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Fc([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,t,r);return e&&m?v.createElement(u_.Provider,{value:{location:Qb({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:$n.Pop}},m):m}function fCe(){let n=kCe(),e=Kre(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),t?v.createElement("pre",{style:i},t):null,s)}const hCe=v.createElement(fCe,null);class pCe extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?v.createElement(iu.Provider,{value:this.props.routeContext},v.createElement(Xre.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mCe(n){let{routeContext:e,match:t,children:r}=n,i=v.useContext(c_);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(iu.Provider,{value:e},r)}function gCe(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||We(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=t,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,p=!1,m=null,g=null;t&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||hCe,l&&(c<0&&f===0?(SCe("route-fallback",!1),p=!0,g=null):c===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),k=()=>{let b;return h?b=m:p?b=g:d.route.Component?b=v.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,v.createElement(mCe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:b})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?v.createElement(pCe,{location:t.location,revalidation:t.revalidation,component:m,error:h,children:k(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):k()},null)}var iie=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(iie||{}),Yb=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Yb||{});function yCe(n){let e=v.useContext(c_);return e||We(!1),e}function sie(n){let e=v.useContext(Yre);return e||We(!1),e}function vCe(n){let e=v.useContext(iu);return e||We(!1),e}function oie(n){let e=vCe(),t=e.matches[e.matches.length-1];return t.route.id||We(!1),t.route.id}function bCe(){let{matches:n,loaderData:e}=sie(Yb.UseMatches);return v.useMemo(()=>n.map(t=>Bre(t,e)),[n,e])}function kCe(){var n;let e=v.useContext(Xre),t=sie(Yb.UseRouteError),r=oie(Yb.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function xCe(){let{router:n}=yCe(iie.UseNavigateStable),e=oie(Yb.UseNavigateStable),t=v.useRef(!1);return Zre(()=>{t.current=!0}),v.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Qb({fromRouteId:e},s)))},[n,e])}const iq={};function SCe(n,e,t){!e&&!iq[n]&&(iq[n]=!0)}function sq(n){return uCe(n.context)}function wCe(n){let{basename:e="/",children:t=null,location:r,navigationType:i=$n.Pop,navigator:s,static:o=!1,future:a}=n;qk()&&We(!1);let l=e.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:l,navigator:s,static:o,future:Qb({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ru(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=v.useMemo(()=>{let g=y0(u,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:i}},[l,u,d,f,h,p,i]);return m==null?null:v.createElement(sp.Provider,{value:c},v.createElement(u_.Provider,{children:t,value:m}))}new Promise(()=>{});function $Ce(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:v.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:v.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:v.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xb(){return Xb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xb.apply(this,arguments)}function ECe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function CCe(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function MCe(n,e){return n.button===0&&(!e||e==="_self")&&!CCe(n)}const TCe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_Ce="6";try{window.__reactRouterVersion=_Ce}catch{}function ACe(n,e){return JEe({basename:e==null?void 0:e.basename,future:Xb({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:bEe({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||ICe(),routes:n,mapRouteProperties:$Ce,window:e==null?void 0:e.window}).initialize()}function ICe(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Xb({},e,{errors:RCe(e.errors)})),e}function RCe(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new L4(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",t[r]=o}catch{}}if(t[r]==null){let s=new Error(i.message);s.stack="",t[r]=s}}else t[r]=i;return t}const OCe=v.createContext({isTransitioning:!1}),PCe=v.createContext(new Map),DCe="startTransition",oq=KL[DCe],NCe="flushSync",aq=vEe[NCe];function FCe(n){oq?oq(n):n()}function ky(n){aq?aq(n):n()}class LCe{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}}function zCe(n){let{fallbackElement:e,router:t,future:r}=n,[i,s]=v.useState(t.state),[o,a]=v.useState(),[l,c]=v.useState({isTransitioning:!1}),[u,d]=v.useState(),[f,h]=v.useState(),[p,m]=v.useState(),g=v.useRef(new Map),{v7_startTransition:y}=r||{},k=v.useCallback($=>{y?FCe($):$()},[y]),b=v.useCallback(($,E)=>{let{deletedFetchers:C,unstable_flushSync:M,unstable_viewTransitionOpts:P}=E;C.forEach(N=>g.current.delete(N)),$.fetchers.forEach((N,T)=>{N.data!==void 0&&g.current.set(T,N.data)});let I=t.window==null||typeof t.window.document.startViewTransition!="function";if(!P||I){M?ky(()=>s($)):k(()=>s($));return}if(M){ky(()=>{f&&(u&&u.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let N=t.window.document.startViewTransition(()=>{ky(()=>s($))});N.finished.finally(()=>{ky(()=>{d(void 0),h(void 0),a(void 0),c({isTransitioning:!1})})}),ky(()=>h(N));return}f?(u&&u.resolve(),f.skipTransition(),m({state:$,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(a($),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[t.window,f,u,g,k]);v.useLayoutEffect(()=>t.subscribe(b),[t,b]),v.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new LCe)},[l]),v.useEffect(()=>{if(u&&o&&t.window){let $=o,E=u.promise,C=t.window.document.startViewTransition(async()=>{k(()=>s($)),await E});C.finished.finally(()=>{d(void 0),h(void 0),a(void 0),c({isTransitioning:!1})}),h(C)}},[k,o,u,t.window]),v.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,f,i.location,o]),v.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),c({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[l.isTransitioning,p]),v.useEffect(()=>{},[]);let S=v.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:$=>t.navigate($),push:($,E,C)=>t.navigate($,{state:E,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:($,E,C)=>t.navigate($,{replace:!0,state:E,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[t]),w=t.basename||"/",x=v.useMemo(()=>({router:t,navigator:S,static:!1,basename:w}),[t,S,w]);return v.createElement(v.Fragment,null,v.createElement(c_.Provider,{value:x},v.createElement(Yre.Provider,{value:i},v.createElement(PCe.Provider,{value:g.current},v.createElement(OCe.Provider,{value:l},v.createElement(wCe,{basename:w,location:i.location,navigationType:i.historyAction,navigator:S,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},i.initialized||t.future.v7_partialHydration?v.createElement(BCe,{routes:t.routes,future:t.future,state:i}):e))))),null)}function BCe(n){let{routes:e,future:t,state:r}=n;return dCe(e,void 0,r,t)}const jCe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VCe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B4=v.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,f=ECe(e,TCe),{basename:h}=v.useContext(sp),p,m=!1;if(typeof c=="string"&&VCe.test(c)&&(p=c,jCe))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),w=y0(S.pathname,h);S.origin===b.origin&&w!=null?c=w+S.search+S.hash:m=!0}catch{}let g=lCe(c,{relative:i}),y=qCe(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function k(b){r&&r(b),b.defaultPrevented||y(b)}return v.createElement("a",Xb({},f,{href:p||g,onClick:m||s?r:k,ref:t,target:l}))});var lq;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(lq||(lq={}));var cq;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(cq||(cq={}));function qCe(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=eie(),c=Kk(),u=rie(n,{relative:o});return v.useCallback(d=>{if(MCe(d,t)){d.preventDefault();let f=r!==void 0?r:qh(c)===qh(u);l(n,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,t,n,s,o,a])}var KCe={ENABLE_CLIENT_EDGES:!1,ENABLE_VARIABLE_CONNECTION_KEY:!1,ENABLE_PARTIAL_RENDERING_DEFAULT:!0,ENABLE_REACT_FLIGHT_COMPONENT_FIELD:!1,ENABLE_RELAY_RESOLVERS:!1,ENABLE_GETFRAGMENTIDENTIFIER_OPTIMIZATION:!1,ENABLE_FRIENDLY_QUERY_NAME_GQL_URL:!1,ENABLE_LOAD_QUERY_REQUEST_DEDUPING:!0,ENABLE_DO_NOT_WRAP_LIVE_QUERY:!1,ENABLE_NOTIFY_SUBSCRIPTION:!1,BATCH_ASYNC_MODULE_UPDATES_FN:null,ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT:!1,MAX_DATA_ID_LENGTH:null,STRING_INTERN_LEVEL:0,USE_REACT_CACHE:!1,USE_REACT_CACHE_LEGACY_TIMEOUTS:!0},lo=KCe,uq=new Map,UCe=1,HCe=WCe(),aie="	",dq="\v";function WCe(){for(var n=new Set,e=0;e<10;++e)n.add(e.toString());return n}function GCe(n){return n[0]===aie&&HCe.has(n[1])||n[0]===dq?dq+n:n}function JCe(n,e){if(e==null||n.length<e)return GCe(n);var t=uq.get(n);return t!=null||(t=aie+UCe++,uq.set(n,t)),t}var lie={intern:JCe},fq=lo,QCe=lie,YCe=QCe.intern,Zb="client:";function XCe(n,e,t){var r=fq.STRING_INTERN_LEVEL<=0?n:YCe(n,fq.MAX_DATA_ID_LENGTH),i=r+":"+e;return t!=null&&(i+=":"+t),i.indexOf(Zb)!==0&&(i=Zb+i),i}function ZCe(n){return n.indexOf(Zb)===0}var eMe=0;function tMe(){return"".concat(Zb,"local:").concat(eMe++)}function nMe(n,e){return"".concat(Zb).concat(n,":").concat(e)}var el={generateClientID:XCe,generateClientObjectClientID:nMe,generateUniqueClientID:tMe,isClientID:ZCe},cie={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(cie);var bt=cie.exports,uie={exports:{}},die={exports:{}},fie={exports:{}};(function(n){function e(t,r){(r==null||r>t.length)&&(r=t.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=t[i];return s}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(fie);var hie=fie.exports;(function(n){var e=hie;function t(r){if(Array.isArray(r))return e(r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(die);var rMe=die.exports,pie={exports:{}};(function(n){function e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(pie);var iMe=pie.exports,mie={exports:{}};(function(n){var e=hie;function t(r,i){if(r){if(typeof r=="string")return e(r,i);var s=Object.prototype.toString.call(r).slice(8,-1);if(s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set")return Array.from(r);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return e(r,i)}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(mie);var gie=mie.exports,yie={exports:{}};(function(n){function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(yie);var sMe=yie.exports;(function(n){var e=rMe,t=iMe,r=gie,i=sMe;function s(o){return e(o)||t(o)||r(o)||i()}n.exports=s,n.exports.__esModule=!0,n.exports.default=n.exports})(uie);var Uk=uie.exports,vie={DEFAULT_HANDLE_KEY:""},oMe=function(n,e,t,r,i,s,o,a){if(!n){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[t,r,i,s,o,a],u=0;l=new Error(e.replace(/%s/g,function(){return c[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},$e=oMe,aMe=vie,lMe=aMe.DEFAULT_HANDLE_KEY,cMe=$e;function uMe(n,e,t){return e&&e!==lMe?"__".concat(e,"_").concat(n):(t==null&&cMe(!1),"__".concat(t,"_").concat(n))}var j4=uMe,dMe={ACTOR_CHANGE:"ActorChange",CONDITION:"Condition",CLIENT_COMPONENT:"ClientComponent",CLIENT_EDGE_TO_SERVER_OBJECT:"ClientEdgeToServerObject",CLIENT_EDGE_TO_CLIENT_OBJECT:"ClientEdgeToClientObject",CLIENT_EXTENSION:"ClientExtension",DEFER:"Defer",CONNECTION:"Connection",FLIGHT_FIELD:"FlightField",FRAGMENT:"Fragment",FRAGMENT_SPREAD:"FragmentSpread",INLINE_DATA_FRAGMENT_SPREAD:"InlineDataFragmentSpread",INLINE_DATA_FRAGMENT:"InlineDataFragment",INLINE_FRAGMENT:"InlineFragment",LINKED_FIELD:"LinkedField",LINKED_HANDLE:"LinkedHandle",LITERAL:"Literal",LIST_VALUE:"ListValue",LOCAL_ARGUMENT:"LocalArgument",MODULE_IMPORT:"ModuleImport",ALIASED_FRAGMENT_SPREAD:"AliasedFragmentSpread",ALIASED_INLINE_FRAGMENT_SPREAD:"AliasedInlineFragmentSpread",RELAY_RESOLVER:"RelayResolver",RELAY_LIVE_RESOLVER:"RelayLiveResolver",REQUIRED_FIELD:"RequiredField",OBJECT_VALUE:"ObjectValue",OPERATION:"Operation",REQUEST:"Request",ROOT_ARGUMENT:"RootArgument",SCALAR_FIELD:"ScalarField",SCALAR_HANDLE:"ScalarHandle",SPLIT_OPERATION:"SplitOperation",STREAM:"Stream",TYPE_DISCRIMINATOR:"TypeDiscriminator",UPDATABLE_QUERY:"UpdatableQuery",VARIABLE:"Variable"},co=dMe;function FN(n){if(!n||typeof n!="object")return n;if(Array.isArray(n))return n.map(FN);for(var e=Object.keys(n).sort(),t={},r=0;r<e.length;r++)t[e[r]]=FN(n[e[r]]);return t}var v0=FN,fMe=bt.default,hMe=fMe(Uk),pMe=j4,d_=co,bie=v0,mMe=$e,gMe=d_.VARIABLE,yMe=d_.LITERAL,vMe=d_.OBJECT_VALUE,bMe=d_.LIST_VALUE,kMe="__module_component_",xMe="__module_operation_";function U$(n,e){if(n.kind===gMe)return CMe(n.variableName,e);if(n.kind===yMe)return n.value;if(n.kind===vMe){var t={};return n.fields.forEach(function(i){t[i.name]=U$(i,e)}),t}else if(n.kind===bMe){var r=[];return n.items.forEach(function(i){i!=null&&r.push(U$(i,e))}),r}}function V4(n,e){var t={};return n.forEach(function(r){t[r.name]=U$(r,e)}),t}function SMe(n,e){var t=n.dynamicKey,r=n.handle,i=n.key,s=n.name,o=n.args,a=n.filters,l=pMe(r,i,s),c=null;return o&&a&&o.length!==0&&a.length!==0&&(c=o.filter(function(u){return a.indexOf(u.name)>-1})),t&&(c=c!=null?[t].concat((0,hMe.default)(c)):[t]),c===null?l:f_(l,V4(c,e))}function wMe(n,e){if(n.storageKey)return n.storageKey;var t=$Me(n),r=n.name;return t&&t.length!==0?f_(r,V4(t,e)):r}function $Me(n){if(n.kind==="RelayResolver"||n.kind==="RelayLiveResolver"){var e;if(n.args==null){var t;return(t=n.fragment)===null||t===void 0?void 0:t.args}return((e=n.fragment)===null||e===void 0?void 0:e.args)==null?n.args:n.args.concat(n.fragment.args)}var r=typeof n.args>"u"?void 0:n.args;return r}function EMe(n,e){return f_(n,bie(e))}function f_(n,e){if(!e)return n;var t=[];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i!=null){var s;t.push(r+":"+((s=JSON.stringify(i))!==null&&s!==void 0?s:"undefined"))}}return t.length===0?n:n+"(".concat(t.join(","),")")}function CMe(n,e){return e.hasOwnProperty(n)||mMe(!1),bie(e[n])}function MMe(n){return"".concat(kMe).concat(n)}function TMe(n){return"".concat(xMe).concat(n)}var _Me={ACTOR_IDENTIFIER_KEY:"__actorIdentifier",CLIENT_EDGE_TRAVERSAL_PATH:"__clientEdgeTraversalPath",FRAGMENTS_KEY:"__fragments",FRAGMENT_OWNER_KEY:"__fragmentOwner",FRAGMENT_PROP_NAME_KEY:"__fragmentPropName",MODULE_COMPONENT_KEY:"__module_component",ID_KEY:"__id",REF_KEY:"__ref",REFS_KEY:"__refs",ROOT_ID:"client:root",ROOT_TYPE:"__Root",TYPENAME_KEY:"__typename",INVALIDATED_AT_KEY:"__invalidated_at",IS_WITHIN_UNMATCHED_TYPE_REFINEMENT:"__isWithinUnmatchedTypeRefinement",RELAY_RESOLVER_VALUE_KEY:"__resolverValue",RELAY_RESOLVER_INVALIDATION_KEY:"__resolverValueMayBeInvalid",RELAY_RESOLVER_SNAPSHOT_KEY:"__resolverSnapshot",RELAY_RESOLVER_ERROR_KEY:"__resolverError",formatStorageKey:f_,getArgumentValue:U$,getArgumentValues:V4,getHandleStorageKey:SMe,getStorageKey:wMe,getStableStorageKey:EMe,getModuleComponentKey:MMe,getModuleOperationKey:TMe},Nt=_Me,AMe={after:!0,before:!0,find:!0,first:!0,last:!0,surrounds:!0},hq={CURSOR:"cursor",EDGES:"edges",END_CURSOR:"endCursor",HAS_NEXT_PAGE:"hasNextPage",HAS_PREV_PAGE:"hasPreviousPage",NODE:"node",PAGE_INFO_TYPE:"PageInfo",PAGE_INFO:"pageInfo",START_CURSOR:"startCursor"},IMe={inject:function(e){hq=e},get:function(){return hq},isConnectionCall:function(e){return AMe.hasOwnProperty(e.name)}},q4=IMe;function h_(n){return function(){return n}}var b0=function(){};b0.thatReturns=h_;b0.thatReturnsFalse=h_(!1);b0.thatReturnsTrue=h_(!0);b0.thatReturnsNull=h_(null);b0.thatReturnsThis=function(){return this};b0.thatReturnsArgument=function(n){return n};var RMe=el,ek=RMe.generateClientID,OMe=Nt,PMe=OMe.getStableStorageKey,kie=j4,op=q4,DMe=$e,xie="connection",LN="__connection_next_edge_index";function NMe(n,e){var t=n.get(e.dataID);if(t){var r=op.get(),i=r.EDGES,s=r.END_CURSOR,o=r.HAS_NEXT_PAGE,a=r.HAS_PREV_PAGE,l=r.PAGE_INFO,c=r.PAGE_INFO_TYPE,u=r.START_CURSOR,d=t.getLinkedRecord(e.fieldKey),f=d&&d.getLinkedRecord(l);if(!d){t.setValue(null,e.handleKey);return}var h=ek(t.getDataID(),e.handleKey),p=t.getLinkedRecord(e.handleKey),m=p??n.get(h),g=m&&m.getLinkedRecord(l);if(m){p==null&&t.setLinkedRecord(m,e.handleKey);var b=m,S=d.getLinkedRecords(i);S&&(S=S.map(function(N){return zN(n,b,N)}));var w=b.getLinkedRecords(i),x=b.getLinkedRecord(l);b.copyFieldsFrom(d),w&&b.setLinkedRecords(w,i),x&&b.setLinkedRecord(x,l);var $=[],E=e.args;if(w&&S)if(E.after!=null)if(g&&E.after===g.getValue(s)){var C=new Set;rx(w,$,C),rx(S,$,C)}else return;else if(E.before!=null)if(g&&E.before===g.getValue(u)){var M=new Set;rx(S,$,M),rx(w,$,M)}else return;else $=S;else S?$=S:$=w;if($!=null&&$!==w&&b.setLinkedRecords($,i),g&&f){if(E.after==null&&E.before==null)g.copyFieldsFrom(f);else if(E.before!=null||E.after==null&&E.last){g.setValue(!!f.getValue(a),a);var P=f.getValue(u);typeof P=="string"&&g.setValue(P,u)}else if(E.after!=null||E.before==null&&E.first){g.setValue(!!f.getValue(o),o);var I=f.getValue(s);typeof I=="string"&&g.setValue(I,s)}}}else{var y=n.create(h,d.getType());y.setValue(0,LN),y.copyFieldsFrom(d);var k=d.getLinkedRecords(i);k&&(k=k.map(function(N){return zN(n,y,N)}),y.setLinkedRecords(k,i)),t.setLinkedRecord(y,e.handleKey),g=n.create(ek(y.getDataID(),l),c),g.setValue(!1,o),g.setValue(!1,a),g.setValue(null,s),g.setValue(null,u),f&&g.copyFieldsFrom(f),y.setLinkedRecord(g,l)}}}function FMe(n,e,t){var r=kie(xie,e,null);return n.getLinkedRecord(r,t)}function LMe(n,e,t){var r=kie(xie,e,null),i=PMe(r,t);return ek(n,i)}function zMe(n,e,t){var r=op.get(),i=r.CURSOR,s=r.EDGES,o=n.getLinkedRecords(s);if(!o){n.setLinkedRecords([e],s);return}var a;if(t==null)a=o.concat(e);else{a=[];for(var l=!1,c=0;c<o.length;c++){var u=o[c];if(a.push(u),u!=null){var d=u.getValue(i);t===d&&(a.push(e),l=!0)}}l||a.push(e)}n.setLinkedRecords(a,s)}function BMe(n,e,t,r){var i=op.get(),s=i.NODE,o=ek(e.getDataID(),t.getDataID()),a=n.get(o);return a||(a=n.create(o,r)),a.setLinkedRecord(t,s),a.getValue("cursor")==null&&a.setValue(null,"cursor"),a}function jMe(n,e,t){var r=op.get(),i=r.CURSOR,s=r.EDGES,o=n.getLinkedRecords(s);if(!o){n.setLinkedRecords([e],s);return}var a;if(t==null)a=[e].concat(o);else{a=[];for(var l=!1,c=0;c<o.length;c++){var u=o[c];if(u!=null){var d=u.getValue(i);t===d&&(a.push(e),l=!0)}a.push(u)}l||a.unshift(e)}n.setLinkedRecords(a,s)}function VMe(n,e){var t=op.get(),r=t.EDGES,i=t.NODE,s=n.getLinkedRecords(r);if(s){for(var o,a=0;a<s.length;a++){var l=s[a],c=l&&l.getLinkedRecord(i);c!=null&&c.getDataID()===e?o===void 0&&(o=s.slice(0,a)):o!==void 0&&o.push(l)}o!==void 0&&n.setLinkedRecords(o,r)}}function zN(n,e,t){if(t==null)return t;var r=op.get(),i=r.EDGES,s=e.getValue(LN);typeof s!="number"&&DMe(!1);var o=ek(e.getDataID(),i,s),a=n.create(o,t.getType());return a.copyFieldsFrom(t),a.getValue("cursor")==null&&a.setValue(null,"cursor"),e.setValue(s+1,LN),a}function rx(n,e,t){for(var r=op.get(),i=r.NODE,s=0;s<n.length;s++){var o=n[s];if(o){var a=o.getLinkedRecord(i),l=a&&a.getDataID();if(l){if(t.has(l))continue;t.add(l)}e.push(o)}}}var p_={buildConnectionEdge:zN,createEdge:BMe,deleteNode:VMe,getConnection:FMe,getConnectionID:LMe,insertEdgeAfter:zMe,insertEdgeBefore:jMe,update:NMe},Sie={exports:{}};(function(n){var e=gie;function t(r,i){var s=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!s){if(Array.isArray(r)||(s=e(r))||i&&r&&typeof r.length=="number"){s&&(r=s);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,c=!1,u;return{s:function(){s=s.call(r)},n:function(){var f=s.next();return l=f.done,f},e:function(f){c=!0,u=f},f:function(){try{!l&&s.return!=null&&s.return()}finally{if(c)throw u}}}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Sie);var Gi=Sie.exports,qMe=bt.default,tk=qMe(Gi),ap=p_,wie=q4,Mg=$e;var KMe={update:function(e,t){var r=e.get(t.dataID);if(r!=null){var i=r.getValue(t.fieldKey);typeof i=="string"?e.delete(i):Array.isArray(i)&&i.forEach(function(s){typeof s=="string"&&e.delete(s)})}}},UMe={update:function(e,t){var r=e.get(t.dataID);if(r!=null){var i=t.handleArgs.connections;i==null&&Mg(!1);var s=r.getValue(t.fieldKey),o=Array.isArray(s)?s:[s];o.forEach(function(a){if(typeof a=="string"){var l=(0,tk.default)(i),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,d=e.get(u);d!=null&&ap.deleteNode(d,a)}}catch(f){l.e(f)}finally{l.f()}}})}}},HMe={update:$ie(ap.insertEdgeAfter)},WMe={update:$ie(ap.insertEdgeBefore)},GMe={update:Eie(ap.insertEdgeAfter)},JMe={update:Eie(ap.insertEdgeBefore)};function $ie(n){return function(e,t){var r,i=e.get(t.dataID);if(i!=null){var s=t.handleArgs.connections;s==null&&Mg(!1);var o,a;try{o=i.getLinkedRecord(t.fieldKey)}catch{}if(!o)try{a=i.getLinkedRecords(t.fieldKey)}catch{}if(!(o==null&&a==null)){var l=wie.get(),c=l.NODE,u=l.EDGES,d=(r=a)!==null&&r!==void 0?r:[o],f=(0,tk.default)(d),h;try{var p=function(){var k=h.value;if(k==null)return"continue";var b=k.getLinkedRecord("node");if(!b)return"continue";var S=b.getDataID(),w=(0,tk.default)(s),x;try{for(w.s();!(x=w.n()).done;){var $=x.value,E=e.get($);if(E!=null){var C=(m=E.getLinkedRecords(u))===null||m===void 0?void 0:m.some(function(P){var I;return(P==null||(I=P.getLinkedRecord(c))===null||I===void 0?void 0:I.getDataID())===S});if(!C){var M=ap.buildConnectionEdge(e,E,k);M==null&&Mg(!1),n(E,M)}}}}catch(P){w.e(P)}finally{w.f()}};for(f.s();!(h=f.n()).done;)var m,g=p()}catch(y){f.e(y)}finally{f.f()}}}}}function Eie(n){return function(e,t){var r,i=e.get(t.dataID);if(i!=null){var s=t.handleArgs,o=s.connections,a=s.edgeTypeName;o==null&&Mg(!1),a==null&&Mg(!1);var l,c;try{l=i.getLinkedRecord(t.fieldKey)}catch{}if(!l)try{c=i.getLinkedRecords(t.fieldKey)}catch{}if(!(l==null&&c==null)){var u=wie.get(),d=u.NODE,f=u.EDGES,h=(r=c)!==null&&r!==void 0?r:[l],p=(0,tk.default)(h),m;try{var g=function(){var S=m.value;if(S==null)return"continue";var w=S.getDataID(),x=(0,tk.default)(o),$;try{for(x.s();!($=x.n()).done;){var E=$.value,C=e.get(E);if(C!=null){var M=(y=C.getLinkedRecords(f))===null||y===void 0?void 0:y.some(function(I){var N;return(I==null||(N=I.getLinkedRecord(d))===null||N===void 0?void 0:N.getDataID())===w});if(!M){var P=ap.createEdge(e,C,S,a);P==null&&Mg(!1),n(C,P)}}}}catch(I){x.e(I)}finally{x.f()}};for(p.s();!(m=p.n()).done;)var y,k=g()}catch(b){p.e(b)}finally{p.f()}}}}}var Cie={AppendEdgeHandler:HMe,DeleteRecordHandler:KMe,PrependEdgeHandler:WMe,AppendNodeHandler:GMe,PrependNodeHandler:JMe,DeleteEdgeHandler:UMe},QMe=p_,Lp=Cie,YMe=$e;function XMe(n){switch(n){case"connection":return QMe;case"deleteRecord":return Lp.DeleteRecordHandler;case"deleteEdge":return Lp.DeleteEdgeHandler;case"appendEdge":return Lp.AppendEdgeHandler;case"prependEdge":return Lp.PrependEdgeHandler;case"appendNode":return Lp.AppendNodeHandler;case"prependNode":return Lp.PrependNodeHandler}YMe(!1)}var Mie=XMe,m_=co,Hk=$e;function ZMe(n){Hk(!1)}function su(n){var e=n;return typeof e=="function"?e=e():e.default&&(e=e.default),e}function Tie(n){var e=su(n);return typeof e=="object"&&e!==null&&e.kind===m_.FRAGMENT}function _ie(n){var e=su(n);return typeof e=="object"&&e!==null&&e.kind===m_.REQUEST}function Aie(n){var e=su(n);return typeof e=="object"&&e!==null&&e.kind===m_.UPDATABLE_QUERY}function Iie(n){var e=su(n);return typeof e=="object"&&e!==null&&e.kind===m_.INLINE_DATA_FRAGMENT}function K4(n){var e=su(n);return Tie(e)||Hk(!1),e}function eTe(n){var e,t=K4(n),r=(e=t.metadata)===null||e===void 0?void 0:e.refetch,i=r==null?void 0:r.connection;return r===null||typeof r!="object"||i===null||typeof i!="object"?null:t}function tTe(n){var e,t=K4(n),r=(e=t.metadata)===null||e===void 0?void 0:e.refetch;return r===null||typeof r!="object"?null:t}function nTe(n){var e=su(n);return _ie(e)||Hk(!1),e}function rTe(n){var e=su(n);return Aie(e)||Hk(!1),e}function iTe(n){var e=su(n);return Iie(e)||Hk(!1),e}var hc={getFragment:K4,getNode:su,getPaginationFragment:eTe,getRefetchableFragment:tTe,getRequest:nTe,getUpdatableQuery:rTe,getInlineDataFragment:iTe,graphql:ZMe,isFragment:Tie,isRequest:_ie,isUpdatableQuery:Aie,isInlineDataFragment:Iie};function sTe(n){return!!(n&&n["@@RelayModernEnvironment"])}var U4=sTe;function Rie(n){return Object.freeze(n),Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];t&&typeof t=="object"&&!Object.isFrozen(t)&&Rie(t)}),n}var Oie=Rie,oTe=v0,aTe=$e;function lTe(n,e){var t=n.cacheID!=null?n.cacheID:n.id;return t==null&&aTe(!1),t+JSON.stringify(oTe(e))}var Pie=lTe,Die={exports:{}},Nie={exports:{}},Fie={exports:{}},Lie={exports:{}};(function(n){function e(t){"@babel/helpers - typeof";return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Lie);var zie=Lie.exports,Bie={exports:{}};(function(n){var e=zie.default;function t(r,i){if(e(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var o=s.call(r,i||"default");if(e(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Bie);var cTe=Bie.exports;(function(n){var e=zie.default,t=cTe;function r(i){var s=t(i,"string");return e(s)==="symbol"?s:String(s)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(Fie);var uTe=Fie.exports;(function(n){var e=uTe;function t(r,i,s){return i=e(i),i in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Nie);var lp=Nie.exports;(function(n){var e=lp;function t(i,s){var o=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);s&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),o.push.apply(o,a)}return o}function r(i){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?t(Object(o),!0).forEach(function(a){e(i,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(o,a))})}return i}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(Die);var tl=Die.exports,dTe=bt.default,jie=dTe(tl),fTe=Nt,hTe=fTe.getArgumentValues,pTe=$e;function mTe(n,e,t){if(n.argumentDefinitions==null)return t;var r;return n.argumentDefinitions.forEach(function(i){if(!t.hasOwnProperty(i.name))switch(r=r||(0,jie.default)({},t),i.kind){case"LocalArgument":r[i.name]=i.defaultValue;break;case"RootArgument":if(!e.hasOwnProperty(i.name)){r[i.name]=void 0;break}r[i.name]=e[i.name];break;default:pTe(!1)}}),r||t}function gTe(n,e,t){var r={};return n.argumentDefinitions.forEach(function(i){var s=i.defaultValue;t[i.name]!=null&&(s=t[i.name]),r[i.name]=s}),e!=null&&Object.keys(e).forEach(function(i){r[i]=e[i].get()}),r}function yTe(n,e,t){if(e==null)return n;var r=(0,jie.default)({},n),i=t?hTe(t,n):{};return e.forEach(function(s){var o,a=(o=i[s.name])!==null&&o!==void 0?o:s.defaultValue;r[s.name]=a}),r}var Fd={getLocalVariables:yTe,getFragmentVariables:mTe,getOperationVariables:gTe},P2=[],D2=[];/**
 * Checks if two values are equal. Values may be primitives, arrays, or objects.
 * Returns true if both arguments have the same keys and values.
 *
 * @see http://underscorejs.org
 * @copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * @license MIT
 */function vTe(n,e){var t=P2.length?P2.pop():[],r=D2.length?D2.pop():[],i=BN(n,e,t,r);return t.length=0,r.length=0,P2.push(t),D2.push(r),i}function BN(n,e,t,r){if(n===e)return n!==0||1/n==1/e;if(n==null||e==null||typeof n!="object"||typeof e!="object")return!1;var i=Object.prototype.toString,s=i.call(n);if(s!=i.call(e))return!1;switch(s){case"[object String]":return n==String(e);case"[object Number]":return isNaN(n)||isNaN(e)?!1:n==Number(e);case"[object Date]":case"[object Boolean]":return+n==+e;case"[object RegExp]":return n.source==e.source&&n.global==e.global&&n.multiline==e.multiline&&n.ignoreCase==e.ignoreCase}for(var o=t.length;o--;)if(t[o]==n)return r[o]==e;t.push(n),r.push(e);var a=0;if(s==="[object Array]"){if(a=n.length,a!==e.length)return!1;for(;a--;)if(!BN(n[a],e[a],t,r))return!1}else{if(n.constructor!==e.constructor)return!1;if(n.hasOwnProperty("valueOf")&&e.hasOwnProperty("valueOf"))return n.valueOf()==e.valueOf();var l=Object.keys(n);if(l.length!=Object.keys(e).length)return!1;for(var c=0;c<l.length;c++)if(!BN(n[l[c]],e[l[c]],t,r))return!1}return t.pop(),r.pop(),!0}var nl=vTe,bTe=Fd,kTe=bTe.getFragmentVariables,Wk=Nt,xTe=Wk.CLIENT_EDGE_TRAVERSAL_PATH,STe=Wk.FRAGMENT_OWNER_KEY,wTe=Wk.FRAGMENTS_KEY,Vie=Wk.ID_KEY,$Te=Wk.IS_WITHIN_UNMATCHED_TYPE_REFINEMENT,ETe=nl,wd=$e;function g_(n,e){typeof e=="object"&&e!==null&&!Array.isArray(e)||wd(!1);var t=e[Vie],r=e[wTe],i=e[STe],s=e[$Te]===!0,o=e[xTe];if(typeof t=="string"&&typeof r=="object"&&r!==null&&typeof r[n.name]=="object"&&r[n.name]!==null&&typeof i=="object"&&i!==null&&(o==null||Array.isArray(o))){var a=i,l=o,c=r[n.name],u=kTe(n,a.variables,c);return Jie(n,t,u,a,s,l)}return null}function qie(n,e){var t=null;return e.forEach(function(r,i){var s=r!=null?g_(n,r):null;s!=null&&(t=t||[],t.push(s))}),t==null?null:{kind:"PluralReaderSelector",selectors:t}}function Kie(n,e){return e==null?e:n.metadata&&n.metadata.plural===!0?(Array.isArray(e)||wd(!1),qie(n,e)):(Array.isArray(e)&&wd(!1),g_(n,e))}function CTe(n,e){var t={};for(var r in n)if(n.hasOwnProperty(r)){var i=n[r],s=e[r];t[r]=Kie(i,s)}return t}function MTe(n,e){var t={};for(var r in n)if(n.hasOwnProperty(r)){var i=n[r],s=e[r];t[r]=Uie(i,s)}return t}function Uie(n,e){return e==null?e:n.metadata&&n.metadata.plural===!0?(Array.isArray(e)||wd(!1),TTe(n,e)):(Array.isArray(e)&&wd(!1),Hie(n,e))}function TTe(n,e){var t=null;return e.forEach(function(r){var i=r!=null?Hie(n,r):null;i!=null&&(t=t||[],t.push(i))}),t}function Hie(n,e){typeof e=="object"&&e!==null&&!Array.isArray(e)||wd(!1);var t=e[Vie];return typeof t=="string"?t:null}function _Te(n,e){var t={};for(var r in n)if(n.hasOwnProperty(r)){var i=n[r],s=e[r],o=Wie(i,s);Object.assign(t,o)}return t}function Wie(n,e){var t;return e==null?{}:((t=n.metadata)===null||t===void 0?void 0:t.plural)===!0?(Array.isArray(e)||wd(!1),Gie(n,e)):(Array.isArray(e)&&wd(!1),H4(n,e)||{})}function H4(n,e){var t=g_(n,e);return t?t.variables:null}function Gie(n,e){var t={};return e.forEach(function(r,i){if(r!=null){var s=H4(n,r);s!=null&&Object.assign(t,s)}}),t}function pq(n,e){return n.owner===e.owner&&n.dataID===e.dataID&&n.node===e.node&&ETe(n.variables,e.variables)}function ATe(n,e){return n===e?!0:n==null?e==null:e==null?n==null:n.kind==="SingularReaderSelector"&&e.kind==="SingularReaderSelector"?pq(n,e):n.kind==="PluralReaderSelector"&&e.kind==="PluralReaderSelector"?n.selectors.length===e.selectors.length&&n.selectors.every(function(t,r){return pq(t,e.selectors[r])}):!1}function Jie(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s=arguments.length>5?arguments[5]:void 0;return{kind:"SingularReaderSelector",dataID:e,isWithinUnmatchedTypeRefinement:i,clientEdgeTraversalPath:s??null,node:n,variables:t,owner:r}}function ITe(n,e,t){return{dataID:e,node:n,variables:t}}var ou={areEqualSelectors:ATe,createReaderSelector:Jie,createNormalizationSelector:ITe,getDataIDsFromFragment:Uie,getDataIDsFromObject:MTe,getSingularSelector:g_,getPluralSelector:qie,getSelector:Kie,getSelectorsFromObject:CTe,getVariablesFromSingularFragment:H4,getVariablesFromPluralFragment:Gie,getVariablesFromFragment:Wie,getVariablesFromObject:_Te},RTe=Pie,OTe=Fd,PTe=OTe.getOperationVariables,Qie=ou,DTe=Qie.createNormalizationSelector,NTe=Qie.createReaderSelector,FTe=Nt,LTe=FTe.ROOT_ID;function zTe(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:LTe,i=n.operation,s=PTe(i,n.params.providedVariables,e),o=Yie(n,s,t),a={fragment:NTe(n.fragment,r,s,o),request:o,root:DTe(i,r,s)};return a}function Yie(n,e,t){var r={identifier:RTe(n.params,e),node:n,variables:e,cacheConfig:t};return r}var cp={createOperationDescriptor:zTe,createRequestDescriptor:Yie},BTe=bt.default,W4=BTe(Gi),ug=p_;var jTe=Object.freeze({RANGE_ADD:"RANGE_ADD",RANGE_DELETE:"RANGE_DELETE",NODE_DELETE:"NODE_DELETE"}),VTe=Object.freeze({APPEND:"append",PREPEND:"prepend"});function qTe(n,e,t,r){var i=t?[t]:[],s=r?[r]:[];return n.forEach(function(o){switch(o.type){case"NODE_DELETE":var a=KTe(o,e);a&&(i.push(a),s.push(a));break;case"RANGE_ADD":var l=UTe(o,e);l&&(i.push(l),s.push(l));break;case"RANGE_DELETE":var c=HTe(o,e);c&&(i.push(c),s.push(c));break}}),{optimisticUpdater:function(a,l){i.forEach(function(c){c(a,l)})},updater:function(a,l){s.forEach(function(c){c(a,l)})}}}function KTe(n,e){var t=n.deletedIDFieldName,r=G4(e);return r?function(i,s){var o=i.getRootField(r);if(o){var a=o.getValue(t),l=Array.isArray(a)?a:[a];l.forEach(function(c){c&&typeof c=="string"&&i.delete(c)})}}:null}function UTe(n,e){var t=n.parentID,r=n.connectionInfo,i=n.edgeName;if(!t)return null;var s=G4(e);return!r||!s?null:function(o,a){var l=o.get(t);if(l){var c=o.getRootField(s);if(c){var u=c.getLinkedRecord(i),d=(0,W4.default)(r),f;try{for(d.s();!(f=d.n()).done;){var h=f.value;if(u){var p=ug.getConnection(l,h.key,h.filters);if(p){var m=ug.buildConnectionEdge(o,p,u);if(m)switch(h.rangeBehavior){case"append":ug.insertEdgeAfter(p,m);break;case"prepend":ug.insertEdgeBefore(p,m);break;default:break}}}}}catch(g){d.e(g)}finally{d.f()}}}}}function HTe(n,e){var t=n.parentID,r=n.connectionKeys,i=n.pathToConnection,s=n.deletedIDFieldName;if(!t)return null;var o=G4(e);return o?function(a,l){if(l){var c=[],u=l[o];if(u&&Array.isArray(s)){var d=(0,W4.default)(s),f;try{for(d.s();!(f=d.n()).done;){var h=f.value;u&&typeof u=="object"&&(u=u[h])}}catch(p){d.e(p)}finally{d.f()}Array.isArray(u)?u.forEach(function(p){p&&p.id&&typeof p=="object"&&typeof p.id=="string"&&c.push(p.id)}):u&&u.id&&typeof u.id=="string"&&c.push(u.id)}else u&&typeof s=="string"&&typeof u=="object"&&(u=u[s],typeof u=="string"?c.push(u):Array.isArray(u)&&u.forEach(function(p){typeof p=="string"&&c.push(p)}));WTe(t,r,i,a,c)}}:null}function WTe(n,e,t,r,i){var s=r.get(n);if(s&&!(t.length<2)){for(var o=s,a=1;a<t.length-1;a++)o&&(o=o.getLinkedRecord(t[a]));if(!(!e||!o)){var l=(0,W4.default)(e),c;try{var u=function(){var f=c.value,h=ug.getConnection(o,f.key,f.filters);h&&i.forEach(function(p){ug.deleteNode(h,p)})};for(l.s();!(c=l.n()).done;)u()}catch(d){l.e(d)}finally{l.f()}}}}function G4(n){return n.fragment.selections&&n.fragment.selections.length>0&&n.fragment.selections[0].kind==="LinkedField"?n.fragment.selections[0].name:null}var y_={MutationTypes:jTe,RangeOperations:VTe,convert:qTe},GTe=hc,JTe=GTe.getRequest,QTe=U4,YTe=cp,XTe=YTe.createOperationDescriptor,ZTe=y_,e_e=$e;function t_e(n,e){QTe(n)||e_e(!1);var t=JTe(e.mutation);if(t.params.operationKind!=="mutation")throw new Error("commitMutation: Expected mutation operation");var r=e.optimisticUpdater,i=e.configs,s=e.optimisticResponse,o=e.variables,a=XTe(t,o);if(i){var l=ZTe.convert(i,t,r);r=l.optimisticUpdater}return n.applyMutation({operation:a,response:s,updater:r})}var n_e=t_e;function r_e(n,e){n.commitUpdate(e)}var i_e=r_e,s_e=bt.default;s_e(tl);var Ji=co;Ji.ACTOR_CHANGE;Ji.CLIENT_COMPONENT;Ji.CLIENT_EXTENSION;Ji.CONDITION;Ji.DEFER;Ji.FLIGHT_FIELD;Ji.FRAGMENT_SPREAD;Ji.INLINE_FRAGMENT;Ji.LINKED_FIELD;Ji.LINKED_HANDLE;Ji.MODULE_IMPORT;Ji.SCALAR_FIELD;Ji.SCALAR_HANDLE;Ji.STREAM;Ji.TYPE_DISCRIMINATOR;var o_e=bt.default,mq=o_e(Uk),a_e=hc,l_e=a_e.getRequest,c_e=el,u_e=c_e.generateUniqueClientID,d_e=U4,f_e=cp,h_e=f_e.createOperationDescriptor,p_e=y_,m_e=$e;function g_e(n,e){d_e(n)||m_e(!1);var t=l_e(e.mutation);if(t.params.operationKind!=="mutation")throw new Error("commitMutation: Expected mutation operation");if(t.kind!=="Request")throw new Error("commitMutation: Expected mutation to be of type request");var r=e.optimisticResponse,i=e.optimisticUpdater,s=e.updater,o=e.configs,a=e.cacheConfig,l=e.onError,c=e.onUnsubscribe,u=e.variables,d=e.uploadables,f=h_e(t,u,a,u_e());if(typeof r=="function"&&(r=r()),o){var h=p_e.convert(o,t,i,s);i=h.optimisticUpdater,s=h.updater}var p=[],m=n.executeMutation({operation:f,optimisticResponse:r,optimisticUpdater:i,updater:s,uploadables:d}).subscribe({next:function(y){var k;Array.isArray(y)?y.forEach(function(b){b.errors&&p.push.apply(p,(0,mq.default)(b.errors))}):y.errors&&p.push.apply(p,(0,mq.default)(y.errors)),(k=e.onNext)===null||k===void 0||k.call(e)},complete:function(){var y=e.onCompleted;if(y){var k=n.lookup(f.fragment);y(k.data,p.length!==0?p:null)}},error:l,unsubscribe:c});return{dispose:m.unsubscribe}}var y_e=g_e,v_e=typeof WeakMap=="function",N2=v_e?new WeakMap:new Map;function b_e(n,e){if(e!=null){var t={};return Object.assign(t,n),Object.keys(e).forEach(function(r){var i=e[r].get,s=i();if(!N2.has(i))N2.set(i,s),t[r]=s;else{var o=N2.get(i);t[r]=o}}),t}else return n}var Xie=b_e;function k_e(n){return!!n&&typeof n.then=="function"}var Zie=k_e,x_e=Zie,Mc=M_e,nk=function(){n.create=function(r){return new n(r)};function n(t){this._source=t}n.onUnhandledError=function(r){Mc=r},n.from=function(r){return S_e(r)?w_e(r):x_e(r)?$_e(r):E_e(r)};var e=n.prototype;return e.catch=function(r){var i=this;return n.create(function(s){var o;return i.subscribe({start:function(l){o=l},next:s.next,complete:s.complete,error:function(l){try{r(l).subscribe({start:function(u){o=u},next:s.next,complete:s.complete,error:s.error})}catch(c){s.error(c,!0)}}}),function(){return o.unsubscribe()}})},e.concat=function(r){var i=this;return n.create(function(s){var o;return i.subscribe({start:function(l){o=l},next:s.next,error:s.error,complete:function(){o=r.subscribe(s)}}),function(){o&&o.unsubscribe()}})},e.do=function(r){var i=this;return n.create(function(s){var o=function(l){return function(){try{r[l]&&r[l].apply(r,arguments)}catch(c){Mc(c,!0)}s[l]&&s[l].apply(s,arguments)}};return i.subscribe({start:o("start"),next:o("next"),error:o("error"),complete:o("complete"),unsubscribe:o("unsubscribe")})})},e.finally=function(r){var i=this;return n.create(function(s){var o=i.subscribe(s);return function(){o.unsubscribe(),r()}})},e.ifEmpty=function(r){var i=this;return n.create(function(s){var o=!1,a=i.subscribe({next:function(c){o=!0,s.next(c)},error:s.error,complete:function(){o?s.complete():a=r.subscribe(s)}});return function(){a.unsubscribe()}})},e.subscribe=function(r){return C_e(this._source,r)},e.map=function(r){var i=this;return n.create(function(s){var o=i.subscribe({complete:s.complete,error:s.error,next:function(l){try{var c=r(l);s.next(c)}catch(u){s.error(u,!0)}}});return function(){o.unsubscribe()}})},e.mergeMap=function(r){var i=this;return n.create(function(s){var o=[];function a(c){this._sub=c,o.push(c)}function l(){o.splice(o.indexOf(this._sub),1),o.length===0&&s.complete()}return i.subscribe({start:a,next:function(u){try{s.closed||n.from(r(u)).subscribe({start:a,next:s.next,error:s.error,complete:l})}catch(d){s.error(d,!0)}},error:s.error,complete:l}),function(){o.forEach(function(c){return c.unsubscribe()}),o.length=0}})},e.poll=function(r){var i=this;return n.create(function(s){var o,a,l=function c(){o=i.subscribe({next:s.next,error:s.error,complete:function(){a=setTimeout(c,r)}})};return l(),function(){clearTimeout(a),o.unsubscribe()}})},e.toPromise=function(){var r=this;return new Promise(function(i,s){var o=!1;r.subscribe({next:function(l){o||(o=!0,i(l))},error:s,complete:i})})},n}();function S_e(n){return typeof n=="object"&&n!==null&&typeof n.subscribe=="function"}function w_e(n){return n instanceof nk?n:nk.create(function(e){return n.subscribe(e)})}function $_e(n){return nk.create(function(e){n.then(function(t){e.next(t),e.complete()},e.error)})}function E_e(n){return nk.create(function(e){e.next(n),e.complete()})}function C_e(n,e){var t=!1,r,i=function(c){return Object.defineProperty(c,"closed",{get:function(){return t}})};function s(){if(r){if(r.unsubscribe)r.unsubscribe();else try{r()}catch(l){Mc(l,!0)}r=void 0}}var o=i({unsubscribe:function(){if(!t){t=!0;try{e.unsubscribe&&e.unsubscribe(o)}catch(c){Mc(c,!0)}finally{s()}}}});try{e.start&&e.start(o)}catch(l){Mc(l,!0)}if(t)return o;var a=i({next:function(c){if(!t&&e.next)try{e.next(c)}catch(u){Mc(u,!0)}},error:function(c,u){if(t||!e.error)t=!0,Mc(c,u||!1),s();else{t=!0;try{e.error(c)}catch(d){Mc(d,!0)}finally{s()}}},complete:function(){if(!t){t=!0;try{e.complete&&e.complete()}catch(c){Mc(c,!0)}finally{s()}}}});try{r=n(a)}catch(l){a.error(l,!0)}return t&&s(),o}function M_e(n,e){}var up=nk,gq=up;function T_e(n){return function(t,r,i,s,o){var a=n(t,r,i,s,o);return a instanceof Error?gq.create(function(l){return l.error(a)}):gq.from(a)}}var __e={convertFetch:T_e},A_e=Xie,I_e=__e,R_e=I_e.convertFetch,F2=$e;function O_e(n,e){var t=R_e(n);function r(i,s,o,a,l){var c=A_e(s,i.providedVariables);if(i.operationKind==="subscription")return e||F2(!1),a&&F2(!1),e(i,c,o);var u=o.poll;return u!=null?(a&&F2(!1),t(i,c,{force:!0}).poll(u)):t(i,c,o,a,l)}return{execute:r}}var P_e={create:O_e},D_e=bt.default,pu=D_e(tl),N_e=v0,yq=$e,F_e=function(){function n(t){var r=t.size,i=t.ttl;r>0||yq(!1),i>0||yq(!1),this._responses=new Map,this._size=r,this._ttl=i}var e=n.prototype;return e.clear=function(){this._responses.clear()},e.get=function(r,i){var s=this,o=vq(r,i);this._responses.forEach(function(l,c){L_e(l.fetchTime,s._ttl)||s._responses.delete(c)});var a=this._responses.get(o);return a==null?null:Array.isArray(a.payload)?a.payload.map(function(l){return(0,pu.default)((0,pu.default)({},l),{},{extensions:(0,pu.default)((0,pu.default)({},l.extensions),{},{cacheTimestamp:a.fetchTime})})}):(0,pu.default)((0,pu.default)({},a.payload),{},{extensions:(0,pu.default)((0,pu.default)({},a.payload.extensions),{},{cacheTimestamp:a.fetchTime})})},e.set=function(r,i,s){var o=Date.now(),a=vq(r,i);if(this._responses.delete(a),this._responses.set(a,{fetchTime:o,payload:s}),this._responses.size>this._size){var l=this._responses.keys().next();l.done||this._responses.delete(l.value)}},n}();function vq(n,e){return JSON.stringify(N_e({queryID:n,variables:e}))}function L_e(n,e){return n+e>=Date.now()}var z_e=F_e,B_e=bt.default,j_e=B_e(Gi);function V_e(n,e,t){var r=(0,j_e.default)(t),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;n.requiredFieldLogger({kind:"relay_resolver.error",owner:s.field.owner,fieldPath:s.field.path,error:s.error})}}catch(c){r.e(c)}finally{r.f()}if(e!=null)switch(e.action){case"THROW":{var o=e.field,a=o.path,l=o.owner;throw n.requiredFieldLogger({kind:"missing_field.throw",owner:l,fieldPath:a}),new Error("Relay: Missing @required value at path '".concat(a,"' in '").concat(l,"'."))}case"LOG":e.fields.forEach(function(c){var u=c.path,d=c.owner;n.requiredFieldLogger({kind:"missing_field.log",owner:d,fieldPath:u})});break;default:e.action}}var J4=V_e,ese=bt.default,q_e=ese(Gi),ix=ese(lp),K_e=up,U_e=$e,H_e=function(){function n(){var t=this;(0,ix.default)(this,"_complete",!1),(0,ix.default)(this,"_events",[]),(0,ix.default)(this,"_sinks",new Set),(0,ix.default)(this,"_subscription",[]),this._observable=K_e.create(function(r){t._sinks.add(r);for(var i=t._events,s=0;s<i.length&&!r.closed;s++){var o=i[s];switch(o.kind){case"complete":r.complete();break;case"error":r.error(o.error);break;case"next":r.next(o.data);break;default:o.kind,U_e(!1)}}return function(){t._sinks.delete(r)}})}var e=n.prototype;return e.complete=function(){this._complete!==!0&&(this._complete=!0,this._events.push({kind:"complete"}),this._sinks.forEach(function(r){return r.complete()}))},e.error=function(r){this._complete!==!0&&(this._complete=!0,this._events.push({kind:"error",error:r}),this._sinks.forEach(function(i){return i.error(r)}))},e.next=function(r){this._complete!==!0&&(this._events.push({kind:"next",data:r}),this._sinks.forEach(function(i){return i.next(r)}))},e.subscribe=function(r){var i=this._observable.subscribe(r);return this._subscription.push(i),i},e.unsubscribe=function(){var r=(0,q_e.default)(this._subscription),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;s.unsubscribe()}}catch(o){r.e(o)}finally{r.f()}this._subscription=[]},e.getObserverCount=function(){return this._sinks.size},n}(),tse=H_e,Q4=up,bq=lo,kq=tse,nse=$e,W_e=typeof WeakMap=="function",xq=W_e?new WeakMap:new Map;function G_e(n,e){return rse(n,e.request.identifier,function(){return n.execute({operation:e})})}function rse(n,e,t){return Q4.create(function(r){var i=Y4(n),s=i.get(e);return s||t().finally(function(){return i.delete(e)}).subscribe({start:function(a){s={identifier:e,subject:new kq,subjectForInFlightStatus:new kq,subscription:a,promise:null},i.set(e,s)},next:function(a){var l=sx(i,e);l.subject.next(a),l.subjectForInFlightStatus.next(a)},error:function(a){var l=sx(i,e);l.subject.error(a),l.subjectForInFlightStatus.error(a)},complete:function(){var a=sx(i,e);a.subject.complete(),a.subjectForInFlightStatus.complete()},unsubscribe:function(a){var l=sx(i,e);l.subject.unsubscribe(),l.subjectForInFlightStatus.unsubscribe()}}),s==null&&nse(!1),J_e(i,s).subscribe(r)})}function J_e(n,e){return Q4.create(function(t){var r=e.subject.subscribe(t);return function(){r.unsubscribe();var i=n.get(e.identifier);if(i){var s=i.subscription;s!=null&&i.subject.getObserverCount()===0&&(s.unsubscribe(),n.delete(e.identifier))}}})}function ise(n,e,t){return Q4.create(function(r){var i=t.subjectForInFlightStatus.subscribe({error:r.error,next:function(o){if(!n.isRequestActive(t.identifier)){r.complete();return}r.next()},complete:r.complete,unsubscribe:r.complete});return function(){i.unsubscribe()}})}function Q_e(n,e){var t=Y4(n),r=t.get(e.identifier);if(!r||!n.isRequestActive(r.identifier))return null;if(bq.USE_REACT_CACHE){var i=r.promise;if(i)return i}var s=new Promise(function(o,a){var l=!1;ise(n,t,r).subscribe({complete:o,error:a,next:function(u){l&&o(u)}}),l=!0});return bq.USE_REACT_CACHE&&(r.promise=s),s}function Y_e(n,e){var t=Y4(n),r=t.get(e.identifier);return!r||!n.isRequestActive(r.identifier)?null:ise(n,t,r)}function Y4(n){var e=xq.get(n);if(e!=null)return e;var t=new Map;return xq.set(n,t),t}function sx(n,e){var t=n.get(e);return t==null&&nse(!1),t}var X4={fetchQuery:G_e,fetchQueryDeduped:rse,getPromiseForActiveRequest:Q_e,getObservableForActiveRequest:Y_e},X_e=bt.default,Z_e=X_e(tl),eAe=up,tAe=cp,nAe=tAe.createOperationDescriptor,rAe=J4,iAe=X4,sAe=hc,oAe=sAe.getRequest,aAe=$e;function lAe(n,e,t,r){var i,s=oAe(e);s.params.operationKind!=="query"&&aAe(!1);var o=(0,Z_e.default)({force:!0},r==null?void 0:r.networkCacheConfig),a=nAe(s,t,o),l=(i=r==null?void 0:r.fetchPolicy)!==null&&i!==void 0?i:"network-only";function c(u){return rAe(n,u.missingRequiredFields,u.relayResolverErrors),u.data}switch(l){case"network-only":return Sq(n,a).map(c);case"store-or-network":return n.check(a).status==="available"?eAe.from(n.lookup(a.fragment)).map(c):Sq(n,a).map(c);default:throw new Error("fetchQuery: Invalid fetchPolicy "+l)}}function Sq(n,e){return iAe.fetchQuery(n,e).map(function(){return n.lookup(e.fragment)})}var cAe=lAe,uAe=cp,dAe=uAe.createOperationDescriptor,fAe=hc,hAe=fAe.getRequest;function pAe(n,e,t,r){var i=hAe(e);if(i.params.operationKind!=="query")throw new Error("fetchQuery: Expected query operation");var s=dAe(i,t,r);return n.execute({operation:s}).map(function(){return n.lookup(s.fragment).data}).toPromise()}var mAe=pAe,gAe=function(){function n(){this._preloadableQueries=new Map,this._callbacks=new Map}var e=n.prototype;return e.set=function(r,i){this._preloadableQueries.set(r,i);var s=this._callbacks.get(r);s!=null&&s.forEach(function(o){try{o(i)}catch(a){setTimeout(function(){throw a},0)}})},e.get=function(r){return this._preloadableQueries.get(r)},e.onLoad=function(r,i){var s,o=(s=this._callbacks.get(r))!==null&&s!==void 0?s:new Set;o.add(i);var a=function(){o.delete(i)};return this._callbacks.set(r,o),{dispose:a}},e.clear=function(){this._preloadableQueries.clear()},n}(),yAe=new gAe,vAe=yAe,bAe=X4,kAe=bAe.getPromiseForActiveRequest;function xAe(n,e,t){var r,i,s=[],o=kAe(n,t);if(o!=null)s=[t];else{var a,l,c=n.getOperationTracker().getPendingOperationsAffectingOwner(t);s=(a=c==null?void 0:c.pendingOperations)!==null&&a!==void 0?a:[],o=(l=c==null?void 0:c.promise)!==null&&l!==void 0?l:null}if(!o)return null;var u=(r=(i=s)===null||i===void 0?void 0:i.map(function(h){return h.node.params.name}).join(","))!==null&&r!==void 0?r:null;(u==null||u.length===0)&&(u="Unknown pending operation");var d=e.name,f=u===d?"Relay(".concat(u,")"):"Relay(".concat(u,":").concat(d,")");return o.displayName=f,{promise:o,pendingOperations:s}}var sse=xAe;function SAe(n,e){return n===e&&(n===null||typeof n!="object")}var ose=SAe,wq=typeof WeakSet<"u",$q=typeof WeakMap<"u";function jN(n,e){if(n===e||typeof n!="object"||n instanceof Set||n instanceof Map||wq&&n instanceof WeakSet||$q&&n instanceof WeakMap||!n||typeof e!="object"||e instanceof Set||e instanceof Map||wq&&e instanceof WeakSet||$q&&e instanceof WeakMap||!e)return e;var t=!1,r=Array.isArray(n)?n:null,i=Array.isArray(e)?e:null;if(r&&i)t=i.reduce(function(c,u,d){var f=r[d],h=jN(f,u);return h!==i[d]&&(i[d]=h),c&&h===r[d]},!0)&&r.length===i.length;else if(!r&&!i){var s=n,o=e,a=Object.keys(s),l=Object.keys(o);t=l.reduce(function(c,u){var d=s[u],f=jN(d,o[u]);return f!==o[u]&&(o[u]=f),c&&f===s[u]},!0)&&a.length===l.length}return t?n:e}var v_=jN,ase=bt.default,Eq=ase(tl),Z4=ase(lp),wAe=sse,$Ae=J4,EAe=ose,CAe=v_,lse=lo,MAe=cp,TAe=MAe.createRequestDescriptor,ez=ou,_Ae=ez.areEqualSelectors,AAe=ez.createReaderSelector,IAe=ez.getSelectorsFromObject,RAe=nl,Cq=$e,OAe=function(){function n(t,r,i,s,o){var a=this;(0,Z4.default)(this,"_onChange",function(){a._stale=!0,typeof a._callback=="function"&&a._callback()}),this._callback=s,this._context=t,this._data={},this._fragments=r,this._props={},this._resolvers={},this._stale=!1,this._rootIsQueryRenderer=o,this.setProps(i)}var e=n.prototype;return e.dispose=function(){for(var r in this._resolvers)this._resolvers.hasOwnProperty(r)&&cse(this._resolvers[r])},e.resolve=function(){if(this._stale){var r=this._data,i;for(var s in this._resolvers)if(this._resolvers.hasOwnProperty(s)){var o=this._resolvers[s],a=r[s];if(o){var l=o.resolve();(i||l!==a)&&(i=i||(0,Eq.default)({},r),i[s]=l)}else{var c=this._props[s],u=c!==void 0?c:null;(i||!EAe(u,a))&&(i=i||(0,Eq.default)({},r),i[s]=u)}}this._data=i||r,this._stale=!1}return this._data},e.setCallback=function(r,i){this._callback=i,lse.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT===!0&&this.setProps(r)},e.setProps=function(r){this._props={};var i=IAe(this._fragments,r);for(var s in i)if(i.hasOwnProperty(s)){var o=i[s],a=this._resolvers[s];o==null?(a!=null&&a.dispose(),a=null):o.kind==="PluralReaderSelector"?a==null?a=new Mq(this._context.environment,this._rootIsQueryRenderer,o,this._callback!=null,this._onChange):(a instanceof Mq||Cq(!1),a.setSelector(o)):a==null?a=new VN(this._context.environment,this._rootIsQueryRenderer,o,this._callback!=null,this._onChange):(a instanceof VN||Cq(!1),a.setSelector(o)),this._props[s]=r[s],this._resolvers[s]=a}this._stale=!0},e.setVariables=function(r,i){for(var s in this._resolvers)if(this._resolvers.hasOwnProperty(s)){var o=this._resolvers[s];o&&o.setVariables(r,i)}this._stale=!0},n}(),VN=function(){function n(t,r,i,s,o){var a=this;(0,Z4.default)(this,"_onChange",function(c){a._data=c.data,a._isMissingData=c.isMissingData,a._missingRequiredFields=c.missingRequiredFields,a._relayResolverErrors=c.relayResolverErrors,a._callback()});var l=t.lookup(i);this._callback=o,this._data=l.data,this._isMissingData=l.isMissingData,this._missingRequiredFields=l.missingRequiredFields,this._relayResolverErrors=l.relayResolverErrors,this._environment=t,this._rootIsQueryRenderer=r,this._selector=i,lse.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT===!0?s&&(this._subscription=t.subscribe(l,this._onChange)):this._subscription=t.subscribe(l,this._onChange)}var e=n.prototype;return e.dispose=function(){this._subscription&&(this._subscription.dispose(),this._subscription=null)},e.resolve=function(){if(this._isMissingData===!0){var r=wAe(this._environment,this._selector.node,this._selector.owner),i=r==null?void 0:r.promise;if(i!=null&&!this._rootIsQueryRenderer){var s,o=(s=r==null?void 0:r.pendingOperations)!==null&&s!==void 0?s:[];throw this._environment.__log({name:"suspense.fragment",data:this._data,fragment:this._selector.node,isRelayHooks:!1,isMissingData:this._isMissingData,isPromiseCached:!1,pendingOperations:o}),i}}return $Ae(this._environment,this._missingRequiredFields,this._relayResolverErrors),this._data},e.setSelector=function(r){if(!(this._subscription!=null&&_Ae(r,this._selector))){this.dispose();var i=this._environment.lookup(r);this._data=CAe(this._data,i.data),this._isMissingData=i.isMissingData,this._missingRequiredFields=i.missingRequiredFields,this._relayResolverErrors=i.relayResolverErrors,this._selector=r,this._subscription=this._environment.subscribe(i,this._onChange)}},e.setVariables=function(r,i){if(!RAe(r,this._selector.variables)){var s=TAe(i,r),o=AAe(this._selector.node,this._selector.dataID,r,s);this.setSelector(o)}},n}(),Mq=function(){function n(t,r,i,s,o){var a=this;(0,Z4.default)(this,"_onChange",function(l){a._stale=!0,a._callback()}),this._callback=o,this._data=[],this._environment=t,this._resolvers=[],this._stale=!0,this._rootIsQueryRenderer=r,this._subscribeOnConstruction=s,this.setSelector(i)}var e=n.prototype;return e.dispose=function(){this._resolvers.forEach(cse)},e.resolve=function(){if(this._stale){for(var r=this._data,i,s=0;s<this._resolvers.length;s++){var o=r[s],a=this._resolvers[s].resolve();(i||a!==o)&&(i=i||r.slice(0,s),i.push(a))}!i&&this._resolvers.length!==r.length&&(i=r.slice(0,this._resolvers.length)),this._data=i||r,this._stale=!1}return this._data},e.setSelector=function(r){for(var i=r.selectors;this._resolvers.length>i.length;){var s=this._resolvers.pop();s.dispose()}for(var o=0;o<i.length;o++)o<this._resolvers.length?this._resolvers[o].setSelector(i[o]):this._resolvers[o]=new VN(this._environment,this._rootIsQueryRenderer,i[o],this._subscribeOnConstruction,this._onChange);this._stale=!0},e.setVariables=function(r,i){this._resolvers.forEach(function(s){return s.setVariables(r,i)}),this._stale=!0},n}();function cse(n){n&&n.dispose()}var PAe=OAe,DAe=PAe;function NAe(n,e,t,r,i,s){return new DAe(n,t,r,s,i)}var FAe=NAe,LAe=$e,L2,Tq;function zAe(n){return L2||(L2=n.createContext(null),Tq=n),n!==Tq&&LAe(!1),L2}var BAe=zAe,jAe=hc,VAe=jAe.getInlineDataFragment,qAe=Nt,KAe=qAe.FRAGMENTS_KEY,_q=$e;function UAe(n,e){var t,r=VAe(n);if(e==null)return e;typeof e!="object"&&_q(!1);var i=(t=e[KAe])===null||t===void 0?void 0:t[r.name];return i==null&&_q(!1),i}var HAe=UAe,WAe=$e,use="INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE";function GAe(n){n!==use&&WAe(!1)}var tz={assertInternalActorIndentifier:GAe,getActorIdentifier:function(e){return e},getDefaultActorIdentifier:function(){throw new Error("Not Implemented")},INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE:use},JAe=1e5;function QAe(){return JAe++}var dse=QAe,YAe=dse;function XAe(n,e){return{execute:function(r,i,s,o){var a=YAe(),l={start:function(d){n.__log({name:"network.start",networkRequestId:a,params:r,variables:i,cacheConfig:s})},next:function(d){n.__log({name:"network.next",networkRequestId:a,response:d})},error:function(d){n.__log({name:"network.error",networkRequestId:a,error:d})},complete:function(){n.__log({name:"network.complete",networkRequestId:a})},unsubscribe:function(){n.__log({name:"network.unsubscribe",networkRequestId:a})}},c=function(d){n.__log({name:"network.info",networkRequestId:a,info:d})};return e.execute(r,i,s,o,c).do(l)}}}var ZAe=XAe,e2e=bt.default,xy=e2e(Gi),t2e=$e,n2e=function(){function n(){this._ownersToPendingOperations=new Map,this._pendingOperationsToOwners=new Map,this._ownersToPendingPromise=new Map}var e=n.prototype;return e.update=function(r,i){if(i.size!==0){var s=r.identifier,o=new Set,a=(0,xy.default)(i),l;try{for(a.s();!(l=a.n()).done;){var c=l.value,u=c.identifier,d=this._ownersToPendingOperations.get(u);d!=null?d.has(s)||(d.set(s,r),o.add(u)):(this._ownersToPendingOperations.set(u,new Map([[s,r]])),o.add(u))}}catch(g){a.e(g)}finally{a.f()}if(o.size!==0){var f=this._pendingOperationsToOwners.get(s)||new Set,h=(0,xy.default)(o),p;try{for(h.s();!(p=h.n()).done;){var m=p.value;this._resolveOwnerResolvers(m),f.add(m)}}catch(g){h.e(g)}finally{h.f()}this._pendingOperationsToOwners.set(s,f)}}},e.complete=function(r){var i=r.identifier,s=this._pendingOperationsToOwners.get(i);if(s!=null){var o=new Set,a=new Set,l=(0,xy.default)(s),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,d=this._ownersToPendingOperations.get(u);d&&(d.delete(i),d.size>0?a.add(u):o.add(u))}}catch(k){l.e(k)}finally{l.f()}var f=(0,xy.default)(o),h;try{for(f.s();!(h=f.n()).done;){var p=h.value;this._resolveOwnerResolvers(p),this._ownersToPendingOperations.delete(p)}}catch(k){f.e(k)}finally{f.f()}var m=(0,xy.default)(a),g;try{for(m.s();!(g=m.n()).done;){var y=g.value;this._resolveOwnerResolvers(y)}}catch(k){m.e(k)}finally{m.f()}this._pendingOperationsToOwners.delete(i)}},e._resolveOwnerResolvers=function(r){var i=this._ownersToPendingPromise.get(r);i!=null&&i.resolve(),this._ownersToPendingPromise.delete(r)},e.getPendingOperationsAffectingOwner=function(r){var i=r.identifier,s=this._ownersToPendingOperations.get(i);if(s==null||s.size===0)return null;var o=this._ownersToPendingPromise.get(i);if(o!=null)return{promise:o.promise,pendingOperations:o.pendingOperations};var a,l=new Promise(function(u){a=u});a==null&&t2e(!1);var c=Array.from(s.values());return this._ownersToPendingPromise.set(i,{promise:l,resolve:a,pendingOperations:c}),{promise:l,pendingOperations:c}},n}(),fse=n2e;function r2e(n){var e=typeof kd<"u"?kd:typeof window<"u"?window:void 0,t=e&&e.__RELAY_DEVTOOLS_HOOK__;t&&t.registerEnvironment(n)}var i2e=r2e,s2e=el,o2e=s2e.generateClientID,a2e=Nt,l2e=a2e.ROOT_ID,c2e=o2e(l2e,"viewer"),u2e="Viewer",hse={VIEWER_ID:c2e,VIEWER_TYPE:u2e},pse=hse,d2e=pse.VIEWER_ID,f2e=pse.VIEWER_TYPE;function h2e(n,e){return e===f2e&&n.id==null?d2e:n.id}var mse=h2e,p2e=function(e){},m2e=p2e,gse=co,g2e=gse.REQUEST,y2e=gse.SPLIT_OPERATION;function v2e(n){switch(n.kind){case g2e:return n.operation;case y2e:default:return n}}var nz=v2e;function Aq(n,e,t){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];var o=0,a=t.replace(/%s/g,function(){return String(i[o++])}),l=new Error(a),c=Object.assign(l,{name:e,messageFormat:t,messageParams:i,type:n,taalOpcodes:[2,2]});if(c.stack===void 0)try{throw c}catch{}return c}var yse={create:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return Aq.apply(void 0,["error",e,t].concat(i))},createWarning:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return Aq.apply(void 0,["warn",e,t].concat(i))}},z2,B2,b2e=typeof window<"u"&&typeof((z2=window)===null||z2===void 0||(B2=z2.performance)===null||B2===void 0?void 0:B2.now)=="function";function Iq(){return b2e?window.performance.now():Date.now()}function k2e(n){var e=Iq(),t=n();return[Iq()-e,t]}var x2e=k2e,S2e=bt.default,H$=S2e(tl),w2e=Oie,$2e=el;$2e.isClientID;var dp=Nt,qN=dp.ACTOR_IDENTIFIER_KEY,rz=dp.ID_KEY,E2e=dp.INVALIDATED_AT_KEY,Kh=dp.REF_KEY,W$=dp.REFS_KEY;dp.ROOT_ID;var iz=dp.TYPENAME_KEY,C2e=nl,b_=$e;function M2e(n){return(0,H$.default)({},n)}function T2e(n,e){for(var t in n)n.hasOwnProperty(t)&&t!==rz&&t!==iz&&(e[t]=n[t])}function _2e(n,e){var t={};return t[rz]=n,t[iz]=e,t}function A2e(n){return n[rz]}function I2e(n){return n[iz]}function R2e(n,e){var t=n[e];return t&&typeof t=="object"&&(!t.hasOwnProperty(Kh)&&!t.hasOwnProperty(W$)||b_(!1)),t}function O2e(n,e){var t=n[e];if(t==null)return t;var r=t;return typeof r=="object"&&r&&typeof r[Kh]=="string"||b_(!1),r[Kh]}function P2e(n,e){var t=n[e];return t==null?t:(typeof t=="object"&&Array.isArray(t[W$])||b_(!1),t[W$])}function D2e(n){if(n==null)return null;var e=n[E2e];return typeof e!="number"?null:e}function N2e(n,e){for(var t=null,r=Object.keys(e),i=0;i<r.length;i++){var s=r[i];(t||!C2e(n[s],e[s]))&&(t=t!==null?t:(0,H$.default)({},n),t[s]=e[s])}return t!==null?t:n}function F2e(n,e){return(0,H$.default)((0,H$.default)({},n),e)}function L2e(n){w2e(n)}function z2e(n,e,t){n[e]=t}function B2e(n,e,t){var r={};r[Kh]=t,n[e]=r}function j2e(n,e,t){var r={};r[W$]=t,n[e]=r}function V2e(n,e,t,r){var i={};i[Kh]=r,i[qN]=t,n[e]=i}function q2e(n,e){var t=n[e];return t==null?t:(typeof t=="object"&&typeof t[Kh]=="string"&&t[qN]!=null||b_(!1),[t[qN],t[Kh]])}var rl={clone:M2e,copyFields:T2e,create:_2e,freeze:L2e,getDataID:A2e,getInvalidationEpoch:D2e,getLinkedRecordID:O2e,getLinkedRecordIDs:P2e,getType:I2e,getValue:R2e,merge:F2e,setValue:z2e,setLinkedRecordID:B2e,setLinkedRecordIDs:j2e,update:N2e,getActorLinkedRecordID:q2e,setActorLinkedRecordID:V2e},K2e={EXISTENT:"EXISTENT",NONEXISTENT:"NONEXISTENT",UNKNOWN:"UNKNOWN"},k_=K2e,U2e=bt.default,H2e=U2e(Gi),sz=k_,W2e=sz.EXISTENT,G2e=sz.NONEXISTENT,J2e=sz.UNKNOWN,Q2e=function(){function n(t){var r=this;this._records=new Map,t!=null&&Object.keys(t).forEach(function(i){r._records.set(i,t[i])})}n.create=function(r){return new n(r)};var e=n.prototype;return e.clear=function(){this._records=new Map},e.delete=function(r){this._records.set(r,null)},e.get=function(r){return this._records.get(r)},e.getRecordIDs=function(){return Array.from(this._records.keys())},e.getStatus=function(r){return this._records.has(r)?this._records.get(r)==null?G2e:W2e:J2e},e.has=function(r){return this._records.has(r)},e.remove=function(r){this._records.delete(r)},e.set=function(r,i){this._records.set(r,i)},e.size=function(){return this._records.size},e.toJSON=function(){var r={},i=(0,H2e.default)(this._records),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,a=o[0],l=o[1];r[a]=l}}catch(c){i.e(c)}finally{i.f()}return r},n}(),Gk=Q2e,KN="actor_key",Y2e=tz,X2e=Y2e.getActorIdentifier;function Z2e(n){if(n!=null&&typeof n=="object"&&typeof n[KN]=="string")return X2e(n[KN])}var eIe={ACTOR_IDENTIFIER_FIELD_NAME:KN,getActorIdentifierFromPayload:Z2e},tIe=rl,nIe=tIe.getType,rIe=$e,iIe="executableDefinitions",vse="tree",bse="ReactFlightComponent";function sIe(n){return n==null||typeof n!="object"||typeof n.status!="string"||!Array.isArray(n.tree)&&n.tree!==null||!Array.isArray(n.queries)||!Array.isArray(n.fragments)||!Array.isArray(n.errors)?null:n}function oIe(n){return nIe(n)!==bse&&rIe(!1),n[vse]}var Jk={REACT_FLIGHT_EXECUTABLE_DEFINITIONS_STORAGE_KEY:iIe,REACT_FLIGHT_TREE_STORAGE_KEY:vse,REACT_FLIGHT_TYPE_NAME:bse,getReactFlightClientResponse:oIe,refineToReactFlightPayloadData:sIe},kse="client:__type:",aIe="__TypeSchema";function lIe(n){return kse+n}function cIe(n){return n.indexOf(kse)===0}var x_={generateTypeID:lIe,isTypeID:cIe,TYPE_SCHEMA_TYPE:aIe},xse=bt.default,j2=xse(Gi),Sy=xse(Uk),Sse=eIe;Sse.ACTOR_IDENTIFIER_FIELD_NAME;var uIe=Sse.getActorIdentifierFromPayload,Qi=co,dIe=Qi.ACTOR_CHANGE,fIe=Qi.CLIENT_COMPONENT,hIe=Qi.CLIENT_EXTENSION,pIe=Qi.CONDITION,mIe=Qi.DEFER,gIe=Qi.FLIGHT_FIELD,yIe=Qi.FRAGMENT_SPREAD,vIe=Qi.INLINE_FRAGMENT,Rq=Qi.LINKED_FIELD,bIe=Qi.LINKED_HANDLE,kIe=Qi.MODULE_IMPORT,Oq=Qi.SCALAR_FIELD,xIe=Qi.SCALAR_HANDLE,SIe=Qi.STREAM,wIe=Qi.TYPE_DISCRIMINATOR,$Ie=lo,wse=el,ox=wse.generateClientID;wse.isClientID;var EIe=Fd,CIe=EIe.getLocalVariables,Fe=rl,MIe=ou,TIe=MIe.createNormalizationSelector,S_=Jk,Pq=S_.REACT_FLIGHT_EXECUTABLE_DEFINITIONS_STORAGE_KEY,Dq=S_.REACT_FLIGHT_TREE_STORAGE_KEY,_Ie=S_.REACT_FLIGHT_TYPE_NAME,AIe=S_.refineToReactFlightPayloadData,Ld=Nt,IIe=Ld.ROOT_ID,RIe=Ld.ROOT_TYPE,OIe=Ld.TYPENAME_KEY,Nq=Ld.getArgumentValues,PIe=Ld.getHandleStorageKey,DIe=Ld.getModuleComponentKey,NIe=Ld.getModuleOperationKey,wy=Ld.getStorageKey,$se=x_,V2=$se.TYPE_SCHEMA_TYPE,q2=$se.generateTypeID,lr=$e;function FIe(n,e,t,r){var i=e.dataID,s=e.node,o=e.variables,a=new LIe(n,o,r);return a.normalizeResponse(s,i,t)}var LIe=function(){function n(t,r,i){this._actorIdentifier=i.actorIdentifier,this._getDataId=i.getDataID,this._handleFieldPayloads=[],this._treatMissingFieldsAsNull=i.treatMissingFieldsAsNull,this._incrementalPlaceholders=[],this._isClientExtension=!1,this._isUnmatchedAbstractType=!1,this._followupPayloads=[],this._path=i.path?(0,Sy.default)(i.path):[],this._recordSource=t,this._variables=r,this._reactFlightPayloadDeserializer=i.reactFlightPayloadDeserializer,this._reactFlightServerErrorHandler=i.reactFlightServerErrorHandler,this._shouldProcessClientComponents=i.shouldProcessClientComponents}var e=n.prototype;return e.normalizeResponse=function(r,i,s){var o=this._recordSource.get(i);return o||lr(!1),this._assignClientAbstractTypes(r),this._traverseSelections(r,o,s),{errors:null,fieldPayloads:this._handleFieldPayloads,incrementalPlaceholders:this._incrementalPlaceholders,followupPayloads:this._followupPayloads,source:this._recordSource,isFinal:!1}},e._assignClientAbstractTypes=function(r){var i=r.clientAbstractTypes;if(i!=null)for(var s=0,o=Object.keys(i);s<o.length;s++){var a=o[s],l=(0,j2.default)(i[a]),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,d=q2(u),f=this._recordSource.get(d);f==null&&(f=Fe.create(d,V2),this._recordSource.set(d,f)),Fe.setValue(f,a,!0)}}catch(h){l.e(h)}finally{l.f()}}},e._getVariableValue=function(r){return this._variables.hasOwnProperty(r)||lr(!1),this._variables[r]},e._getRecordType=function(r){var i=r[OIe];return i==null&&lr(!1),i},e._traverseSelections=function(r,i,s){for(var o=0;o<r.selections.length;o++){var a=r.selections[o];switch(a.kind){case Oq:case Rq:this._normalizeField(r,a,i,s);break;case pIe:var l=!!this._getVariableValue(a.condition);l===a.passingValue&&this._traverseSelections(a,i,s);break;case yIe:{var c=this._variables;this._variables=CIe(this._variables,a.fragment.argumentDefinitions,a.args),this._traverseSelections(a.fragment,i,s),this._variables=c;break}case vIe:{var u=a.abstractKey;if(u==null){var d=Fe.getType(i);d===a.type&&this._traverseSelections(a,i,s)}else{var f=s.hasOwnProperty(u),h=Fe.getType(i),p=q2(h),m=this._recordSource.get(p);m==null&&(m=Fe.create(p,V2),this._recordSource.set(p,m)),Fe.setValue(m,u,f),f&&this._traverseSelections(a,i,s)}break}case wIe:{var g=a.abstractKey,y=s.hasOwnProperty(g),k=Fe.getType(i),b=q2(k),S=this._recordSource.get(b);S==null&&(S=Fe.create(b,V2),this._recordSource.set(b,S)),Fe.setValue(S,g,y);break}case bIe:case xIe:var w=a.args?Nq(a.args,this._variables):{},x=wy(a,this._variables),$=PIe(a,this._variables);this._handleFieldPayloads.push({args:w,dataID:Fe.getDataID(i),fieldKey:x,handle:a.handle,handleKey:$,handleArgs:a.handleArgs?Nq(a.handleArgs,this._variables):{}});break;case kIe:this._normalizeModuleImport(r,a,i,s);break;case mIe:this._normalizeDefer(a,i,s);break;case SIe:this._normalizeStream(a,i,s);break;case hIe:var E=this._isClientExtension;this._isClientExtension=!0,this._traverseSelections(a,i,s),this._isClientExtension=E;break;case fIe:if(this._shouldProcessClientComponents===!1)break;this._traverseSelections(a.fragment,i,s);break;case gIe:if($Ie.ENABLE_REACT_FLIGHT_COMPONENT_FIELD)this._normalizeFlightField(r,a,i,s);else throw new Error("Flight fields are not yet supported.");break;case dIe:this._normalizeActorChange(r,a,i,s);break;default:lr(!1)}}},e._normalizeDefer=function(r,i,s){var o=r.if===null||this._getVariableValue(r.if);o===!1?this._traverseSelections(r,i,s):this._incrementalPlaceholders.push({kind:"defer",data:s,label:r.label,path:(0,Sy.default)(this._path),selector:TIe(r,Fe.getDataID(i),this._variables),typeName:Fe.getType(i),actorIdentifier:this._actorIdentifier})},e._normalizeStream=function(r,i,s){this._traverseSelections(r,i,s);var o=r.if===null||this._getVariableValue(r.if);o===!0&&this._incrementalPlaceholders.push({kind:"stream",label:r.label,path:(0,Sy.default)(this._path),parentID:Fe.getDataID(i),node:r,variables:this._variables,actorIdentifier:this._actorIdentifier})},e._normalizeModuleImport=function(r,i,s,o){typeof o=="object"&&o||lr(!1);var a=Fe.getType(s),l=DIe(i.documentName),c=i.componentModuleProvider||o[l];Fe.setValue(s,l,c??null);var u=NIe(i.documentName),d=i.operationModuleProvider||o[u];Fe.setValue(s,u,d??null),d!=null&&this._followupPayloads.push({kind:"ModuleImportPayload",args:i.args,data:o,dataID:Fe.getDataID(s),operationReference:d,path:(0,Sy.default)(this._path),typeName:a,variables:this._variables,actorIdentifier:this._actorIdentifier})},e._normalizeField=function(r,i,s,o){typeof o=="object"&&o||lr(!1);var a=i.alias||i.name,l=wy(i,this._variables),c=o[a];if(c==null){if(c===void 0){var u=this._isClientExtension||this._isUnmatchedAbstractType;if(u)return;if(!this._treatMissingFieldsAsNull)return}Fe.setValue(s,l,null);return}i.kind===Oq?Fe.setValue(s,l,c):i.kind===Rq?(this._path.push(a),i.plural?this._normalizePluralLink(i,s,l,c):this._normalizeLink(i,s,l,c),this._path.pop()):lr(!1)},e._normalizeActorChange=function(r,i,s,o){var a,l=i.linkedField;typeof o=="object"&&o||lr(!1);var c=l.alias||l.name,u=wy(l,this._variables),d=o[c];if(d==null){if(d===void 0){var f=this._isClientExtension||this._isUnmatchedAbstractType;if(f)return;if(!this._treatMissingFieldsAsNull)return}Fe.setValue(s,u,null);return}var h=uIe(d);if(h==null){Fe.setValue(s,u,null);return}var p=(a=l.concreteType)!==null&&a!==void 0?a:this._getRecordType(d),m=this._getDataId(d,p)||Fe.getLinkedRecordID(s,u)||ox(Fe.getDataID(s),u);typeof m!="string"&&lr(!1),Fe.setActorLinkedRecordID(s,u,h,m),this._followupPayloads.push({kind:"ActorPayload",data:d,dataID:m,path:[].concat((0,Sy.default)(this._path),[c]),typeName:p,variables:this._variables,node:l,actorIdentifier:h})},e._normalizeFlightField=function(r,i,s,o){var a=i.alias||i.name,l=wy(i,this._variables),c=o[a];if(c==null){if(c===void 0){if(this._isUnmatchedAbstractType)return;this._treatMissingFieldsAsNull||lr(!1)}Fe.setValue(s,l,null);return}var u=AIe(c),d=this._reactFlightPayloadDeserializer;u==null&&lr(!1),typeof d!="function"&&lr(!1),u.errors.length>0&&typeof this._reactFlightServerErrorHandler=="function"&&this._reactFlightServerErrorHandler(u.status,u.errors);var f=ox(Fe.getDataID(s),wy(i,this._variables)),h=this._recordSource.get(f);if(h==null&&(h=Fe.create(f,_Ie),this._recordSource.set(f,h)),u.tree==null){Fe.setValue(h,Dq,null),Fe.setValue(h,Pq,[]),Fe.setLinkedRecordID(s,l,f);return}var p=d(u.tree);Fe.setValue(h,Dq,p);var m=[],g=(0,j2.default)(u.queries),y;try{for(g.s();!(y=g.n()).done;){var k=y.value;k.response.data!=null&&this._followupPayloads.push({kind:"ModuleImportPayload",args:null,data:k.response.data,dataID:IIe,operationReference:k.module,path:[],typeName:RIe,variables:k.variables,actorIdentifier:this._actorIdentifier}),m.push({module:k.module,variables:k.variables})}}catch(x){g.e(x)}finally{g.f()}var b=(0,j2.default)(u.fragments),S;try{for(b.s();!(S=b.n()).done;){var w=S.value;w.response.data!=null&&this._followupPayloads.push({kind:"ModuleImportPayload",args:null,data:w.response.data,dataID:w.__id,operationReference:w.module,path:[],typeName:w.__typename,variables:w.variables,actorIdentifier:this._actorIdentifier}),m.push({module:w.module,variables:w.variables})}}catch(x){b.e(x)}finally{b.f()}Fe.setValue(h,Pq,m),Fe.setLinkedRecordID(s,l,f)},e._normalizeLink=function(r,i,s,o){var a;typeof o=="object"&&o||lr(!1);var l=this._getDataId(o,(a=r.concreteType)!==null&&a!==void 0?a:this._getRecordType(o))||Fe.getLinkedRecordID(i,s)||ox(Fe.getDataID(i),s);typeof l!="string"&&lr(!1),Fe.setLinkedRecordID(i,s,l);var c=this._recordSource.get(l);if(!c){var u=r.concreteType||this._getRecordType(o);c=Fe.create(l,u),this._recordSource.set(l,c)}this._traverseSelections(r,c,o)},e._normalizePluralLink=function(r,i,s,o){var a=this;Array.isArray(o)||lr(!1);var l=Fe.getLinkedRecordIDs(i,s),c=[];o.forEach(function(u,d){var f;if(u==null){c.push(u);return}a._path.push(String(d)),typeof u!="object"&&lr(!1);var h=a._getDataId(u,(f=r.concreteType)!==null&&f!==void 0?f:a._getRecordType(u))||l&&l[d]||ox(Fe.getDataID(i),s,d);typeof h!="string"&&lr(!1),c.push(h);var p=a._recordSource.get(h);if(!p){var m=r.concreteType||a._getRecordType(u);p=Fe.create(h,m),a._recordSource.set(h,p)}a._traverseSelections(r,p,u),a._path.pop()}),Fe.setLinkedRecordIDs(i,s,c)},e._validateRecordType=function(r,i,s){var o;(o=i.concreteType)!==null&&o!==void 0||this._getRecordType(s),Fe.getDataID(r)},e._validateConflictingFieldsWithIdenticalId=function(r,i,s){},e._validateConflictingLinkedFieldsWithIdenticalId=function(r,i,s,o){},n}(),zIe={normalize:FIe},w_=bt.default,Fq=w_(tl),$y=w_(Gi),BIe=w_(lp),Ey=w_(Uk),K2=up,jIe=dse,U2=nz,VIe=yse,qIe=lo,KIe=v0,H2=x2e,Ese=el,Lq=Ese.generateClientID,UIe=Ese.generateUniqueClientID,HIe=Fd,WIe=HIe.getLocalVariables,tv=rl,Cse=ou,W2=Cse.createNormalizationSelector,GIe=Cse.createReaderSelector,Tw=Gk,JIe=zIe,oz=Nt,zq=oz.ROOT_TYPE,QIe=oz.TYPENAME_KEY,YIe=oz.getStorageKey,hn=$e;function XIe(n){return new ZIe(n)}var ZIe=function(){function n(t){var r=this,i=t.actorIdentifier,s=t.getDataID,o=t.getPublishQueue,a=t.getStore,l=t.isClientPayload,c=t.operation,u=t.operationExecutions,d=t.operationLoader,f=t.operationTracker,h=t.optimisticConfig,p=t.reactFlightPayloadDeserializer,m=t.reactFlightServerErrorHandler,g=t.scheduler,y=t.shouldProcessClientComponents,k=t.sink,b=t.source,S=t.treatMissingFieldsAsNull,w=t.updater,x=t.log;(0,BIe.default)(this,"_deserializeReactFlightPayloadWithLogging",function(E){var C=r._reactFlightPayloadDeserializer;typeof C!="function"&&hn(!1);var M=H2(function(){return C(E)}),P=M[0],I=M[1];return r._log({name:"execute.flight.payload_deserialize",executeId:r._executeId,operationName:r._operation.request.node.params.name,duration:P}),I}),this._actorIdentifier=i,this._getDataID=s,this._treatMissingFieldsAsNull=S,this._incrementalPayloadsPending=!1,this._incrementalResults=new Map,this._log=x,this._executeId=jIe(),this._nextSubscriptionId=0,this._operation=c,this._operationExecutions=u,this._operationLoader=d,this._operationTracker=f,this._operationUpdateEpochs=new Map,this._optimisticUpdates=null,this._pendingModulePayloadsCount=0,this._getPublishQueue=o,this._scheduler=g,this._sink=k,this._source=new Map,this._state="started",this._getStore=a,this._subscriptions=new Map,this._updater=w,this._isClientPayload=l===!0,this._reactFlightPayloadDeserializer=p,this._reactFlightServerErrorHandler=m,this._isSubscriptionOperation=this._operation.request.node.params.operationKind==="subscription",this._shouldProcessClientComponents=y,this._retainDisposables=new Map,this._seenActors=new Set,this._completeFns=[];var $=this._nextSubscriptionId++;b.subscribe({complete:function(){return r._complete($)},error:function(C){return r._error(C)},next:function(C){try{r._next($,C)}catch(M){k.error(M)}},start:function(C){var M;r._start($,C),r._log({name:"execute.start",executeId:r._executeId,params:r._operation.request.node.params,variables:r._operation.request.variables,cacheConfig:(M=r._operation.request.cacheConfig)!==null&&M!==void 0?M:{}})}}),h!=null&&this._processOptimisticResponse(h.response!=null?{data:h.response}:null,h.updater,!1)}var e=n.prototype;return e.cancel=function(){var r=this;if(this._state!=="completed"){this._state="completed",this._operationExecutions.delete(this._operation.request.identifier),this._subscriptions.size!==0&&(this._subscriptions.forEach(function(s){return s.unsubscribe()}),this._subscriptions.clear());var i=this._optimisticUpdates;i!==null&&(this._optimisticUpdates=null,i.forEach(function(s){return r._getPublishQueueAndSaveActor().revertUpdate(s)}),this._runPublishQueue()),this._incrementalResults.clear(),this._asyncStoreUpdateDisposable!=null&&(this._asyncStoreUpdateDisposable.dispose(),this._asyncStoreUpdateDisposable=null),this._completeFns=[],this._completeOperationTracker(),this._disposeRetainedData()}},e._updateActiveState=function(){var r;switch(this._state){case"started":{r="active";break}case"loading_incremental":{r="active";break}case"completed":{r="inactive";break}case"loading_final":{r=this._pendingModulePayloadsCount>0?"active":"inactive";break}default:this._state,hn(!1)}this._operationExecutions.set(this._operation.request.identifier,r)},e._schedule=function(r){var i=this,s=this._scheduler;if(s!=null){var o=this._nextSubscriptionId++;K2.create(function(a){var l=s.schedule(function(){try{r(),a.complete()}catch(c){a.error(c)}});return function(){return s.cancel(l)}}).subscribe({complete:function(){return i._complete(o)},error:function(l){return i._error(l)},start:function(l){return i._start(o,l)}})}else r()},e._complete=function(r){this._subscriptions.delete(r),this._subscriptions.size===0&&(this.cancel(),this._sink.complete(),this._log({name:"execute.complete",executeId:this._executeId}))},e._error=function(r){this.cancel(),this._sink.error(r),this._log({name:"execute.error",executeId:this._executeId,error:r})},e._start=function(r,i){this._subscriptions.set(r,i),this._updateActiveState()},e._next=function(r,i){var s=this;this._schedule(function(){var o=H2(function(){s._handleNext(i),s._maybeCompleteSubscriptionOperationTracking()}),a=o[0];s._log({name:"execute.next",executeId:s._executeId,response:i,duration:a})})},e._handleErrorResponse=function(r){var i=this,s=[];return r.forEach(function(o){if(!(o.data===null&&o.extensions!=null&&!o.hasOwnProperty("errors")))if(o.data==null){var a=o.hasOwnProperty("errors")&&o.errors!=null?o.errors:null,l=a?a.map(function(d){var f=d.message;return f}).join(`
`):"(No errors)",c=VIe.create("RelayNetwork","No data returned for operation `"+i._operation.request.node.params.name+"`, got error(s):\n"+l+"\n\nSee the error `source` property for more information.");throw c.source={errors:a,operation:i._operation.request.node,variables:i._operation.request.variables},c.stack,c}else{var u=o;s.push(u)}}),s},e._handleOptimisticResponses=function(r){var i;if(r.length>1)return r.some(function(a){var l;return((l=a.extensions)===null||l===void 0?void 0:l.isOptimistic)===!0})&&hn(!1),!1;var s=r[0],o=((i=s.extensions)===null||i===void 0?void 0:i.isOptimistic)===!0;return o&&this._state!=="started"&&hn(!1),o?(this._processOptimisticResponse(s,null,this._treatMissingFieldsAsNull),this._sink.next(s),!0):!1},e._handleNext=function(r){if(this._state!=="completed"){this._seenActors.clear();var i=Array.isArray(r)?r:[r],s=this._handleErrorResponse(i);if(s.length===0){var o=i.some(function(g){var y;return((y=g.extensions)===null||y===void 0?void 0:y.is_final)===!0});o&&(this._state="loading_final",this._updateActiveState(),this._incrementalPayloadsPending=!1),this._sink.next(r);return}var a=this._handleOptimisticResponses(s);if(!a){var l=eRe(s),c=l[0],u=l[1],d=c.length>0;if(d){if(this._isSubscriptionOperation){var f=UIe();this._operation={request:this._operation.request,fragment:GIe(this._operation.fragment.node,f,this._operation.fragment.variables,this._operation.fragment.owner),root:W2(this._operation.root.node,f,this._operation.root.variables)}}var h=this._processResponses(c);this._processPayloadFollowups(h)}if(u.length>0){var p=this._processIncrementalResponses(u);this._processPayloadFollowups(p)}this._isSubscriptionOperation&&(s[0].extensions==null?s[0].extensions={__relay_subscription_root_id:this._operation.fragment.dataID}:s[0].extensions.__relay_subscription_root_id=this._operation.fragment.dataID);var m=this._runPublishQueue(d?this._operation:void 0);d&&this._incrementalPayloadsPending&&this._retainData(),this._updateOperationTracker(m),this._sink.next(r)}}},e._processOptimisticResponse=function(r,i,s){var o=this;if(this._optimisticUpdates!==null&&hn(!1),!(r==null&&i==null)){var a=[];if(r){var l=Cy(r,this._operation.root,zq,{actorIdentifier:this._actorIdentifier,getDataID:this._getDataID,path:[],reactFlightPayloadDeserializer:this._reactFlightPayloadDeserializer!=null?this._deserializeReactFlightPayloadWithLogging:null,reactFlightServerErrorHandler:this._reactFlightServerErrorHandler,shouldProcessClientComponents:this._shouldProcessClientComponents,treatMissingFieldsAsNull:s});Bq(l),a.push({operation:this._operation,payload:l,updater:i}),this._processOptimisticFollowups(l,a)}else i&&a.push({operation:this._operation,payload:{errors:null,fieldPayloads:null,incrementalPlaceholders:null,followupPayloads:null,source:Tw.create(),isFinal:!1},updater:i});this._optimisticUpdates=a,a.forEach(function(c){return o._getPublishQueueAndSaveActor().applyUpdate(c)}),this._runPublishQueue()}},e._processOptimisticFollowups=function(r,i){if(r.followupPayloads&&r.followupPayloads.length){var s=r.followupPayloads,o=(0,$y.default)(s),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;switch(l.kind){case"ModuleImportPayload":var c=this._expectOperationLoader(),u=c.get(l.operationReference);if(u==null)this._processAsyncOptimisticModuleImport(l);else{var d=this._processOptimisticModuleImport(u,l);i.push.apply(i,(0,Ey.default)(d))}break;case"ActorPayload":break;default:hn(!1)}}}catch(f){o.e(f)}finally{o.f()}}},e._normalizeFollowupPayload=function(r,i){var s;i.kind==="SplitOperation"&&r.kind==="ModuleImportPayload"?s=WIe(r.variables,i.argumentDefinitions,r.args):s=r.variables;var o=W2(i,r.dataID,s);return Cy({data:r.data},o,r.typeName,{actorIdentifier:this._actorIdentifier,getDataID:this._getDataID,path:r.path,reactFlightPayloadDeserializer:this._reactFlightPayloadDeserializer!=null?this._deserializeReactFlightPayloadWithLogging:null,reactFlightServerErrorHandler:this._reactFlightServerErrorHandler,treatMissingFieldsAsNull:this._treatMissingFieldsAsNull,shouldProcessClientComponents:this._shouldProcessClientComponents})},e._processOptimisticModuleImport=function(r,i){var s=U2(r),o=[],a=this._normalizeFollowupPayload(i,s);return Bq(a),o.push({operation:this._operation,payload:a,updater:null}),this._processOptimisticFollowups(a,o),o},e._processAsyncOptimisticModuleImport=function(r){var i=this;this._expectOperationLoader().load(r.operationReference).then(function(s){if(!(s==null||i._state!=="started")){var o=i._processOptimisticModuleImport(s,r);if(o.forEach(function(l){return i._getPublishQueueAndSaveActor().applyUpdate(l)}),i._optimisticUpdates!=null){var a;(a=i._optimisticUpdates).push.apply(a,(0,Ey.default)(o)),i._runPublishQueue()}}})},e._processResponses=function(r){var i=this;return this._optimisticUpdates!==null&&(this._optimisticUpdates.forEach(function(s){i._getPublishQueueAndSaveActor().revertUpdate(s)}),this._optimisticUpdates=null),this._incrementalPayloadsPending=!1,this._incrementalResults.clear(),this._source.clear(),r.map(function(s){var o=Cy(s,i._operation.root,zq,{actorIdentifier:i._actorIdentifier,getDataID:i._getDataID,path:[],reactFlightPayloadDeserializer:i._reactFlightPayloadDeserializer!=null?i._deserializeReactFlightPayloadWithLogging:null,reactFlightServerErrorHandler:i._reactFlightServerErrorHandler,treatMissingFieldsAsNull:i._treatMissingFieldsAsNull,shouldProcessClientComponents:i._shouldProcessClientComponents});return i._getPublishQueueAndSaveActor().commitPayload(i._operation,o,i._updater),o})},e._processPayloadFollowups=function(r){var i=this;this._state!=="completed"&&r.forEach(function(s){var o=s.incrementalPlaceholders,a=s.followupPayloads,l=s.isFinal;if(i._state=l?"loading_final":"loading_incremental",i._updateActiveState(),l&&(i._incrementalPayloadsPending=!1),a&&a.length!==0&&a.forEach(function(u){var d,f=i._actorIdentifier;i._actorIdentifier=(d=u.actorIdentifier)!==null&&d!==void 0?d:i._actorIdentifier,i._processFollowupPayload(u),i._actorIdentifier=f}),o&&o.length!==0&&(i._incrementalPayloadsPending=i._state!=="loading_final",o.forEach(function(u){var d,f=i._actorIdentifier;i._actorIdentifier=(d=u.actorIdentifier)!==null&&d!==void 0?d:i._actorIdentifier,i._processIncrementalPlaceholder(s,u),i._actorIdentifier=f}),i._isClientPayload||i._state==="loading_final")){var c=[];o.forEach(function(u){u.kind==="defer"&&c.push(i._processDeferResponse(u.label,u.path,u,{data:u.data}))}),c.length>0&&i._processPayloadFollowups(c)}})},e._maybeCompleteSubscriptionOperationTracking=function(){this._isSubscriptionOperation&&this._pendingModulePayloadsCount===0&&this._incrementalPayloadsPending===!1&&this._completeOperationTracker()},e._processFollowupPayload=function(r){var i=this;switch(r.kind){case"ModuleImportPayload":var s=this._expectOperationLoader(),o=s.get(r.operationReference);if(o!=null)this._processFollowupPayloadWithNormalizationNode(r,U2(o));else{var a=this._nextSubscriptionId++;this._pendingModulePayloadsCount++;var l=function(){i._pendingModulePayloadsCount--,i._maybeCompleteSubscriptionOperationTracking()},c=K2.from(new Promise(function(u,d){s.load(r.operationReference).then(u,d)}));K2.create(function(u){var d,f=c.subscribe({next:function(p){if(p!=null){var m=function(){try{var k=U2(p),b=qIe.BATCH_ASYNC_MODULE_UPDATES_FN,S=b!=null&&i._pendingModulePayloadsCount>1,w=H2(function(){if(i._handleFollowupPayload(r,k),S)i._scheduleAsyncStoreUpdate(b,u.complete);else{var $=i._runPublishQueue();i._updateOperationTracker($)}}),x=w[0];i._log({name:"execute.async.module",executeId:i._executeId,operationName:k.name,duration:x}),S||u.complete()}catch($){u.error($)}},g=i._scheduler;g==null?m():d=g.schedule(m)}else u.complete()},error:u.error});return function(){f.unsubscribe(),i._scheduler!=null&&d!=null&&i._scheduler.cancel(d)}}).subscribe({complete:function(){i._complete(a),l()},error:function(d){i._error(d),l()},start:function(d){return i._start(a,d)}})}break;case"ActorPayload":this._processFollowupPayloadWithNormalizationNode(r,r.node);break;default:hn(!1)}},e._processFollowupPayloadWithNormalizationNode=function(r,i){this._handleFollowupPayload(r,i),this._maybeCompleteSubscriptionOperationTracking()},e._handleFollowupPayload=function(r,i){var s=this._normalizeFollowupPayload(r,i);this._getPublishQueueAndSaveActor().commitPayload(this._operation,s),this._processPayloadFollowups([s])},e._processIncrementalPlaceholder=function(r,i){var s,o=i.label,a=i.path,l=a.map(String).join("."),c=this._incrementalResults.get(o);c==null&&(c=new Map,this._incrementalResults.set(o,c));var u=c.get(l),d=u!=null&&u.kind==="response"?u.responses:null;c.set(l,{kind:"placeholder",placeholder:i});var f;i.kind==="stream"?f=i.parentID:i.kind==="defer"?f=i.selector.dataID:hn(!1);var h=r.source.get(f),p=((s=r.fieldPayloads)!==null&&s!==void 0?s:[]).filter(function(w){var x=Lq(w.dataID,w.fieldKey);return w.dataID===f||x===f});h==null&&hn(!1);var m,g,y=this._source.get(f);if(y!=null){m=tv.update(y.record,h);var k=new Map,b=function(x){var $=tRe(x);k.set($,x)};y.fieldPayloads.forEach(b),p.forEach(b),g=Array.from(k.values())}else m=h,g=p;if(this._source.set(f,{record:m,fieldPayloads:g}),d!=null){var S=this._processIncrementalResponses(d);this._processPayloadFollowups(S)}},e._processIncrementalResponses=function(r){var i=this,s=[];return r.forEach(function(o){var a=o.label,l=o.path,c=o.response,u=i._incrementalResults.get(a);if(u==null&&(u=new Map,i._incrementalResults.set(a,u)),a.indexOf("$defer$")!==-1){var d=l.map(String).join("."),f=u.get(d);if(f==null){f={kind:"response",responses:[o]},u.set(d,f);return}else if(f.kind==="response"){f.responses.push(o);return}var h=f.placeholder;h.kind!=="defer"&&hn(!1),s.push(i._processDeferResponse(a,l,h,c))}else{var p=l.slice(0,-2).map(String).join("."),m=u.get(p);if(m==null){m={kind:"response",responses:[o]},u.set(p,m);return}else if(m.kind==="response"){m.responses.push(o);return}var g=m.placeholder;g.kind!=="stream"&&hn(!1),s.push(i._processStreamResponse(a,l,g,c))}}),s},e._processDeferResponse=function(r,i,s,o){var a,l=s.selector.dataID,c=this._actorIdentifier;this._actorIdentifier=(a=s.actorIdentifier)!==null&&a!==void 0?a:this._actorIdentifier;var u=Cy(o,s.selector,s.typeName,{actorIdentifier:this._actorIdentifier,getDataID:this._getDataID,path:s.path,reactFlightPayloadDeserializer:this._reactFlightPayloadDeserializer!=null?this._deserializeReactFlightPayloadWithLogging:null,reactFlightServerErrorHandler:this._reactFlightServerErrorHandler,treatMissingFieldsAsNull:this._treatMissingFieldsAsNull,shouldProcessClientComponents:this._shouldProcessClientComponents});this._getPublishQueueAndSaveActor().commitPayload(this._operation,u);var d=this._source.get(l);d==null&&hn(!1);var f=d.fieldPayloads;if(f.length!==0){var h,p={errors:null,fieldPayloads:f,incrementalPlaceholders:null,followupPayloads:null,source:Tw.create(),isFinal:((h=o.extensions)===null||h===void 0?void 0:h.is_final)===!0};this._getPublishQueueAndSaveActor().commitPayload(this._operation,p)}return this._actorIdentifier=c,u},e._processStreamResponse=function(r,i,s,o){var a=s.parentID,l=s.node,c=s.variables,u=s.actorIdentifier,d=this._actorIdentifier;this._actorIdentifier=u??this._actorIdentifier;var f=l.selections[0];f!=null&&f.kind==="LinkedField"&&f.plural===!0||hn(!1);var h=this._normalizeStreamItem(o,a,f,c,i,s.path),p=h.fieldPayloads,m=h.itemID,g=h.itemIndex,y=h.prevIDs,k=h.relayPayload,b=h.storageKey;if(this._getPublishQueueAndSaveActor().commitPayload(this._operation,k,function(w){var x=w.get(a);if(x!=null){var $=x.getLinkedRecords(b);if($!=null&&!($.length!==y.length||$.some(function(C,M){return y[M]!==(C&&C.getDataID())}))){var E=(0,Ey.default)($);E[g]=w.get(m),x.setLinkedRecords(E,b)}}}),p.length!==0){var S={errors:null,fieldPayloads:p,incrementalPlaceholders:null,followupPayloads:null,source:Tw.create(),isFinal:!1};this._getPublishQueueAndSaveActor().commitPayload(this._operation,S)}return this._actorIdentifier=d,k},e._normalizeStreamItem=function(r,i,s,o,a,l){var c,u,d,f,h=r.data;typeof h!="object"&&hn(!1);var p=(c=s.alias)!==null&&c!==void 0?c:s.name,m=YIe(s,o),g=this._source.get(i);g==null&&hn(!1);var y=g.record,k=g.fieldPayloads,b=tv.getLinkedRecordIDs(y,m);b==null&&hn(!1);var S=a[a.length-1],w=parseInt(S,10);w===S&&w>=0||hn(!1);var x=(u=s.concreteType)!==null&&u!==void 0?u:h[QIe];typeof x!="string"&&hn(!1);var $=(d=(f=this._getDataID(h,x))!==null&&f!==void 0?f:b==null?void 0:b[w])!==null&&d!==void 0?d:Lq(i,m,w);typeof $!="string"&&hn(!1);var E=W2(s,$,o),C=tv.clone(y),M=(0,Ey.default)(b);M[w]=$,tv.setLinkedRecordIDs(C,m,M),this._source.set(i,{record:C,fieldPayloads:k});var P=Cy(r,E,x,{actorIdentifier:this._actorIdentifier,getDataID:this._getDataID,path:[].concat((0,Ey.default)(l),[p,String(w)]),reactFlightPayloadDeserializer:this._reactFlightPayloadDeserializer!=null?this._deserializeReactFlightPayloadWithLogging:null,reactFlightServerErrorHandler:this._reactFlightServerErrorHandler,treatMissingFieldsAsNull:this._treatMissingFieldsAsNull,shouldProcessClientComponents:this._shouldProcessClientComponents});return{fieldPayloads:k,itemID:$,itemIndex:w,prevIDs:b,relayPayload:P,storageKey:m}},e._scheduleAsyncStoreUpdate=function(r,i){var s=this;this._completeFns.push(i),this._asyncStoreUpdateDisposable==null&&(this._asyncStoreUpdateDisposable=r(function(){s._asyncStoreUpdateDisposable=null;var o=s._runPublishQueue();s._updateOperationTracker(o);var a=(0,$y.default)(s._completeFns),l;try{for(a.s();!(l=a.n()).done;){var c=l.value;c()}}catch(u){a.e(u)}finally{a.f()}s._completeFns=[]}))},e._updateOperationTracker=function(r){r!=null&&r.length>0&&this._operationTracker.update(this._operation.request,new Set(r))},e._completeOperationTracker=function(){this._operationTracker.complete(this._operation.request)},e._getPublishQueueAndSaveActor=function(){return this._seenActors.add(this._actorIdentifier),this._getPublishQueue(this._actorIdentifier)},e._getActorsToVisit=function(){return this._seenActors.size===0?new Set([this._actorIdentifier]):this._seenActors},e._runPublishQueue=function(r){var i=new Set,s=(0,$y.default)(this._getActorsToVisit()),o;try{for(s.s();!(o=s.n()).done;){var a=o.value,l=this._getPublishQueue(a).run(r);l.forEach(function(c){return i.add(c)})}}catch(c){s.e(c)}finally{s.f()}return Array.from(i)},e._retainData=function(){var r=(0,$y.default)(this._getActorsToVisit()),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;this._retainDisposables.has(s)||this._retainDisposables.set(s,this._getStore(s).retain(this._operation))}}catch(o){r.e(o)}finally{r.f()}},e._disposeRetainedData=function(){var r=(0,$y.default)(this._retainDisposables.values()),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;s.dispose()}}catch(o){r.e(o)}finally{r.f()}this._retainDisposables.clear()},e._expectOperationLoader=function(){var r=this._operationLoader;return r||hn(!1),r},n}();function eRe(n){var e=[],t=[];return n.forEach(function(r){if(r.path!=null||r.label!=null){var i=r.label,s=r.path;(i==null||s==null)&&hn(!1),t.push({label:i,path:s,response:r})}else e.push(r)}),[e,t]}function Cy(n,e,t,r){var i,s=n.data,o=n.errors,a=Tw.create(),l=tv.create(e.dataID,t);a.set(e.dataID,l);var c=JIe.normalize(a,e,s,r);return(0,Fq.default)((0,Fq.default)({},c),{},{errors:o,isFinal:((i=n.extensions)===null||i===void 0?void 0:i.is_final)===!0})}function tRe(n){var e;return(e=JSON.stringify(KIe(n)))!==null&&e!==void 0?e:""}function Bq(n){var e=n.incrementalPlaceholders;e!=null&&e.length!==0&&hn(!1)}var nRe={execute:XIe},kr=rl,rRe=k_,jq=rRe.EXISTENT,G2=$e,iRe=function(){function n(t,r){this.__sources=[r,t],this._base=t,this._sink=r}var e=n.prototype;return e.unstable_getRawRecordWithChanges=function(r){var i=this._base.get(r),s=this._sink.get(r);if(s===void 0){if(i==null)return i;var o=kr.clone(i);return o}else{if(s===null)return null;if(i!=null){var a=kr.update(i,s);return a}else{var l=kr.clone(s);return l}}},e._getSinkRecord=function(r){var i=this._sink.get(r);if(!i){var s=this._base.get(r);s||G2(!1),i=kr.create(r,kr.getType(s)),this._sink.set(r,i)}return i},e.copyFields=function(r,i){var s=this._sink.get(r),o=this._base.get(r);s||o||G2(!1);var a=this._getSinkRecord(i);o&&kr.copyFields(o,a),s&&kr.copyFields(s,a)},e.copyFieldsFromRecord=function(r,i){var s=this._getSinkRecord(i);kr.copyFields(r,s)},e.create=function(r,i){this._base.getStatus(r)!==jq&&this._sink.getStatus(r)!==jq||G2(!1);var s=kr.create(r,i);this._sink.set(r,s)},e.delete=function(r){this._sink.delete(r)},e.getStatus=function(r){return this._sink.has(r)?this._sink.getStatus(r):this._base.getStatus(r)},e.getType=function(r){for(var i=0;i<this.__sources.length;i++){var s=this.__sources[i].get(r);if(s)return kr.getType(s);if(s===null)return null}},e.getValue=function(r,i){for(var s=0;s<this.__sources.length;s++){var o=this.__sources[s].get(r);if(o){var a=kr.getValue(o,i);if(a!==void 0)return a}else if(o===null)return null}},e.setValue=function(r,i,s){var o=this._getSinkRecord(r);kr.setValue(o,i,s)},e.getLinkedRecordID=function(r,i){for(var s=0;s<this.__sources.length;s++){var o=this.__sources[s].get(r);if(o){var a=kr.getLinkedRecordID(o,i);if(a!==void 0)return a}else if(o===null)return null}},e.setLinkedRecordID=function(r,i,s){var o=this._getSinkRecord(r);kr.setLinkedRecordID(o,i,s)},e.getLinkedRecordIDs=function(r,i){for(var s=0;s<this.__sources.length;s++){var o=this.__sources[s].get(r);if(o){var a=kr.getLinkedRecordIDs(o,i);if(a!==void 0)return a}else if(o===null)return null}},e.setLinkedRecordIDs=function(r,i,s){var o=this._getSinkRecord(r);kr.setLinkedRecordIDs(o,i,s)},n}(),Mse=iRe,sRe=bt.default,oRe=sRe(Gi),aRe=Nt,Gg=aRe.getArgumentValues,jn=co,lRe=jn.ACTOR_CHANGE,cRe=jn.ALIASED_FRAGMENT_SPREAD,uRe=jn.ALIASED_INLINE_FRAGMENT_SPREAD,dRe=jn.CLIENT_EDGE_TO_CLIENT_OBJECT,fRe=jn.CLIENT_EDGE_TO_SERVER_OBJECT,hRe=jn.CLIENT_EXTENSION,pRe=jn.CONDITION,mRe=jn.DEFER,gRe=jn.FLIGHT_FIELD,yRe=jn.FRAGMENT_SPREAD,vRe=jn.INLINE_DATA_FRAGMENT_SPREAD,bRe=jn.INLINE_FRAGMENT,kRe=jn.LINKED_FIELD,xRe=jn.MODULE_IMPORT,SRe=jn.RELAY_LIVE_RESOLVER,wRe=jn.RELAY_RESOLVER,$Re=jn.REQUIRED_FIELD,ERe=jn.SCALAR_FIELD,CRe=jn.STREAM,MRe=["id","__id","__typename","js"];function TRe(n,e,t,r){var i={};return rk(i,n,e,t,r),i}function rk(n,e,t,r,i){var s,o=(0,oRe.default)(r),a;try{var l=function(){var f=a.value;switch(f.kind){case kRe:f.plural?Object.defineProperty(n,(c=f.alias)!==null&&c!==void 0?c:f.name,{get:IRe(f,t,e,i),set:_Re(f,t,e,i)}):Object.defineProperty(n,(u=f.alias)!==null&&u!==void 0?u:f.name,{get:RRe(f,t,e,i),set:ARe(f,t,e,i)});break;case ERe:var h=(s=f.alias)!==null&&s!==void 0?s:f.name;Object.defineProperty(n,h,{get:function(){var m,g=Gg((m=f.args)!==null&&m!==void 0?m:[],t);return e.getValue(f.name,g)},set:MRe.includes(f.name)?void 0:function(p){var m,g=Gg((m=f.args)!==null&&m!==void 0?m:[],t);e.setValue__UNSAFE(p,f.name,g)}});break;case bRe:e.getType()===f.type&&rk(n,e,t,f.selections,i);break;case hRe:rk(n,e,t,f.selections,i);break;case yRe:break;case pRe:case lRe:case cRe:case vRe:case uRe:case dRe:case fRe:case mRe:case gRe:case xRe:case SRe:case $Re:case CRe:case wRe:throw new Error("Encountered an unexpected ReaderSelection variant in RelayRecordSourceProxy. This indicates a bug in Relay.");default:throw f.kind,new Error("Encountered an unexpected ReaderSelection variant in RelayRecordSourceProxy. This indicates a bug in Relay.")}};for(o.s();!(a=o.n()).done;){var c,u;l()}}catch(d){o.e(d)}finally{o.f()}}function _Re(n,e,t,r){return function(s){var o,a=Gg((o=n.args)!==null&&o!==void 0?o:[],e);if(s==null)throw new Error("Do not assign null to plural linked fields; assign an empty array instead.");var l=s.map(function(c){if(c==null)throw new Error("When assigning an array of items, none of the items should be null or undefined.");var u=c.__id;if(u==null)throw new Error("The __id field must be present on each item passed to the setter. This indicates a bug in Relay.");var d=r.get(u);if(d==null)throw new Error("Did not find item with data id ".concat(u," in the store."));return d});t.setLinkedRecords(l,n.name,a)}}function ARe(n,e,t,r){return function(s){var o,a=Gg((o=n.args)!==null&&o!==void 0?o:[],e);if(s==null)t.setValue(s,n.name,a);else{var l=s.__id;if(l==null)throw new Error("The __id field must be present on the argument. This indicates a bug in Relay.");var c=r.get(l);if(c==null)throw new Error("Did not find item with data id ".concat(l," in the store."));t.setLinkedRecord(c,n.name,a)}}}function IRe(n,e,t,r){return function(){var i,s=Gg((i=n.args)!==null&&i!==void 0?i:[],e),o=t.getLinkedRecords(n.name,s);return o!=null?o.map(function(a){if(a!=null){var l={};return rk(l,a,e,n.selections,r),l}else return a}):o}}function RRe(n,e,t,r){return function(){var i,s=Gg((i=n.args)!==null&&i!==void 0?i:[],e),o=t.getLinkedRecord(n.name,s);if(o!=null){var a={};return rk(a,o,e,n.selections,r),a}else return o}}var Tse={createUpdatableProxy:TRe},ORe=hc,PRe=ORe.getFragment,DRe=ou,NRe=DRe.getVariablesFromFragment,FRe=Nt,LRe=FRe.ID_KEY,zRe=Tse,BRe=zRe.createUpdatableProxy,jRe=$e;function VRe(n,e,t){var r=PRe(n),i=NRe(r,e),s=e[LRe],o=t.get(s);return o==null&&jRe(!1),{updatableData:BRe(o,i,r.selections,t)}}var _se={readUpdatableFragment_EXPERIMENTAL:VRe},qRe=hc,KRe=qRe.getUpdatableQuery,URe=Tse,HRe=URe.createUpdatableProxy;function WRe(n,e,t){var r=KRe(n);return{updatableData:HRe(t.getRoot(),e,r.fragment.selections,t)}}var Ase={readUpdatableQuery_EXPERIMENTAL:WRe},GRe=el,JRe=GRe.generateClientID,QRe=Nt,kf=QRe.getStableStorageKey,ax=$e,YRe=function(){function n(t,r,i){this._dataID=i,this._mutator=r,this._source=t}var e=n.prototype;return e.copyFieldsFrom=function(r){this._mutator.copyFields(r.getDataID(),this._dataID)},e.getDataID=function(){return this._dataID},e.getType=function(){var r=this._mutator.getType(this._dataID);return r==null&&ax(!1),r},e.getValue=function(r,i){var s=kf(r,i);return this._mutator.getValue(this._dataID,s)},e.setValue=function(r,i,s){return Ise(r)||ax(!1),this.setValue__UNSAFE(r,i,s)},e.setValue__UNSAFE=function(r,i,s){var o=kf(i,s);return this._mutator.setValue(this._dataID,o,r),this},e.getLinkedRecord=function(r,i){var s=kf(r,i),o=this._mutator.getLinkedRecordID(this._dataID,s);return o!=null?this._source.get(o):o},e.setLinkedRecord=function(r,i,s){r instanceof n||ax(!1);var o=kf(i,s),a=r.getDataID();return this._mutator.setLinkedRecordID(this._dataID,o,a),this},e.getOrCreateLinkedRecord=function(r,i,s){var o=this.getLinkedRecord(r,s);if(!o){var a,l=kf(r,s),c=JRe(this.getDataID(),l);o=(a=this._source.get(c))!==null&&a!==void 0?a:this._source.create(c,i),this.setLinkedRecord(o,r,s)}return o},e.getLinkedRecords=function(r,i){var s=this,o=kf(r,i),a=this._mutator.getLinkedRecordIDs(this._dataID,o);return a==null?a:a.map(function(l){return l!=null?s._source.get(l):l})},e.setLinkedRecords=function(r,i,s){Array.isArray(r)||ax(!1);var o=kf(i,s),a=r.map(function(l){return l&&l.getDataID()});return this._mutator.setLinkedRecordIDs(this._dataID,o,a),this},e.invalidateRecord=function(){this._source.markIDForInvalidation(this._dataID)},n}();function Ise(n){return n==null||typeof n!="object"||Array.isArray(n)&&n.every(Ise)}var XRe=YRe,ZRe=rl,Rse=k_,J2=Rse.EXISTENT,Vq=Rse.NONEXISTENT,Ose=Nt,Q2=Ose.ROOT_ID,qq=Ose.ROOT_TYPE,eOe=_se,tOe=eOe.readUpdatableFragment_EXPERIMENTAL,nOe=Ase,rOe=nOe.readUpdatableQuery_EXPERIMENTAL,iOe=XRe,lx=$e,sOe=function(){function n(t,r,i){this.__mutator=t,this._handlerProvider=i||null,this._proxies={},this._getDataID=r,this._invalidatedStore=!1,this._idsMarkedForInvalidation=new Set}var e=n.prototype;return e.publishSource=function(r,i){var s=this,o=r.getRecordIDs();o.forEach(function(a){var l=r.getStatus(a);if(l===J2){var c=r.get(a);c&&(s.__mutator.getStatus(a)!==J2&&s.create(a,ZRe.getType(c)),s.__mutator.copyFieldsFromRecord(c,a))}else l===Vq&&s.delete(a)}),i&&i.length&&i.forEach(function(a){var l=s._handlerProvider&&s._handlerProvider(a.handle);l||lx(!1),l.update(s,a)})},e.create=function(r,i){this.__mutator.create(r,i),delete this._proxies[r];var s=this.get(r);return s||lx(!1),s},e.delete=function(r){r===Q2&&lx(!1),delete this._proxies[r],this.__mutator.delete(r)},e.get=function(r){if(!this._proxies.hasOwnProperty(r)){var i=this.__mutator.getStatus(r);i===J2?this._proxies[r]=new iOe(this,this.__mutator,r):this._proxies[r]=i===Vq?null:void 0}return this._proxies[r]},e.getRoot=function(){var r=this.get(Q2);return r||(r=this.create(Q2,qq)),r&&r.getType()===qq||lx(!1),r},e.invalidateStore=function(){this._invalidatedStore=!0},e.isStoreMarkedForInvalidation=function(){return this._invalidatedStore},e.markIDForInvalidation=function(r){this._idsMarkedForInvalidation.add(r)},e.getIDsMarkedForInvalidation=function(){return this._idsMarkedForInvalidation},e.readUpdatableQuery_EXPERIMENTAL=function(r,i){return rOe(r,i,this)},e.readUpdatableFragment_EXPERIMENTAL=function(r,i){return tOe(r,i,this)},n}(),Pse=sOe,Dse=Nt,oOe=Dse.ROOT_TYPE,Kq=Dse.getStorageKey,aOe=_se,lOe=aOe.readUpdatableFragment_EXPERIMENTAL,cOe=Ase,uOe=cOe.readUpdatableQuery_EXPERIMENTAL,Uq=$e,dOe=function(){function n(t,r,i){this.__mutator=t,this.__recordSource=r,this._readSelector=i}var e=n.prototype;return e.create=function(r,i){return this.__recordSource.create(r,i)},e.delete=function(r){this.__recordSource.delete(r)},e.get=function(r){return this.__recordSource.get(r)},e.getRoot=function(){return this.__recordSource.getRoot()},e.getOperationRoot=function(){var r=this.__recordSource.get(this._readSelector.dataID);return r||(r=this.__recordSource.create(this._readSelector.dataID,oOe)),r},e._getRootField=function(r,i,s){var o=r.node.selections.find(function(a){return a.kind==="LinkedField"&&a.name===i||a.kind==="RequiredField"&&a.field.name===i});return o&&o.kind==="RequiredField"&&(o=o.field),o&&o.kind==="LinkedField"||Uq(!1),o.plural!==s&&Uq(!1),o},e.getRootField=function(r){var i=this._getRootField(this._readSelector,r,!1),s=Kq(i,this._readSelector.variables);return this.getOperationRoot().getLinkedRecord(s)},e.getPluralRootField=function(r){var i=this._getRootField(this._readSelector,r,!0),s=Kq(i,this._readSelector.variables);return this.getOperationRoot().getLinkedRecords(s)},e.invalidateStore=function(){this.__recordSource.invalidateStore()},e.readUpdatableQuery_EXPERIMENTAL=function(r,i){return uOe(r,i,this)},e.readUpdatableFragment_EXPERIMENTAL=function(r,i){return lOe(r,i,this)},n}(),fOe=dOe,Nse=Object.freeze({__LIVE_RESOLVER_SUSPENSE_SENTINEL:!0});function hOe(){return Nse}function pOe(n){return n===Nse}var mOe={isSuspenseSentinel:pOe,suspenseSentinel:hOe},gOe=bt.default,Y2=gOe(Gi),yOe=v_,vOe=co,bOe=vOe.RELAY_LIVE_RESOLVER,kOe=el,xOe=kOe.generateClientID,bs=rl,Qk=Nt,Hq=Qk.RELAY_RESOLVER_ERROR_KEY,Wq=Qk.RELAY_RESOLVER_INVALIDATION_KEY,X2=Qk.RELAY_RESOLVER_SNAPSHOT_KEY,Gq=Qk.RELAY_RESOLVER_VALUE_KEY,SOe=Qk.getStorageKey,UN=$e,Jq=new Set,wOe=function(){function n(){}var e=n.prototype;return e.readFromCacheOrEvaluate=function(r,i,s,o,a){i.kind===bOe&&UN(!1);var l=o(),c=l.resolverResult,u=l.snapshot,d=l.error;return[c,void 0,d,u,void 0]},e.invalidateDataIDs=function(r){},e.ensureClientRecord=function(r,i){UN(!1)},n}();function Z2(n,e,t){var r=n.get(e);r||(r=new Set,n.set(e,r)),r.add(t)}var $Oe=function(){function n(t){this._resolverIDToRecordIDs=new Map,this._recordIDToResolverIDs=new Map,this._getRecordSource=t}var e=n.prototype;return e.readFromCacheOrEvaluate=function(r,i,s,o,a){var l=this._getRecordSource(),c=bs.getDataID(r),u=SOe(i,s),d=bs.getLinkedRecordID(r,u),f=d==null?null:l.get(d);if(f==null||this._isInvalid(f,a)){var h,p;d=(h=d)!==null&&h!==void 0?h:xOe(c,u),f=bs.create(d,"__RELAY_RESOLVER__");var m=o();bs.setValue(f,Gq,m.resolverResult),bs.setValue(f,X2,m.snapshot),bs.setValue(f,Hq,m.error),l.set(d,f);var g=bs.clone(r);bs.setLinkedRecordID(g,u,d),l.set(bs.getDataID(g),g);var y=m.resolverID;Z2(this._resolverIDToRecordIDs,y,d),Z2(this._recordIDToResolverIDs,c,y);var k=(p=m.snapshot)===null||p===void 0?void 0:p.seenRecords;if(k!=null){var b=(0,Y2.default)(k),S;try{for(b.s();!(S=b.n()).done;){var w=S.value;Z2(this._recordIDToResolverIDs,w,y)}}catch(C){b.e(C)}finally{b.f()}}}var x=f[Gq],$=f[X2],E=f[Hq];return[x,d,E,$,void 0]},e.invalidateDataIDs=function(r){for(var i=this._getRecordSource(),s=new Set,o=Array.from(r);o.length;){var a=o.pop();r.add(a);var l=(0,Y2.default)((u=this._recordIDToResolverIDs.get(a))!==null&&u!==void 0?u:Jq),c;try{for(l.s();!(c=l.n()).done;){var u,d=c.value;if(!s.has(d)){var f=(0,Y2.default)((p=this._resolverIDToRecordIDs.get(d))!==null&&p!==void 0?p:Jq),h;try{for(f.s();!(h=f.n()).done;){var p,m=h.value;this._markInvalidatedResolverRecord(m,i,r),s.has(m)||o.push(m)}}catch(g){f.e(g)}finally{f.f()}}}}catch(g){l.e(g)}finally{l.f()}}},e._markInvalidatedResolverRecord=function(r,i,s){var o=i.get(r);if(o){var a=bs.clone(o);bs.setValue(a,Wq,!0),i.set(r,a)}},e._isInvalid=function(r,i){if(!bs.getValue(r,Wq))return!1;var s=bs.getValue(r,X2),o=s==null?void 0:s.data,a=s==null?void 0:s.selector;if(o==null||a==null)return!0;var l=i(a),c=l.data,u=yOe(o,c);return u!==o},e.ensureClientRecord=function(r,i){UN(!1)},n}(),Fse={NoopResolverCache:wOe,RecordResolverCache:$Oe},EOe=hc,COe=EOe.getFragment,MOe=ou,TOe=MOe.getSelector,Qq=$e,Tv=[];function _Oe(n,e){Tv.push(n);try{return e()}finally{Tv.pop()}}function AOe(n,e){if(!Tv.length)throw new Error("readFragment should be called only from within a Relay Resolver function.");var t=Tv[Tv.length-1],r=COe(n),i=TOe(r,e);i==null&&Qq(!1),i.kind!=="SingularReaderSelector"&&Qq(!1);var s=t.getDataForResolverFragment(i,e),o=s.data,a=s.isMissingData;if(a)throw Lse;return o}var Lse={},zse={readFragment:AOe,withResolverContext:_Oe,RESOLVER_FRAGMENT_MISSING_DATA_SENTINEL:Lse},az=bt.default,eI=az(Gi),IOe=az(lp),My=az(Uk),Vn=co,ROe=Vn.ACTOR_CHANGE,OOe=Vn.ALIASED_FRAGMENT_SPREAD,POe=Vn.ALIASED_INLINE_FRAGMENT_SPREAD,tI=Vn.CLIENT_EDGE_TO_CLIENT_OBJECT,Yq=Vn.CLIENT_EDGE_TO_SERVER_OBJECT,DOe=Vn.CLIENT_EXTENSION,NOe=Vn.CONDITION,FOe=Vn.DEFER,LOe=Vn.FLIGHT_FIELD,zOe=Vn.FRAGMENT_SPREAD,BOe=Vn.INLINE_DATA_FRAGMENT_SPREAD,jOe=Vn.INLINE_FRAGMENT,Xq=Vn.LINKED_FIELD,VOe=Vn.MODULE_IMPORT,Zq=Vn.RELAY_LIVE_RESOLVER,eK=Vn.RELAY_RESOLVER,qOe=Vn.REQUIRED_FIELD,tK=Vn.SCALAR_FIELD,KOe=Vn.STREAM,ho=lo,UOe=el,HOe=mOe,WOe=HOe.isSuspenseSentinel,GOe=Fd,ni=rl,JOe=Jk,QOe=JOe.getReactFlightClientResponse,il=Nt,YOe=il.CLIENT_EDGE_TRAVERSAL_PATH,XOe=il.FRAGMENT_OWNER_KEY,ZOe=il.FRAGMENT_PROP_NAME_KEY,cx=il.FRAGMENTS_KEY,ux=il.ID_KEY,ePe=il.IS_WITHIN_UNMATCHED_TYPE_REFINEMENT,tPe=il.MODULE_COMPONENT_KEY,nPe=il.ROOT_ID,_w=il.getArgumentValues,rPe=il.getModuleComponentKey,zp=il.getStorageKey,iPe=Fse,sPe=iPe.NoopResolverCache,Bse=zse,oPe=Bse.RESOLVER_FRAGMENT_MISSING_DATA_SENTINEL,aPe=Bse.withResolverContext,lPe=x_,cPe=lPe.generateTypeID,ks=$e;function jse(n,e,t){var r=new uPe(n,e,t??new sPe);return r.read()}var uPe=function(){function n(t,r,i){var s;this._clientEdgeTraversalPath=ho.ENABLE_CLIENT_EDGES&&(s=r.clientEdgeTraversalPath)!==null&&s!==void 0&&s.length?(0,My.default)(r.clientEdgeTraversalPath):[],this._missingClientEdges=[],this._missingLiveResolverFields=[],this._isMissingData=!1,this._isWithinUnmatchedTypeRefinement=!1,this._missingRequiredFields=null,this._owner=r.owner,this._recordSource=t,this._seenRecords=new Set,this._selector=r,this._variables=r.variables,this._resolverCache=i,this._resolverErrors=[],this._fragmentName=r.node.name}var e=n.prototype;return e.read=function(){var r=this._selector,i=r.node,s=r.dataID,o=r.isWithinUnmatchedTypeRefinement,a=i.abstractKey,l=this._recordSource.get(s),c=!o;if(c&&a==null&&l!=null){var u=ni.getType(l);u!==i.type&&s!==nPe&&(c=!1)}if(c&&a!=null&&l!=null){var d=this._implementsInterface(l,a);d===!1?c=!1:d==null&&(this._isMissingData=!0)}this._isWithinUnmatchedTypeRefinement=!c;var f=this._traverse(i,s,null);return{data:f,isMissingData:this._isMissingData&&c,missingClientEdges:ho.ENABLE_CLIENT_EDGES&&this._missingClientEdges.length?this._missingClientEdges:null,missingLiveResolverFields:this._missingLiveResolverFields,seenRecords:this._seenRecords,selector:this._selector,missingRequiredFields:this._missingRequiredFields,relayResolverErrors:this._resolverErrors}},e._markDataAsMissing=function(){if(this._isMissingData=!0,ho.ENABLE_CLIENT_EDGES&&this._clientEdgeTraversalPath.length){var r=this._clientEdgeTraversalPath[this._clientEdgeTraversalPath.length-1];r!==null&&this._missingClientEdges.push({request:r.readerClientEdge.operation,clientEdgeDestinationID:r.clientEdgeDestinationID})}},e._traverse=function(r,i,s){var o=this._recordSource.get(i);if(this._seenRecords.add(i),o==null)return o===void 0&&this._markDataAsMissing(),o;var a=s||{},l=this._traverseSelections(r.selections,o,a);return l?a:null},e._getVariableValue=function(r){return this._variables.hasOwnProperty(r)||ks(!1),this._variables[r]},e._maybeReportUnexpectedNull=function(r,i,s){var o;if(((o=this._missingRequiredFields)===null||o===void 0?void 0:o.action)!=="THROW"){var a=this._fragmentName;switch(i){case"THROW":this._missingRequiredFields={action:i,field:{path:r,owner:a}};return;case"LOG":this._missingRequiredFields==null?this._missingRequiredFields={action:i,fields:[{path:r,owner:a}]}:this._missingRequiredFields={action:i,fields:[].concat((0,My.default)(this._missingRequiredFields.fields),[{path:r,owner:a}])};return}}},e._traverseSelections=function(r,i,s){for(var o=0;o<r.length;o++){var a=r[o];switch(a.kind){case qOe:{var l=this._readRequiredField(a,i,s);if(l==null){var c=a.action;return c!=="NONE"&&this._maybeReportUnexpectedNull(a.path,c,i),!1}break}case tK:this._readScalar(a,i,s);break;case Xq:a.plural?this._readPluralLink(a,i,s):this._readLink(a,i,s);break;case NOe:var u=!!this._getVariableValue(a.condition);if(u===a.passingValue){var d=this._traverseSelections(a.selections,i,s);if(!d)return!1}break;case jOe:{if(this._readInlineFragment(a,i,s)===!1)return!1;break}case Zq:case eK:{if(!ho.ENABLE_RELAY_RESOLVERS)throw new Error("Relay Resolver fields are not yet supported.");this._readResolverField(a,i,s);break}case zOe:this._createFragmentPointer(a,i,s);break;case OOe:s[a.name]=this._createAliasedFragmentSpread(a,i);break;case POe:{var f=this._readInlineFragment(a.fragment,i,{});f===!1&&(f=null),s[a.name]=f;break}case VOe:this._readModuleImport(a,i,s);break;case BOe:this._createInlineDataOrResolverFragmentPointer(a,i,s);break;case FOe:case DOe:{var h=this._isMissingData,p=this._missingClientEdges.length;ho.ENABLE_CLIENT_EDGES&&this._clientEdgeTraversalPath.push(null);var m=this._traverseSelections(a.selections,i,s);if(this._isMissingData=h||this._missingClientEdges.length>p,ho.ENABLE_CLIENT_EDGES&&this._clientEdgeTraversalPath.pop(),!m)return!1;break}case KOe:{var g=this._traverseSelections(a.selections,i,s);if(!g)return!1;break}case LOe:if(ho.ENABLE_REACT_FLIGHT_COMPONENT_FIELD)this._readFlightField(a,i,s);else throw new Error("Flight fields are not yet supported.");break;case ROe:this._readActorChange(a,i,s);break;case tI:case Yq:if(ho.ENABLE_CLIENT_EDGES)this._readClientEdge(a,i,s);else throw new Error("Client edges are not yet supported.");break;default:ks(!1)}}return!0},e._readRequiredField=function(r,i,s){switch(r.field.kind){case tK:return this._readScalar(r.field,i,s);case Xq:return r.field.plural?this._readPluralLink(r.field,i,s):this._readLink(r.field,i,s);case eK:if(!ho.ENABLE_RELAY_RESOLVERS)throw new Error("Relay Resolver fields are not yet supported.");return this._readResolverField(r.field,i,s);case Zq:if(!ho.ENABLE_RELAY_RESOLVERS)throw new Error("Relay Resolver fields are not yet supported.");return this._readResolverField(r.field,i,s);case tI:case Yq:if(!ho.ENABLE_RELAY_RESOLVERS)throw new Error("Relay Resolver fields are not yet supported.");return this._readClientEdge(r.field,i,s);default:r.field.kind,ks(!1)}},e._readResolverField=function(r,i,s){var o=this,a,l=r.fragment,c=zp(l??r,this._variables),u=UOe.generateClientID(ni.getDataID(i),c),d,f=function(A){return d!=null?{data:d.data,isMissingData:d.isMissingData}:(d=jse(o._recordSource,A,o._resolverCache),{data:d.data,isMissingData:d.isMissingData})},h={getDataForResolverFragment:f},p=function(){if(l!=null){var A={__id:ni.getDataID(i),__fragmentOwner:o._owner,__fragments:(0,IOe.default)({},l.name,l.args?_w(l.args,o._variables):{})};return aPe(h,function(){var z=nK(r,o._variables,A,o._fragmentName),j=z[0],K=z[1];return{resolverResult:j,snapshot:d,resolverID:u,error:K}})}else{var L=nK(r,o._variables,null,o._fragmentName),F=L[0],O=L[1];return{resolverResult:F,snapshot:void 0,resolverID:u,error:O}}},m=this._resolverCache.readFromCacheOrEvaluate(i,r,this._variables,p,f),g=m[0],y=m[1],k=m[2],b=m[3],S=m[4];if(b!=null){if(b.missingRequiredFields!=null&&this._addMissingRequiredFields(b.missingRequiredFields),b.missingClientEdges!=null){var w=(0,eI.default)(b.missingClientEdges),x;try{for(w.s();!(x=w.n()).done;){var $=x.value;this._missingClientEdges.push($)}}catch(R){w.e(R)}finally{w.f()}}if(b.missingLiveResolverFields!=null){this._isMissingData=this._isMissingData||b.missingLiveResolverFields.length>0;var E=(0,eI.default)(b.missingLiveResolverFields),C;try{for(E.s();!(C=E.n()).done;){var M=C.value;this._missingLiveResolverFields.push(M)}}catch(R){E.e(R)}finally{E.f()}}var P=(0,eI.default)(b.relayResolverErrors),I;try{for(P.s();!(I=P.n()).done;){var N=I.value;this._resolverErrors.push(N)}}catch(R){P.e(R)}finally{P.f()}this._isMissingData=this._isMissingData||b.isMissingData}k&&this._resolverErrors.push(k),y!=null&&this._seenRecords.add(y),S!=null&&(this._isMissingData=!0,this._missingLiveResolverFields.push({path:"".concat(this._fragmentName,".").concat(r.path),liveStateID:S}));var T=(a=r.alias)!==null&&a!==void 0?a:r.name;return s[T]=g,g},e._readClientEdge=function(r,i,s){var o=this,a,l=r.backingField;l.kind==="ClientExtension"&&ks(!1);var c=(a=l.alias)!==null&&a!==void 0?a:l.name,u={};this._traverseSelections([l],i,u);var d=u[c];if(d==null||WOe(d)){s[c]=d;return}if(r.linkedField.plural?Array.isArray(d)||ks(!1):typeof d!="string"&&ks(!1),r.kind===tI?(r.linkedField.plural?d=d.map(function(h){return o._resolverCache.ensureClientRecord(h,r.concreteType)}):d=this._resolverCache.ensureClientRecord(d,r.concreteType),this._clientEdgeTraversalPath.push(null)):(r.linkedField.plural&&ks(!1),this._clientEdgeTraversalPath.push({readerClientEdge:r,clientEdgeDestinationID:d})),r.linkedField.plural)s[c]=this._readLinkedIds(r.linkedField,d,i,s);else{var f=s[c];f==null||typeof f=="object"||ks(!1),s[c]=this._traverse(r.linkedField,d,f)}this._clientEdgeTraversalPath.pop()},e._readFlightField=function(r,i,s){var o,a=(o=r.alias)!==null&&o!==void 0?o:r.name,l=zp(r,this._variables),c=ni.getLinkedRecordID(i,l);if(c==null)return s[a]=c,c===void 0&&this._markDataAsMissing(),c;var u=this._recordSource.get(c);if(this._seenRecords.add(c),u==null)return s[a]=u,u===void 0&&this._markDataAsMissing(),u;var d=QOe(u);return s[a]=d,d},e._readScalar=function(r,i,s){var o,a=(o=r.alias)!==null&&o!==void 0?o:r.name,l=zp(r,this._variables),c=ni.getValue(i,l);return c===void 0&&this._markDataAsMissing(),s[a]=c,c},e._readLink=function(r,i,s){var o,a=(o=r.alias)!==null&&o!==void 0?o:r.name,l=zp(r,this._variables),c=ni.getLinkedRecordID(i,l);if(c==null)return s[a]=c,c===void 0&&this._markDataAsMissing(),c;var u=s[a];u==null||typeof u=="object"||ks(!1);var d=this._traverse(r,c,u);return s[a]=d,d},e._readActorChange=function(r,i,s){var o,a=(o=r.alias)!==null&&o!==void 0?o:r.name,l=zp(r,this._variables),c=ni.getActorLinkedRecordID(i,l);if(c==null)return s[a]=c,c===void 0&&this._markDataAsMissing(),s[a];var u=c[0],d=c[1],f={};return this._createFragmentPointer(r.fragmentSpread,{__id:d},f),s[a]={__fragmentRef:f,__viewer:u},s[a]},e._readPluralLink=function(r,i,s){var o=zp(r,this._variables),a=ni.getLinkedRecordIDs(i,o);return this._readLinkedIds(r,a,i,s)},e._readLinkedIds=function(r,i,s,o){var a=this,l,c=(l=r.alias)!==null&&l!==void 0?l:r.name;if(i==null)return o[c]=i,i===void 0&&this._markDataAsMissing(),i;var u=o[c];u==null||Array.isArray(u)||ks(!1);var d=u||[];return i.forEach(function(f,h){if(f==null){f===void 0&&a._markDataAsMissing(),d[h]=f;return}var p=d[h];p==null||typeof p=="object"||ks(!1),d[h]=a._traverse(r,f,p)}),o[c]=d,d},e._readModuleImport=function(r,i,s){var o=rPe(r.documentName),a=ni.getValue(i,o);if(a==null){a===void 0&&this._markDataAsMissing();return}this._createFragmentPointer({kind:"FragmentSpread",name:r.fragmentName,args:r.args},i,s),s[ZOe]=r.fragmentPropName,s[tPe]=a},e._createAliasedFragmentSpread=function(r,i){var s=r.abstractKey;if(s==null){var o=ni.getType(i);if(o==null||o!==r.type)return null}else{var a=this._implementsInterface(i,s);if(a===!1)return null;if(a==null){this._markDataAsMissing();return}}var l={};return this._createFragmentPointer(r.fragment,i,l),l},e._readInlineFragment=function(r,i,s){var o=r.abstractKey;if(o==null){var a=ni.getType(i);if(a==null||a!==r.type)return null;var l=this._traverseSelections(r.selections,i,s);if(!l)return!1}else{var c=this._implementsInterface(i,o),u=this._isMissingData,d=this._isWithinUnmatchedTypeRefinement;if(this._isWithinUnmatchedTypeRefinement=d||c===!1,this._traverseSelections(r.selections,i,s),this._isWithinUnmatchedTypeRefinement=d,c===!1){this._isMissingData=u;return}else if(c==null)return this._markDataAsMissing(),null}return s},e._createFragmentPointer=function(r,i,s){var o=s[cx];o==null&&(o=s[cx]={}),typeof o=="object"&&o!=null||ks(!1),s[ux]==null&&(s[ux]=ni.getDataID(i)),o[r.name]=r.args?_w(r.args,this._variables):{},s[XOe]=this._owner,s[ePe]=this._isWithinUnmatchedTypeRefinement,ho.ENABLE_CLIENT_EDGES&&this._clientEdgeTraversalPath.length>0&&this._clientEdgeTraversalPath[this._clientEdgeTraversalPath.length-1]!==null&&(s[YOe]=(0,My.default)(this._clientEdgeTraversalPath))},e._createInlineDataOrResolverFragmentPointer=function(r,i,s){var o=s[cx];o==null&&(o=s[cx]={}),typeof o=="object"&&o!=null||ks(!1),s[ux]==null&&(s[ux]=ni.getDataID(i));var a={},l=this._fragmentName;this._fragmentName=r.name;var c=this._variables,u=r.args?_w(r.args,this._variables):{};this._variables=GOe.getFragmentVariables(r,this._owner.variables,u),this._traverseSelections(r.selections,i,a),this._variables=c,this._fragmentName=l,o[r.name]=a},e._addMissingRequiredFields=function(r){if(this._missingRequiredFields==null){this._missingRequiredFields=r;return}if(this._missingRequiredFields.action!=="THROW"){if(r.action==="THROW"){this._missingRequiredFields=r;return}this._missingRequiredFields={action:"LOG",fields:[].concat((0,My.default)(this._missingRequiredFields.fields),(0,My.default)(r.fields))}}},e._implementsInterface=function(r,i){var s=ni.getType(r),o=this._recordSource.get(cPe(s)),a=o!=null?ni.getValue(o,i):null;return a},n}();function nK(n,e,t,r){var i=typeof n.resolverModule=="function"?n.resolverModule:n.resolverModule.default,s=null,o=null;try{var a=[];n.fragment!=null&&a.push(t);var l=n.args?_w(n.args,e):void 0;a.push(l),s=i.apply(null,a)}catch(d){if(d===oPe)s=void 0;else{var c,u=(c=n.path)!==null&&c!==void 0?c:"[UNKNOWN]";o={field:{path:u,owner:r},error:d}}}return[s,o]}var lz={read:jse},nI,rI,iI=Mse,sI=Pse,rK=fOe,dPe=lz,iK=Gk,oI=$e,aI=typeof kd<"u"?kd:typeof window<"u"?window:void 0,lI=(nI=aI==null||(rI=aI.ErrorUtils)===null||rI===void 0?void 0:rI.applyWithGuard)!==null&&nI!==void 0?nI:function(n,e,t,r,i){return n.apply(e,t)},fPe=function(){function n(t,r,i){this._hasStoreSnapshot=!1,this._handlerProvider=r||null,this._pendingBackupRebase=!1,this._pendingData=new Set,this._pendingOptimisticUpdates=new Set,this._store=t,this._appliedOptimisticUpdates=new Set,this._gcHold=null,this._getDataID=i}var e=n.prototype;return e.applyUpdate=function(r){!this._appliedOptimisticUpdates.has(r)&&!this._pendingOptimisticUpdates.has(r)||oI(!1),this._pendingOptimisticUpdates.add(r)},e.revertUpdate=function(r){this._pendingOptimisticUpdates.has(r)?this._pendingOptimisticUpdates.delete(r):this._appliedOptimisticUpdates.has(r)&&(this._pendingBackupRebase=!0,this._appliedOptimisticUpdates.delete(r))},e.revertAll=function(){this._pendingBackupRebase=!0,this._pendingOptimisticUpdates.clear(),this._appliedOptimisticUpdates.clear()},e.commitPayload=function(r,i,s){this._pendingBackupRebase=!0,this._pendingData.add({kind:"payload",operation:r,payload:i,updater:s})},e.commitUpdate=function(r){this._pendingBackupRebase=!0,this._pendingData.add({kind:"updater",updater:r})},e.commitSource=function(r){this._pendingBackupRebase=!0,this._pendingData.add({kind:"source",source:r})},e.run=function(r){var i=this._appliedOptimisticUpdates===0&&!!this._gcHold,s=!this._pendingBackupRebase&&this._pendingOptimisticUpdates.size===0&&!i;if(s)return[];this._pendingBackupRebase&&this._hasStoreSnapshot&&(this._store.restore(),this._hasStoreSnapshot=!1);var o=this._commitData();return(this._pendingOptimisticUpdates.size||this._pendingBackupRebase&&this._appliedOptimisticUpdates.size)&&(this._hasStoreSnapshot||(this._store.snapshot(),this._hasStoreSnapshot=!0),this._applyUpdates()),this._pendingBackupRebase=!1,this._appliedOptimisticUpdates.size>0?this._gcHold||(this._gcHold=this._store.holdGC()):this._gcHold&&(this._gcHold.dispose(),this._gcHold=null),this._store.notify(r,o)},e._publishSourceFromPayload=function(r){var i=this,s=r.payload,o=r.operation,a=r.updater,l=s.source,c=s.fieldPayloads,u=new iI(this._store.getSource(),l),d=new sI(u,this._getDataID);if(c&&c.length&&c.forEach(function(g){var y=i._handlerProvider&&i._handlerProvider(g.handle);y||oI(!1),y.update(d,g)}),a){var f=o.fragment;f==null&&oI(!1);var h=new rK(u,d,f),p=sK(l,f);a(h,p)}var m=d.getIDsMarkedForInvalidation();return this._store.publish(l,m),d.isStoreMarkedForInvalidation()},e._commitData=function(){var r=this;if(!this._pendingData.size)return!1;var i=!1;return this._pendingData.forEach(function(s){if(s.kind==="payload"){var o=r._publishSourceFromPayload(s);i=i||o}else if(s.kind==="source"){var a=s.source;r._store.publish(a)}else{var l=s.updater,c=iK.create(),u=new iI(r._store.getSource(),c),d=new sI(u,r._getDataID);lI(l,null,[d],null,"RelayPublishQueue:commitData"),i=i||d.isStoreMarkedForInvalidation();var f=d.getIDsMarkedForInvalidation();r._store.publish(c,f)}}),this._pendingData.clear(),i},e._applyUpdates=function(){var r=this,i=iK.create(),s=new iI(this._store.getSource(),i),o=new sI(s,this._getDataID,this._handlerProvider),a=function(c){if(c.storeUpdater){var u=c.storeUpdater;lI(u,null,[o],null,"RelayPublishQueue:applyUpdates")}else{var d=c.operation,f=c.payload,h=c.updater,p=f.source,m=f.fieldPayloads;if(p&&o.publishSource(p,m),h){var g;p&&(g=sK(p,d.fragment));var y=new rK(s,o,d.fragment);lI(h,null,[y,g],null,"RelayPublishQueue:applyUpdates")}}};this._pendingBackupRebase&&this._appliedOptimisticUpdates.size&&this._appliedOptimisticUpdates.forEach(a),this._pendingOptimisticUpdates.size&&(this._pendingOptimisticUpdates.forEach(function(l){a(l),r._appliedOptimisticUpdates.add(l)}),this._pendingOptimisticUpdates.clear()),this._store.publish(i)},n}();function sK(n,e){var t=dPe.read(n,e).data;return t}var hPe=fPe,pPe=bt.default,oK=pPe(tl),mPe=Mie,Vse=tz,aK=Vse.INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,dx=Vse.assertInternalActorIndentifier,cI=up,lK=ZAe,gPe=fse,yPe=i2e,vPe=lo,bPe=mse,kPe=m2e,xPe=nRe,SPe=hPe,wPe=Gk,qse=function(){function n(t){var r=this,i,s,o,a,l,c,u,d;this.configName=t.configName,this._treatMissingFieldsAsNull=t.treatMissingFieldsAsNull===!0;var f=t.operationLoader,h=t.reactFlightPayloadDeserializer,p=t.reactFlightServerErrorHandler;this.__log=(i=t.log)!==null&&i!==void 0?i:$Pe,this.requiredFieldLogger=(s=t.requiredFieldLogger)!==null&&s!==void 0?s:kPe,this._defaultRenderPolicy=((o=t.UNSTABLE_defaultRenderPolicy)!==null&&o!==void 0?o:vPe.ENABLE_PARTIAL_RENDERING_DEFAULT===!0)?"partial":"full",this._operationLoader=f,this._operationExecutions=new Map,this._network=lK(this,t.network),this._getDataID=(a=t.getDataID)!==null&&a!==void 0?a:bPe,this._publishQueue=new SPe(t.store,(l=t.handlerProvider)!==null&&l!==void 0?l:mPe,this._getDataID),this._scheduler=(c=t.scheduler)!==null&&c!==void 0?c:null,this._store=t.store,this.options=t.options,this._isServer=(u=t.isServer)!==null&&u!==void 0?u:!1,this.__setNet=function(m){return r._network=lK(r,m)},this._missingFieldHandlers=t.missingFieldHandlers,this._operationTracker=(d=t.operationTracker)!==null&&d!==void 0?d:new gPe,this._reactFlightPayloadDeserializer=h,this._reactFlightServerErrorHandler=p,this._shouldProcessClientComponents=t.shouldProcessClientComponents,yPe(this)}var e=n.prototype;return e.getStore=function(){return this._store},e.getNetwork=function(){return this._network},e.getOperationTracker=function(){return this._operationTracker},e.isRequestActive=function(r){var i=this._operationExecutions.get(r);return i==="active"},e.UNSTABLE_getDefaultRenderPolicy=function(){return this._defaultRenderPolicy},e.applyUpdate=function(r){var i=this,s=function(){i._scheduleUpdates(function(){i._publishQueue.revertUpdate(r),i._publishQueue.run()})};return this._scheduleUpdates(function(){i._publishQueue.applyUpdate(r),i._publishQueue.run()}),{dispose:s}},e.revertUpdate=function(r){var i=this;this._scheduleUpdates(function(){i._publishQueue.revertUpdate(r),i._publishQueue.run()})},e.replaceUpdate=function(r,i){var s=this;this._scheduleUpdates(function(){s._publishQueue.revertUpdate(r),s._publishQueue.applyUpdate(i),s._publishQueue.run()})},e.applyMutation=function(r){var i=this._execute({createSource:function(){return cI.create(function(o){})},isClientPayload:!1,operation:r.operation,optimisticConfig:r,updater:null}).subscribe({});return{dispose:function(){return i.unsubscribe()}}},e.check=function(r){return this._missingFieldHandlers==null||this._missingFieldHandlers.length===0?this._store.check(r):this._checkSelectorAndHandleMissingFields(r,this._missingFieldHandlers)},e.commitPayload=function(r,i){this._execute({createSource:function(){return cI.from({data:i})},isClientPayload:!0,operation:r,optimisticConfig:null,updater:null}).subscribe({})},e.commitUpdate=function(r){var i=this;this._scheduleUpdates(function(){i._publishQueue.commitUpdate(r),i._publishQueue.run()})},e.lookup=function(r){return this._store.lookup(r)},e.subscribe=function(r,i){return this._store.subscribe(r,i)},e.retain=function(r){return this._store.retain(r)},e.isServer=function(){return this._isServer},e._checkSelectorAndHandleMissingFields=function(r,i){var s=this,o=wPe.create(),a=this._store.getSource(),l=this._store.check(r,{handlers:i,defaultActorIdentifier:aK,getSourceForActor:function(u){return dx(u),a},getTargetForActor:function(u){return dx(u),o}});return o.size()>0&&this._scheduleUpdates(function(){s._publishQueue.commitSource(o),s._publishQueue.run()}),l},e._scheduleUpdates=function(r){var i=this._scheduler;i!=null?i.schedule(r):r()},e.execute=function(r){var i=this,s=r.operation;return this._execute({createSource:function(){return i.getNetwork().execute(s.request.node.params,s.request.variables,s.request.cacheConfig||{},null)},isClientPayload:!1,operation:s,optimisticConfig:null,updater:null})},e.executeSubscription=function(r){var i=this,s=r.operation,o=r.updater;return this._execute({createSource:function(){return i.getNetwork().execute(s.request.node.params,s.request.variables,s.request.cacheConfig||{},null)},isClientPayload:!1,operation:s,optimisticConfig:null,updater:o})},e.executeMutation=function(r){var i=this,s=r.operation,o=r.optimisticResponse,a=r.optimisticUpdater,l=r.updater,c=r.uploadables,u;return(o||a)&&(u={operation:s,response:o,updater:a}),this._execute({createSource:function(){return i.getNetwork().execute(s.request.node.params,s.request.variables,(0,oK.default)((0,oK.default)({},s.request.cacheConfig),{},{force:!0}),c)},isClientPayload:!1,operation:s,optimisticConfig:u,updater:l})},e.executeWithSource=function(r){var i=r.operation,s=r.source;return this._execute({createSource:function(){return s},isClientPayload:!1,operation:i,optimisticConfig:null,updater:null})},e.toJSON=function(){var r;return"RelayModernEnvironment(".concat((r=this.configName)!==null&&r!==void 0?r:"",")")},e._execute=function(r){var i=this,s=r.createSource,o=r.isClientPayload,a=r.operation,l=r.optimisticConfig,c=r.updater,u=this._publishQueue,d=this._store;return cI.create(function(f){var h=xPe.execute({actorIdentifier:aK,getDataID:i._getDataID,isClientPayload:o,log:i.__log,operation:a,operationExecutions:i._operationExecutions,operationLoader:i._operationLoader,operationTracker:i._operationTracker,optimisticConfig:l,getPublishQueue:function(m){return dx(m),u},reactFlightPayloadDeserializer:i._reactFlightPayloadDeserializer,reactFlightServerErrorHandler:i._reactFlightServerErrorHandler,scheduler:i._scheduler,shouldProcessClientComponents:i._shouldProcessClientComponents,sink:f,source:s(),getStore:function(m){return dx(m),d},treatMissingFieldsAsNull:i._treatMissingFieldsAsNull,updater:c});return function(){return h.cancel()}})},n}();qse.prototype["@@RelayModernEnvironment"]=!0;function $Pe(){}var EPe=qse,CPe=Promise.resolve();function MPe(n){CPe.then(n).catch(TPe)}function TPe(n){setTimeout(function(){throw n},0)}var _Pe=MPe,APe=co,cK=APe.LINKED_FIELD,IPe=Nt,RPe=IPe.getHandleStorageKey,OPe=nl,PPe=$e;function DPe(n,e,t){var r=e.find(function(s){return s.kind===cK&&s.name===n.name&&s.alias===n.alias&&OPe(s.args,n.args)});r&&r.kind===cK||PPe(!1);var i=RPe(n,t);return{kind:"LinkedField",alias:r.alias,name:i,storageKey:i,args:null,concreteType:r.concreteType,plural:r.plural,selections:r.selections}}var Kse=DPe,NPe=co,uK=NPe.SCALAR_FIELD,FPe=Nt,LPe=FPe.getHandleStorageKey,zPe=nl,BPe=$e;function jPe(n,e,t){var r=e.find(function(s){return s.kind===uK&&s.name===n.name&&s.alias===n.alias&&zPe(s.args,n.args)});r&&r.kind===uK||BPe(!1);var i=LPe(n,t);return{kind:"ScalarField",alias:r.alias,name:i,storageKey:i,args:null}}var VPe=jPe,qPe=bt.default,fx=qPe(Gi),KPe=Mse,UPe=Pse,dK=nz,Yi=co,HPe=lo,WPe=el,GPe=WPe.isClientID,JPe=Kse,QPe=VPe,YPe=Fd,fK=YPe.getLocalVariables,hK=rl,Use=k_,uI=Use.EXISTENT,XPe=Use.UNKNOWN,pK=Jk,$_=Nt,ZPe=x_,mK=ZPe.generateTypeID,Bp=$e,eDe=Yi.ACTOR_CHANGE,tDe=Yi.CONDITION,nDe=Yi.CLIENT_COMPONENT,rDe=Yi.CLIENT_EXTENSION,iDe=Yi.DEFER,sDe=Yi.FLIGHT_FIELD,oDe=Yi.FRAGMENT_SPREAD,aDe=Yi.INLINE_FRAGMENT,lDe=Yi.LINKED_FIELD,cDe=Yi.LINKED_HANDLE,uDe=Yi.MODULE_IMPORT,dDe=Yi.SCALAR_FIELD,fDe=Yi.SCALAR_HANDLE,hDe=Yi.STREAM,pDe=Yi.TYPE_DISCRIMINATOR,mDe=$_.ROOT_ID,gDe=$_.getModuleOperationKey,Ty=$_.getStorageKey,yDe=$_.getArgumentValues;function vDe(n,e,t,r,i,s,o,a){var l=r.dataID,c=r.node,u=r.variables,d=new bDe(n,e,t,u,i,s,o,a);return d.check(c,l)}var bDe=function(){function n(t,r,i,s,o,a,l,c){this._getSourceForActor=t,this._getTargetForActor=r,this._getDataID=l,this._source=t(i),this._mutatorRecordSourceProxyCache=new Map;var u=this._getMutatorAndRecordProxyForActor(i),d=u[0],f=u[1];this._mostRecentlyInvalidatedAt=null,this._handlers=o,this._mutator=d,this._operationLoader=a??null,this._recordSourceProxy=f,this._recordWasMissing=!1,this._variables=s,this._shouldProcessClientComponents=c}var e=n.prototype;return e._getMutatorAndRecordProxyForActor=function(r){var i=this._mutatorRecordSourceProxyCache.get(r);if(i==null){var s=this._getTargetForActor(r),o=new KPe(this._getSourceForActor(r),s),a=new UPe(o,this._getDataID);i=[o,a],this._mutatorRecordSourceProxyCache.set(r,i)}return i},e.check=function(r,i){return this._traverse(r,i),this._recordWasMissing===!0?{status:"missing",mostRecentlyInvalidatedAt:this._mostRecentlyInvalidatedAt}:{status:"available",mostRecentlyInvalidatedAt:this._mostRecentlyInvalidatedAt}},e._getVariableValue=function(r){return this._variables.hasOwnProperty(r)||Bp(!1),this._variables[r]},e._handleMissing=function(){this._recordWasMissing=!0},e._getDataForHandlers=function(r,i){return{args:r.args?yDe(r.args,this._variables):{},record:this._source.get(i)}},e._handleMissingScalarField=function(r,i){if(!(r.name==="id"&&r.alias==null&&GPe(i))){var s=this._getDataForHandlers(r,i),o=s.args,a=s.record,l=(0,fx.default)(this._handlers),c;try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.kind==="scalar"){var d=u.handle(r,a,o,this._recordSourceProxy);if(d!==void 0)return d}}}catch(f){l.e(f)}finally{l.f()}this._handleMissing()}},e._handleMissingLinkField=function(r,i){var s=this._getDataForHandlers(r,i),o=s.args,a=s.record,l=(0,fx.default)(this._handlers),c;try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.kind==="linked"){var d=u.handle(r,a,o,this._recordSourceProxy);if(d!==void 0&&(d===null||this._mutator.getStatus(d)===uI))return d}}}catch(f){l.e(f)}finally{l.f()}this._handleMissing()},e._handleMissingPluralLinkField=function(r,i){var s=this,o=this._getDataForHandlers(r,i),a=o.args,l=o.record,c=(0,fx.default)(this._handlers),u;try{for(c.s();!(u=c.n()).done;){var d=u.value;if(d.kind==="pluralLinked"){var f=d.handle(r,l,a,this._recordSourceProxy);if(f!=null){var h=f.every(function(p){return p!=null&&s._mutator.getStatus(p)===uI});if(h)return f}else if(f===null)return null}}}catch(p){c.e(p)}finally{c.f()}this._handleMissing()},e._traverse=function(r,i){var s=this._mutator.getStatus(i);if(s===XPe&&this._handleMissing(),s===uI){var o=this._source.get(i),a=hK.getInvalidationEpoch(o);a!=null&&(this._mostRecentlyInvalidatedAt=this._mostRecentlyInvalidatedAt!=null?Math.max(this._mostRecentlyInvalidatedAt,a):a),this._traverseSelections(r.selections,i)}},e._traverseSelections=function(r,i){var s=this;r.forEach(function(o){switch(o.kind){case dDe:s._checkScalar(o,i);break;case lDe:o.plural?s._checkPluralLink(o,i):s._checkLink(o,i);break;case eDe:s._checkActorChange(o.linkedField,i);break;case tDe:var a=!!s._getVariableValue(o.condition);a===o.passingValue&&s._traverseSelections(o.selections,i);break;case aDe:{var l=o.abstractKey;if(l==null){var c=s._mutator.getType(i);c===o.type&&s._traverseSelections(o.selections,i)}else{var u=s._mutator.getType(i);u==null&&Bp(!1);var d=mK(u),f=s._mutator.getValue(d,l);f===!0?s._traverseSelections(o.selections,i):f==null&&s._handleMissing()}break}case cDe:{var h=JPe(o,r,s._variables);h.plural?s._checkPluralLink(h,i):s._checkLink(h,i);break}case fDe:{var p=QPe(o,r,s._variables);s._checkScalar(p,i);break}case uDe:s._checkModuleImport(o,i);break;case iDe:case hDe:s._traverseSelections(o.selections,i);break;case oDe:var m=s._variables;s._variables=fK(s._variables,o.fragment.argumentDefinitions,o.args),s._traverseSelections(o.fragment.selections,i),s._variables=m;break;case rDe:var g=s._recordWasMissing;s._traverseSelections(o.selections,i),s._recordWasMissing=g;break;case pDe:var y=o.abstractKey,k=s._mutator.getType(i);k==null&&Bp(!1);var b=mK(k),S=s._mutator.getValue(b,y);S==null&&s._handleMissing();break;case sDe:if(HPe.ENABLE_REACT_FLIGHT_COMPONENT_FIELD)s._checkFlightField(o,i);else throw new Error("Flight fields are not yet supported.");break;case nDe:if(s._shouldProcessClientComponents===!1)break;s._traverseSelections(o.fragment.selections,i);break;default:Bp(!1)}})},e._checkModuleImport=function(r,i){var s=this._operationLoader;s===null&&Bp(!1);var o=gDe(r.documentName),a=this._mutator.getValue(i,o);if(a==null){a===void 0&&this._handleMissing();return}var l=s.get(a);if(l!=null){var c=dK(l),u=this._variables;this._variables=fK(this._variables,c.argumentDefinitions,r.args),this._traverse(c,i),this._variables=u}else this._handleMissing()},e._checkScalar=function(r,i){var s=Ty(r,this._variables),o=this._mutator.getValue(i,s);o===void 0&&(o=this._handleMissingScalarField(r,i),o!==void 0&&this._mutator.setValue(i,s,o))},e._checkLink=function(r,i){var s=Ty(r,this._variables),o=this._mutator.getLinkedRecordID(i,s);o===void 0&&(o=this._handleMissingLinkField(r,i),o!=null?this._mutator.setLinkedRecordID(i,s,o):o===null&&this._mutator.setValue(i,s,null)),o!=null&&this._traverse(r,o)},e._checkPluralLink=function(r,i){var s=this,o=Ty(r,this._variables),a=this._mutator.getLinkedRecordIDs(i,o);a===void 0&&(a=this._handleMissingPluralLinkField(r,i),a!=null?this._mutator.setLinkedRecordIDs(i,o,a):a===null&&this._mutator.setValue(i,o,null)),a&&a.forEach(function(l){l!=null&&s._traverse(r,l)})},e._checkActorChange=function(r,i){var s=Ty(r,this._variables),o=this._source.get(i),a=o!=null?hK.getActorLinkedRecordID(o,s):o;if(a==null)a===void 0&&this._handleMissing();else{var l=a[0],c=a[1],u=this._source,d=this._mutator,f=this._recordSourceProxy,h=this._getMutatorAndRecordProxyForActor(l),p=h[0],m=h[1];this._source=this._getSourceForActor(l),this._mutator=p,this._recordSourceProxy=m,this._traverse(r,c),this._source=u,this._mutator=d,this._recordSourceProxy=f}},e._checkFlightField=function(r,i){var s=Ty(r,this._variables),o=this._mutator.getLinkedRecordID(i,s);if(o==null){if(o===void 0){this._handleMissing();return}return}var a=this._mutator.getValue(o,pK.REACT_FLIGHT_TREE_STORAGE_KEY),l=this._mutator.getValue(o,pK.REACT_FLIGHT_EXECUTABLE_DEFINITIONS_STORAGE_KEY);if(a==null||!Array.isArray(l)){this._handleMissing();return}var c=this._operationLoader;c===null&&Bp(!1);var u=this._variables,d=(0,fx.default)(l),f;try{for(d.s();!(f=d.n()).done;){var h=f.value;this._variables=h.variables;var p=c.get(h.module);if(p!=null){var m=dK(p);this._traverseSelections(m.selections,mDe)}else this._handleMissing()}}catch(g){d.e(g)}finally{d.f()}this._variables=u},n}(),kDe={check:vDe},xDe=bt.default,SDe=xDe(tl),gK=Gk,wDe=$e,dI=Object.freeze({__UNPUBLISH_RECORD_SENTINEL:!0}),Hse=function(){function n(t){this._base=t,this._sink=gK.create()}var e=n.prototype;return e.has=function(r){if(this._sink.has(r)){var i=this._sink.get(r);return i!==dI}else return this._base.has(r)},e.get=function(r){if(this._sink.has(r)){var i=this._sink.get(r);return i===dI?void 0:i}else return this._base.get(r)},e.getStatus=function(r){var i=this.get(r);return i===void 0?"UNKNOWN":i===null?"NONEXISTENT":"EXISTENT"},e.clear=function(){this._base=gK.create(),this._sink.clear()},e.delete=function(r){this._sink.delete(r)},e.remove=function(r){this._sink.set(r,dI)},e.set=function(r,i){this._sink.set(r,i)},e.getRecordIDs=function(){return Object.keys(this.toJSON())},e.size=function(){return Object.keys(this.toJSON()).length},e.toJSON=function(){var r=this,i=(0,SDe.default)({},this._base.toJSON());return this._sink.getRecordIDs().forEach(function(s){var o=r.get(s);o===void 0?delete i[s]:i[s]=o}),i},e.getOptimisticRecordIDs=function(){return new Set(this._sink.getRecordIDs())},n}();function $De(n){return new Hse(n)}function EDe(n){return n instanceof Hse||wDe(!1),n.getOptimisticRecordIDs()}var CDe={create:$De,getOptimisticRecordIDs:EDe},MDe=bt.default,TDe=MDe(Gi),yK=nz,Xi=co,_De=lo,ADe=Kse,IDe=Fd,vK=IDe.getLocalVariables,mu=rl,RDe=Jk,cz=Nt,ODe=x_,bK=ODe.generateTypeID,hx=$e,PDe=Xi.ACTOR_CHANGE,DDe=Xi.CONDITION,NDe=Xi.CLIENT_COMPONENT,FDe=Xi.CLIENT_EXTENSION,LDe=Xi.DEFER,zDe=Xi.FLIGHT_FIELD,BDe=Xi.FRAGMENT_SPREAD,jDe=Xi.INLINE_FRAGMENT,VDe=Xi.LINKED_FIELD,qDe=Xi.MODULE_IMPORT,KDe=Xi.LINKED_HANDLE,UDe=Xi.SCALAR_FIELD,HDe=Xi.SCALAR_HANDLE,WDe=Xi.STREAM,GDe=Xi.TYPE_DISCRIMINATOR,JDe=cz.ROOT_ID,fI=cz.getStorageKey,QDe=cz.getModuleOperationKey;function YDe(n,e,t,r,i){var s=e.dataID,o=e.node,a=e.variables,l=new XDe(n,a,t,r,i);l.mark(o,s)}var XDe=function(){function n(t,r,i,s,o){this._operationLoader=s??null,this._operationName=null,this._recordSource=t,this._references=i,this._variables=r,this._shouldProcessClientComponents=o}var e=n.prototype;return e.mark=function(r,i){(r.kind==="Operation"||r.kind==="SplitOperation")&&(this._operationName=r.name),this._traverse(r,i)},e._traverse=function(r,i){this._references.add(i);var s=this._recordSource.get(i);s!=null&&this._traverseSelections(r.selections,s)},e._getVariableValue=function(r){return this._variables.hasOwnProperty(r)||hx(!1),this._variables[r]},e._traverseSelections=function(r,i){var s=this;r.forEach(function(o){switch(o.kind){case PDe:s._traverseLink(o.linkedField,i);break;case VDe:o.plural?s._traversePluralLink(o,i):s._traverseLink(o,i);break;case DDe:var a=!!s._getVariableValue(o.condition);a===o.passingValue&&s._traverseSelections(o.selections,i);break;case jDe:if(o.abstractKey==null){var l=mu.getType(i);l!=null&&l===o.type&&s._traverseSelections(o.selections,i)}else{var c=mu.getType(i),u=bK(c);s._references.add(u),s._traverseSelections(o.selections,i)}break;case BDe:var d=s._variables;s._variables=vK(s._variables,o.fragment.argumentDefinitions,o.args),s._traverseSelections(o.fragment.selections,i),s._variables=d;break;case KDe:var f=ADe(o,r,s._variables);f.plural?s._traversePluralLink(f,i):s._traverseLink(f,i);break;case LDe:case WDe:s._traverseSelections(o.selections,i);break;case UDe:case HDe:break;case GDe:{var h=mu.getType(i),p=bK(h);s._references.add(p);break}case qDe:s._traverseModuleImport(o,i);break;case FDe:s._traverseSelections(o.selections,i);break;case zDe:if(_De.ENABLE_REACT_FLIGHT_COMPONENT_FIELD)s._traverseFlightField(o,i);else throw new Error("Flight fields are not yet supported.");break;case NDe:if(s._shouldProcessClientComponents===!1)break;s._traverseSelections(o.fragment.selections,i);break;default:hx(!1)}})},e._traverseModuleImport=function(r,i){var s=this._operationLoader;s===null&&hx(!1);var o=QDe(r.documentName),a=mu.getValue(i,o);if(a!=null){var l=s.get(a);if(l!=null){var c=yK(l),u=this._variables;this._variables=vK(this._variables,c.argumentDefinitions,r.args),this._traverseSelections(c.selections,i),this._variables=u}}},e._traverseLink=function(r,i){var s=fI(r,this._variables),o=mu.getLinkedRecordID(i,s);o!=null&&this._traverse(r,o)},e._traversePluralLink=function(r,i){var s=this,o=fI(r,this._variables),a=mu.getLinkedRecordIDs(i,o);a!=null&&a.forEach(function(l){l!=null&&s._traverse(r,l)})},e._traverseFlightField=function(r,i){var s=fI(r,this._variables),o=mu.getLinkedRecordID(i,s);if(o!=null){this._references.add(o);var a=this._recordSource.get(o);if(a!=null){var l=mu.getValue(a,RDe.REACT_FLIGHT_EXECUTABLE_DEFINITIONS_STORAGE_KEY);if(Array.isArray(l)){var c=this._operationLoader;c===null&&hx(!1);var u=this._variables,d=(0,TDe.default)(l),f;try{for(d.s();!(f=d.n()).done;){var h=f.value;this._variables=h.variables;var p=h.module,m=c.get(p);if(m!=null){var g=yK(m);this._traverse(g,JDe)}}}catch(y){d.e(y)}finally{d.f()}this._variables=u}}}},n}(),ZDe={mark:YDe},eNe=Symbol.iterator;function tNe(n,e){for(var t=n[eNe](),r=t.next();!r.done;){var i=r.value;if(e.has(i))return!0;r=t.next()}return!1}var nNe=tNe,kK=v_,rNe=lo,iNe=nNe,xK=lz,sNe=function(){function n(t,r){this._subscriptions=new Set,this.__log=t,this._resolverCache=r}var e=n.prototype;return e.subscribe=function(r,i){var s=this,o={backup:null,callback:i,snapshot:r,stale:!1},a=function(){s._subscriptions.delete(o)};return this._subscriptions.add(o),{dispose:a}},e.snapshotSubscriptions=function(r){var i=this;this._subscriptions.forEach(function(s){if(!s.stale){s.backup=s.snapshot;return}var o=s.snapshot,a=xK.read(r,o.selector,i._resolverCache),l=kK(o.data,a.data);a.data=l,s.backup=a})},e.restoreSubscriptions=function(){this._subscriptions.forEach(function(r){var i=r.backup;r.backup=null,i?(i.data!==r.snapshot.data&&(r.stale=!0),r.snapshot={data:r.snapshot.data,isMissingData:i.isMissingData,missingClientEdges:i.missingClientEdges,missingLiveResolverFields:i.missingLiveResolverFields,seenRecords:i.seenRecords,selector:i.selector,missingRequiredFields:i.missingRequiredFields,relayResolverErrors:i.relayResolverErrors}):r.stale=!0})},e.updateSubscriptions=function(r,i,s,o){var a=this,l=i.size!==0;this._subscriptions.forEach(function(c){var u=a._updateSubscription(r,c,i,l,o);u!=null&&s.push(u)})},e._updateSubscription=function(r,i,s,o,a){var l=i.backup,c=i.callback,u=i.snapshot,d=i.stale,f=o&&iNe(u.seenRecords,s);if(!(!d&&!f)){var h=f||!l?xK.read(r,u.selector,this._resolverCache):l,p=kK(u.data,h.data);if(h={data:p,isMissingData:h.isMissingData,missingClientEdges:h.missingClientEdges,missingLiveResolverFields:h.missingLiveResolverFields,seenRecords:h.seenRecords,selector:h.selector,missingRequiredFields:h.missingRequiredFields,relayResolverErrors:h.relayResolverErrors},i.snapshot=h,i.stale=!1,h.data!==u.data)return this.__log&&rNe.ENABLE_NOTIFY_SUBSCRIPTION&&this.__log({name:"store.notify.subscription",sourceOperation:a,snapshot:u,nextSnapshot:h}),c(h),u.selector.owner}},n}(),oNe=sNe,Wse=bt.default,SK=Wse(Gi),aNe=Wse(lp),Gse=tz,lNe=Gse.INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,wK=Gse.assertInternalActorIndentifier,cNe=lo,uNe=_Pe,dNe=kDe,fNe=mse,Of=rl,hNe=CDe,pNe=lz,mNe=ZDe,gNe=Jk,yNe=oNe,vNe=Nt,Jse=Nt,hI=Jse.ROOT_ID,bNe=Jse.ROOT_TYPE,kNe=Fse,xNe=kNe.RecordResolverCache,$K=$e,SNe=10,wNe=function(){function n(t,r){var i=this,s,o,a,l,c;(0,aNe.default)(this,"_gcStep",function(){i._gcRun&&(i._gcRun.next().done?i._gcRun=null:i._gcScheduler(i._gcStep))}),this._currentWriteEpoch=0,this._gcHoldCounter=0,this._gcReleaseBufferSize=(s=r==null?void 0:r.gcReleaseBufferSize)!==null&&s!==void 0?s:SNe,this._gcRun=null,this._gcScheduler=(o=r==null?void 0:r.gcScheduler)!==null&&o!==void 0?o:uNe,this._getDataID=(a=r==null?void 0:r.getDataID)!==null&&a!==void 0?a:fNe,this._globalInvalidationEpoch=null,this._invalidationSubscriptions=new Set,this._invalidatedRecordIDs=new Set,this.__log=(l=r==null?void 0:r.log)!==null&&l!==void 0?l:null,this._queryCacheExpirationTime=r==null?void 0:r.queryCacheExpirationTime,this._operationLoader=(c=r==null?void 0:r.operationLoader)!==null&&c!==void 0?c:null,this._optimisticSource=null,this._recordSource=t,this._releaseBuffer=[],this._roots=new Map,this._shouldScheduleGC=!1,this._resolverCache=new xNe(function(){return i._getMutableRecordSource()}),this._storeSubscriptions=new yNe(r==null?void 0:r.log,this._resolverCache),this._updatedRecordIDs=new Set,this._shouldProcessClientComponents=r==null?void 0:r.shouldProcessClientComponents,$Ne(this._recordSource)}var e=n.prototype;return e.getSource=function(){var r;return(r=this._optimisticSource)!==null&&r!==void 0?r:this._recordSource},e._getMutableRecordSource=function(){var r;return(r=this._optimisticSource)!==null&&r!==void 0?r:this._recordSource},e.check=function(r,i){var s,o,a,l,c=r.root,u=this._getMutableRecordSource(),d=this._globalInvalidationEpoch,f=this._roots.get(r.request.identifier),h=f!=null?f.epoch:null;if(d!=null&&(h==null||h<=d))return{status:"stale"};var p=(s=i==null?void 0:i.handlers)!==null&&s!==void 0?s:[],m=(o=i==null?void 0:i.getSourceForActor)!==null&&o!==void 0?o:function(k){return wK(k),u},g=(a=i==null?void 0:i.getTargetForActor)!==null&&a!==void 0?a:function(k){return wK(k),u},y=dNe.check(m,g,(l=i==null?void 0:i.defaultActorIdentifier)!==null&&l!==void 0?l:lNe,c,p,this._operationLoader,this._getDataID,this._shouldProcessClientComponents);return CNe(y,h,f==null?void 0:f.fetchTime,this._queryCacheExpirationTime)},e.retain=function(r){var i=this,s=r.request.identifier,o=!1,a=function(){if(!o){o=!0;var u=i._roots.get(s);if(u!=null&&(u.refCount--,u.refCount===0)){var d=i._queryCacheExpirationTime,f=u.fetchTime!=null&&d!=null&&u.fetchTime<=Date.now()-d;if(f)i._roots.delete(s),i.scheduleGC();else if(i._releaseBuffer.push(s),i._releaseBuffer.length>i._gcReleaseBufferSize){var h=i._releaseBuffer.shift();i._roots.delete(h),i.scheduleGC()}}}},l=this._roots.get(s);return l!=null?(l.refCount===0&&(this._releaseBuffer=this._releaseBuffer.filter(function(c){return c!==s})),l.refCount+=1):this._roots.set(s,{operation:r,refCount:1,epoch:null,fetchTime:null}),{dispose:a}},e.lookup=function(r){var i=this.getSource(),s=pNe.read(i,r,this._resolverCache);return s},e.notify=function(r,i){var s=this,o=this.__log;o!=null&&o({name:"store.notify.start",sourceOperation:r}),this._currentWriteEpoch++,i===!0&&(this._globalInvalidationEpoch=this._currentWriteEpoch),cNe.ENABLE_RELAY_RESOLVERS&&this._resolverCache.invalidateDataIDs(this._updatedRecordIDs);var a=this.getSource(),l=[];if(this._storeSubscriptions.updateSubscriptions(a,this._updatedRecordIDs,l,r),this._invalidationSubscriptions.forEach(function(f){s._updateInvalidationSubscription(f,i===!0)}),o!=null&&o({name:"store.notify.complete",sourceOperation:r,updatedRecordIDs:this._updatedRecordIDs,invalidatedRecordIDs:this._invalidatedRecordIDs}),this._updatedRecordIDs.clear(),this._invalidatedRecordIDs.clear(),r!=null){var c=r.request.identifier,u=this._roots.get(c);if(u!=null)u.epoch=this._currentWriteEpoch,u.fetchTime=Date.now();else if(r.request.node.params.operationKind==="query"&&this._gcReleaseBufferSize>0&&this._releaseBuffer.length<this._gcReleaseBufferSize){var d={operation:r,refCount:0,epoch:this._currentWriteEpoch,fetchTime:Date.now()};this._releaseBuffer.push(c),this._roots.set(c,d)}}return l},e.publish=function(r,i){var s=this._getMutableRecordSource();ENe(s,r,this._currentWriteEpoch+1,i,this._updatedRecordIDs,this._invalidatedRecordIDs);var o=this.__log;o!=null&&o({name:"store.publish",source:r,optimistic:s===this._optimisticSource})},e.subscribe=function(r,i){return this._storeSubscriptions.subscribe(r,i)},e.holdGC=function(){var r=this;this._gcRun&&(this._gcRun=null,this._shouldScheduleGC=!0),this._gcHoldCounter++;var i=function(){r._gcHoldCounter>0&&(r._gcHoldCounter--,r._gcHoldCounter===0&&r._shouldScheduleGC&&(r.scheduleGC(),r._shouldScheduleGC=!1))};return{dispose:i}},e.toJSON=function(){return"RelayModernStore()"},e.getEpoch=function(){return this._currentWriteEpoch},e.__getUpdatedRecordIDs=function(){return this._updatedRecordIDs},e.lookupInvalidationState=function(r){var i=this,s=new Map;return r.forEach(function(o){var a,l=i.getSource().get(o);s.set(o,(a=Of.getInvalidationEpoch(l))!==null&&a!==void 0?a:null)}),s.set("global",this._globalInvalidationEpoch),{dataIDs:r,invalidations:s}},e.checkInvalidationState=function(r){var i=this.lookupInvalidationState(r.dataIDs),s=i.invalidations,o=r.invalidations;if(s.get("global")!==o.get("global"))return!0;var a=(0,SK.default)(r.dataIDs),l;try{for(a.s();!(l=a.n()).done;){var c=l.value;if(s.get(c)!==o.get(c))return!0}}catch(u){a.e(u)}finally{a.f()}return!1},e.subscribeToInvalidationState=function(r,i){var s=this,o={callback:i,invalidationState:r},a=function(){s._invalidationSubscriptions.delete(o)};return this._invalidationSubscriptions.add(o),{dispose:a}},e._updateInvalidationSubscription=function(r,i){var s=this,o=r.callback,a=r.invalidationState,l=a.dataIDs,c=i||l.some(function(u){return s._invalidatedRecordIDs.has(u)});c&&o()},e.snapshot=function(){this._optimisticSource!=null&&$K(!1);var r=this.__log;r!=null&&r({name:"store.snapshot"}),this._storeSubscriptions.snapshotSubscriptions(this.getSource()),this._gcRun&&(this._gcRun=null,this._shouldScheduleGC=!0),this._optimisticSource=hNe.create(this.getSource())},e.restore=function(){this._optimisticSource==null&&$K(!1);var r=this.__log;r!=null&&r({name:"store.restore"}),this._optimisticSource=null,this._shouldScheduleGC&&this.scheduleGC(),this._storeSubscriptions.restoreSubscriptions()},e.scheduleGC=function(){if(this._gcHoldCounter>0){this._shouldScheduleGC=!0;return}this._gcRun||(this._gcRun=this._collect(),this._gcScheduler(this._gcStep))},e.__gc=function(){if(this._optimisticSource==null)for(var r=this._collect();!r.next().done;);},e._collect=function*(){e:for(;;){var r=this._currentWriteEpoch,i=new Set,s=(0,SK.default)(this._roots.values()),o;try{for(s.s();!(o=s.n()).done;){var a=o.value.operation,l=a.root;if(mNe.mark(this._recordSource,l,i,this._operationLoader,this._shouldProcessClientComponents),yield,r!==this._currentWriteEpoch)continue e}}catch(h){s.e(h)}finally{s.f()}var c=this.__log;if(c!=null&&c({name:"store.gc",references:i}),i.size===0)this._recordSource.clear();else for(var u=this._recordSource.getRecordIDs(),d=0;d<u.length;d++){var f=u[d];i.has(f)||this._recordSource.remove(f)}return}},n}();function $Ne(n){if(!n.has(hI)){var e=Of.create(hI,bNe);n.set(hI,e)}}function ENe(n,e,t,r,i,s){r&&r.forEach(function(f){var h=n.get(f),p=e.get(f);if(p!==null){var m;h!=null?m=Of.clone(h):m=p!=null?Of.clone(p):null,m&&(Of.setValue(m,vNe.INVALIDATED_AT_KEY,t),s.add(f),n.set(f,m))}});for(var o=e.getRecordIDs(),a=0;a<o.length;a++){var l=o[a],c=e.get(l),u=n.get(l);if(c&&u){var d=Of.getType(u)===gNe.REACT_FLIGHT_TYPE_NAME?c:Of.update(u,c);d!==u&&(i.add(l),n.set(l,d))}else c===null?(n.delete(l),u!==null&&i.add(l)):c&&(n.set(l,c),i.add(l))}}function CNe(n,e,t,r){var i=n.mostRecentlyInvalidatedAt,s=n.status;if(typeof i=="number"&&(e==null||i>e))return{status:"stale"};if(s==="missing")return{status:"missing"};if(t!=null&&r!=null){var o=t<=Date.now()-r;if(o)return{status:"stale"}}return{status:"available",fetchTime:t??null}}var MNe=wNe,TNe=y_,_Ne=hc,ANe=_Ne.getRequest,INe=cp,RNe=INe.createOperationDescriptor,ONe=ou,PNe=ONe.createReaderSelector;function DNe(n,e){var t=ANe(e.subscription);if(t.params.operationKind!=="subscription")throw new Error("requestSubscription: Must use Subscription operation");var r=e.configs,i=e.onCompleted,s=e.onError,o=e.onNext,a=e.variables,l=e.cacheConfig,c=RNe(t,a,l),u=r?TNe.convert(r,t,null,e.updater):e,d=u.updater,f=n.executeSubscription({operation:c,updater:d}).subscribe({next:function(p){if(o!=null){var m=c.fragment,g;if(Array.isArray(p)){var y,k;g=(y=p[0])===null||y===void 0||(k=y.extensions)===null||k===void 0?void 0:k.__relay_subscription_root_id}else{var b;g=(b=p.extensions)===null||b===void 0?void 0:b.__relay_subscription_root_id}typeof g=="string"&&(m=PNe(m.node,g,m.variables,m.owner));var S=n.lookup(m).data;o(S)}},error:s,complete:i});return{dispose:f.unsubscribe}}var NNe=DNe,FNe=bt.default,LNe=FNe(tl),Qse=Nt,zNe=Qse.getModuleComponentKey,BNe=Qse.getModuleOperationKey;function jNe(n,e,t,r){var i=(0,LNe.default)({},r);return i[zNe(n)]=t,i[BNe(n)]=e,i}var VNe=jNe,qNe=Object.prototype.hasOwnProperty;function KNe(n){for(var e in n)if(qNe.call(n,e))return!1;return!0}var UNe=KNe,uz=ou,HNe=uz.getDataIDsFromFragment,WNe=uz.getSelector,GNe=uz.getVariablesFromFragment,JNe=UNe,_y=lo,EK=v0,QNe=lie,CK=QNe.intern;function YNe(n,e){var t=WNe(n,e),r=t==null?"null":t.kind==="SingularReaderSelector"?t.owner.identifier:"["+t.selectors.map(function(c){return c.owner.identifier}).join(",")+"]",i=GNe(n,e),s=HNe(n,e);if(_y.ENABLE_GETFRAGMENTIDENTIFIER_OPTIMIZATION){var o=typeof s>"u"?"missing":s==null?"null":Array.isArray(s)?"["+s.join(",")+"]":s;return o=_y.STRING_INTERN_LEVEL<=1?o:CK(o,_y.MAX_DATA_ID_LENGTH),r+"/"+n.name+"/"+(i==null||JNe(i)?"{}":JSON.stringify(EK(i)))+"/"+o}else{var a,l=(a=JSON.stringify(s))!==null&&a!==void 0?a:"missing";return l=_y.STRING_INTERN_LEVEL<=1?l:CK(l,_y.MAX_DATA_ID_LENGTH),r+"/"+n.name+"/"+JSON.stringify(EK(i))+"/"+l}}var XNe=YNe,px=$e;function ZNe(n,e){var t,r;((t=n.metadata)===null||t===void 0?void 0:t.plural)===!0&&px(!1);var i=(r=n.metadata)===null||r===void 0?void 0:r.refetch;i==null&&px(!1);var s=i.operation.default?i.operation.default:i.operation,o=i.fragmentPathInResult;typeof s=="string"&&px(!1);var a=i.identifierField;return a==null||typeof a=="string"||px(!1),{fragmentRefPathInResponse:o,identifierField:a,refetchableRequest:s,refetchMetadata:i}}var Yse=ZNe,e3e=Yse,pI=$e;function t3e(n,e){var t,r,i=e3e(n),s=i.refetchableRequest,o=i.refetchMetadata,a=o.connection;a==null&&pI(!1);var l=a.path,c=((t=(r=n.metadata)===null||r===void 0?void 0:r.connection)!==null&&t!==void 0?t:[])[0];c==null&&pI(!1);var u=o.identifierField;return u==null||typeof u=="string"||pI(!1),{connectionPathInFragmentData:l,identifierField:u,paginationRequest:s,paginationMetadata:a,stream:c.stream===!0}}var n3e=t3e,Xse=bt.default,mx=Xse(lp),jp=Xse(tl),MK=$e;function r3e(n,e,t,r,i,s){var o,a=s.backward,l=s.forward;if(n==="backward"){var c;a!=null&&a.count!=null&&a.cursor!=null||MK(!1);var u=(0,jp.default)((0,jp.default)((0,jp.default)({},r),i),{},(c={},(0,mx.default)(c,a.cursor,t),(0,mx.default)(c,a.count,e),c));return l&&l.cursor&&(u[l.cursor]=null),l&&l.count&&(u[l.count]=null),u}l!=null&&l.count!=null&&l.cursor!=null||MK(!1);var d=(0,jp.default)((0,jp.default)((0,jp.default)({},r),i),{},(o={},(0,mx.default)(o,l.cursor,t),(0,mx.default)(o,l.count,e),o));return a&&a.cursor&&(d[a.cursor]=null),a&&a.count&&(d[a.count]=null),d}var i3e=r3e,s3e=bt.default,o3e=s3e(Gi),TK=$e;function a3e(n,e){var t=n,r=(0,o3e.default)(e),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;if(t==null)return null;typeof s=="number"?(Array.isArray(t)||TK(!1),t=t[s]):(typeof t=="object"&&!Array.isArray(t)||TK(!1),t=t[s])}}catch(o){r.e(o)}finally{r.f()}return t}var l3e=a3e,Vp={},c3e={stop:function(){}},u3e={profile:function(e,t){var r=Vp[e];if(r&&r.length>0){for(var i=[],s=r.length-1;s>=0;s--){var o=r[s](e,t);i.unshift(o)}return{stop:function(l){i.forEach(function(c){return c(l)})}}}return c3e},attachProfileHandler:function(e,t){Vp.hasOwnProperty(e)||(Vp[e]=[]),Vp[e].push(t)},detachProfileHandler:function(e,t){Vp.hasOwnProperty(e)&&d3e(Vp[e],t)}};function d3e(n,e){var t=n.indexOf(e);t!==-1&&n.splice(t,1)}var f3e=u3e,h3e=p_,p3e=q4,m3e=Cie,g3e=Mie,y3e=n_e,v3e=i_e,b3e=y_e,_K=y_,k3e=P_e,x3e=up,S3e=z_e,w3e=cAe,$3e=mAe,gx=X4,ul=hc,E3e=vAe,dz=el,C3e=dz.generateClientID,M3e=dz.generateUniqueClientID,T3e=dz.isClientID,_3e=FAe,A3e=BAe,I3e=U4,R3e=HAe,O3e=Fd,P3e=EPe,AK=cp,D3e=rl,xs=ou,N3e=MNe,F3e=fse,L3e=Gk,ea=Nt,z3e=zse,IK=hse,B3e=NNe,j3e=VNe,V3e=Oie,q3e=XNe,K3e=n3e,U3e=i3e,H3e=sse,W3e=Yse,G3e=j4,J3e=Pie,Q3e=l3e,Y3e=J4,X3e=Zie,Z3e=ose,eFe=v_,tFe=co,nFe=vie,rFe=yse,iFe=lo,sFe=f3e,oFe=tse,aFe=v0,lFe=Xie,cFe={Environment:P3e,Network:k3e,Observable:x3e,QueryResponseCache:S3e,RecordSource:L3e,Record:D3e,ReplaySubject:oFe,Store:N3e,areEqualSelectors:xs.areEqualSelectors,createFragmentSpecResolver:_3e,createNormalizationSelector:xs.createNormalizationSelector,createOperationDescriptor:AK.createOperationDescriptor,createReaderSelector:xs.createReaderSelector,createRequestDescriptor:AK.createRequestDescriptor,getDataIDsFromFragment:xs.getDataIDsFromFragment,getDataIDsFromObject:xs.getDataIDsFromObject,getNode:ul.getNode,getFragment:ul.getFragment,getInlineDataFragment:ul.getInlineDataFragment,getModuleComponentKey:ea.getModuleComponentKey,getModuleOperationKey:ea.getModuleOperationKey,getPaginationFragment:ul.getPaginationFragment,getPluralSelector:xs.getPluralSelector,getRefetchableFragment:ul.getRefetchableFragment,getRequest:ul.getRequest,getRequestIdentifier:J3e,getSelector:xs.getSelector,getSelectorsFromObject:xs.getSelectorsFromObject,getSingularSelector:xs.getSingularSelector,getStorageKey:ea.getStorageKey,getVariablesFromFragment:xs.getVariablesFromFragment,getVariablesFromObject:xs.getVariablesFromObject,getVariablesFromPluralFragment:xs.getVariablesFromPluralFragment,getVariablesFromSingularFragment:xs.getVariablesFromSingularFragment,handlePotentialSnapshotErrors:Y3e,graphql:ul.graphql,isFragment:ul.isFragment,isInlineDataFragment:ul.isInlineDataFragment,isRequest:ul.isRequest,readInlineData:R3e,MutationTypes:_K.MutationTypes,RangeOperations:_K.RangeOperations,DefaultHandlerProvider:g3e,ConnectionHandler:h3e,MutationHandlers:m3e,VIEWER_ID:IK.VIEWER_ID,VIEWER_TYPE:IK.VIEWER_TYPE,applyOptimisticMutation:y3e,commitLocalUpdate:v3e,commitMutation:b3e,fetchQuery:w3e,fetchQuery_DEPRECATED:$3e,isRelayModernEnvironment:I3e,requestSubscription:B3e,ConnectionInterface:p3e,PreloadableQueryRegistry:E3e,RelayProfiler:sFe,createPayloadFor3DField:j3e,RelayConcreteNode:tFe,RelayError:rFe,RelayFeatureFlags:iFe,DEFAULT_HANDLE_KEY:nFe.DEFAULT_HANDLE_KEY,FRAGMENTS_KEY:ea.FRAGMENTS_KEY,FRAGMENT_OWNER_KEY:ea.FRAGMENT_OWNER_KEY,ID_KEY:ea.ID_KEY,REF_KEY:ea.REF_KEY,REFS_KEY:ea.REFS_KEY,ROOT_ID:ea.ROOT_ID,ROOT_TYPE:ea.ROOT_TYPE,TYPENAME_KEY:ea.TYPENAME_KEY,deepFreeze:V3e,generateClientID:C3e,generateUniqueClientID:M3e,getRelayHandleKey:G3e,isClientID:T3e,isPromise:X3e,isScalarAndEqual:Z3e,recycleNodesInto:eFe,stableCopy:aFe,getFragmentIdentifier:q3e,getRefetchMetadata:W3e,getPaginationMetadata:K3e,getPaginationVariables:U3e,getPendingOperationsForFragment:H3e,getValueAtPath:Q3e,__internal:{ResolverFragments:z3e,OperationTracker:F3e,createRelayContext:A3e,getOperationVariables:O3e.getOperationVariables,fetchQuery:gx.fetchQuery,fetchQueryDeduped:gx.fetchQueryDeduped,getPromiseForActiveRequest:gx.getPromiseForActiveRequest,getObservableForActiveRequest:gx.getObservableForActiveRequest,withProvidedVariables:lFe}},st=cFe,uFe=v,dFe=st,fFe=dFe.__internal.createRelayContext,fp=fFe(uFe),Zse={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Zse);var or=Zse.exports,eoe={exports:{}},toe={exports:{}},noe={exports:{}},roe={exports:{}};(function(n){function e(t){"@babel/helpers - typeof";return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(roe);var ioe=roe.exports,soe={exports:{}};(function(n){var e=ioe.default;function t(r,i){if(e(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var o=s.call(r,i||"default");if(e(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(soe);var hFe=soe.exports;(function(n){var e=ioe.default,t=hFe;function r(i){var s=t(i,"string");return e(s)==="symbol"?s:String(s)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(noe);var pFe=noe.exports;(function(n){var e=pFe;function t(r,i,s){return i=e(i),i in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(toe);var au=toe.exports;(function(n){var e=au;function t(i,s){var o=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);s&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),o.push.apply(o,a)}return o}function r(i){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?t(Object(o),!0).forEach(function(a){e(i,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(o,a))})}return i}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(eoe);var uo=eoe.exports,ooe={exports:{}};(function(n){function e(t,r){if(t==null)return{};var i={},s=Object.keys(t),o,a;for(a=0;a<s.length;a++)o=s[a],!(r.indexOf(o)>=0)&&(i[o]=t[o]);return i}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(ooe);var fz=ooe.exports,aoe={exports:{}};(function(n){function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(aoe);var E_=aoe.exports,loe={exports:{}},coe={exports:{}};(function(n){function e(t,r){return n.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},n.exports.__esModule=!0,n.exports.default=n.exports,e(t,r)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(coe);var mFe=coe.exports;(function(n){var e=mFe;function t(r,i){r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e(r,i)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(loe);var C_=loe.exports,uoe={exports:{}};(function(n){function e(){return n.exports=e=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n.exports.__esModule=!0,n.exports.default=n.exports,e.apply(this,arguments)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(uoe);var hz=uoe.exports,RK=$e;function gFe(n,e){e&&typeof e=="object"||RK(!1);for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];r&&(typeof r=="object"||typeof r=="function")||RK(!1)}}var yFe=gFe;function doe(n){return n.displayName||n.name||"Component"}function vFe(n){return"Relay("+doe(n)+")"}var M_={getComponentName:doe,getContainerName:vFe},bFe=v,pz=bFe.createContext({rootIsQueryRenderer:!1}),kFe=v,foe=kFe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,OK=foe.ReactCurrentDispatcher,xFe=foe.ReactCurrentOwner;function SFe(n){var e=OK!=null?OK.current:xFe.currentDispatcher;return e.readContext(n)}var wFe=SFe,$Fe=or.default,EFe=$Fe(hz),CFe=yFe,hoe=M_,MFe=hoe.getComponentName,TFe=hoe.getContainerName,_Fe=fp,AFe=pz,PK=wFe,IFe=$e,DK=v,RFe=st,OFe=RFe.getFragment;function PFe(n,e,t){var r=TFe(n);CFe(MFe(n),e);var i={};for(var s in e)i[s]=OFe(e[s]);var o=t(n,i);o.displayName=r;function a(c,u){var d,f=PK(_Fe);f==null&&IFe(!1);var h=PK(AFe);return DK.createElement(o,(0,EFe.default)({},c,{__relayContext:f,__rootIsQueryRenderer:(d=h==null?void 0:h.rootIsQueryRenderer)!==null&&d!==void 0?d:!1,componentRef:c.componentRef||u}))}a.displayName=r;var l=DK.forwardRef(a);return l}var mz=PFe;function DFe(n){return typeof n=="object"&&n!==null&&typeof n.check=="function"&&typeof n.lookup=="function"&&typeof n.retain=="function"&&typeof n.execute=="function"&&typeof n.subscribe=="function"}var NFe=DFe,FFe=NFe,LFe=$e;function zFe(n){return poe(n)||LFe(!1),n}function poe(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&FFe(n.environment)}var gz={assertRelayContext:zFe,isRelayContext:poe},Yk=or.default,mI=Yk(uo),BFe=Yk(fz),jFe=Yk(E_),VFe=Yk(C_),NK=Yk(au),qFe=["componentRef","__relayContext","__rootIsQueryRenderer"],KFe=mz,UFe=M_,HFe=UFe.getContainerName,WFe=gz,FK=WFe.assertRelayContext,GFe=nl,LK=v,yz=st,zK=yz.createFragmentSpecResolver,BK=yz.getDataIDsFromObject,JFe=yz.isScalarAndEqual;function QFe(n,e){var t,r=HFe(n);return t=function(i){(0,VFe.default)(s,i);function s(a){var l,c;c=i.call(this,a)||this,(0,NK.default)((0,jFe.default)(c),"_handleFragmentDataUpdate",function(){var h=c.state.resolver;c.setState(function(p){return h===p.resolver?{data:p.resolver.resolve(),relayProp:yx(p.relayProp.environment)}:null})});var u=FK(a.__relayContext),d=(l=a.__rootIsQueryRenderer)!==null&&l!==void 0?l:!1,f=zK(u,r,e,a,d);return c.state={data:f.resolve(),prevProps:a,prevPropsContext:u,relayProp:yx(u.environment),resolver:f},c}s.getDerivedStateFromProps=function(l,c){var u,d=c.prevProps,f=FK(l.__relayContext),h=(u=l.__rootIsQueryRenderer)!==null&&u!==void 0?u:!1,p=BK(e,d),m=BK(e,l),g=c.resolver;if(c.prevPropsContext.environment!==f.environment||!GFe(p,m))return g=zK(f,r,e,l,h),{data:g.resolve(),prevPropsContext:f,prevProps:l,relayProp:yx(f.environment),resolver:g};g.setProps(l);var y=g.resolve();return y!==c.data?{data:y,prevProps:l,prevPropsContext:f,relayProp:yx(f.environment)}:null};var o=s.prototype;return o.componentDidMount=function(){this._subscribeToNewResolverAndRerenderIfStoreHasChanged()},o.componentDidUpdate=function(l,c){this.state.resolver!==c.resolver?(c.resolver.dispose(),this._subscribeToNewResolverAndRerenderIfStoreHasChanged()):this._rerenderIfStoreHasChanged()},o.componentWillUnmount=function(){this.state.resolver.dispose()},o.shouldComponentUpdate=function(l,c){if(c.data!==this.state.data)return!0;for(var u=Object.keys(l),d=0;d<u.length;d++){var f=u[d];if(f==="__relayContext"){if(c.prevPropsContext.environment!==this.state.prevPropsContext.environment)return!0}else if(!e.hasOwnProperty(f)&&!JFe(l[f],this.props[f]))return!0}return!1},o._rerenderIfStoreHasChanged=function(){var l=this.state,c=l.data,u=l.resolver,d=u.resolve();c!==d&&this.setState({data:d})},o._subscribeToNewResolverAndRerenderIfStoreHasChanged=function(){var l=this.state,c=l.data,u=l.resolver,d=u.resolve();u.setCallback(this.props,this._handleFragmentDataUpdate),c!==d&&this.setState({data:d})},o.render=function(){var l=this.props,c=l.componentRef;l.__relayContext,l.__rootIsQueryRenderer;var u=(0,BFe.default)(l,qFe);return LK.createElement(n,(0,mI.default)((0,mI.default)((0,mI.default)({},u),this.state.data),{},{ref:c,relay:this.state.relayProp}))},s}(LK.Component),(0,NK.default)(t,"displayName",r),t}function yx(n){return{environment:n}}function YFe(n,e){return KFe(n,e,QFe)}var XFe={createContainer:YFe},ZFe=fp,e5e=pz,t5e=nl,Uh=v,vz=st,n5e=vz.createOperationDescriptor;vz.deepFreeze;var r5e=vz.getRequest,i5e=Uh.useLayoutEffect,s5e=Uh.useState,jK=Uh.useRef,gI=Uh.useMemo,o5e={rootIsQueryRenderer:!0};function a5e(n){var e=Uh.useRef(n);return t5e(e.current,n)||(e.current=n),e.current}function l5e(n){var e=n.environment,t=n.query,r=n.variables,i=n.render,s=a5e(r),o=gI(function(){var h=r5e(t);return n5e(h,s)},[t,s]),a=gI(function(){return{environment:e}},[e]),l=jK(null),c=s5e(null),u=c[1],d=jK(null),f=gI(function(){e.check(o);var h=e.lookup(o.fragment);l.current=h.data;var p=e.retain(o),m=e.subscribe(h,function(k){l.current=k.data,u(l.current)}),g=!1;function y(){g||(g=!0,d.current=null,p.dispose(),m.dispose())}return d.current&&d.current(),d.current=y,h},[e,o]);return i5e(function(){var h=d.current;return function(){h&&h()}},[f]),Uh.createElement(ZFe.Provider,{value:a},Uh.createElement(e5e.Provider,{value:o5e},i({props:l.current})))}var c5e=l5e,u5e=or.default,VK=u5e(uo),d5e=st,f5e=d5e.getSelector;function h5e(n,e){var t={};return Object.keys(n).forEach(function(r){var i,s,o,a=n[r],l=e[r],c=f5e(a,l),u=c!=null&&c.kind==="PluralReaderSelector"?(i=(s=c.selectors[0])===null||s===void 0?void 0:s.owner.variables)!==null&&i!==void 0?i:{}:(o=c==null?void 0:c.owner.variables)!==null&&o!==void 0?o:{};t=(0,VK.default)((0,VK.default)({},t),u)}),t}var moe=h5e,p5e=or.default,qK=p5e(au),yI=$e,bz=st,m5e=bz.__internal.fetchQuery,g5e=bz.createOperationDescriptor,y5e=bz.isRelayModernEnvironment,v5e=function(){function n(t){(0,qK.default)(this,"_selectionReferences",[]),(0,qK.default)(this,"_callOnDataChangeWhenSet",!1),t!=null&&(this._cacheSelectionReference=t.cacheSelectionReference,this._selectionReferences=t.selectionReferences)}var e=n.prototype;return e.getSelectionReferences=function(){return{cacheSelectionReference:this._cacheSelectionReference,selectionReferences:this._selectionReferences}},e.lookupInStore=function(r,i,s){return(s==="store-and-network"||s==="store-or-network")&&r.check(i).status==="available"?(this._retainCachedOperation(r,i),r.lookup(i.fragment)):null},e.execute=function(r){var i=this,s=r.environment,o=r.operation,a=r.preservePreviousReferences,l=a===void 0?!1:a,c=s.retain(o),u=function(){i._selectionReferences=i._selectionReferences.concat(c)},d=function(){l||i.disposeSelectionReferences(),i._selectionReferences=i._selectionReferences.concat(c)},f=function(){i._selectionReferences=i._selectionReferences.concat(c)};return y5e(s)?m5e(s,o).do({error:u,complete:d,unsubscribe:f}):s.execute({operation:o}).do({error:u,complete:d,unsubscribe:f})},e.setOnDataChange=function(r){this._fetchOptions||yI(!1),typeof r=="function"&&(this._fetchOptions.onDataChangeCallbacks=this._fetchOptions.onDataChangeCallbacks||[],this._fetchOptions.onDataChangeCallbacks.push(r),this._callOnDataChangeWhenSet&&(this._error!=null?r({error:this._error}):this._snapshot!=null&&r({snapshot:this._snapshot})))},e.fetch=function(r,i){var s=this,o=r.environment,a=r.operation,l=r.onDataChange,c=!1,u;this.disposeRequest();var d=this._fetchOptions&&this._fetchOptions.onDataChangeCallbacks;this._fetchOptions={environment:o,onDataChangeCallbacks:d||[],operation:a},l&&this._fetchOptions.onDataChangeCallbacks.indexOf(l)===-1&&this._fetchOptions.onDataChangeCallbacks.push(l);var f=i?g5e(a.request.node,a.request.variables,i):a,h=this.execute({environment:o,operation:f}).finally(function(){s._pendingRequest=null}).subscribe({next:function(){s._callOnDataChangeWhenSet=!0,s._error=null,s._onQueryDataAvailable({notifyFirstResult:c})},error:function(m){s._callOnDataChangeWhenSet=!0,s._error=m,s._snapshot=null;var g=s._fetchOptions&&s._fetchOptions.onDataChangeCallbacks;c?g&&g.forEach(function(y){y({error:m})}):u=m}});if(this._pendingRequest={dispose:function(){h.unsubscribe()}},c=!0,u)throw u;return this._snapshot},e.retry=function(r){return this._fetchOptions||yI(!1),this.fetch({environment:this._fetchOptions.environment,operation:this._fetchOptions.operation,onDataChange:null},r)},e.dispose=function(){this.disposeRequest(),this.disposeSelectionReferences()},e.disposeRequest=function(){this._error=null,this._snapshot=null,this._pendingRequest&&this._pendingRequest.dispose(),this._rootSubscription&&(this._rootSubscription.dispose(),this._rootSubscription=null)},e._retainCachedOperation=function(r,i){this._disposeCacheSelectionReference(),this._cacheSelectionReference=r.retain(i)},e._disposeCacheSelectionReference=function(){this._cacheSelectionReference&&this._cacheSelectionReference.dispose(),this._cacheSelectionReference=null},e.disposeSelectionReferences=function(){this._disposeCacheSelectionReference(),this._selectionReferences.forEach(function(r){return r.dispose()}),this._selectionReferences=[]},e._onQueryDataAvailable=function(r){var i=this,s=r.notifyFirstResult;this._fetchOptions||yI(!1);var o=this._fetchOptions,a=o.environment,l=o.onDataChangeCallbacks,c=o.operation;if(!this._snapshot&&(this._snapshot=a.lookup(c.fragment),this._rootSubscription=a.subscribe(this._snapshot,function(d){if(i._fetchOptions!=null){var f=i._fetchOptions.onDataChangeCallbacks;Array.isArray(f)&&f.forEach(function(h){return h({snapshot:d})})}}),this._snapshot&&s&&Array.isArray(l))){var u=this._snapshot;l.forEach(function(d){return d({snapshot:u})})}},n}(),kz=v5e,k0=or.default,b5e=k0(hz),vI=k0(fz),Ay=k0(E_),k5e=k0(C_),Mf=k0(au),Ri=k0(uo),x5e=["componentRef"],S5e=["componentRef","__relayContext","__rootIsQueryRenderer"],w5e=["componentRef","__relayContext","__rootIsQueryRenderer"],$5e=mz,bI=moe,goe=M_,E5e=goe.getComponentName,C5e=goe.getContainerName,M5e=fp,T5e=kz,_5e=gz,kI=_5e.assertRelayContext,xI=nl,Vl=$e,SI=v,lu=st,KK=lu.ConnectionInterface,UK=lu.Observable,vx=lu.RelayFeatureFlags,bx=lu.createFragmentSpecResolver,A5e=lu.createOperationDescriptor,HK=lu.getDataIDsFromObject,I5e=lu.getRequest,R5e=lu.getVariablesFromObject,O5e=lu.isScalarAndEqual,WK="forward";function P5e(n){var e=n.path;return e||Vl(!1),function(t){for(var r=t[n.fragmentName],i=0;i<e.length;i++){if(!r||typeof r!="object")return null;r=r[e[i]]}return r}}function D5e(n){var e=n.count;return e||Vl(!1),function(t,r){return(0,Ri.default)((0,Ri.default)({},t),{},(0,Mf.default)({},e,r))}}function N5e(n){var e=null,t=!1;for(var r in n){var i=n[r],s=i.metadata&&i.metadata.connection;i.metadata!==void 0&&(t=!0),s&&(s.length!==1&&Vl(!1),e&&Vl(!1),e=(0,Ri.default)((0,Ri.default)({},s[0]),{},{fragmentName:r}))}return!t||e!==null||Vl(!1),e||{}}function GK(n){return typeof n=="function"?{error:n,complete:n,unsubscribe:function(t){typeof n=="function"&&n()}}:n||{}}function F5e(n,e,t){var r;E5e(n);var i=C5e(n),s=N5e(e),o=t.getConnectionFromProps||P5e(s),a=t.direction||s.direction;a||Vl(!1);var l=t.getFragmentVariables||D5e(s);return r=function(c){(0,k5e.default)(u,c);function u(f){var h,p;p=c.call(this,f)||this,(0,Mf.default)((0,Ay.default)(p),"_handleFragmentDataUpdate",function(){p.setState({data:p._resolver.resolve()})}),(0,Mf.default)((0,Ay.default)(p),"_hasMore",function(){var y=p._getConnectionData();return!!(y&&y.hasMore&&y.cursor)}),(0,Mf.default)((0,Ay.default)(p),"_isLoading",function(){return!!p._refetchSubscription}),(0,Mf.default)((0,Ay.default)(p),"_refetchConnection",function(y,k,b){if(!p._canFetchPage("refetchConnection"))return{dispose:function(){}};p._refetchVariables=b;var S={count:y,cursor:null,totalCount:y},w=p._fetchPage(S,GK(k),{force:!0});return{dispose:w.unsubscribe}}),(0,Mf.default)((0,Ay.default)(p),"_loadMore",function(y,k,b){if(!p._canFetchPage("loadMore"))return{dispose:function(){}};var S=GK(k),w=p._getConnectionData();if(!w)return UK.create(function(P){return P.complete()}).subscribe(S),null;var x=w.edgeCount+y;if(b&&b.force)return p._refetchConnection(x,k);var $=KK.get();$.END_CURSOR,$.START_CURSOR;var E=w.cursor,C={count:y,cursor:E,totalCount:x},M=p._fetchPage(C,S,b);return{dispose:M.unsubscribe}});var m=kI(f.__relayContext),g=(h=f.__rootIsQueryRenderer)!==null&&h!==void 0?h:!1;return p._isARequestInFlight=!1,p._refetchSubscription=null,p._refetchVariables=null,vx.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT===!0?p._resolver=bx(m,i,e,f,g):p._resolver=bx(m,i,e,f,g,p._handleFragmentDataUpdate),p.state={data:p._resolver.resolve(),prevContext:m,contextForChildren:m,relayProp:p._buildRelayProp(m),resolverGeneration:0},p._isUnmounted=!1,p._hasFetched=!1,p}var d=u.prototype;return d.componentDidMount=function(){this._isUnmounted=!1,vx.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT===!0&&this._subscribeToNewResolverAndRerenderIfStoreHasChanged()},d.componentDidUpdate=function(h,p){vx.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT===!0&&(p.resolverGeneration!==this.state.resolverGeneration?this._subscribeToNewResolverAndRerenderIfStoreHasChanged():this._rerenderIfStoreHasChanged())},d.UNSAFE_componentWillReceiveProps=function(h){var p=this,m,g=kI(h.__relayContext),y=(m=h.__rootIsQueryRenderer)!==null&&m!==void 0?m:!1,k=HK(e,this.props),b=HK(e,h),S=bI(e,this.props),w=bI(e,h);g.environment!==this.state.prevContext.environment||!xI(S,w)||!xI(k,b)?(this._cleanup(),vx.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT===!0?this._resolver=bx(g,i,e,h,y):this._resolver=bx(g,i,e,h,y,this._handleFragmentDataUpdate),this.setState(function($){return{prevContext:g,contextForChildren:g,relayProp:p._buildRelayProp(g),resolverGeneration:$.resolverGeneration+1}})):this._hasFetched||this._resolver.setProps(h);var x=this._resolver.resolve();x!==this.state.data&&this.setState({data:x})},d.componentWillUnmount=function(){this._isUnmounted=!0,this._cleanup()},d.shouldComponentUpdate=function(h,p){if(p.data!==this.state.data||p.relayProp!==this.state.relayProp||p.resolverGeneration!==this.state.resolverGeneration)return!0;for(var m=Object.keys(h),g=0;g<m.length;g++){var y=m[g];if(y==="__relayContext"){if(p.prevContext.environment!==this.state.prevContext.environment)return!0}else if(!e.hasOwnProperty(y)&&!O5e(h[y],this.props[y]))return!0}return!1},d._buildRelayProp=function(h){return{hasMore:this._hasMore,isLoading:this._isLoading,loadMore:this._loadMore,refetchConnection:this._refetchConnection,environment:h.environment}},d._rerenderIfStoreHasChanged=function(){var h=this.state.data,p=this._resolver.resolve();h!==p&&this.setState({data:p})},d._subscribeToNewResolverAndRerenderIfStoreHasChanged=function(){var h=this.state.data,p=this._resolver.resolve();this._resolver.setCallback(this.props,this._handleFragmentDataUpdate),h!==p&&this.setState({data:p})},d._getConnectionData=function(){var h=this.props;h.componentRef;var p=(0,vI.default)(h,x5e),m=(0,Ri.default)((0,Ri.default)({},p),this.state.data),g=o(m);if(g==null)return null;var y=KK.get(),k=y.EDGES,b=y.PAGE_INFO,S=y.HAS_NEXT_PAGE,w=y.HAS_PREV_PAGE,x=y.END_CURSOR,$=y.START_CURSOR;typeof g!="object"&&Vl(!1);var E=g[k],C=g[b];if(E==null||C==null)return null;Array.isArray(E)||Vl(!1),typeof C!="object"&&Vl(!1);var M=a===WK?C[S]:C[w],P=a===WK?C[x]:C[$];return typeof M!="boolean"||E.length!==0&&typeof P>"u"?null:{cursor:P,edgeCount:E.length,hasMore:M}},d._getQueryFetcher=function(){return this._queryFetcher||(this._queryFetcher=new T5e),this._queryFetcher},d._canFetchPage=function(h){return!this._isUnmounted},d._fetchPage=function(h,p,m){var g=this,y=kI(this.props.__relayContext),k=y.environment,b=this.props;b.componentRef,b.__relayContext,b.__rootIsQueryRenderer;var S=(0,vI.default)(b,S5e),w=(0,Ri.default)((0,Ri.default)({},S),this.state.data),x,$=bI(e,S);x=R5e(e,S),x=(0,Ri.default)((0,Ri.default)((0,Ri.default)({},$),x),this._refetchVariables);var E=t.getVariables(w,{count:h.count,cursor:h.cursor},x);typeof E=="object"&&E!==null||Vl(!1),E=(0,Ri.default)((0,Ri.default)({},E),this._refetchVariables),x=(0,Ri.default)((0,Ri.default)({},E),x);var C=m?{force:!!m.force}:void 0;C!=null&&(m==null?void 0:m.metadata)!=null&&(C.metadata=m==null?void 0:m.metadata);var M=I5e(t.query),P=A5e(M,E,C),I=null;this._refetchSubscription&&this._refetchSubscription.unsubscribe(),this._hasFetched=!0;var N=function(A,L){var F=g._resolver.resolve();g._resolver.setVariables(l(x,h.totalCount),P.request.node);var O=g._resolver.resolve();xI(F,O)?L():g.setState({data:O,contextForChildren:{environment:g.props.__relayContext.environment}},L)},T=function(){g._refetchSubscription===I&&(g._refetchSubscription=null,g._isARequestInFlight=!1)};return this._isARequestInFlight=!0,I=this._getQueryFetcher().execute({environment:k,operation:P,preservePreviousReferences:!0}).mergeMap(function(R){return UK.create(function(A){N(R,function(){A.next(),A.complete()})})}).do({error:T,complete:T,unsubscribe:T}).subscribe(p||{}),this._refetchSubscription=this._isARequestInFlight?I:null,I},d._cleanup=function(){this._resolver.dispose(),this._refetchVariables=null,this._hasFetched=!1,this._refetchSubscription&&(this._refetchSubscription.unsubscribe(),this._refetchSubscription=null,this._isARequestInFlight=!1),this._queryFetcher&&this._queryFetcher.dispose()},d.render=function(){var h=this.props,p=h.componentRef;h.__relayContext,h.__rootIsQueryRenderer;var m=(0,vI.default)(h,w5e);return SI.createElement(M5e.Provider,{value:this.state.contextForChildren},SI.createElement(n,(0,b5e.default)({},m,this.state.data,{ref:p,relay:this.state.relayProp})))},u}(SI.Component),(0,Mf.default)(r,"displayName",i),r}function L5e(n,e,t){return $5e(n,e,function(r,i){return F5e(r,i,t)})}var z5e={createContainer:L5e},T_=or.default,yoe=T_(uo),B5e=T_(E_),j5e=T_(C_),V5e=T_(au),q5e=fp,G$=kz,K5e=pz,U5e=nl,wI=v,xz=st,H5e=xz.createOperationDescriptor;xz.deepFreeze;var Sz=xz.getRequest,ua={},W5e={rootIsQueryRenderer:!0},G5e=function(n){(0,j5e.default)(e,n);function e(r){var i;i=n.call(this,r)||this,(0,V5e.default)((0,B5e.default)(i),"_handleDataChange",function(u){var d=u.error==null?null:u.error,f=u.snapshot==null?null:u.snapshot;i.setState(function(h){var p=h.requestCacheKey;return p&&delete ua[p],f===h.snapshot&&d===h.error?null:{renderProps:Aw(d,f,h.queryFetcher,h.retryCallbacks),snapshot:f,requestCacheKey:null}})});var s={handleDataChange:null,handleRetryAfterError:null},o,a;if(r.query){var l=r.query,c=Sz(l);a=wz(c.params,r.variables),o=ua[a]?ua[a].queryFetcher:new G$}else o=new G$;return i._maybeHiddenOrFastRefresh=!1,i.state=(0,yoe.default)({prevPropsEnvironment:r.environment,prevPropsVariables:r.variables,prevQuery:r.query,queryFetcher:o,retryCallbacks:s},voe(r,o,s,a)),i}e.getDerivedStateFromProps=function(i,s){return s.prevQuery!==i.query||s.prevPropsEnvironment!==i.environment||!U5e(s.prevPropsVariables,i.variables)?JK(i,s):null};var t=e.prototype;return t.componentDidMount=function(){var i=this;if(this._maybeHiddenOrFastRefresh===!0){this._maybeHiddenOrFastRefresh=!1,this.setState(function(c){return JK(i.props,c)});return}var s=this.state,o=s.retryCallbacks,a=s.queryFetcher,l=s.requestCacheKey;l&&delete ua[l],o.handleDataChange=this._handleDataChange,o.handleRetryAfterError=function(c){return i.setState(function(u){var d=u.requestCacheKey;return d&&delete ua[d],{renderProps:HN(),requestCacheKey:null}})},this.props.query&&a.setOnDataChange(this._handleDataChange)},t.componentDidUpdate=function(i,s){var o=this.state,a=o.queryFetcher,l=o.requestCacheKey;l&&(delete ua[l],delete this.state.requestCacheKey),this.props.query&&a!==s.queryFetcher&&a.setOnDataChange(this._handleDataChange)},t.componentWillUnmount=function(){this.state.queryFetcher.dispose(),this._maybeHiddenOrFastRefresh=!0},t.shouldComponentUpdate=function(i,s){return i.render!==this.props.render||s.renderProps!==this.state.renderProps},t.render=function(){var i=this.state,s=i.renderProps,o=i.relayContext;return wI.createElement(q5e.Provider,{value:o},wI.createElement(K5e.Provider,{value:W5e},this.props.render(s)))},e}(wI.Component);function HN(){return{error:null,props:null,retry:null}}function J5e(){return{error:null,props:{},retry:null}}function Aw(n,e,t,r){return{error:n||null,props:e?e.data:null,retry:function(s){var o=t.retry(s);o&&typeof r.handleDataChange=="function"?r.handleDataChange({snapshot:o}):n&&typeof r.handleRetryAfterError=="function"&&r.handleRetryAfterError(n)}}}function wz(n,e){return JSON.stringify({id:n.cacheID?n.cacheID:n.id,variables:e})}function JK(n,e){var t=n.query,r=e.queryFetcher.getSelectionReferences();e.queryFetcher.disposeRequest();var i;if(t){var s=Sz(t),o=wz(s.params,n.variables);i=ua[o]?ua[o].queryFetcher:new G$(r)}else i=new G$(r);return(0,yoe.default)({prevQuery:n.query,prevPropsEnvironment:n.environment,prevPropsVariables:n.variables,queryFetcher:i},voe(n,i,e.retryCallbacks))}function voe(n,e,t,r){var i=n.environment,s=n.query,o=n.variables,a=n.cacheConfig,l=i;if(s){var c=Sz(s),u=H5e(c,o,a),d={environment:l};if(typeof r=="string"&&ua[r]){var f=ua[r].snapshot;return f?{error:null,relayContext:d,renderProps:Aw(null,f,e,t),snapshot:f,requestCacheKey:r}:{error:null,relayContext:d,renderProps:HN(),snapshot:null,requestCacheKey:r}}try{var h=e.lookupInStore(l,u,n.fetchPolicy),p=e.fetch({environment:l,onDataChange:null,operation:u}),m=p||h;return r=r||wz(c.params,n.variables),ua[r]={queryFetcher:e,snapshot:m},m?{error:null,relayContext:d,renderProps:Aw(null,m,e,t),snapshot:m,requestCacheKey:r}:{error:null,relayContext:d,renderProps:HN(),snapshot:null,requestCacheKey:r}}catch(y){return{error:y,relayContext:d,renderProps:Aw(y,null,e,t),snapshot:null,requestCacheKey:r}}}else{e.dispose();var g={environment:l};return{error:null,relayContext:g,renderProps:J5e(),requestCacheKey:null}}}var Q5e=G5e,x0=or.default,Y5e=x0(hz),X5e=x0(fz),qp=x0(uo),QK=x0(E_),Z5e=x0(C_),$I=x0(au),e6e=["componentRef","__relayContext","__rootIsQueryRenderer"],t6e=mz,EI=moe,n6e=M_,r6e=n6e.getContainerName,i6e=fp,s6e=kz,o6e=gz,CI=o6e.assertRelayContext,YK=nl,MI=v,hp=st,a6e=hp.Observable,XK=hp.createFragmentSpecResolver,l6e=hp.createOperationDescriptor,ZK=hp.getDataIDsFromObject,c6e=hp.getRequest,u6e=hp.getVariablesFromObject,d6e=hp.isScalarAndEqual;function f6e(n,e,t){var r,i=r6e(n);return r=function(s){(0,Z5e.default)(o,s);function o(l){var c,u;u=s.call(this,l)||this,(0,$I.default)((0,QK.default)(u),"_handleFragmentDataUpdate",function(){var p=u.state.resolver;u.setState(function(m){return p===m.resolver?{data:m.resolver.resolve()}:null})}),(0,$I.default)((0,QK.default)(u),"_refetch",function(p,m,g,y){if(u._isUnmounted)return{dispose:function(){}};var k=CI(u.props.__relayContext),b=k.environment,S=EI(e,u.props),w=typeof p=="function"?p(u._getFragmentVariables()):p;w=(0,qp.default)((0,qp.default)({},S),w);var x=m?(0,qp.default)((0,qp.default)({},w),m):w,$=y?{force:!!y.force}:void 0;$!=null&&(y==null?void 0:y.metadata)!=null&&($.metadata=y==null?void 0:y.metadata);var E=typeof g=="function"?{next:g,error:g}:g||{},C=c6e(t),M=l6e(C,w,$);u.state.localVariables=w,u._refetchSubscription&&u._refetchSubscription.unsubscribe();var P,I=u._getQueryFetcher().lookupInStore(b,M,y==null?void 0:y.fetchPolicy);return I!=null?(u.state.resolver.setVariables(x,M.request.node),u.setState(function(N){return{data:N.resolver.resolve(),contextForChildren:{environment:u.props.__relayContext.environment}}},function(){E.next&&E.next(),E.complete&&E.complete()}),{dispose:function(){}}):(u._getQueryFetcher().execute({environment:b,operation:M,preservePreviousReferences:!0}).mergeMap(function(N){return u.state.resolver.setVariables(x,M.request.node),a6e.create(function(T){return u.setState(function(R){return{data:R.resolver.resolve(),contextForChildren:{environment:u.props.__relayContext.environment}}},function(){T.next(),T.complete()})})}).finally(function(){u._refetchSubscription===P&&(u._refetchSubscription=null)}).subscribe((0,qp.default)((0,qp.default)({},E),{},{start:function(T){u._refetchSubscription=P=T,E.start&&E.start(T)}})),{dispose:function(){P&&P.unsubscribe()}})});var d=CI(l.__relayContext),f=(c=l.__rootIsQueryRenderer)!==null&&c!==void 0?c:!1;u._refetchSubscription=null;var h=XK(d,i,e,l,f);return u.state={data:h.resolve(),localVariables:null,prevProps:l,prevPropsContext:d,contextForChildren:d,relayProp:eU(d.environment,u._refetch),resolver:h},u._isUnmounted=!1,u}var a=o.prototype;return a.componentDidMount=function(){this._isUnmounted=!1,this._subscribeToNewResolverAndRerenderIfStoreHasChanged()},a.componentDidUpdate=function(c,u){this.state.resolver!==u.resolver?(u.resolver.dispose(),this._queryFetcher&&this._queryFetcher.dispose(),this._refetchSubscription&&this._refetchSubscription.unsubscribe(),this._subscribeToNewResolverAndRerenderIfStoreHasChanged()):this._rerenderIfStoreHasChanged()},o.getDerivedStateFromProps=function(c,u){var d,f=u.prevProps,h=CI(c.__relayContext),p=(d=c.__rootIsQueryRenderer)!==null&&d!==void 0?d:!1,m=ZK(e,f),g=ZK(e,c),y=EI(e,f),k=EI(e,c),b=u.resolver;if(u.prevPropsContext.environment!==h.environment||!YK(y,k)||!YK(m,g))return b=XK(h,i,e,c,p),{data:b.resolve(),localVariables:null,prevProps:c,prevPropsContext:h,contextForChildren:h,relayProp:eU(h.environment,u.relayProp.refetch),resolver:b};u.localVariables||b.setProps(c);var S=b.resolve();return S!==u.data?{data:S,prevProps:c}:null},a.componentWillUnmount=function(){this._isUnmounted=!0,this.state.resolver.dispose(),this._queryFetcher&&this._queryFetcher.dispose(),this._refetchSubscription&&this._refetchSubscription.unsubscribe()},a.shouldComponentUpdate=function(c,u){if(u.data!==this.state.data||u.relayProp!==this.state.relayProp)return!0;for(var d=Object.keys(c),f=0;f<d.length;f++){var h=d[f];if(h==="__relayContext"){if(this.state.prevPropsContext.environment!==u.prevPropsContext.environment)return!0}else if(!e.hasOwnProperty(h)&&!d6e(c[h],this.props[h]))return!0}return!1},a._rerenderIfStoreHasChanged=function(){var c=this.state,u=c.data,d=c.resolver,f=d.resolve();u!==f&&this.setState({data:f})},a._subscribeToNewResolverAndRerenderIfStoreHasChanged=function(){var c=this.state,u=c.data,d=c.resolver,f=d.resolve();d.setCallback(this.props,this._handleFragmentDataUpdate),u!==f&&this.setState({data:f})},a._getFragmentVariables=function(){return u6e(e,this.props)},a._getQueryFetcher=function(){return this._queryFetcher||(this._queryFetcher=new s6e),this._queryFetcher},a.render=function(){var c=this.props,u=c.componentRef;c.__relayContext,c.__rootIsQueryRenderer;var d=(0,X5e.default)(c,e6e),f=this.state,h=f.relayProp,p=f.contextForChildren;return MI.createElement(i6e.Provider,{value:p},MI.createElement(n,(0,Y5e.default)({},d,this.state.data,{ref:u,relay:h})))},o}(MI.Component),(0,$I.default)(r,"displayName",i),r}function eU(n,e){return{environment:n,refetch:e}}function h6e(n,e,t){return t6e(n,e,function(r,i){return f6e(r,i,t)})}var p6e={createContainer:h6e},m6e=v,g6e=m6e.createContext({wrapPrepareQueryResource:function(e){return e()}}),$z=g6e,boe=fp,y6e=$e,v6e=v,b6e=v6e.useContext,k6e=boe;function x6e(){var n=b6e(k6e);return n==null&&y6e(!1),n.environment}var fo=x6e,S6e=$z,w6e=fo,$6e=v,koe=v,E6e=koe.useContext,C6e=koe.useEffect;function M6e(n){var e=n.entryPointReference,t=n.props,r=e.getComponent,i=e.queries,s=e.entryPoints,o=e.extraProps,a=e.rootModuleID,l=r(),c=E6e(S6e),u=w6e();return C6e(function(){u.__log({name:"entrypoint.root.consume",profilerContext:c,rootModuleID:a})},[u,c,a]),$6e.createElement(l,{entryPoints:s,extraProps:o,props:t,queries:i})}var T6e=M6e,_6e=or.default,tU=_6e(uo),A6e=$e,xoe=v,zd=st,nU=zd.Observable,rU=zd.PreloadableQueryRegistry,iU=zd.RelayFeatureFlags,sU=zd.ReplaySubject,oU=zd.__internal.fetchQueryDeduped,aU=zd.createOperationDescriptor,I6e=zd.getRequest,R6e=zd.getRequestIdentifier,lU=null,cU=100001;function O6e(){if(lU===null){var n,e;lU=(n=xoe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||n===void 0||(e=n.ReactCurrentDispatcher)===null||e===void 0?void 0:e.current}}function P6e(n,e,t,r,i){var s,o,a;(s=xoe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||s===void 0||(o=s.ReactCurrentDispatcher)===null||o===void 0||o.current,cU++;var l=(a=r==null?void 0:r.fetchPolicy)!==null&&a!==void 0?a:"store-or-network",c=(0,tU.default)((0,tU.default)({},r==null?void 0:r.networkCacheConfig),{},{force:!0}),u,d=!1,f=function(K,Z){return d=!0,n.executeWithSource({operation:K,source:Z})},h=new sU,p=nU.create(function(j){return h.subscribe(j)}),m,g=null,y=!1,k=function(K){y=!0;var Z,te=new sU;if(iU.ENABLE_LOAD_QUERY_REQUEST_DEDUPING===!0){var pe="raw-network-request-"+R6e(K,t);Z=oU(n,pe,function(){var xe=n.getNetwork();return xe.execute(K,t,c)})}else{var he=n.getNetwork();Z=he.execute(K,t,c)}var se=Z.subscribe({error:function(be){g=be,te.error(be)},next:function(be){te.next(be)},complete:function(){te.complete()}}),ke=se.unsubscribe;return m=ke,nU.create(function(xe){var be=te.subscribe(xe);return function(){be.unsubscribe(),m()}})},b,S=function(K,Z){iU.ENABLE_LOAD_QUERY_REQUEST_DEDUPING===!0&&(y=!0);var te=oU(n,K.request.identifier,Z).subscribe({error:function(he){h.error(he)},next:function(he){h.next(he)},complete:function(){h.complete()}});b=te.unsubscribe},w=function(K){var Z=aU(K,t,c);if(u=n.retain(Z),l!=="store-only"){var te=l!=="store-or-network"||n.check(Z).status!=="available";te&&S(Z,function(){var pe=k(K.params),he=f(Z,pe);return he})}},x,$,E;if(e.kind==="PreloadableConcreteRequest"){var C=e;x=C.params;var M=x;E=M.id,E===null&&A6e(!1);var P=rU.get(E);if(P!=null)w(P);else{var I=l==="store-only"?null:k(x),N=rU.onLoad(E,function(j){$();var K=aU(j,t,c);u=n.retain(K),I!=null&&S(K,function(){return f(K,I)})});$=N.dispose}}else{var T=e,R=I6e(T);x=R.params,E=x.cacheID!=null?x.cacheID:x.id,w(R)}var A=!1,L=!1,F=!1,O=function(){L||(u&&u.dispose(),L=!0)},z=function(){F||(d?b&&b():m&&m(),$&&$(),F=!0)};return{kind:"PreloadedQuery",environment:n,environmentProviderOptions:i,dispose:function(){A||(O(),z(),A=!0)},releaseQuery:O,cancelNetworkRequest:z,fetchKey:cU,id:E,get isDisposed(){return A||L},get networkError(){return g},name:x.name,networkCacheConfig:c,fetchPolicy:l,source:y?p:void 0,variables:t}}var pp={loadQuery:P6e,useTrackLoadQueryInRender:O6e},D6e=pp,N6e=D6e.loadQuery;function Soe(n,e,t){var r=null;e.root.getModuleIfRequired()==null&&(r=e.root.load());var i=e.getPreloadProps(t),s=i.queries,o=i.entryPoints,a=i.extraProps,l={},c={};if(s!=null){var u=Object.keys(s);u.forEach(function(h){var p=s[h],m=p.environmentProviderOptions,g=p.options,y=p.parameters,k=p.variables,b=n.getEnvironment(m);l[h]=N6e(b,y,k,{fetchPolicy:g==null?void 0:g.fetchPolicy,networkCacheConfig:g==null?void 0:g.networkCacheConfig,__nameForWarning:"loadEntryPoint"},m)})}if(o!=null){var d=Object.keys(o);d.forEach(function(h){var p=o[h];if(p!=null){var m=p.entryPoint,g=p.entryPointParams;c[h]=Soe(n,m,g)}})}var f=!1;return{dispose:function(){f||(l!=null&&Object.values(l).forEach(function(p){var m=p.dispose;m()}),c!=null&&Object.values(c).forEach(function(p){var m=p.dispose;m()}),f=!0)},entryPoints:c,extraProps:a??null,getComponent:function(){var p=e.root.getModuleIfRequired();if(p==null){var m;throw r=(m=r)!==null&&m!==void 0?m:e.root.load(),r}var g=p.default!=null?p.default:p;return g},get isDisposed(){return f},queries:l,rootModuleID:e.root.getModuleId()}}var woe=Soe,$oe=v,F6e=boe,L6e=$oe.useMemo;function z6e(n){var e=n.children,t=n.environment,r=n.getEnvironmentForActor,i=L6e(function(){return{environment:t,getEnvironmentForActor:r}},[t,r]);return $oe.createElement(F6e.Provider,{value:i},e)}var B6e=z6e,j6e=$e,V6e=function(){function n(t){this._capacity=t,this._capacity>0||j6e(!1),this._map=new Map}var e=n.prototype;return e.set=function(r,i){if(this._map.delete(r),this._map.set(r,i),this._map.size>this._capacity){var s=this._map.keys().next();s.done||this._map.delete(s.value)}},e.get=function(r){var i=this._map.get(r);return i!=null&&(this._map.delete(r),this._map.set(r,i)),i},e.has=function(r){return this._map.has(r)},e.delete=function(r){this._map.delete(r)},e.size=function(){return this._map.size},e.capacity=function(){return this._capacity-this._map.size},e.clear=function(){this._map.clear()},n}();function q6e(n){return new V6e(n)}var Eoe={create:q6e},K6e=or.default,TI=K6e(au),U6e=$e,H6e=5*60*1e3,W6e=function(){function n(t){var r=this;(0,TI.default)(this,"_retainCount",0),(0,TI.default)(this,"_retainDisposable",null),(0,TI.default)(this,"_releaseTemporaryRetain",null),this._retain=function(i){return r._retainCount++,r._retainCount===1&&(r._retainDisposable=t(i)),{dispose:function(){r._retainCount=Math.max(0,r._retainCount-1),r._retainCount===0&&(r._retainDisposable==null&&U6e(!1),r._retainDisposable.dispose(),r._retainDisposable=null)}}}}var e=n.prototype;return e.temporaryRetain=function(r){var i=this,s;if(r.isServer())return{dispose:function(){}};var o=this._retain(r),a=null,l=function(){clearTimeout(a),a=null,i._releaseTemporaryRetain=null,o.dispose()};return a=setTimeout(l,H6e),(s=this._releaseTemporaryRetain)===null||s===void 0||s.call(this),this._releaseTemporaryRetain=l,{dispose:function(){var u;(u=i._releaseTemporaryRetain)===null||u===void 0||u.call(i)}}},e.permanentRetain=function(r){var i=this._retain(r);return this.releaseTemporaryRetain(),i},e.releaseTemporaryRetain=function(){var r;(r=this._releaseTemporaryRetain)===null||r===void 0||r.call(this),this._releaseTemporaryRetain=null},e.getRetainCount=function(){return this._retainCount},n}(),Coe=W6e,Moe=or.default,kx=Moe(uo),Toe=Moe(au),G6e=Eoe,J6e=Coe,Q6e=$e,Y6e=st,X6e=Y6e.isPromise,Z6e=1e3,_oe="store-or-network",eLe=typeof WeakMap=="function";function Aoe(n){return n.request.node.params.metadata.live!==void 0}function WN(n,e,t,r,i){var s=t??_oe,o=r??n.UNSTABLE_getDefaultRenderPolicy(),a="".concat(s,"-").concat(o,"-").concat(e.request.identifier);return i!=null?"".concat(a,"-").concat(i):a}function uU(n,e){var t={__id:n.fragment.dataID,__fragments:(0,Toe.default)({},n.fragment.node.name,n.request.variables),__fragmentOwner:n.request};return{cacheIdentifier:e,fragmentNode:n.request.node.fragment,fragmentRef:t,operation:n}}var tLe=2e5;function _I(n,e,t,r,i,s){var o=Aoe(e),a=r,l=i,c=new J6e(function(d){var f=d.retain(e);return{dispose:function(){o&&l!=null&&l.unsubscribe(),f.dispose(),s(u)}}}),u={cacheIdentifier:n,id:tLe++,processedPayloadsCount:0,operationAvailability:t,getValue:function(){return a},setValue:function(f){a=f},setNetworkSubscription:function(f){o&&l!=null&&l.unsubscribe(),l=f},temporaryRetain:function(f){return c.temporaryRetain(f)},permanentRetain:function(f){return c.permanentRetain(f)},releaseTemporaryRetain:function(){c.releaseTemporaryRetain()}};return u}var nLe=function(){function n(t){var r=this;(0,Toe.default)(this,"_clearCacheEntry",function(i){r._cache.delete(i.cacheIdentifier)}),this._environment=t,this._cache=G6e.create(Z6e)}var e=n.prototype;return e.prepare=function(r,i,s,o,a,l,c){var u=WN(this._environment,r,s,o,l);return this.prepareWithIdentifier(u,r,i,s,o,a,c)},e.prepareWithIdentifier=function(r,i,s,o,a,l,c){var u=this._environment,d=o??_oe,f=a??u.UNSTABLE_getDefaultRenderPolicy(),h=this._cache.get(r),p=null,m=h!=null;h==null&&(h=this._fetchAndSaveQuery(r,i,s,d,f,c,(0,kx.default)((0,kx.default)({},l),{},{unsubscribe:function(k){p!=null&&p.dispose();var b=l==null?void 0:l.unsubscribe;b&&b(k)}}))),p=h.temporaryRetain(u);var g=h.getValue();if(X6e(g))throw u.__log({name:"suspense.query",fetchPolicy:d,isPromiseCached:m,operation:i,queryAvailability:h.operationAvailability,renderPolicy:f}),g;if(g instanceof Error)throw g;return g},e.retain=function(r,i){var s=this._environment,o=r.cacheIdentifier,a=r.operation,l=this._getOrCreateCacheEntry(o,a,null,r,null),c=l.permanentRetain(s);return s.__log({name:"queryresource.retain",profilerContext:i,resourceID:l.id}),{dispose:function(){c.dispose()}}},e.releaseTemporaryRetain=function(r){var i=this._cache.get(r.cacheIdentifier);i!=null&&i.releaseTemporaryRetain()},e.TESTS_ONLY__getCacheEntry=function(r,i,s,o){var a=this._environment,l=WN(a,r,i,s,o);return this._cache.get(l)},e._getOrCreateCacheEntry=function(r,i,s,o,a){var l=this._cache.get(r);return l==null&&(l=_I(r,i,s,o,a,this._clearCacheEntry),this._cache.set(r,l)),l},e._fetchAndSaveQuery=function(r,i,s,o,a,l,c){var u=this,d=this._environment,f=d.check(i),h=f.status,p=h==="available",m=p||a==="partial"&&h!=="stale",g,y,k=function(){};switch(o){case"store-only":{g=!1,y=!0;break}case"store-or-network":{g=!p,y=m;break}case"store-and-network":{g=!0,y=m;break}case"network-only":default:{g=!0,y=!1;break}}if(y){var b=uU(i,r),S=_I(r,i,f,b,null,this._clearCacheEntry);this._cache.set(r,S)}if(g){var w=uU(i,r),x;s.subscribe({start:function(I){x=I;var N=u._cache.get(r);N&&N.setNetworkSubscription(x);var T=c==null?void 0:c.start;if(T){var R=(0,kx.default)((0,kx.default)({},I),{},{unsubscribe:function(){Aoe(i)&&I.unsubscribe()}});T(R)}},next:function(){var I=u._getOrCreateCacheEntry(r,i,f,w,x);I.processedPayloadsCount+=1,I.setValue(w),k();var N=c==null?void 0:c.next;if(N!=null){var T=d.lookup(i.fragment);N(T)}},error:function(I){var N=u._getOrCreateCacheEntry(r,i,f,I,x);N.processedPayloadsCount===0&&N.setValue(I),k(),x=null,N.setNetworkSubscription(null);var T=c==null?void 0:c.error;T&&T(I)},complete:function(){k(),x=null;var I=u._cache.get(r);I&&I.setNetworkSubscription(null);var N=c==null?void 0:c.complete;N&&N()},unsubscribe:c==null?void 0:c.unsubscribe});var $=this._cache.get(r);if(!$){var E=new Promise(function(P){k=P});E.displayName="Relay("+i.fragment.node.name+")",$=_I(r,i,f,E,x,this._clearCacheEntry),this._cache.set(r,$)}}else{var C=c==null?void 0:c.complete;C&&C()}var M=this._cache.get(r);return M==null&&Q6e(!1),d.__log({name:"queryresource.fetch",resourceID:M.id,operation:i,profilerContext:l,fetchPolicy:o,renderPolicy:a,queryAvailability:f,shouldFetch:g}),M},n}();function Ioe(n){return new nLe(n)}var dU=eLe?new WeakMap:new Map;function rLe(n){var e=dU.get(n);if(e)return e;var t=Ioe(n);return dU.set(n,t),t}var Ez={createQueryResource:Ioe,getQueryResourceForEnvironment:rLe,getQueryCacheIdentifier:WN},Cz=v,AI=Cz.useCallback,iLe=Cz.useEffect,fU=Cz.useRef;function sLe(){var n=fU(null),e=fU(!1),t=AI(function(){n.current!=null&&(n.current.unsubscribe(),n.current=null),e.current=!1},[]),r=AI(function(s){n.current=s,e.current=!0},[]),i=AI(function(){n.current=null,e.current=!1},[]);return iLe(function(){return t},[t]),{isFetchingRef:e,startFetch:r,disposeFetch:t,completeFetch:i}}var Roe=sLe,Ooe={exports:{}},Poe={exports:{}},Doe={exports:{}};(function(n){function e(t,r){(r==null||r>t.length)&&(r=t.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=t[i];return s}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Doe);var Noe=Doe.exports;(function(n){var e=Noe;function t(r){if(Array.isArray(r))return e(r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Poe);var oLe=Poe.exports,Foe={exports:{}};(function(n){function e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Foe);var aLe=Foe.exports,Loe={exports:{}};(function(n){var e=Noe;function t(r,i){if(r){if(typeof r=="string")return e(r,i);var s=Object.prototype.toString.call(r).slice(8,-1);if(s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set")return Array.from(r);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return e(r,i)}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Loe);var zoe=Loe.exports,Boe={exports:{}};(function(n){function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Boe);var lLe=Boe.exports;(function(n){var e=oLe,t=aLe,r=zoe,i=lLe;function s(o){return e(o)||t(o)||r(o)||i()}n.exports=s,n.exports.__esModule=!0,n.exports.default=n.exports})(Ooe);var cLe=Ooe.exports,Mz=or.default,xx=Mz(uo),hU=Mz(au),Sx=Mz(cLe),uLe=Eoe,dLe=Ez,pU=dLe.getQueryResourceForEnvironment,fLe=Coe,lm=$e,pc=st,wx=pc.RelayFeatureFlags,joe=pc.__internal,hLe=joe.fetchQuery,pLe=joe.getPromiseForActiveRequest,mLe=pc.createOperationDescriptor,gLe=pc.getFragmentIdentifier,yLe=pc.getPendingOperationsForFragment,vLe=pc.getSelector,bLe=pc.getVariablesFromFragment,mU=pc.handlePotentialSnapshotErrors,II=pc.isPromise,gU=pc.recycleNodesInto,kLe=typeof WeakMap=="function",xLe=1e6,yU=Object.freeze([]);function vU(n){return Array.isArray(n)?n.some(function(e){return e.isMissingData}):n.isMissingData}function SLe(n){var e,t;return Array.isArray(n)?n.some(function(r){var i,s;return((i=(s=r.missingClientEdges)===null||s===void 0?void 0:s.length)!==null&&i!==void 0?i:0)>0}):((e=(t=n.missingClientEdges)===null||t===void 0?void 0:t.length)!==null&&e!==void 0?e:0)>0}function bU(n){return Array.isArray(n)?n.map(function(e){return e.missingLiveResolverFields}).filter(Boolean).flat():n.missingLiveResolverFields}function wLe(n,e){Array.isArray(n)?n.forEach(e):e(n)}function Kp(n,e,t){return Array.isArray(e)?{cacheKey:n,snapshot:e,data:e.map(function(r){return r.data}),isMissingData:vU(e),storeEpoch:t}:{cacheKey:n,snapshot:e,data:e.data,isMissingData:vU(e),storeEpoch:t}}var $Le=function(){function n(t){(0,hU.default)(this,"_cache",new Map),(0,hU.default)(this,"_retainCounts",new Map),this._environment=t}var e=n.prototype;return e.get=function(r){var i,s;return(i=(s=this._cache.get(r))===null||s===void 0?void 0:s[0])!==null&&i!==void 0?i:void 0},e.recordQueryResults=function(r,i){var s=this,o=this._cache.get(r);if(o){var l=o[0],c=o[1];i.forEach(function(u){l.push(u)}),c.temporaryRetain(this._environment)}else{var a=new fLe(function(){return s._retain(r)});this._cache.set(r,[i,a]),a.temporaryRetain(this._environment)}},e._retain=function(r){var i=this,s,o=((s=this._retainCounts.get(r))!==null&&s!==void 0?s:0)+1;return this._retainCounts.set(r,o),{dispose:function(){var l,c=((l=i._retainCounts.get(r))!==null&&l!==void 0?l:0)-1;c>0?i._retainCounts.set(r,c):(i._retainCounts.delete(r),i._cache.delete(r))}}},n}(),ELe=function(){function n(t){this._environment=t,this._cache=uLe.create(xLe),wx.ENABLE_CLIENT_EDGES&&(this._clientEdgeQueryResultsCache=new $Le(t))}var e=n.prototype;return e.read=function(r,i,s,o){return this.readWithIdentifier(r,i,gLe(r,i),s,o)},e.readWithIdentifier=function(r,i,s,o,a){var l=this,c,u,d,f,h=this._environment;if(i==null)return{cacheKey:s,data:null,isMissingData:!1,snapshot:null,storeEpoch:0};var p=h.getStore().getEpoch();if((r==null||(c=r.metadata)===null||c===void 0?void 0:c.plural)===!0&&(Array.isArray(i)||lm(!1),i.length===0))return{cacheKey:s,data:yU,isMissingData:!1,snapshot:yU,storeEpoch:p};var m=this._cache.get(s);if(m!=null){var g;if(m.kind==="pending"&&II(m.promise))throw h.__log({name:"suspense.fragment",data:m.result.data,fragment:r,isRelayHooks:!0,isMissingData:m.result.isMissingData,isPromiseCached:!0,pendingOperations:m.pendingOperations}),m.promise;if(m.kind==="done"&&m.result.snapshot&&!((g=bU(m.result.snapshot))!==null&&g!==void 0&&g.length))return this._handlePotentialSnapshotErrorsInSnapshot(m.result.snapshot),m.result}var y=vLe(r,i);y==null&&lm(!1);var k=y.kind==="PluralReaderSelector"?y.selectors.map(function(R){return h.lookup(R)}):h.lookup(y),b=Kp(s,k,p);if(!b.isMissingData)return this._handlePotentialSnapshotErrorsInSnapshot(k),this._cache.set(s,{kind:"done",result:b}),b;var S=null;if(wx.ENABLE_CLIENT_EDGES&&((u=r.metadata)===null||u===void 0?void 0:u.hasClientEdges)===!0&&SLe(k)){S=[];var w=pU(this._environment),x=[];wLe(k,function(R){var A;(A=R.missingClientEdges)===null||A===void 0||A.forEach(function(L){var F,O=L.request,z=L.clientEdgeDestinationID,j=l._performClientEdgeQuery(w,r,i,O,z),K=j.queryResult,Z=j.requestDescriptor;x.push(K),(F=S)===null||F===void 0||F.push(Z)})}),this._clientEdgeQueryResultsCache==null&&lm(!1),this._clientEdgeQueryResultsCache.recordQueryResults(s,x)}var $=[];wx.ENABLE_CLIENT_EDGES&&S&&($=S.map(function(R){return pLe(l._environment,R)}).filter(Boolean));var E=y.kind==="PluralReaderSelector"?y.selectors[0].owner:y.owner,C=this._getAndSavePromiseForFragmentRequestInFlight(s,r,E,b),M=C==null?void 0:C.promise,P=(d=(f=bU(k))===null||f===void 0?void 0:f.map(function(R){var A=R.liveStateID,L=h.getStore();return L.getLiveResolverPromise(A)}))!==null&&d!==void 0?d:[];if($.length||P.length||II(M)){var I,N;h.__log({name:"suspense.fragment",data:b.data,fragment:r,isRelayHooks:!0,isPromiseCached:!1,isMissingData:b.isMissingData,pendingOperations:[].concat((0,Sx.default)((I=C==null?void 0:C.pendingOperations)!==null&&I!==void 0?I:[]),(0,Sx.default)((N=S)!==null&&N!==void 0?N:[]))});var T=[];if($.length>0&&(T=T.concat($)),P.length>0&&(T=T.concat(P)),T.length>0)throw M&&T.push(M),Promise.all(T);if(M)throw M}return this._handlePotentialSnapshotErrorsInSnapshot(k),Kp(s,k,p)},e._performClientEdgeQuery=function(r,i,s,o,a){var l=bLe(i,s),c=(0,xx.default)((0,xx.default)({},l),{},{id:a}),u=mLe(o,c,{}),d=hLe(this._environment,u),f=r.prepare(u,d);return{requestDescriptor:u.request,queryResult:f}},e._handlePotentialSnapshotErrorsInSnapshot=function(r){var i=this;Array.isArray(r)?r.forEach(function(s){mU(i._environment,s.missingRequiredFields,s.relayResolverErrors)}):mU(this._environment,r.missingRequiredFields,r.relayResolverErrors)},e.readSpec=function(r,i,s){var o={};for(var a in r)o[a]=this.read(r[a],i[a],s,a);return o},e.subscribe=function(r,i){var s=this,o=this._environment,a=r.cacheKey,l=r.snapshot;if(!l)return{dispose:function(){}};var c=this.checkMissedUpdates(r),u=c[0],d=c[1];u&&i();var f=[];if(Array.isArray(l)?(Array.isArray(d)||lm(!1),d.forEach(function(y,k){f.push(o.subscribe(y,function(b){var S=o.getStore().getEpoch();s._updatePluralSnapshot(a,d,b,k,S),i()}))})):(d!=null&&!Array.isArray(d)||lm(!1),f.push(o.subscribe(d,function(y){var k=o.getStore().getEpoch();s._cache.set(a,{kind:"done",result:Kp(a,y,k)}),i()}))),wx.ENABLE_CLIENT_EDGES){var h,p,m=(h=(p=this._clientEdgeQueryResultsCache)===null||p===void 0?void 0:p.get(a))!==null&&h!==void 0?h:void 0;if(m!=null&&m.length){var g=pU(this._environment);m.forEach(function(y){f.push(g.retain(y))})}}return{dispose:function(){f.forEach(function(k){return k.dispose()}),s._cache.delete(a)}}},e.subscribeSpec=function(r,i){var s=this,o=Object.keys(r).map(function(a){return s.subscribe(r[a],i)});return{dispose:function(){o.forEach(function(l){l.dispose()})}}},e.checkMissedUpdates=function(r){var i=this._environment,s=r.snapshot;if(!s)return[!1,null];var o=null;if(o=i.getStore().getEpoch(),r.storeEpoch===o)return[!1,r.snapshot];var a=r.cacheKey;if(Array.isArray(s)){var l=!1,c=[];return s.forEach(function(m,g){var y=i.lookup(m.selector),k=m.data,b=y.data,S=gU(k,b);S!==k&&(y=(0,xx.default)((0,xx.default)({},y),{},{data:S}),l=!0),c[g]=y}),l&&this._cache.set(a,{kind:"done",result:Kp(a,c,o)}),[l,c]}var u=i.lookup(s.selector),d=s.data,f=u.data,h=gU(d,f),p={data:h,isMissingData:u.isMissingData,missingClientEdges:u.missingClientEdges,missingLiveResolverFields:u.missingLiveResolverFields,seenRecords:u.seenRecords,selector:u.selector,missingRequiredFields:u.missingRequiredFields,relayResolverErrors:u.relayResolverErrors};return h!==d&&this._cache.set(a,{kind:"done",result:Kp(a,p,o)}),[h!==d,p]},e.checkMissedUpdatesSpec=function(r){var i=this;return Object.keys(r).some(function(s){return i.checkMissedUpdates(r[s])[0]})},e._getAndSavePromiseForFragmentRequestInFlight=function(r,i,s,o){var a=this,l=yLe(this._environment,i,s);if(l==null)return null;var c=l.promise,u=l.pendingOperations,d=c.then(function(){a._cache.delete(r)}).catch(function(f){a._cache.delete(r)});return d.displayName=c.displayName,this._cache.set(r,{kind:"pending",pendingOperations:u,promise:d,result:o}),{promise:d,pendingOperations:u}},e._updatePluralSnapshot=function(r,i,s,o,a){var l,c=this._cache.get(r);if(II(c)){kU(s.selector.node.name);return}var u=c==null||(l=c.result)===null||l===void 0?void 0:l.snapshot;if(u&&!Array.isArray(u)){kU(s.selector.node.name);return}var d=u?(0,Sx.default)(u):(0,Sx.default)(i);d[o]=s,this._cache.set(r,{kind:"done",result:Kp(r,d,a)})},n}();function kU(n){lm(!1)}function Voe(n){return new ELe(n)}var xU=kLe?new WeakMap:new Map;function CLe(n){var e=xU.get(n);if(e)return e;var t=Voe(n);return xU.set(n,t),t}var qoe={createFragmentResource:Voe,getFragmentResourceForEnvironment:CLe},MLe=qoe,TLe=MLe.getFragmentResourceForEnvironment,_Le=fo,Tz=v,ALe=Tz.useEffect,SU=Tz.useRef,ILe=Tz.useState,RLe=st,OLe=RLe.getFragmentIdentifier;function PLe(n,e,t){var r=_Le(),i=TLe(r),s=SU(!1),o=ILe(0),a=o[1],l=OLe(n,e),c=i.readWithIdentifier(n,e,l,t),u=SU(!0);function d(){u.current=!0;var p=i.checkMissedUpdates(c)[0];p&&h()}function f(){u.current=!1}function h(){s.current===!1||u.current===!1||a(function(p){return p+1})}return ALe(function(){s.current=!0;var p=i.subscribe(c,h);return function(){s.current=!1,p.dispose()}},[r,l]),{data:c.data,disableStoreUpdates:f,enableStoreUpdates:d}}var _z=PLe,DLe=$z,Koe=Ez,NLe=Koe.getQueryCacheIdentifier,FLe=Koe.getQueryResourceForEnvironment,LLe=Roe,zLe=_z,BLe=fo,__=v,jLe=__.useContext,RI=__.useEffect,VLe=__.useState,qLe=__.useRef;function KLe(n){var e=n.query,t=n.componentDisplayName,r=n.fetchObservable,i=n.fetchPolicy,s=n.fetchKey,o=n.renderPolicy,a=BLe(),l=jLe(DLe),c=FLe(a),u=VLe(0),d=u[0],f=u[1],h=LLe(),p=h.startFetch,m=h.completeFetch,g="".concat(d,"-").concat(s??""),y=NLe(a,e,i,o,g),k=l.wrapPrepareQueryResource(function(){return c.prepareWithIdentifier(y,e,r,i,o,{start:p,complete:m,error:m},l)}),b=qLe(!1);RI(function(){return function(){b.current=!0}},[]),RI(function(){if(b.current===!0){b.current=!1,f(function(C){return C+1});return}var E=c.retain(k,l);return function(){E.dispose()}},[a,y]),RI(function(){c.releaseTemporaryRetain(k)});var S=k.fragmentNode,w=k.fragmentRef,x=zLe(S,w,t),$=x.data;return $}var Uoe=KLe,ULe=nl,Az=v,HLe=Az.useMemo,WLe=Az.useRef,GLe=Az.useState;function JLe(n){var e,t=WLe(0),r=GLe(n),i=r[0],s=r[1],o=!ULe(n,i);if(o){var a;t.current=((a=t.current)!==null&&a!==void 0?a:0)+1,s(n)}var l=HLe(function(){return n},[t.current]);return[l,(e=t.current)!==null&&e!==void 0?e:0]}var QLe=JLe,wU=QLe,YLe=v,Hoe=st,XLe=Hoe.createOperationDescriptor,ZLe=Hoe.getRequest,e4e=YLe.useMemo;function t4e(n,e,t){var r=wU(e),i=r[0],s=wU(t||{}),o=s[0];return e4e(function(){return XLe(ZLe(n),i,o)},[n,i,o])}var Woe=t4e,n4e=pp,r4e=n4e.useTrackLoadQueryInRender,i4e=Uoe,s4e=Woe,o4e=fo,a4e=st,l4e=a4e.__internal.fetchQuery;function c4e(n,e,t){r4e();var r=o4e(),i=s4e(n,e,t&&t.networkCacheConfig?t.networkCacheConfig:{force:!0}),s=i4e({componentDisplayName:"useLazyLoadQuery()",fetchKey:t==null?void 0:t.fetchKey,fetchObservable:l4e(r,i),fetchPolicy:t==null?void 0:t.fetchPolicy,query:i,renderPolicy:t==null?void 0:t.UNSTABLE_renderPolicy});return s}var Goe=c4e,u4e=or.default,$U=u4e(uo),d4e=Goe;function f4e(n,e,t){var r=n;return d4e(r,e,(0,$U.default)((0,$U.default)({},t),{},{fetchPolicy:"store-only"}))}var h4e=f4e,Joe={exports:{}};(function(n){var e=zoe;function t(r,i){var s=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!s){if(Array.isArray(r)||(s=e(r))||i&&r&&typeof r.length=="number"){s&&(r=s);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,c=!1,u;return{s:function(){s=s.call(r)},n:function(){var f=s.next();return l=f.done,f},e:function(f){c=!0,u=f},f:function(){try{!l&&s.return!=null&&s.return()}finally{if(c)throw u}}}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Joe);var Qoe=Joe.exports,Yoe=v,p4e=Yoe.useEffect,m4e=Yoe.useRef;function g4e(){var n=m4e(!0);return p4e(function(){return n.current=!0,function(){n.current=!1}},[]),n}var Xk=g4e,y4e=or.default,EU=y4e(Qoe),v4e=woe,b4e=pp,k4e=b4e.useTrackLoadQueryInRender,x4e=Xk,A_=v,CU=A_.useCallback,OI=A_.useEffect,MU=A_.useRef,TU=A_.useState,S4e={kind:"NullEntryPointReference"};function w4e(n,e,t){var r,i,s,o;k4e();var a=(r=t==null||(i=t.TEST_ONLY__initialEntryPointData)===null||i===void 0?void 0:i.entryPointReference)!==null&&r!==void 0?r:S4e,l=(s=t==null||(o=t.TEST_ONLY__initialEntryPointData)===null||o===void 0?void 0:o.entryPointParams)!==null&&s!==void 0?s:null,c=x4e(),u=MU(new Set([a])),d=TU(a),f=d[0],h=d[1],p=TU(l),m=p[0],g=p[1],y=CU(function(){if(c.current){var S={kind:"NullEntryPointReference"};u.current.add(S),h(S)}},[h,c]),k=CU(function(S){if(c.current){var w=v4e(n,e,S);u.current.add(w),h(w),g(S)}},[n,e,h,c]),b=MU(!1);return OI(function(){return function(){b.current=!0}},[]),OI(function(){if(b.current===!0){b.current=!1,f.kind!=="NullEntryPointReference"&&m!=null&&k(m);return}var S=u.current;if(c.current){var w=(0,EU.default)(S),x;try{for(w.s();!(x=w.n()).done;){var $=x.value;if($===f)break;S.delete($),$.kind!=="NullEntryPointReference"&&$.dispose()}}catch(E){w.e(E)}finally{w.f()}}},[f,m,k,c]),OI(function(){return function(){var w=(0,EU.default)(u.current),x;try{for(w.s();!(x=w.n()).done;){var $=x.value;$.kind!=="NullEntryPointReference"&&$.dispose()}}catch(E){w.e(E)}finally{w.f()}}},[]),[f.kind==="NullEntryPointReference"?null:f,k,y]}var $4e=w4e,Xoe=null;function E4e(n){Xoe=n}function C4e(){return Xoe}var Iz={inject:E4e,get:C4e},M4e=v;M4e.useRef;var T4e=Iz,_4e=pp,A4e=_4e.useTrackLoadQueryInRender,I4e=_z,R4e=v;R4e.useDebugValue;var O4e=st,P4e=O4e.getFragment;function D4e(n,e){A4e();var t=P4e(n),r=I4e(t,e,"useFragment()"),i=r.data;return i}function N4e(n,e){var t=T4e.get();return t?t.useFragment(n,e):D4e(n,e)}var F4e=N4e,L4e=or.default,_U=L4e(uo),z4e=Xk,B4e=fo,I_=v,j4e=st,V4e=j4e.commitMutation,q4e=I_.useState,K4e=I_.useEffect,PI=I_.useRef,AU=I_.useCallback;function U4e(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V4e,t=B4e(),r=z4e(),i=PI(t),s=PI(n),o=PI(new Set),a=q4e(!1),l=a[0],c=a[1],u=AU(function(f){i.current===t&&s.current===n&&(o.current.delete(f),r.current&&c(o.current.size>0))},[t,r,n]);K4e(function(){(i.current!==t||s.current!==n)&&(o.current=new Set,r.current&&c(!1),i.current=t,s.current=n)},[t,r,n]);var d=AU(function(f){r.current&&c(!0);var h=e(t,(0,_U.default)((0,_U.default)({},f),{},{mutation:n,onCompleted:function(m,g){var y;u(h),(y=f.onCompleted)===null||y===void 0||y.call(f,m,g)},onError:function(m){var g;u(h),(g=f.onError)===null||g===void 0||g.call(f,m)},onUnsubscribe:function(){var m;u(h),(m=f.onUnsubscribe)===null||m===void 0||m.call(f)},onNext:function(){var m;(m=f.onNext)===null||m===void 0||m.call(f)}}));return o.current.add(h),h},[u,e,t,r,n]);return[d,l]}var H4e=U4e,W4e=fo,G4e=$e,Rz=v,Zoe=st,J4e=Zoe.__internal.getObservableForActiveRequest,Q4e=Zoe.getSelector,Y4e=Rz.useEffect,X4e=Rz.useState,Z4e=Rz.useMemo;function eze(n,e){var t=W4e(),r=Z4e(function(){var a=Q4e(n,e);return a==null?null:(a.kind!=="SingularReaderSelector"&&G4e(!1),J4e(t,a.owner))},[t,n,e]),i=X4e(r!=null),s=i[0],o=i[1];return Y4e(function(){var a;if(o(r!=null),r!=null){var l=function(){o(!1)};a=r.subscribe({complete:l,error:l})}return function(){a&&a.unsubscribe()}},[r]),s}var tze=eze,nze=or.default,Iy=nze(uo),rze=Roe,ize=Xk,sze=tze,oze=fo,nv=$e,Oz=v,aze=Oz.useCallback,lze=Oz.useEffect,IU=Oz.useState,S0=st,cze=S0.ConnectionInterface,uze=S0.__internal.fetchQuery,dze=S0.createOperationDescriptor,fze=S0.getPaginationVariables,hze=S0.getSelector,pze=S0.getValueAtPath;function mze(n){var e=n.direction,t=n.fragmentNode,r=n.fragmentRef,i=n.fragmentIdentifier,s=n.fragmentData,o=n.connectionPathInFragmentData,a=n.paginationRequest,l=n.paginationMetadata,c=n.componentDisplayName,u=n.observer,d=n.onReset,f=n.identifierField,h=oze(),p=rze(),m=p.isFetchingRef,g=p.startFetch,y=p.disposeFetch,k=p.completeFetch,b=f!=null&&s!=null&&typeof s=="object"?s[f]:null,S=ize(),w=IU(h),x=w[0],$=w[1],E=IU(i),C=E[0],M=E[1],P=sze(t,r),I=h!==x||i!==C;I&&(y(),d(),$(h),M(i));var N=gze(e,t,s,o),T=N.cursor,R=N.hasMore;lze(function(){return function(){y()}},[y]);var A=aze(function(L,F){var O=F==null?void 0:F.onComplete;if(S.current!==!0)return{dispose:function(){}};var z=hze(t,r);if(m.current===!0||s==null||P)return O&&O(null),{dispose:function(){}};z!=null&&z.kind!=="PluralReaderSelector"||nv(!1);var j=z.owner.variables,K=z.variables,Z=F==null?void 0:F.UNSTABLE_extraVariables,te=(0,Iy.default)((0,Iy.default)({},j),K),pe=fze(e,L,T,te,(0,Iy.default)({},Z),l);f!=null&&(pe.id=b);var he=dze(a,pe,{force:!0});return uze(h,he).subscribe((0,Iy.default)((0,Iy.default)({},u),{},{start:function(ke){g(ke),u.start&&u.start(ke)},complete:function(){k(),u.complete&&u.complete(),O&&O(null)},error:function(ke){k(),u.error&&u.error(ke),O&&O(ke)}})),{dispose:y}},[h,b,e,T,g,y,k,m,P,s,t.name,r,c]);return[A,R,y]}function gze(n,e,t,r){var i,s,o=cze.get(),a=o.EDGES,l=o.PAGE_INFO,c=o.HAS_NEXT_PAGE,u=o.HAS_PREV_PAGE,d=o.END_CURSOR,f=o.START_CURSOR,h=pze(t,r);if(h==null)return{cursor:null,hasMore:!1};typeof h!="object"&&nv(!1);var p=h[a],m=h[l];if(p==null||m==null)return{cursor:null,hasMore:!1};Array.isArray(p)||nv(!1),typeof m!="object"&&nv(!1);var g=n==="forward"?(i=m[d])!==null&&i!==void 0?i:null:(s=m[f])!==null&&s!==void 0?s:null;g===null||typeof g=="string"||nv(!1);var y;return n==="forward"?y=g!=null&&m[c]===!0:y=g!=null&&m[u]===!0,{cursor:g,hasMore:y}}var yze=mze,vze=or.default,RU=vze(Qoe),eae=pp,bze=eae.loadQuery,kze=eae.useTrackLoadQueryInRender,xze=Xk,Sze=fo,R_=v,OU=R_.useCallback,DI=R_.useEffect,PU=R_.useRef,DU=R_.useState,wze=st,$ze=wze.getRequest,NI={kind:"NullQueryReference"};function NU(n){if(n.kind==="PreloadableConcreteRequest")return n.params.metadata.live!==void 0;var e=$ze(n);return e.params.metadata.live!==void 0}function Eze(n,e){var t=e??NI,r=Sze();kze();var i=xze(),s=PU(new Set([t])),o=DU(function(){return t}),a=o[0],l=o[1],c=DU(function(){return t}),u=c[0],d=c[1];t!==u&&(s.current.add(t),d(t),l(t));var f=OU(function(){i.current&&(s.current.add(NI),l(NI))},[i]),h=OU(function(m,g){var y=g!=null&&g.hasOwnProperty("__environment")?{fetchPolicy:g.fetchPolicy,networkCacheConfig:g.networkCacheConfig,__nameForWarning:g.__nameForWarning}:g;if(i.current){var k,b=bze((k=g==null?void 0:g.__environment)!==null&&k!==void 0?k:r,n,m,y);s.current.add(b),l(b)}},[r,n,l,i]),p=PU(!1);return DI(function(){return function(){p.current=!0}},[]),DI(function(){if(p.current===!0){p.current=!1,a.kind!=="NullQueryReference"&&h(a.variables,{fetchPolicy:a.fetchPolicy,networkCacheConfig:a.networkCacheConfig});return}var m=s.current;if(i.current){var g=(0,RU.default)(m),y;try{for(g.s();!(y=g.n()).done;){var k=y.value;if(k===a)break;m.delete(k),k.kind!=="NullQueryReference"&&(NU(n)?k.dispose&&k.dispose():k.releaseQuery&&k.releaseQuery())}}catch(b){g.e(b)}finally{g.f()}}},[a,i,h,n]),DI(function(){return function(){var g=(0,RU.default)(s.current),y;try{for(g.s();!(y=g.n()).done;){var k=y.value;k.kind!=="NullQueryReference"&&(NU(n)?k.dispose&&k.dispose():k.releaseQuery&&k.releaseQuery())}}catch(b){g.e(b)}finally{g.f()}}},[n]),[a.kind==="NullQueryReference"?null:a,h,f]}var tae=Eze,Cze=or.default,_v=Cze(uo),Mze=qoe,Tze=Mze.getFragmentResourceForEnvironment,_ze=$z,Aze=Ez,Ize=Aze.getQueryResourceForEnvironment,Rze=_z,Oze=Xk,Pze=tae,Dze=fo,Nze=$e,Pz=v,Fze=Pz.useCallback,Lze=Pz.useContext,zze=Pz.useReducer,w0=st,Bze=w0.__internal.fetchQuery,jze=w0.createOperationDescriptor,Vze=w0.getFragmentIdentifier,qze=w0.getRefetchMetadata,Kze=w0.getSelector,Uze=w0.getValueAtPath;function Hze(n,e){switch(e.type){case"refetch":{var t;return(0,_v.default)((0,_v.default)({},n),{},{fetchPolicy:e.fetchPolicy,mirroredEnvironment:(t=e.refetchEnvironment)!==null&&t!==void 0?t:n.mirroredEnvironment,onComplete:e.onComplete,refetchEnvironment:e.refetchEnvironment,refetchQuery:e.refetchQuery,renderPolicy:e.renderPolicy})}case"reset":return{fetchPolicy:void 0,mirroredEnvironment:e.environment,mirroredFragmentIdentifier:e.fragmentIdentifier,onComplete:void 0,refetchQuery:null,renderPolicy:void 0};default:throw e.type,new Error("useRefetchableFragmentNode: Unexpected action type")}}function Wze(n,e,t){var r=Dze(),i=qze(n,t),s=i.refetchableRequest,o=i.fragmentRefPathInResponse,a=i.identifierField,l=Vze(n,e),c=zze(Hze,{fetchPolicy:void 0,mirroredEnvironment:r,mirroredFragmentIdentifier:l,onComplete:void 0,refetchEnvironment:null,refetchQuery:null,renderPolicy:void 0}),u=c[0],d=c[1],f=u.fetchPolicy,h=u.mirroredEnvironment,p=u.mirroredFragmentIdentifier,m=u.onComplete,g=u.refetchEnvironment,y=u.refetchQuery,k=u.renderPolicy,b=g??r,S=Ize(b),w=Tze(b),x=Lze(_ze),$=b!==h||l!==p,E=Pze(s),C=E[0],M=E[1],P=E[2],I=e;if($)d({type:"reset",environment:b,fragmentIdentifier:l}),P();else if(y!=null&&C!=null){var N=function(te){m&&m(te??null)},T=C.source!=null?C.source:Bze(b,y),R=x.wrapPrepareQueryResource(function(){return S.prepare(y,T,f,k,{error:N,complete:function(){N()}},C.fetchKey,x)}),A=w.read(R.fragmentNode,R.fragmentRef,t).data;A==null&&Nze(!1);var L=Uze(A,o);I=L}var F=Rze(n,I,t),O=F.data,z=F.disableStoreUpdates,j=F.enableStoreUpdates,K=Gze(t,d,P,O,l,n,o,a,M,e,s);return{fragmentData:O,fragmentRef:I,refetch:K,disableStoreUpdates:z,enableStoreUpdates:j}}function Gze(n,e,t,r,i,s,o,a,l,c,u){var d=Oze(),f=a!=null&&r!=null&&typeof r=="object"?r[a]:null;return Fze(function(h,p){if(d.current!==!0)return{dispose:function(){}};var m=p==null?void 0:p.__environment,g=p==null?void 0:p.fetchPolicy,y=p==null?void 0:p.UNSTABLE_renderPolicy,k=p==null?void 0:p.onComplete,b=Kze(s,c),S,w;if(b==null)S={},w={};else if(b.kind==="PluralReaderSelector"){var x,$,E,C;S=(x=($=b.selectors[0])===null||$===void 0?void 0:$.owner.variables)!==null&&x!==void 0?x:{},w=(E=(C=b.selectors[0])===null||C===void 0?void 0:C.variables)!==null&&E!==void 0?E:{}}else S=b.owner.variables,w=b.variables;var M=(0,_v.default)((0,_v.default)((0,_v.default)({},S),w),h);a!=null&&!h.hasOwnProperty("id")&&(M.id=f);var P=jze(u,M,{force:!0});return l(P.request.variables,{fetchPolicy:g,__environment:m,__nameForWarning:"refetch"}),e({type:"refetch",fetchPolicy:g,onComplete:k,refetchEnvironment:m,refetchQuery:P,renderPolicy:y}),{dispose:t}},[i,e,t,f,l])}var nae=Wze,Jze=or.default,J$=Jze(uo),Qze=Iz,Yze=yze,Xze=nae,Dz=v,Zze=Dz.useCallback;Dz.useDebugValue;var e8e=Dz.useState,Nz=st,t8e=Nz.getFragment,n8e=Nz.getFragmentIdentifier,r8e=Nz.getPaginationMetadata;function i8e(n,e){var t=t8e(n),r="usePaginationFragment()",i=r8e(t,r),s=i.connectionPathInFragmentData,o=i.paginationRequest,a=i.paginationMetadata,l=i.identifierField,c=Xze(t,e,r),u=c.fragmentData,d=c.fragmentRef,f=c.refetch,h=n8e(t,d),p=FU({componentDisplayName:r,connectionPathInFragmentData:s,direction:"backward",fragmentData:u,fragmentIdentifier:h,fragmentNode:t,fragmentRef:d,identifierField:l,paginationMetadata:a,paginationRequest:o}),m=p[0],g=p[1],y=p[2],k=p[3],b=FU({componentDisplayName:r,connectionPathInFragmentData:s,direction:"forward",fragmentData:u,fragmentIdentifier:h,fragmentNode:t,fragmentRef:d,identifierField:l,paginationMetadata:a,paginationRequest:o}),S=b[0],w=b[1],x=b[2],$=b[3],E=Zze(function(C,M){return $(),k(),f(C,(0,J$.default)((0,J$.default)({},M),{},{__environment:void 0}))},[$,k,f]);return{data:u,loadNext:S,loadPrevious:m,hasNext:w,hasPrevious:g,isLoadingNext:x,isLoadingPrevious:y,refetch:E}}function FU(n){var e=e8e(!1),t=e[0],r=e[1],i={start:function(){return r(!0)},complete:function(){return r(!1)},error:function(){return r(!1)}},s=function(){return r(!1)},o=Yze((0,J$.default)((0,J$.default)({},n),{},{observer:i,onReset:s})),a=o[0],l=o[1],c=o[2];return[a,l,t,c]}function s8e(n,e){var t=Qze.get();return t?t.usePaginationFragment(n,e):i8e(n,e)}var o8e=s8e,a8e=pp,l8e=a8e.useTrackLoadQueryInRender,c8e=Uoe,u8e=Woe,d8e=fo,f8e=$e,h8e=v;h8e.useDebugValue;var p8e=st,rae=p8e.__internal,m8e=rae.fetchQueryDeduped,g8e=rae.fetchQuery;function y8e(n,e,t){l8e();var r=d8e(),i=e.fetchKey,s=e.fetchPolicy,o=e.source,a=e.variables,l=e.networkCacheConfig,c=u8e(n,a,l),u;if(e.kind==="PreloadedQuery_DEPRECATED")c.request.node.params.name!==e.name&&f8e(!1),u={componentDisplayName:"usePreloadedQuery()",fetchKey:i,fetchObservable:m8e(r,c.request.identifier,function(){return r===e.environment&&o!=null?r.executeWithSource({operation:c,source:o}):r.execute({operation:c})}),fetchPolicy:s,query:c,renderPolicy:t==null?void 0:t.UNSTABLE_renderPolicy};else{var d=g8e(r,c),f;o!=null&&r===e.environment?f=o.ifEmpty(d):(e.environment,f=d),u={componentDisplayName:"usePreloadedQuery()",fetchObservable:f,fetchKey:i,fetchPolicy:s,query:c,renderPolicy:t==null?void 0:t.UNSTABLE_renderPolicy}}var h=c8e(u);return h}var v8e=y8e,b8e=Iz,k8e=nae,x8e=v;x8e.useDebugValue;var S8e=st,w8e=S8e.getFragment;function $8e(n,e){var t=w8e(n),r=k8e(t,e,"useRefetchableFragment()"),i=r.fragmentData,s=r.refetch;return[i,s]}function E8e(n,e){var t=b8e.get();return t?t.useRefetchableFragment(n,e):$8e(n,e)}var C8e=E8e,M8e=fo,iae=v,T8e=iae.useEffect,_8e=iae.useRef;function A8e(n,e){var t=M8e(),r=_8e(null),i=Array.from(n).sort().join("");return T8e(function(){var s=t.getStore(),o=s.lookupInvalidationState(n),a=s.subscribeToInvalidationState(o,e);return r.current=a,function(){return a.dispose()}},[i,e,t]),{dispose:function(){r.current!=null&&r.current.dispose()}}}var I8e=A8e,R8e=fo,O8e=v,P8e=O8e.useEffect,D8e=st,N8e=D8e.requestSubscription;function F8e(n,e){var t=e??N8e,r=R8e();P8e(function(){var i=t(r,n),s=i.dispose;return s},[r,n,t])}var L8e=F8e,z8e=fp,B8e=XFe,j8e=c5e,V8e=z5e,q8e=Q5e,K8e=p6e,U8e=T6e,H8e=woe,W8e=pp,G8e=W8e.loadQuery,J8e=B6e,Q8e=h4e,Y8e=$4e,X8e=F4e,Z8e=Goe,eBe=H4e,tBe=o8e,nBe=v8e,rBe=tae,iBe=C8e,sBe=fo,oBe=I8e,aBe=L8e,ta=st,lBe={ConnectionHandler:ta.ConnectionHandler,QueryRenderer:q8e,LocalQueryRenderer:j8e,MutationTypes:ta.MutationTypes,RangeOperations:ta.RangeOperations,ReactRelayContext:z8e,applyOptimisticMutation:ta.applyOptimisticMutation,commitLocalUpdate:ta.commitLocalUpdate,commitMutation:ta.commitMutation,createFragmentContainer:B8e.createContainer,createPaginationContainer:V8e.createContainer,createRefetchContainer:K8e.createContainer,fetchQuery_DEPRECATED:ta.fetchQuery_DEPRECATED,graphql:ta.graphql,readInlineData:ta.readInlineData,requestSubscription:ta.requestSubscription,EntryPointContainer:U8e,RelayEnvironmentProvider:J8e,fetchQuery:ta.fetchQuery,loadQuery:G8e,loadEntryPoint:H8e,useClientQuery:Q8e,useFragment:X8e,useLazyLoadQuery:Z8e,useEntryPointLoader:Y8e,useQueryLoader:rBe,useMutation:eBe,usePaginationFragment:tBe,usePreloadedQuery:nBe,useRefetchableFragment:iBe,useRelayEnvironment:sBe,useSubscribeToInvalidationState:oBe,useSubscription:aBe},ot=lBe;let cBe={data:""},uBe=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||cBe,dBe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fBe=/\/\*[^]*?\*\/|  +/g,LU=/\n+/g,qu=(n,e)=>{let t="",r="",i="";for(let s in n){let o=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":r+=s[1]=="f"?qu(o,s):s+"{"+qu(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=qu(o,e?e.replace(/([^,])+/g,a=>s.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=qu.p?qu.p(s,o):s+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+r},xc={},sae=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+sae(n[t]);return e}return n},hBe=(n,e,t,r,i)=>{let s=sae(n),o=xc[s]||(xc[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!xc[o]){let l=s!==n?n:(c=>{let u,d,f=[{}];for(;u=dBe.exec(c.replace(fBe,""));)u[4]?f.shift():u[3]?(d=u[3].replace(LU," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][u[1]]=u[2].replace(LU," ").trim();return f[0]})(n);xc[o]=qu(i?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&xc.g?xc.g:null;return t&&(xc.g=xc[o]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(xc[o],e,r,a),o},pBe=(n,e,t)=>n.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":qu(a,""):a===!1?"":a}return r+i+(o??"")},"");function O_(n){let e=this||{},t=n.call?n(e.p):n;return hBe(t.unshift?t.raw?pBe(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,uBe(e.target),e.g,e.o,e.k)}let oae,GN,JN;O_.bind({g:1});let Hc=O_.bind({k:1});function mBe(n,e,t,r){qu.p=e,oae=n,GN=t,JN=r}function Bd(n,e){let t=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;t.p=Object.assign({theme:GN&&GN()},a),t.o=/ *go\d+/.test(l),a.className=O_.apply(t,r)+(l?" "+l:""),e&&(a.ref=o);let c=n;return n[0]&&(c=a.as||n,delete a.as),JN&&c[0]&&JN(a),oae(c,a)}return e?e(i):i}}var gBe=n=>typeof n=="function",Q$=(n,e)=>gBe(n)?n(e):n,yBe=(()=>{let n=0;return()=>(++n).toString()})(),aae=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),vBe=20,Iw=new Map,bBe=1e3,zU=n=>{if(Iw.has(n))return;let e=setTimeout(()=>{Iw.delete(n),mp({type:4,toastId:n})},bBe);Iw.set(n,e)},kBe=n=>{let e=Iw.get(n);e&&clearTimeout(e)},QN=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,vBe)};case 1:return e.toast.id&&kBe(e.toast.id),{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return n.toasts.find(s=>s.id===t.id)?QN(n,{type:1,toast:t}):QN(n,{type:0,toast:t});case 3:let{toastId:r}=e;return r?zU(r):n.toasts.forEach(s=>{zU(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Rw=[],Ow={toasts:[],pausedAt:void 0},mp=n=>{Ow=QN(Ow,n),Rw.forEach(e=>{e(Ow)})},xBe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},SBe=(n={})=>{let[e,t]=v.useState(Ow);v.useEffect(()=>(Rw.push(t),()=>{let i=Rw.indexOf(t);i>-1&&Rw.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o;return{...n,...n[i.type],...i,duration:i.duration||((s=n[i.type])==null?void 0:s.duration)||(n==null?void 0:n.duration)||xBe[i.type],style:{...n.style,...(o=n[i.type])==null?void 0:o.style,...i.style}}});return{...e,toasts:r}},wBe=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||yBe()}),Zk=n=>(e,t)=>{let r=wBe(e,n,t);return mp({type:2,toast:r}),r.id},Ar=(n,e)=>Zk("blank")(n,e);Ar.error=Zk("error");Ar.success=Zk("success");Ar.loading=Zk("loading");Ar.custom=Zk("custom");Ar.dismiss=n=>{mp({type:3,toastId:n})};Ar.remove=n=>mp({type:4,toastId:n});Ar.promise=(n,e,t)=>{let r=Ar.loading(e.loading,{...t,...t==null?void 0:t.loading});return n.then(i=>(Ar.success(Q$(e.success,i),{id:r,...t,...t==null?void 0:t.success}),i)).catch(i=>{Ar.error(Q$(e.error,i),{id:r,...t,...t==null?void 0:t.error})}),n};var $Be=(n,e)=>{mp({type:1,toast:{id:n,height:e}})},EBe=()=>{mp({type:5,time:Date.now()})},CBe=n=>{let{toasts:e,pausedAt:t}=SBe(n);v.useEffect(()=>{if(t)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(l<0){a.visible&&Ar.dismiss(a.id);return}return setTimeout(()=>Ar.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,t]);let r=v.useCallback(()=>{t&&mp({type:6,time:Date.now()})},[t]),i=v.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},u=e.filter(h=>(h.position||c)===(s.position||c)&&h.height),d=u.findIndex(h=>h.id===s.id),f=u.filter((h,p)=>p<d&&h.visible).length;return u.filter(h=>h.visible).slice(...a?[f+1]:[0,f]).reduce((h,p)=>h+(p.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:$Be,startPause:EBe,endPause:r,calculateOffset:i}}},MBe=Hc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,TBe=Hc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_Be=Hc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ABe=Bd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${MBe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${TBe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_Be} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,IBe=Hc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,RBe=Bd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${IBe} 1s linear infinite;
`,OBe=Hc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,PBe=Hc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,DBe=Bd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${OBe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${PBe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,NBe=Bd("div")`
  position: absolute;
`,FBe=Bd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,LBe=Hc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zBe=Bd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${LBe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,BBe=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?v.createElement(zBe,null,e):e:t==="blank"?null:v.createElement(FBe,null,v.createElement(RBe,{...r}),t!=="loading"&&v.createElement(NBe,null,t==="error"?v.createElement(ABe,{...r}):v.createElement(DBe,{...r})))},jBe=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,VBe=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,qBe="0%{opacity:0;} 100%{opacity:1;}",KBe="0%{opacity:1;} 100%{opacity:0;}",UBe=Bd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,HBe=Bd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,WBe=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=aae()?[qBe,KBe]:[jBe(t),VBe(t)];return{animation:e?`${Hc(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Hc(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},GBe=v.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?WBe(n.position||e||"top-center",n.visible):{opacity:0},s=v.createElement(BBe,{toast:n}),o=v.createElement(HBe,{...n.ariaProps},Q$(n.message,n));return v.createElement(UBe,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:s,message:o}):v.createElement(v.Fragment,null,s,o))});mBe(v.createElement);var JBe=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let s=v.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(n,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return v.createElement("div",{ref:s,className:e,style:t},i)},QBe=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:aae()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},YBe=O_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$x=16,XBe=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:l}=CBe(t);return v.createElement("div",{style:{position:"fixed",zIndex:9999,top:$x,left:$x,right:$x,bottom:$x,pointerEvents:"none",...s},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let u=c.position||e,d=l.calculateOffset(c,{reverseOrder:n,gutter:r,defaultPosition:e}),f=QBe(u,d);return v.createElement(JBe,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?YBe:"",style:f},c.type==="custom"?Q$(c.message,c):i?i(c):v.createElement(GBe,{toast:c,position:u}))}))};function ZBe(n,e,t,r){const[i,s,o]=ot.useQueryLoader(n,r);return v.useEffect(()=>(s(e??{},{fetchPolicy:"store-and-network",...t}),()=>{o()}),[]),{queryRef:i,loadQuery:s}}const BU=n=>e=>{console.log("mutation.onError error:",e),n.onError?n.onError(e):Ar.error(e.message)},e7e=n=>{const e=new Set(n.map(t=>{var r;return((r=t.extensions)==null?void 0:r.userFriendlyMessage)??t.message}));return Array.from(e).join(`
`)};function Ga(n){const[e,...t]=ot.useMutation(n);return[i=>{e({...i,onError:BU(i),onCompleted:(s,o)=>{var a;if(o){console.log("useMutation.onCompleted errors:",o),BU(i)(new Error(e7e(o),{cause:o}));return}(a=i.onCompleted)==null||a.call(i,s,null)}})},...t]}function Y$(n){const[e,...t]=Ga(n);return[i=>new Promise((s,o)=>{e({...i,onCompleted:(a,l)=>{var c;if((c=i.onCompleted)==null||c.call(i,a,l),l){console.log("useMutation.onCompleted error:",l),o(l);return}s(a)},onError:a=>{var l;console.log("useMutation.onError error:",a),(l=i.onError)==null||l.call(i,a),o(a)}})}),...t]}const $0=ot.fetchQuery,t7e=ot.commitMutation,Fz=async(n,e)=>new Promise((t,r)=>{t7e(n,{...e,onCompleted:(i,s)=>{var o;if((o=e.onCompleted)==null||o.call(e,i,s),s){console.log("commitMutation.onCompleted errors:",s),r(s);return}t(i)},onError:i=>{var s;console.log("commitMutation.onError error:",i),(s=e.onError)==null||s.call(e,i),r(i)}})}),D_n=(n,e={},t)=>{const r=v.useMemo(()=>({...t,subscription:n,variables:e}),[JSON.stringify({variables:e,$config:t})]);ot.useSubscription(r)},Lz=(n,e={},t)=>{const[r,i]=v.useState(null),s=v.useMemo(()=>({...t,subscription:n,variables:e,onNext:o=>{var a;i(o),(a=t==null?void 0:t.onNext)==null||a.call(t,o)}}),[JSON.stringify({variables:e,$config:t})]);return ot.useSubscription(s),[r]};function n7e(n){return typeof n=="object"&&n!==null}const r7e="x-graphql-event-stream-token";function i7e(n){if(n=n,n!=="next"&&n!=="complete")throw new Error(`Invalid stream event "${n}"`);return n}function s7e(n,e){if(e)try{e=JSON.parse(e)}catch{throw new Error("Invalid stream data")}if(n==="next"&&!e)throw new Error('Stream data must be an object for "next" events');return e||null}var Pf;(function(n){n[n.NewLine=10]="NewLine",n[n.CchunkiageReturn=13]="CchunkiageReturn",n[n.Space=32]="Space",n[n.Colon=58]="Colon"})(Pf||(Pf={}));function o7e(){let n,e,t,r=!1,i={event:"",data:""},s=[];const o=new TextDecoder;return function(l){if(n===void 0)n=l,e=0,t=-1;else{const d=new Uint8Array(n.length+l.length);d.set(n),d.set(l,n.length),n=d}const c=n.length;let u=0;for(;e<c;){r&&(n[e]===Pf.NewLine&&(u=++e),r=!1);let d=-1;for(;e<c&&d===-1;++e)switch(n[e]){case Pf.Colon:t===-1&&(t=e-u);break;case Pf.CchunkiageReturn:r=!0;case Pf.NewLine:d=e;break}if(d===-1)break;if(u===d){if(i.event||i.data){if(!i.event)throw new Error("Missing message event");const f=i7e(i.event),h=s7e(f,i.data);s.push({event:f,data:h}),i={event:"",data:""}}}else if(t>0){const f=n.subarray(u,d),h=o.decode(f.subarray(0,t)),p=t+(f[t+1]===Pf.Space?2:1),m=o.decode(f.subarray(p));switch(h){case"event":i.event=m;break;case"data":i.data=i.data?i.data+`
`+m:m;break}}u=e,t=-1}if(u===c){n=void 0;const d=[...s];return s=[],d}else u!==0&&(n=n.subarray(u),e-=u)}}function a7e(n){const{singleConnection:e=!1,lazy:t=!0,lazyCloseTimeout:r=0,onNonLazyError:i=console.error,generateID:s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,E=>{const C=Math.random()*16|0;return(E=="x"?C:C&3|8).toString(16)})},retryAttempts:o=5,retry:a=async function(E){let C=1e3;for(let M=0;M<E;M++)C*=2;await new Promise(M=>setTimeout(M,C+Math.floor(Math.random()*(3e3-300)+300)))},credentials:l="same-origin",referrer:c,referrerPolicy:u,onMessage:d,on:f}=n,h=n.fetchFn||fetch,p=n.abortControllerImpl||AbortController,m=(()=>{let $=!1;const E=[];return{get disposed(){return $},onDispose(C){return $?(setTimeout(()=>C(),0),()=>{}):(E.push(C),()=>{E.splice(E.indexOf(C),1)})},dispose(){if(!$){$=!0;for(const C of[...E])C()}}}})();let g,y,k=0,b=null,S=0;async function w(){try{if(m.disposed)throw new Error("Client has been disposed");return await(y??(y=(async()=>{var $,E,C;if(b){if(await a(S),g.signal.aborted)throw new Error("Connection aborted by the client");S++}($=f==null?void 0:f.connecting)===null||$===void 0||$.call(f,!!b),g=new p;const M=m.onDispose(()=>g.abort());g.signal.addEventListener("abort",()=>{M(),y=void 0});const P=typeof n.url=="function"?await n.url():n.url;if(g.signal.aborted)throw new Error("Connection aborted by the client");const I=typeof n.headers=="function"?await n.headers():(E=n.headers)!==null&&E!==void 0?E:{};if(g.signal.aborted)throw new Error("Connection aborted by the client");let N;try{N=await h(P,{signal:g.signal,method:"PUT",credentials:l,referrer:c,referrerPolicy:u,headers:I})}catch(A){throw new bo(A)}if(N.status!==201)throw new bo(N);const T=await N.text();I[r7e]=T;const R=await jU({signal:g.signal,headers:I,credentials:l,referrer:c,referrerPolicy:u,url:P,fetchFn:h,onMessage:A=>{var L;(L=f==null?void 0:f.message)===null||L===void 0||L.call(f,A),d==null||d(A)}});return(C=f==null?void 0:f.connected)===null||C===void 0||C.call(f,!!b),R.waitForThrow().catch(()=>y=void 0),R})()))}catch($){throw y=void 0,$}}e&&!t&&(async()=>{for(k++;;)try{const{waitForThrow:$}=await w();await $()}catch($){if(m.disposed)return;if(!($ instanceof bo)||(y=void 0,!o||S>=o))return i==null?void 0:i($);b=$}})();function x($,E,C){if(!e){const I=new p,N=m.onDispose(()=>{N(),I.abort()});return(async()=>{var T,R,A,L,F;let O=null,z=0;for(;;)try{if(O){if(await a(z),I.signal.aborted)throw new Error("Connection aborted by the client");z++}(T=f==null?void 0:f.connecting)===null||T===void 0||T.call(f,!!O),(R=C==null?void 0:C.connecting)===null||R===void 0||R.call(C,!!O);const j=typeof n.url=="function"?await n.url():n.url;if(I.signal.aborted)throw new Error("Connection aborted by the client");const K=typeof n.headers=="function"?await n.headers():(A=n.headers)!==null&&A!==void 0?A:{};if(I.signal.aborted)throw new Error("Connection aborted by the client");const{getResults:Z}=await jU({signal:I.signal,headers:{...K,"content-type":"application/json; charset=utf-8"},credentials:l,referrer:c,referrerPolicy:u,url:j,body:JSON.stringify($),fetchFn:h,onMessage:te=>{var pe,he;(pe=f==null?void 0:f.message)===null||pe===void 0||pe.call(f,te),(he=C==null?void 0:C.message)===null||he===void 0||he.call(C,te),d==null||d(te)}});(L=f==null?void 0:f.connected)===null||L===void 0||L.call(f,!!O),(F=C==null?void 0:C.connected)===null||F===void 0||F.call(C,!!O);for await(const te of Z())O=null,z=0,E.next(te);return I.abort()}catch(j){if(I.signal.aborted)return;if(!(j instanceof bo)||!o||z>=o)throw j;O=j}})().then(()=>E.complete()).catch(T=>E.error(T)),()=>I.abort()}k++;const M=new p,P=m.onDispose(()=>{P(),M.abort()});return(async()=>{const I=s();$={...$,extensions:{...$.extensions,operationId:I}};let N=null;for(;;){N=null;try{const{url:T,headers:R,getResults:A}=await w();let L;try{L=await h(T,{signal:M.signal,method:"POST",credentials:l,referrer:c,referrerPolicy:u,headers:{...R,"content-type":"application/json; charset=utf-8"},body:JSON.stringify($)})}catch(F){throw new bo(F)}if(L.status!==202)throw new bo(L);N=async()=>{let F;try{const O=new p,z=m.onDispose(()=>{z(),O.abort()});F=await h(T+"?operationId="+I,{signal:O.signal,method:"DELETE",credentials:l,referrer:c,referrerPolicy:u,headers:R})}catch(O){throw new bo(O)}if(F.status!==200)throw new bo(F)};for await(const F of A({signal:M.signal,operationId:I}))b=null,S=0,E.next(F);return N=null,M.abort()}catch(T){if(M.signal.aborted)return await(N==null?void 0:N());if(!(T instanceof bo)||(t&&(y=void 0),!o||S>=o))throw M.abort(),T;b=T}finally{M.signal.aborted&&--k===0&&(isFinite(r)&&r>0?setTimeout(()=>{k||g.abort()},r):g.abort())}}})().then(()=>E.complete()).catch(I=>E.error(I)),()=>M.abort()}return{subscribe:x,iterate($,E){const C=[],M={done:!1,error:null,resolve:()=>{}},P=x($,{next(N){C.push(N),M.resolve()},error(N){M.done=!0,M.error=N,M.resolve()},complete(){M.done=!0,M.resolve()}},E),I=async function*(){for(;;){for(C.length||await new Promise(T=>M.resolve=T);C.length;)yield C.shift();if(M.error)throw M.error;if(M.done)return}}();return I.throw=async N=>(M.done||(M.done=!0,M.error=N,M.resolve()),{done:!0,value:void 0}),I.return=async()=>(P(),{done:!0,value:void 0}),I},dispose(){m.dispose()}}}class bo extends Error{constructor(e){let t,r;l7e(e)?(r=e,t="Server responded with "+e.status+": "+e.statusText):e instanceof Error?t=e.message:t=String(e),super(t),this.name=this.constructor.name,this.response=r}}function l7e(n){return n7e(n)&&typeof n.ok=="boolean"&&typeof n.status=="number"&&typeof n.statusText=="string"}async function jU(n){const{signal:e,url:t,credentials:r,headers:i,body:s,referrer:o,referrerPolicy:a,fetchFn:l,onMessage:c}=n,u={},d={};let f;try{f=await l(t,{signal:e,method:s?"POST":"GET",credentials:r,referrer:o,referrerPolicy:a,headers:{...i,accept:"text/event-stream"},body:s})}catch(m){throw new bo(m)}if(!f.ok)throw new bo(f);if(!f.body)throw new Error("Missing response body");let h=null,p;return(async()=>{var m;try{const g=o7e();for await(const y of c7e(f.body)){if(typeof y=="string")throw h=new Error(`Unexpected string chunk "${y}"`);let k;try{k=g(y)}catch(b){throw h=b}if(k)for(const b of k){try{c==null||c(b)}catch(w){throw h=w}const S=b.data&&"id"in b.data?b.data.id:"";switch(S in d||(d[S]=[]),b.event){case"next":S?d[S].push(b.data.payload):d[S].push(b.data);break;case"complete":d[S].push("complete");break;default:throw h=new Error(`Unexpected message event "${b.event}"`)}(m=u[S])===null||m===void 0||m.proceed()}}if(Object.keys(u).length)throw new Error("Connection closed while having active streams")}catch(g){!h&&Object.keys(u).length?h=new bo(g):h=g,p==null||p(h)}finally{Object.values(u).forEach(({proceed:g})=>g())}})(),{url:t,headers:i,waitForThrow:()=>new Promise((m,g)=>{if(h)return g(h);p=g}),async*getResults(m){var g;const{signal:y,operationId:k=""}=m??{};try{for(;;){for(;!((g=d[k])===null||g===void 0)&&g.length;){const b=d[k].shift();if(b==="complete")return;yield b}if(h)throw h;if(y!=null&&y.aborted)throw new Error("Getting results aborted by the client");await new Promise(b=>{const S=()=>{y==null||y.removeEventListener("abort",S),delete u[k],b()};y==null||y.addEventListener("abort",S),u[k]={proceed:S}})}}finally{delete d[k]}}}}function c7e(n){return typeof Object(n)[Symbol.asyncIterator]=="function"?(n=n,n[Symbol.asyncIterator]()):async function*(){const e=n.getReader();let t;do t=await e.read(),t.value!==void 0&&(yield t.value);while(!t.done)}()}const P_="token",u7e=a7e({url:"/graphql",headers:()=>{const n=window.localStorage.getItem(P_);return{...n?{Authorization:`Bearer ${n}`}:{}}}});function d7e(n,e){return st.Observable.onUnhandledError(console.log),st.Observable.create(t=>n.text?u7e.subscribe({operationName:n.name,query:n.text,variables:e},{...t,next:r=>{if(r.errors){const i=new Set(r.errors.map(s=>{var o;return((o=s.extensions)==null?void 0:o.userFriendlyMessage)??s.message}));t.error(new Error(Array.from(i).join(`
`),{cause:r.errors}))}t.next(r)}}):t.error(new Error("Operation text cannot be empty")))}const f7e=async(n,e)=>{const t=window.localStorage.getItem(P_),r=await fetch("/graphql",{method:"POST",headers:{"content-type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({operationName:n.name,query:n.text,variables:e})}).then(i=>i.json());if(r.errors){const i=new Set(r.errors.map(s=>{var o;return((o=s.extensions)==null?void 0:o.userFriendlyMessage)??s.message}));throw new Error(Array.from(i).join(`
`),{cause:r.errors})}return r},Ja=new st.Environment({network:st.Network.create(f7e,d7e),store:new st.Store(new st.RecordSource)}),h7e=n=>_(ot.RelayEnvironmentProvider,{environment:Ja,children:n.children});function ik(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Av(n){const e=n.length;let t=-1,r,i="";const s=n.charCodeAt(0);for(;++t<e;){if(r=n.charCodeAt(t),r===0){i+="";continue}if(r===44){i+="\\,";continue}if(r>=1&&r<=31||r===127||t===0&&r>=48&&r<=57||t===1&&r>=48&&r<=57&&s===45){i+=`\\${r.toString(16)} `;continue}if(t===0&&e===1&&r===45){i+=`\\${n.charAt(t)}`;continue}if(r>=128||r===45||r===95||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122){i+=n.charAt(t);continue}i+=`\\${n.charAt(t)}`}return i}const FI=Av;function Er(n=[]){return Array.isArray(n)?n:[n]}function Iv(n){return Array.from(new Set(n))}function _n(n){return typeof n=="string"}function Rv(n){return _n(n)?n:(Array.isArray(n)?n:Object.entries(n)).filter(e=>e[1]!=null)}function p7e(n){return Array.isArray(n)?n.find(e=>!Array.isArray(e)||Array.isArray(e[0]))?n.map(e=>Rv(e)):[n]:[Rv(n)]}function m7e(n){return n.filter(([e,t],r)=>{if(e.startsWith("$$"))return!1;for(let i=r-1;i>=0;i--)if(n[i][0]===e&&n[i][1]===t)return!1;return!0})}function Pw(n){return n==null?"":m7e(n).map(([e,t])=>t!=null?`${e}:${t};`:void 0).filter(Boolean).join("")}function Ex(n){return n&&typeof n=="object"&&!Array.isArray(n)}function zz(n,e,t=!1){const r=n,i=e;if(Array.isArray(i))return t&&Array.isArray(i)?[...r,...i]:[...i];const s={...r};return Ex(r)&&Ex(i)&&Object.keys(i).forEach(o=>{Ex(r[o])&&Ex(i[o])||Array.isArray(r[o])&&Array.isArray(i[o])?s[o]=zz(r[o],i[o],t):Object.assign(s,{[o]:i[o]})}),s}function Dw(n){let e,t,r;if(Array.isArray(n)){for(t=Array(e=n.length);e--;)t[e]=(r=n[e])&&typeof r=="object"?Dw(r):r;return t}if(Object.prototype.toString.call(n)==="[object Object]"){t={};for(e in n)e==="__proto__"?Object.defineProperty(t,e,{value:Dw(n[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=(r=n[e])&&typeof r=="object"?Dw(r):r;return t}return n}function g7e(n){return _n(n[0])}function y7e(n){return _n(n[0])}const v7e=/[\w\u00A0-\uFFFF-_:%-?]/,VU="$$shortcut-no-merge";function b7e(n=""){return v7e.test(n)}function k7e(n){return typeof n=="function"?{match:n}:n}function qU(n){return n.length===3}function x7e(n){return n!=null}function S7e(){}class w7e{constructor(){this._map=new Map}get(e,t){const r=this._map.get(e);if(r)return r.get(t)}getFallback(e,t,r){let i=this._map.get(e);return i||(i=new Map,this._map.set(e,i)),i.has(t)||i.set(t,r),i.get(t)}set(e,t,r){let i=this._map.get(e);return i||(i=new Map,this._map.set(e,i)),i.set(t,r),this}has(e,t){var r;return(r=this._map.get(e))==null?void 0:r.has(t)}delete(e,t){var r;return((r=this._map.get(e))==null?void 0:r.delete(t))||!1}deleteTop(e){return this._map.delete(e)}map(e){return Array.from(this._map.entries()).flatMap(([t,r])=>Array.from(r.entries()).map(([i,s])=>e(s,t,i)))}}const Cx={};function $7e(n=["-",":"]){const e=n.join("|");return Cx[e]||(Cx[e]=new RegExp(`((?:[!@<~\\w+:_/-]|\\[&?>?:?\\S*\\])+?)(${e})\\(((?:[~!<>\\w\\s:/\\\\,%#.$?-]|\\[.*?\\])+?)\\)(?!\\s*?=>)`,"gm")),Cx[e].lastIndex=0,Cx[e]}function E7e(n,e=["-",":"],t=5){const r=$7e(e);let i=!1,s=n.toString();const o=new Set;do{const a=s;s=s.replace(r,(l,c,u,d)=>e.includes(u)?(o.add(c+u),d.split(/\s/g).filter(Boolean).map(f=>f==="~"?c:f.replace(/^(!?)(.*)/,`$1${c}${u}$2`)).join(" ")):l),i=s!==a,t-=1}while(i&&t);return{prefixes:Array.from(o),expanded:s,hasChanged:i}}function C7e(n,e=["-",":"],t=5){const{expanded:r}=E7e(n.toString(),e,t);return typeof n=="string"?r:n.length()?n.overwrite(0,n.original.length,r):n}const KU=new Set;function e1(n){KU.has(n)||(console.warn("[unocss]",n),KU.add(n))}function M7e(n){const e=function(r){var s;const i=((s=this.__options)==null?void 0:s.sequence)||[];this.__options.sequence=[];for(const o of i){const a=n[o](r);if(a!=null)return a}};function t(r,i){return r.__options||(r.__options={sequence:[]}),r.__options.sequence.push(i),r}for(const r of Object.keys(n))Object.defineProperty(e,r,{enumerable:!0,get(){return t(this,r)}});return e}const lae=/[\\:]?[\s'"`;{}]+/g;function T7e(n){return[...new Set(n.split(lae))]}const _7e={name:"@unocss/core/extractor-split",order:0,extract({code:n}){return T7e(n)}};function A7e(){return{events:{},emit(n,...e){(this.events[n]||[]).forEach(t=>t(...e))},on(n,e){return(this.events[n]=this.events[n]||[]).push(e),()=>this.events[n]=(this.events[n]||[]).filter(t=>t!==e)}}}const YN="default",XN="preflights",I7e="shortcuts",R7e={[XN]:-100,[I7e]:-10,[YN]:0};function cae(n){return Er(n).flatMap(e=>Array.isArray(e)?[e]:Object.entries(e))}const UU="_uno_resolved";function O7e(n){var t;if(UU in n)return n;n={...n},Object.defineProperty(n,UU,{value:!0,enumerable:!1});const e=n.shortcuts?cae(n.shortcuts):void 0;if(n.shortcuts=e,n.prefix||n.layer){const r=i=>{i[2]||(i[2]={});const s=i[2];s.prefix==null&&n.prefix&&(s.prefix=Er(n.prefix)),s.layer==null&&n.layer&&(s.layer=n.layer)};e==null||e.forEach(r),(t=n.rules)==null||t.forEach(r)}return n}function uae(n){const e=O7e(n);if(!e.presets)return[e];const t=(e.presets||[]).flatMap(Er).flatMap(uae);return[e,...t]}function HU(n={},e={}){var S,w;const t=Object.assign({},e,n),r=Iv((t.presets||[]).flatMap(Er).flatMap(uae)),i=[...r.filter(x=>x.enforce==="pre"),...r.filter(x=>!x.enforce),...r.filter(x=>x.enforce==="post")],s=[...i,t],o=[...s].reverse(),a=Object.assign({},R7e,...s.map(x=>x.layers));function l(x){return Iv(s.flatMap($=>Er($[x]||[])))}const c=l("extractors");let u=(S=o.find(x=>x.extractorDefault!==void 0))==null?void 0:S.extractorDefault;u===void 0&&(u=_7e),u&&!c.includes(u)&&c.unshift(u),c.sort((x,$)=>(x.order||0)-($.order||0));const d=l("rules"),f={},h=d.length,p=d.map((x,$)=>{var E;if(g7e(x)){Er(((E=x[2])==null?void 0:E.prefix)||"").forEach(M=>{f[M+x[0]]=[$,x[1],x[2],x]});return}return[$,...x]}).filter(Boolean).reverse();let m=P7e(s.map(x=>x.theme));const g=l("extendTheme");for(const x of g)m=x(m)||m;const y={templates:Iv(s.flatMap(x=>{var $;return Er(($=x.autocomplete)==null?void 0:$.templates)})),extractors:s.flatMap(x=>{var $;return Er(($=x.autocomplete)==null?void 0:$.extractors)}).sort((x,$)=>(x.order||0)-($.order||0))};let k=l("separators");k.length||(k=[":","-"]);const b={mergeSelectors:!0,warn:!0,blocklist:[],sortLayers:x=>x,...t,presets:i,envMode:t.envMode||"build",shortcutsLayer:t.shortcutsLayer||"shortcuts",layers:a,theme:m,rulesSize:h,rulesDynamic:p,rulesStaticMap:f,preprocess:l("preprocess"),postprocess:l("postprocess"),preflights:l("preflights"),autocomplete:y,variants:l("variants").map(k7e).sort((x,$)=>(x.order||0)-($.order||0)),shortcuts:cae(l("shortcuts")).reverse(),extractors:c,safelist:l("safelist"),separators:k};for(const x of s)(w=x==null?void 0:x.configResolved)==null||w.call(x,b);return b}function P7e(n){return n.map(e=>e?Dw(e):{}).reduce((e,t)=>zz(e,t),{})}const D7e="0.53.6";class N7e{constructor(e={},t={}){this.userConfig=e,this.defaults=t,this.version=D7e,this._cache=new Map,this.blocked=new Set,this.parentOrders=new Map,this.events=A7e(),this.config=HU(e,t),this.events.emit("config",this.config)}setConfig(e,t){e&&(t&&(this.defaults=t),this.userConfig=e,this.blocked.clear(),this.parentOrders.clear(),this._cache.clear(),this.config=HU(e,this.defaults),this.events.emit("config",this.config))}async applyExtractors(e,t,r=new Set){var s;const i={original:e,code:e,id:t,extracted:r};for(const o of this.config.extractors){const a=await((s=o.extract)==null?void 0:s.call(o,i));if(a)for(const l of a)r.add(l)}return r}makeContext(e,t){const r={rawSelector:e,currentSelector:t[1],theme:this.config.theme,generator:this,variantHandlers:t[2],constructCSS:(...i)=>this.constructCustomCSS(r,...i),variantMatch:t};return r}async parseToken(e,t){var c;if(this.blocked.has(e))return;const r=`${e}${t?` ${t}`:""}`;if(this._cache.has(r))return this._cache.get(r);let i=e;for(const u of this.config.preprocess)i=u(e);if(this.isBlocked(i)){this.blocked.add(e),this._cache.set(r,null);return}const s=await this.matchVariants(e,i);if(!s||this.isBlocked(s[1])){this.blocked.add(e),this._cache.set(r,null);return}const o=this.makeContext(e,[t||s[0],s[1],s[2],s[3]]);this.config.details&&(o.variants=[...s[3]]);const a=await this.expandShortcut(o.currentSelector,o),l=a?await this.stringifyShortcuts(o.variantMatch,o,a[0],a[1]):(c=await this.parseUtil(o.variantMatch,o))==null?void 0:c.map(u=>this.stringifyUtil(u,o)).filter(x7e);if(l!=null&&l.length)return this._cache.set(r,l),l;this._cache.set(r,null)}async generate(e,t={}){const{id:r,scope:i,preflights:s=!0,safelist:o=!0,minify:a=!1}=t,l=_n(e)?await this.applyExtractors(e,r):Array.isArray(e)?new Set(e):e;o&&this.config.safelist.forEach(b=>l.add(b));const c=a?"":`
`,u=new Set([YN]),d=new Set,f=new Map;let h={};const p=Array.from(l).map(async b=>{var w;if(d.has(b))return;const S=await this.parseToken(b);if(S!=null){d.add(b);for(const x of S){const $=x[3]||"",E=(w=x[4])==null?void 0:w.layer;f.has($)||f.set($,[]),f.get($).push(x),E&&u.add(E)}}});await Promise.all(p),await(async()=>{if(!s)return;const b={generator:this,theme:this.config.theme},S=new Set([]);this.config.preflights.forEach(({layer:w=XN})=>{u.add(w),S.add(w)}),h=Object.fromEntries(await Promise.all(Array.from(S).map(async w=>{const $=(await Promise.all(this.config.preflights.filter(E=>(E.layer||XN)===w).map(async E=>await E.getCSS(b)))).filter(Boolean).join(c);return[w,$]})))})();const m=this.config.sortLayers(Array.from(u).sort((b,S)=>(this.config.layers[b]??0)-(this.config.layers[S]??0)||b.localeCompare(S))),g={},y=b=>{if(g[b])return g[b];let S=Array.from(f).sort((x,$)=>{var E;return(this.parentOrders.get(x[0])??0)-(this.parentOrders.get($[0])??0)||((E=x[0])==null?void 0:E.localeCompare($[0]||""))||0}).map(([x,$])=>{const E=$.length,C=$.filter(I=>{var N;return(((N=I[4])==null?void 0:N.layer)||YN)===b}).sort((I,N)=>{var T,R,A,L,F,O,z;return I[0]-N[0]||(((T=I[4])==null?void 0:T.sort)||0)-(((R=N[4])==null?void 0:R.sort)||0)||((F=(A=I[5])==null?void 0:A.currentSelector)==null?void 0:F.localeCompare(((L=N[5])==null?void 0:L.currentSelector)??""))||((O=I[1])==null?void 0:O.localeCompare(N[1]||""))||((z=I[2])==null?void 0:z.localeCompare(N[2]||""))||0}).map(([,I,N,,T,,R])=>[[[(I&&B7e(I,i))??"",(T==null?void 0:T.sort)??0]],N,!!(R??(T==null?void 0:T.noMerge))]);if(!C.length)return;const M=C.reverse().map(([I,N,T],R)=>{if(!T&&this.config.mergeSelectors)for(let L=R+1;L<E;L++){const F=C[L];if(F&&!F[2]&&(I&&F[0]||I==null&&F[0]==null)&&F[1]===N)return I&&F[0]&&F[0].push(...I),null}const A=I?Iv(I.sort((L,F)=>{var O;return L[1]-F[1]||((O=L[0])==null?void 0:O.localeCompare(F[0]||""))||0}).map(L=>L[0]).filter(Boolean)):[];return A.length?`${A.join(`,${c}`)}{${N}}`:N}).filter(Boolean).reverse().join(c);if(!x)return M;const P=x.split(" $$ ");return`${P.join("{")}{${c}${M}${c}}${P.map(I=>"").join("}")}`}).filter(Boolean).join(c);s&&(S=[h[b],S].filter(Boolean).join(c));const w=a?"":`/* layer: ${b} */${c}`;return g[b]=S?w+S:""},k=(b=m,S)=>b.filter(w=>!(S!=null&&S.includes(w))).map(w=>y(w)||"").filter(Boolean).join(c);return{get css(){return k()},layers:m,matched:d,getLayers:k,getLayer:y}}async matchVariants(e,t){const r=new Set,i=[];let s=t||e,o=!1;const a={rawSelector:e,theme:this.config.theme,generator:this};for(;;){o=!1;for(const l of this.config.variants){if(!l.multiPass&&r.has(l))continue;let c=await l.match(s,a);if(c){_n(c)&&(c={matcher:c}),s=c.matcher,i.unshift(c),r.add(l),o=!0;break}}if(!o)break;if(i.length>500)throw new Error(`Too many variants applied to "${e}"`)}return[e,s,i,r]}applyVariants(e,t=e[4],r=e[1]){const s=t.slice().sort((c,u)=>(c.order||0)-(u.order||0)).reduceRight((c,u)=>d=>{var p,m;const f=((p=u.body)==null?void 0:p.call(u,d.entries))||d.entries,h=Array.isArray(u.parent)?u.parent:[u.parent,void 0];return(u.handle??j7e)({...d,entries:f,selector:((m=u.selector)==null?void 0:m.call(u,d.selector,f))||d.selector,parent:h[0]||d.parent,parentOrder:h[1]||d.parentOrder,layer:u.layer||d.layer,sort:u.sort||d.sort},c)},c=>c)({prefix:"",selector:dae(r),pseudo:"",entries:e[2]}),{parent:o,parentOrder:a}=s;o!=null&&a!=null&&this.parentOrders.set(o,a);const l={selector:[s.prefix,s.selector,s.pseudo].join(""),entries:s.entries,parent:o,layer:s.layer,sort:s.sort,noMerge:s.noMerge};for(const c of this.config.postprocess)c(l);return l}constructCustomCSS(e,t,r){const i=Rv(t);if(_n(i))return i;const{selector:s,entries:o,parent:a}=this.applyVariants([0,r||e.rawSelector,i,void 0,e.variantHandlers]),l=`${s}{${Pw(o)}}`;return a?`${a}{${l}}`:l}async parseUtil(e,t,r=!1,i){var u;const[s,o,a]=_n(e)?await this.matchVariants(e):e;this.config.details&&(t.rules=t.rules??[]);const l=this.config.rulesStaticMap[o];if(l&&l[1]&&(r||!((u=l[2])!=null&&u.internal))){this.config.details&&t.rules.push(l[3]);const d=l[0],f=Rv(l[1]),h=l[2];return _n(f)?[[d,f,h]]:[[d,s,f,h,a]]}t.variantHandlers=a;const{rulesDynamic:c}=this.config;for(const[d,f,h,p]of c){if(p!=null&&p.internal&&!r)continue;let m=o;if(p!=null&&p.prefix){const b=Er(p.prefix);if(i){const S=Er(i);if(!b.some(w=>S.includes(w)))continue}else{const S=b.find(w=>o.startsWith(w));if(S==null)continue;m=o.slice(S.length)}}const g=m.match(f);if(!g)continue;const y=await h(g,t);if(!y)continue;this.config.details&&t.rules.push([f,h,p]);const k=p7e(y).filter(b=>b.length);if(k.length)return k.map(b=>_n(b)?[d,b,p]:[d,s,b,p,a])}}stringifyUtil(e,t){if(!e)return;if(qU(e))return[e[0],void 0,e[1],void 0,e[2],this.config.details?t:void 0,void 0];const{selector:r,entries:i,parent:s,layer:o,sort:a,noMerge:l}=this.applyVariants(e),c=Pw(i);if(!c)return;const{layer:u,sort:d,...f}=e[3]??{},h={...f,layer:o??u,sort:a??d};return[e[0],r,c,s,h,this.config.details?t:void 0,l]}async expandShortcut(e,t,r=5){var a;if(r===0)return;const i=this.config.details?l=>{t.shortcuts=t.shortcuts??[],t.shortcuts.push(l)}:S7e;let s,o;for(const l of this.config.shortcuts){let c=e;if((a=l[2])!=null&&a.prefix){const d=Er(l[2].prefix).find(f=>e.startsWith(f));if(d==null)continue;c=e.slice(d.length)}if(y7e(l)){if(l[0]===c){s=s||l[2],o=l[1],i(l);break}}else{const u=c.match(l[0]);if(u&&(o=l[1](u,t)),o){s=s||l[2],i(l);break}}}if(_n(o)&&(o=C7e(o.trim()).split(/\s+/g)),!o){const[l,c]=_n(e)?await this.matchVariants(e):e;if(l!==c){const u=await this.expandShortcut(c,t,r-1);u&&(o=u[0].map(d=>_n(d)?l.replace(c,d):d))}}if(o)return[(await Promise.all(o.map(async l=>{var c;return(_n(l)?(c=await this.expandShortcut(l,t,r-1))==null?void 0:c[0]:void 0)||[l]}))).flat(1).filter(Boolean),s]}async stringifyShortcuts(e,t,r,i={layer:this.config.shortcutsLayer}){var u;const s=new w7e,o=(await Promise.all(Iv(r).map(async d=>{const f=_n(d)?await this.parseUtil(d,t,!0,i.prefix):[[Number.POSITIVE_INFINITY,"{inline}",Rv(d),void 0,[]]];return f||e1(`unmatched utility "${d}" in shortcut "${e[1]}"`),f||[]}))).flat(1).filter(Boolean).sort((d,f)=>d[0]-f[0]),[a,,l]=e,c=[];for(const d of o){if(qU(d)){c.push([d[0],void 0,d[1],void 0,d[2],t,void 0]);continue}const{selector:f,entries:h,parent:p,sort:m,noMerge:g}=this.applyVariants(d,[...d[4],...l],a);s.getFallback(f,p,[[],d[0]])[0].push([h,!!(g??((u=d[3])==null?void 0:u.noMerge)),m??0])}return c.concat(s.map(([d,f],h,p)=>{const m=(y,k,b)=>{const S=Math.max(...b.map(x=>x[1])),w=b.map(x=>x[0]);return(y?[w.flat(1)]:w).map(x=>{const $=Pw(x);if($)return[f,h,$,p,{...i,noMerge:k,sort:S},t,void 0]})};return[[d.filter(([,y])=>y).map(([y,,k])=>[y,k]),!0],[d.filter(([,y])=>!y).map(([y,,k])=>[y,k]),!1]].map(([y,k])=>[...m(!1,k,y.filter(([b])=>b.some(S=>S[0]===VU))),...m(!0,k,y.filter(([b])=>b.every(S=>S[0]!==VU)))])}).flat(2).filter(Boolean))}isBlocked(e){return!e||this.config.blocklist.some(t=>_n(t)?t===e:t.test(e))}}function F7e(n,e){return new N7e(n,e)}const L7e=/\s\$\$\s+/g;function z7e(n){return n.match(/\s\$\$\s/)}function B7e(n,e){return z7e(n)?n.replace(L7e,e?` ${e} `:" "):e?`${e} ${n}`:n}const WU=/^\[(.+?)(~?=)"(.*)"\]$/;function dae(n){return WU.test(n)?n.replace(WU,(e,t,r,i)=>`[${FI(t)}${r}"${FI(i)}"]`):`.${FI(n)}`}function j7e(n,e){return e(n)}function V7e(n){return n.replace(/-(\w)/g,(e,t)=>t?t.toUpperCase():"")}function GU(n){return n.charAt(0).toUpperCase()+n.slice(1)}function JU(n){return n.replace(/(?:^|\B)([A-Z])/g,"-$1").toLowerCase()}var QU=["Webkit","Moz","ms"];function q7e(n){const e={};function t(r){const i=e[r];if(i)return i;let s=V7e(r);if(s!=="filter"&&s in n)return e[r]=JU(s);s=GU(s);for(let o=0;o<QU.length;o++){const a=`${QU[o]}${s}`;if(a in n)return e[r]=JU(GU(a))}return r}return({entries:r})=>r.forEach(i=>{i[0].startsWith("--")||(i[0]=t(i[0]))})}function K7e(n){return n.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")}function U7e(n={}){var P,I;if(typeof window>"u"){console.warn("@unocss/runtime been used in non-browser environment, skipped.");return}const e=window,t=window.document,r=()=>t.documentElement,i=e.__unocss||{},s=Object.assign({},n,i.runtime),o=s.defaults||{},a=s.cloakAttribute??"un-cloak";s.autoPrefix&&(o.postprocess=Er(o.postprocess)).unshift(q7e(t.createElement("div").style)),(P=s.configResolved)==null||P.call(s,i,o);const l=F7e(i,o),c=new Map;let u=!0,d=new Set,f,h,p=[];const m=()=>new Promise(N=>{p.push(N),h!=null&&clearTimeout(h),h=setTimeout(()=>k().then(()=>{const T=p;p=[],T.forEach(R=>R())}),0)});function g(N){if(N.nodeType!==1)return;const T=N;T.hasAttribute(a)&&T.removeAttribute(a),T.querySelectorAll(`[${a}]`).forEach(R=>{R.removeAttribute(a)})}function y(N,T){let R=c.get(N);if(!R)if(R=t.createElement("style"),R.setAttribute("data-unocss-runtime-layer",N),c.set(N,R),T==null)r().prepend(R);else{const A=y(T),L=A.parentNode;L?L.insertBefore(R,A.nextSibling):r().prepend(R)}return R}async function k(){const N=await l.generate(d);return N.layers.reduce((T,R)=>(y(R,T).innerHTML=N.getLayer(R)??"",R),void 0),d=N.matched,{...N,getStyleElement:T=>c.get(T),getStyleElements:()=>c}}async function b(N){const T=d.size;await l.applyExtractors(N,void 0,d),T!==d.size&&await m()}async function S(){const N=t.body,T=N&&N.outerHTML;T&&(await b(`${T} ${K7e(T)}`),g(r()),g(N))}const w=new MutationObserver(N=>{u||N.forEach(async T=>{if(T.target.nodeType!==1)return;const R=T.target;for(const A of c)if(R===A[1])return;if(T.type==="childList")T.addedNodes.forEach(async A=>{if(A.nodeType!==1)return;const L=A;f&&!f(L)||(await b(L.outerHTML),g(L))});else{if(f&&!f(R))return;if(T.attributeName!==a){const A=Array.from(R.attributes).map(F=>F.value?`${F.name}="${F.value}"`:F.name).join(" "),L=`<${R.tagName.toLowerCase()} ${A}>`;await b(L)}R.hasAttribute(a)&&R.removeAttribute(a)}})});let x=!1;function $(){if(x)return;const N=r()||t.body;N&&(w.observe(N,{childList:!0,subtree:!0,attributes:!0}),x=!0)}function E(){s.bypassDefined&&H7e(l.blocked),S(),$()}function C(){t.readyState==="loading"?e.addEventListener("DOMContentLoaded",E):E()}const M=e.__unocss_runtime=e.__unocss_runtime={version:l.version,uno:l,async extract(N){_n(N)||(N.forEach(T=>d.add(T)),N=""),await b(N)},extractAll:S,inspect(N){f=N},toggleObserver(N){N===void 0?u=!u:u=!!N,!x&&!u&&C()},update:k};((I=s.ready)==null?void 0:I.call(s,M))!==!1&&(u=!1,C())}function H7e(n=new Set){for(let e=0;e<document.styleSheets.length;e++){const t=document.styleSheets[e];let r;try{if(r=t.cssRules||t.rules,!r)continue;Array.from(r).flatMap(i=>{var s;return((s=i.selectorText)==null?void 0:s.split(/,/g))||[]}).forEach(i=>{i&&(i=i.trim(),i.startsWith(".")&&(i=i.slice(1)),n.add(i))})}catch{continue}}return n}const W7e=/(?:[\w&:[\]-]|\[\S+=\S+\])+\[\\?['"]?\S+?['"]\]\]?[\w:-]*/g,G7e=/\[(\\\W|[\w-])+:[^\s:]*?("\S+?"|'\S+?'|`\S+?`|[^\s:]+?)[^\s:]*?\)?\]/g,J7e=/^\[(\\\W|[\w-])+:['"]?\S+?['"]?\]$/;function Q7e(n){var t;const e=new Set;for(const r of n.matchAll(G7e))(t=n[r.index-1])!=null&&t.match(/^[\s'"`]/)&&e.add(r[0]);for(const r of n.matchAll(W7e))e.add(r[0]);return n.split(lae).forEach(r=>{b7e(r)&&!J7e.test(r)&&e.add(r)}),[...e]}const Y7e={name:"@unocss/extractor-arbitrary-variants",order:0,extract({code:n}){return Q7e(n)}},Bo={l:["-left"],r:["-right"],t:["-top"],b:["-bottom"],s:["-inline-start"],e:["-inline-end"],x:["-left","-right"],y:["-top","-bottom"],"":[""],bs:["-block-start"],be:["-block-end"],is:["-inline-start"],ie:["-inline-end"],block:["-block-start","-block-end"],inline:["-inline-start","-inline-end"]},YU={...Bo,s:["-inset-inline-start"],start:["-inset-inline-start"],e:["-inset-inline-end"],end:["-inset-inline-end"],bs:["-inset-block-start"],be:["-inset-block-end"],is:["-inset-inline-start"],ie:["-inset-inline-end"],block:["-inset-block-start","-inset-block-end"],inline:["-inset-inline-start","-inset-inline-end"]},XU={l:["-top-left","-bottom-left"],r:["-top-right","-bottom-right"],t:["-top-left","-top-right"],b:["-bottom-left","-bottom-right"],tl:["-top-left"],lt:["-top-left"],tr:["-top-right"],rt:["-top-right"],bl:["-bottom-left"],lb:["-bottom-left"],br:["-bottom-right"],rb:["-bottom-right"],"":[""],bs:["-start-start","-start-end"],be:["-end-start","-end-end"],s:["-end-start","-start-start"],is:["-end-start","-start-start"],e:["-start-end","-end-end"],ie:["-start-end","-end-end"],ss:["-start-start"],"bs-is":["-start-start"],"is-bs":["-start-start"],se:["-start-end"],"bs-ie":["-start-end"],"ie-bs":["-start-end"],es:["-end-start"],"be-is":["-end-start"],"is-be":["-end-start"],ee:["-end-end"],"be-ie":["-end-end"],"ie-be":["-end-end"]},Bz={x:["-x"],y:["-y"],z:["-z"],"":["-x","-y"]},ZU=["top","top center","top left","top right","bottom","bottom center","bottom left","bottom right","left","left center","left top","left bottom","right","right center","right top","right bottom","center","center top","center bottom","center left","center right","center center"],Ni=Object.assign({},...ZU.map(n=>({[n.replace(/ /,"-")]:n})),...ZU.map(n=>({[n.replace(/\b(\w)\w+/g,"$1").replace(/ /,"")]:n}))),On=["inherit","initial","revert","revert-layer","unset"],D_=/^(-?\d*(?:\.\d+)?)(px|pt|pc|%|r?(?:em|ex|lh|cap|ch|ic)|(?:[sld]?v|cq)(?:[whib]|min|max)|in|cm|mm|rpx)?$/i,fae=/^(-?\d*(?:\.\d+)?)$/i,hae=/^(px)$/i,X7e=["color","border-color","background-color","flex-grow","flex","flex-shrink","caret-color","font","gap","opacity","visibility","z-index","font-weight","zoom","text-shadow","transform","box-shadow","background-position","left","right","top","bottom","object-position","max-height","min-height","max-width","min-width","height","width","border-width","margin","padding","outline-width","outline-offset","font-size","line-height","text-indent","vertical-align","border-spacing","letter-spacing","word-spacing","stroke","filter","backdrop-filter","fill","mask","mask-size","mask-border","clip-path","clip","border-radius"];function jo(n){return n.toFixed(10).replace(/\.0+$/,"").replace(/(\.\d+?)0+$/,"$1")}function Z7e(n){const e=n.match(D_);if(!e)return;const[,t,r]=e,i=Number.parseFloat(t);if(r&&!Number.isNaN(i))return`${jo(i)}${r}`}function e9e(n){if(n==="auto"||n==="a")return"auto"}function t9e(n){if(n.match(hae))return`1${n}`;const e=n.match(D_);if(!e)return;const[,t,r]=e,i=Number.parseFloat(t);if(!Number.isNaN(i))return i===0?"0":r?`${jo(i)}${r}`:`${jo(i/4)}rem`}function n9e(n){if(n.match(hae))return`1${n}`;const e=n.match(D_);if(!e)return;const[,t,r]=e,i=Number.parseFloat(t);if(!Number.isNaN(i))return i===0?"0":r?`${jo(i)}${r}`:`${jo(i)}px`}function r9e(n){if(!fae.test(n))return;const e=Number.parseFloat(n);if(!Number.isNaN(e))return jo(e)}function i9e(n){if(n.endsWith("%")&&(n=n.slice(0,-1)),!fae.test(n))return;const e=Number.parseFloat(n);if(!Number.isNaN(e))return`${jo(e/100)}`}function s9e(n){if(n==="full")return"100%";const[e,t]=n.split("/"),r=Number.parseFloat(e)/Number.parseFloat(t);if(!Number.isNaN(r))return r===0?"0":`${jo(r*100)}%`}const o9e=/^\[(color|length|position|quoted|string):/i;function N_(n,e){if(n&&n.startsWith("[")&&n.endsWith("]")){let t,r;const i=n.match(o9e);if(i?(e||(r=i[1]),t=n.slice(i[0].length,-1)):t=n.slice(1,-1),!t||t==='=""')return;t.startsWith("--")&&(t=`var(${t})`);let s=0;for(const o of t)if(o==="[")s+=1;else if(o==="]"&&(s-=1,s<0))return;if(s)return;switch(r){case"string":return t.replace(/(^|[^\\])_/g,"$1 ").replace(/\\_/g,"_");case"quoted":return t.replace(/(^|[^\\])_/g,"$1 ").replace(/\\_/g,"_").replace(/(["\\])/g,"\\$1").replace(/^(.+)$/,'"$1"')}return t.replace(/(url\(.*?\))/g,o=>o.replace(/_/g,"\\_")).replace(/(^|[^\\])_/g,"$1 ").replace(/\\_/g,"_").replace(/(?:calc|clamp|max|min)\((.*)/g,o=>{const a=[];return o.replace(/var\((--.+?)[,)]/g,(l,c)=>(a.push(c),l.replace(c,"--un-calc"))).replace(/(-?\d*\.?\d(?!\b-\d.+[,)](?![^+\-/*])\D)(?:%|[a-z]+)?|\))([+\-/*])/g,"$1 $2 ").replace(/--un-calc/g,()=>a.shift())})}}function a9e(n){return N_(n)}function l9e(n){return N_(n,"color")}function c9e(n){return N_(n,"length")}function u9e(n){return N_(n,"position")}function d9e(n){if(n.match(/^\$[^\s'"`;{}]/))return`var(--${Av(n.slice(1))})`}function f9e(n){const e=n.match(/^(-?[0-9.]+)(s|ms)?$/i);if(!e)return;const[,t,r]=e,i=Number.parseFloat(t);if(!Number.isNaN(i))return i===0&&!r?"0s":r?`${jo(i)}${r}`:`${jo(i)}ms`}function h9e(n){const e=n.match(/^(-?[0-9.]+)(deg|rad|grad|turn)?$/i);if(!e)return;const[,t,r]=e,i=Number.parseFloat(t);if(!Number.isNaN(i))return i===0?"0":r?`${jo(i)}${r}`:`${jo(i)}deg`}function p9e(n){if(On.includes(n))return n}function m9e(n){if(n.split(",").every(e=>X7e.includes(e)))return n}function g9e(n){if(["top","left","right","bottom","center"].includes(n))return n}const y9e={__proto__:null,numberWithUnit:Z7e,auto:e9e,rem:t9e,px:n9e,number:r9e,percent:i9e,fraction:s9e,bracket:a9e,bracketOfColor:l9e,bracketOfLength:c9e,bracketOfPosition:u9e,cssvar:d9e,time:f9e,degree:h9e,global:p9e,properties:m9e,position:g9e},v9e=M7e(y9e),H=v9e,b9e="$$mini-no-negative";function gn(n){return([e,t,r],{theme:i})=>{var o;const s=((o=i.spacing)==null?void 0:o[r||"DEFAULT"])??H.bracket.cssvar.global.auto.fraction.rem(r);if(s!=null)return Bo[t].map(a=>[`${n}${a}`,s])}}function Mx(n,e){let t=n.colors,r=-1;for(const i of e){if(r+=1,t&&typeof t!="string"){const s=e.slice(r).join("-").replace(/(-[a-z])/g,o=>o.slice(1).toUpperCase());if(t[s])return t[s];if(t[i]){t=t[i];continue}}return}return t}function pae(n,e){const t=n.split(/(?:\/|:)/);return t[0]===`[${e}`?[t.slice(0,2).join(":"),t[2]]:t}function F_(n,e){const[t,r]=pae(n,"color"),i=t.replace(/([a-z])([0-9])/g,"$1-$2").split(/-/g),[s]=i;if(!s)return;let o;const a=H.bracketOfColor(t),l=a||t;if(H.numberWithUnit(l))return;if(l.match(/^#[\da-fA-F]+/g)?o=l:l.match(/^hex-[\da-fA-F]+/g)?o=`#${l.slice(4)}`:t.startsWith("$")&&(o=H.cssvar(t)),o=o||a,!o){const u=Mx(e,[t]);typeof u=="string"&&(o=u)}let c="DEFAULT";if(!o){let u;const[d]=i.slice(-1);d.match(/^\d+$/)?(c=d,u=Mx(e,i.slice(0,-1)),!u||typeof u=="string"?o=void 0:o=u[c]):(u=Mx(e,i),!u&&i.length<=2&&([,c=c]=i,u=Mx(e,[s])),typeof u=="string"?o=u:c&&u&&(o=u[c]))}return{opacity:r,name:s,no:c,color:o,cssColor:yae(o),alpha:H.bracket.cssvar.percent(r??"")}}function gr(n,e,t){return([,r],{theme:i})=>{const s=F_(r,i);if(!s)return;const{alpha:o,color:a,cssColor:l}=s,c={};if(l?o!=null?c[n]=Oo(l,o):(c[`--un-${e}-opacity`]=Z$(l),c[n]=Oo(l,`var(--un-${e}-opacity)`)):a&&(c[n]=Oo(a,o)),(t==null?void 0:t(c))!==!1)return c}}function jz(n,e){const t=[];n=Er(n);for(let r=0;r<n.length;r++){const i=X$(n[r]," ",6);if(!i||i.length<3)return n;const s=yae(i.pop());if(s==null)return n;t.push(`${i.join(" ")} var(${e}, ${Oo(s)})`)}return t}function Vz(n,e){var t;return n!=null&&!!((t=F_(n,e))!=null&&t.color)}function L_({theme:n,generator:e}){let t;return e.userConfig&&e.userConfig.theme&&(t=e.userConfig.theme.breakpoints),t||(t=n.breakpoints),t}function k9e({theme:n,generator:e}){let t;return e.userConfig&&e.userConfig.theme&&(t=e.userConfig.theme.verticalBreakpoints),t||(t=n.verticalBreakpoints),t}function Je(n,e){return On.map(t=>[`${n}-${t}`,{[e??n]:t}])}function qz(n,e,t){if(n==="")return;const r=n.length;let i=0,s=!1,o=0;for(let a=0;a<r;a++)switch(n[a]){case e:s||(s=!0,o=a),i++;break;case t:if(--i,i<0)return;if(i===0)return[n.slice(o,a+1),n.slice(a+1),n.slice(0,o)];break}}function mae(n,e,t,r){if(n===""||(_n(r)&&(r=[r]),r.length===0))return;const i=n.length;let s=0;for(let o=0;o<i;o++)switch(n[o]){case e:s++;break;case t:if(--s<0)return;break;default:for(const a of r){const l=a.length;if(l&&a===n.slice(o,o+l)&&s===0)return o===0||o===i-l?void 0:[n.slice(0,o),n.slice(o+l)]}}return[n,""]}function X$(n,e,t){t=t??10;const r=[];let i=0;for(;n!=="";){if(++i>t)return;const s=mae(n,"(",")",e);if(!s)return;const[o,a]=s;r.push(o),n=a}if(r.length>0)return r}const Kz=["hsl","hsla","hwb","lab","lch","oklab","oklch","rgb","rgba"],gae=["%alpha","<alpha-value>"],x9e=new RegExp(gae.map(n=>ik(n)).join("|"));function yae(n=""){const e=S9e(n);if(e==null||e===!1)return;const{type:t,components:r,alpha:i}=e,s=t.toLowerCase();if(r.length!==0&&!(["rgba","hsla"].includes(s)&&i==null)&&!(Kz.includes(s)&&![1,3].includes(r.length)))return{type:s,components:r.map(o=>typeof o=="string"?o.trim():o),alpha:typeof i=="string"?i.trim():i}}function Z$(n){const e=n.alpha??1;return typeof e=="string"&&gae.includes(e)?1:e}function Oo(n,e){if(typeof n=="string")return n.replace(x9e,`${e??1}`);const{components:t}=n;let{alpha:r,type:i}=n;return r=e??r,i=i.toLowerCase(),["hsla","hsl","rgba","rgb"].includes(i)?`${i.replace("a","")}a(${t.join(",")}${r==null?"":`,${r}`})`:(r=r==null?"":` / ${r}`,Kz.includes(i)?`${i}(${t.join(" ")}${r})`:`color(${i} ${t.join(" ")}${r})`)}function S9e(n){if(!n)return;let e=w9e(n);if(e!=null||(e=$9e(n),e!=null)||(e=E9e(n),e!=null)||(e=M9e(n),e!=null)||(e=T9e(n),e!=null))return e}function w9e(n){const[,e]=n.match(/^#([\da-f]+)$/i)||[];if(e)switch(e.length){case 3:case 4:const t=Array.from(e,i=>Number.parseInt(i,16)).map(i=>i<<4|i);return{type:"rgb",components:t.slice(0,3),alpha:e.length===3?void 0:Math.round(t[3]/255*100)/100};case 6:case 8:const r=Number.parseInt(e,16);return{type:"rgb",components:e.length===6?[r>>16&255,r>>8&255,r&255]:[r>>24&255,r>>16&255,r>>8&255],alpha:e.length===6?void 0:Math.round((r&255)/255*100)/100}}}function $9e(n){const e={rebeccapurple:[102,51,153,1]}[n];if(e!=null)return{type:"rgb",components:e.slice(0,3),alpha:e[3]}}function E9e(n){const e=n.match(/^(rgb|rgba|hsl|hsla)\((.+)\)$/i);if(!e)return;const[,t,r]=e,i=X$(r,",",5);if(i){if([3,4].includes(i.length))return{type:t,components:i.slice(0,3),alpha:i[3]};if(i.length!==1)return!1}}const C9e=new RegExp(`^(${Kz.join("|")})\\((.+)\\)$`,"i");function M9e(n){const e=n.match(C9e);if(!e)return;const[,t,r]=e,i=vae(`${t} ${r}`);if(i){const{alpha:s,components:[o,...a]}=i;return{type:o,components:a,alpha:s}}}function T9e(n){const e=n.match(/^color\((.+)\)$/);if(!e)return;const t=vae(e[1]);if(t){const{alpha:r,components:[i,...s]}=t;return{type:i,components:s,alpha:r}}}function vae(n){const e=X$(n," ");if(!e)return;let t=e.length;if(e[t-2]==="/")return{components:e.slice(0,t-2),alpha:e[t-1]};if(e[t-2]!=null&&(e[t-2].endsWith("/")||e[t-1].startsWith("/"))){const s=e.splice(t-2);e.push(s.join(" ")),--t}const r=X$(e[t-1],"/",2);if(!r)return;if(r.length===1||r[r.length-1]==="")return{components:e};const i=r.pop();return e[t-1]=r.join("/"),{components:e,alpha:i}}const eH={mid:"middle",base:"baseline",btm:"bottom",baseline:"baseline",top:"top",start:"top",middle:"middle",bottom:"bottom",end:"bottom","text-top":"text-top","text-bottom":"text-bottom",sub:"sub",super:"super",...Object.fromEntries(On.map(n=>[n,n]))},bae=[[/^(?:vertical|align|v)-([-\w]+)$/,([,n])=>({"vertical-align":eH[n]}),{autocomplete:`(vertical|align|v)-(${Object.keys(eH).join("|")})`}]],kae=["center","left","right","justify","start","end"].map(n=>[`text-${n}`,{"text-align":n}]),xae=[[/^outline-(?:width-|size-)?(.+)$/,([,n],{theme:e})=>{var t;return{"outline-width":((t=e.lineWidth)==null?void 0:t[n])??H.bracket.cssvar.global.px(n)}},{autocomplete:"outline-(width|size)-<num>"}],[/^outline-(?:color-)?(.+)$/,gr("outline-color","outline-color"),{autocomplete:"outline-$colors"}],[/^outline-offset-(.+)$/,([,n],{theme:e})=>{var t;return{"outline-offset":((t=e.lineWidth)==null?void 0:t[n])??H.bracket.cssvar.global.px(n)}},{autocomplete:"outline-(offset)-<num>"}],["outline",{"outline-style":"solid"}],...["auto","dashed","dotted","double","hidden","solid","groove","ridge","inset","outset",...On].map(n=>[`outline-${n}`,{"outline-style":n}]),["outline-none",{outline:"2px solid transparent","outline-offset":"2px"}]],Sae=[["appearance-none",{"-webkit-appearance":"none",appearance:"none"}]];function _9e(n){return H.properties.auto.global(n)??{contents:"contents",scroll:"scroll-position"}[n]}const wae=[[/^will-change-(.+)/,([,n])=>({"will-change":_9e(n)})]],dg=["solid","dashed","dotted","double","hidden","none","groove","ridge","inset","outset",...On],$ae=[[/^(?:border|b)()(?:-(.+))?$/,Ry,{autocomplete:"(border|b)-<directions>"}],[/^(?:border|b)-([xy])(?:-(.+))?$/,Ry],[/^(?:border|b)-([rltbse])(?:-(.+))?$/,Ry],[/^(?:border|b)-(block|inline)(?:-(.+))?$/,Ry],[/^(?:border|b)-([bi][se])(?:-(.+))?$/,Ry],[/^(?:border|b)-()(?:width|size)-(.+)$/,cm,{autocomplete:["(border|b)-<num>","(border|b)-<directions>-<num>"]}],[/^(?:border|b)-([xy])-(?:width|size)-(.+)$/,cm],[/^(?:border|b)-([rltbse])-(?:width|size)-(.+)$/,cm],[/^(?:border|b)-(block|inline)-(?:width|size)-(.+)$/,cm],[/^(?:border|b)-([bi][se])-(?:width|size)-(.+)$/,cm],[/^(?:border|b)-()(?:color-)?(.+)$/,Oy,{autocomplete:["(border|b)-$colors","(border|b)-<directions>-$colors"]}],[/^(?:border|b)-([xy])-(?:color-)?(.+)$/,Oy],[/^(?:border|b)-([rltbse])-(?:color-)?(.+)$/,Oy],[/^(?:border|b)-(block|inline)-(?:color-)?(.+)$/,Oy],[/^(?:border|b)-([bi][se])-(?:color-)?(.+)$/,Oy],[/^(?:border|b)-()op(?:acity)?-?(.+)$/,Py,{autocomplete:"(border|b)-(op|opacity)-<percent>"}],[/^(?:border|b)-([xy])-op(?:acity)?-?(.+)$/,Py],[/^(?:border|b)-([rltbse])-op(?:acity)?-?(.+)$/,Py],[/^(?:border|b)-(block|inline)-op(?:acity)?-?(.+)$/,Py],[/^(?:border|b)-([bi][se])-op(?:acity)?-?(.+)$/,Py],[/^(?:border-|b-)?(?:rounded|rd)()(?:-(.+))?$/,Dy,{autocomplete:["(border|b)-(rounded|rd)","(border|b)-(rounded|rd)-<num>","(rounded|rd)","(rounded|rd)-<num>"]}],[/^(?:border-|b-)?(?:rounded|rd)-([rltbse])(?:-(.+))?$/,Dy],[/^(?:border-|b-)?(?:rounded|rd)-([rltb]{2})(?:-(.+))?$/,Dy],[/^(?:border-|b-)?(?:rounded|rd)-([bise][se])(?:-(.+))?$/,Dy],[/^(?:border-|b-)?(?:rounded|rd)-([bi][se]-[bi][se])(?:-(.+))?$/,Dy],[/^(?:border|b)-(?:style-)?()(.+)$/,Ny,{autocomplete:["(border|b)-style",`(border|b)-(${dg.join("|")})`,"(border|b)-<directions>-style",`(border|b)-<directions>-(${dg.join("|")})`,`(border|b)-<directions>-style-(${dg.join("|")})`,`(border|b)-style-(${dg.join("|")})`]}],[/^(?:border|b)-([xy])-(?:style-)?(.+)$/,Ny],[/^(?:border|b)-([rltbse])-(?:style-)?(.+)$/,Ny],[/^(?:border|b)-(block|inline)-(?:style-)?(.+)$/,Ny],[/^(?:border|b)-([bi][se])-(?:style-)?(.+)$/,Ny]];function A9e(n){return([,e],t)=>{const r=F_(e,t);if(!r)return;const{alpha:i,color:s,cssColor:o}=r;if(o)return i!=null?{[`border${n}-color`]:Oo(o,i)}:n===""?{"--un-border-opacity":Z$(o),"border-color":Oo(o,"var(--un-border-opacity)")}:{"--un-border-opacity":Z$(o),[`--un-border${n}-opacity`]:"var(--un-border-opacity)",[`border${n}-color`]:Oo(o,`var(--un-border${n}-opacity)`)};if(s)return{[`border${n}-color`]:Oo(s,i)}}}function Ry(n,e){return cm(n,e)}function cm([,n="",e],{theme:t}){var i;const r=((i=t.lineWidth)==null?void 0:i[e||"DEFAULT"])??H.bracket.cssvar.global.px(e||"1");if(n in Bo&&r!=null)return Bo[n].map(s=>[`border${s}-width`,r])}function Oy([,n="",e],{theme:t}){if(n in Bo&&Vz(e,t))return Object.assign({},...Bo[n].map(r=>A9e(r)(["",e],t)))}function Py([,n="",e]){const t=H.bracket.percent.cssvar(e);if(n in Bo&&t!=null)return Bo[n].map(r=>[`--un-border${r}-opacity`,t])}function Dy([,n="",e],{theme:t}){var i;const r=((i=t.borderRadius)==null?void 0:i[e||"DEFAULT"])||H.bracket.cssvar.global.fraction.rem(e||"1");if(n in XU&&r!=null)return XU[n].map(s=>[`border${s}-radius`,r])}function Ny([,n="",e]){if(dg.includes(e)&&n in Bo)return Bo[n].map(t=>[`border${t}-style`,e])}const Eae=[[/^op(?:acity)?-?(.+)$/,([,n])=>({opacity:H.bracket.percent.cssvar(n)})]],Cae=[[/^(?:color|c)-(.+)$/,gr("color","text"),{autocomplete:"(color|c)-$colors"}],[/^text-(.+)$/,gr("color","text",n=>{var e;return!((e=n.color)!=null&&e.toString().match(D_))}),{autocomplete:"text-$colors"}],[/^(?:text|color|c)-(.+)$/,([,n])=>On.includes(n)?{color:n}:void 0,{autocomplete:`(text|color|c)-(${On.join("|")})`}],[/^(?:text|color|c)-op(?:acity)?-?(.+)$/,([,n])=>({"--un-text-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"(text|color|c)-(op|opacity)-<percent>"}]],Mae=[[/^bg-(.+)$/,gr("background-color","bg"),{autocomplete:"bg-$colors"}],[/^bg-op(?:acity)?-?(.+)$/,([,n])=>({"--un-bg-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"bg-(op|opacity)-<percent>"}]],I9e=[[/^color-scheme-(\w+)$/,([,n])=>({"color-scheme":n})]],tH=["solid","double","dotted","dashed","wavy",...On],Tae=[[/^(?:decoration-)?(underline|overline|line-through)$/,([,n])=>({"text-decoration-line":n}),{autocomplete:"decoration-(underline|overline|line-through)"}],[/^(?:underline|decoration)-(?:size-)?(.+)$/,([,n],{theme:e})=>{var t;return{"text-decoration-thickness":((t=e.lineWidth)==null?void 0:t[n])??H.bracket.cssvar.global.px(n)}},{autocomplete:"(underline|decoration)-<num>"}],[/^(?:underline|decoration)-(auto|from-font)$/,([,n])=>({"text-decoration-thickness":n}),{autocomplete:"(underline|decoration)-(auto|from-font)"}],[/^(?:underline|decoration)-(.+)$/,(n,e)=>{const t=gr("text-decoration-color","line")(n,e);if(t)return{"-webkit-text-decoration-color":t["text-decoration-color"],...t}},{autocomplete:"(underline|decoration)-$colors"}],[/^(?:underline|decoration)-op(?:acity)?-?(.+)$/,([,n])=>({"--un-line-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"(underline|decoration)-(op|opacity)-<percent>"}],[/^(?:underline|decoration)-offset-(.+)$/,([,n],{theme:e})=>{var t;return{"text-underline-offset":((t=e.lineWidth)==null?void 0:t[n])??H.auto.bracket.cssvar.global.px(n)}},{autocomplete:"(underline|decoration)-(offset)-<num>"}],...tH.map(n=>[`underline-${n}`,{"text-decoration-style":n}]),...tH.map(n=>[`decoration-${n}`,{"text-decoration-style":n}]),["no-underline",{"text-decoration":"none"}],["decoration-none",{"text-decoration":"none"}]],Nw={all:"all",colors:["color","background-color","border-color","outline-color","text-decoration-color","fill","stroke"].join(","),none:"none",opacity:"opacity",shadow:"box-shadow",transform:"transform"};function nH(n){return H.properties(n)??Nw[n]}const _ae=[[/^transition(?:-([a-z-]+(?:,[a-z-]+)*))?(?:-(\d+))?$/,([,n,e],{theme:t})=>{var i;const r=n!=null?nH(n):[Nw.colors,"opacity","box-shadow","transform","filter","backdrop-filter"].join(",");if(r){const s=((i=t.duration)==null?void 0:i[e||"DEFAULT"])??H.time(e||"150");return{"transition-property":r,"transition-timing-function":"cubic-bezier(0.4, 0, 0.2, 1)","transition-duration":s}}},{autocomplete:`transition-(${Object.keys(Nw).join("|")})`}],[/^(?:transition-)?duration-(.+)$/,([,n],{theme:e})=>{var t;return{"transition-duration":((t=e.duration)==null?void 0:t[n||"DEFAULT"])??H.bracket.cssvar.time(n)}},{autocomplete:["transition-duration-$duration","duration-$duration"]}],[/^(?:transition-)?delay-(.+)$/,([,n],{theme:e})=>{var t;return{"transition-delay":((t=e.duration)==null?void 0:t[n||"DEFAULT"])??H.bracket.cssvar.time(n)}},{autocomplete:["transition-delay-$duration","delay-$duration"]}],[/^(?:transition-)?ease(?:-(.+))?$/,([,n],{theme:e})=>{var t;return{"transition-timing-function":((t=e.easing)==null?void 0:t[n||"DEFAULT"])??H.bracket.cssvar(n)}},{autocomplete:["transition-ease-(linear|in|out|in-out|DEFAULT)","ease-(linear|in|out|in-out|DEFAULT)"]}],[/^(?:transition-)?property-(.+)$/,([,n])=>({"transition-property":H.bracket.global(n)||nH(n)}),{autocomplete:[`transition-property-(${[...On,...Object.keys(Nw)].join("|")})`]}],["transition-none",{transition:"none"}],...Je("transition")],Tx=["auto","hidden","clip","visible","scroll","overlay",...On],Aae=[[/^(?:overflow|of)-(.+)$/,([,n])=>Tx.includes(n)?{overflow:n}:void 0,{autocomplete:[`(overflow|of)-(${Tx.join("|")})`,`(overflow|of)-(x|y)-(${Tx.join("|")})`]}],[/^(?:overflow|of)-([xy])-(.+)$/,([,n,e])=>Tx.includes(e)?{[`overflow-${n}`]:e}:void 0]],Iae=[[/^(?:position-|pos-)?(relative|absolute|fixed|sticky)$/,([,n])=>({position:n})],[/^(?:position-|pos-)([-\w]+)$/,([,n])=>On.includes(n)?{position:n}:void 0],[/^(?:position-|pos-)?(static)$/,([,n])=>({position:n})]],Uz=[["justify-start",{"justify-content":"flex-start"}],["justify-end",{"justify-content":"flex-end"}],["justify-center",{"justify-content":"center"}],["justify-between",{"justify-content":"space-between"}],["justify-around",{"justify-content":"space-around"}],["justify-evenly",{"justify-content":"space-evenly"}],["justify-stretch",{"justify-content":"stretch"}],...Je("justify","justify-content"),["justify-items-start",{"justify-items":"start"}],["justify-items-end",{"justify-items":"end"}],["justify-items-center",{"justify-items":"center"}],["justify-items-stretch",{"justify-items":"stretch"}],...Je("justify-items"),["justify-self-auto",{"justify-self":"auto"}],["justify-self-start",{"justify-self":"start"}],["justify-self-end",{"justify-self":"end"}],["justify-self-center",{"justify-self":"center"}],["justify-self-stretch",{"justify-self":"stretch"}],...Je("justify-self")],Rae=[[/^order-(.+)$/,([,n])=>({order:H.bracket.cssvar.number(n)})],["order-first",{order:"-9999"}],["order-last",{order:"9999"}],["order-none",{order:"0"}]],Hz=[["content-center",{"align-content":"center"}],["content-start",{"align-content":"flex-start"}],["content-end",{"align-content":"flex-end"}],["content-between",{"align-content":"space-between"}],["content-around",{"align-content":"space-around"}],["content-evenly",{"align-content":"space-evenly"}],...Je("content","align-content"),["items-start",{"align-items":"flex-start"}],["items-end",{"align-items":"flex-end"}],["items-center",{"align-items":"center"}],["items-baseline",{"align-items":"baseline"}],["items-stretch",{"align-items":"stretch"}],...Je("items","align-items"),["self-auto",{"align-self":"auto"}],["self-start",{"align-self":"flex-start"}],["self-end",{"align-self":"flex-end"}],["self-center",{"align-self":"center"}],["self-stretch",{"align-self":"stretch"}],["self-baseline",{"align-self":"baseline"}],...Je("self","align-self")],Oae=[["place-content-center",{"place-content":"center"}],["place-content-start",{"place-content":"start"}],["place-content-end",{"place-content":"end"}],["place-content-between",{"place-content":"space-between"}],["place-content-around",{"place-content":"space-around"}],["place-content-evenly",{"place-content":"space-evenly"}],["place-content-stretch",{"place-content":"stretch"}],...Je("place-content"),["place-items-start",{"place-items":"start"}],["place-items-end",{"place-items":"end"}],["place-items-center",{"place-items":"center"}],["place-items-stretch",{"place-items":"stretch"}],...Je("place-items"),["place-self-auto",{"place-self":"auto"}],["place-self-start",{"place-self":"start"}],["place-self-end",{"place-self":"end"}],["place-self-center",{"place-self":"center"}],["place-self-stretch",{"place-self":"stretch"}],...Je("place-self")],Pae=[...Uz,...Hz].flatMap(([n,e])=>[[`flex-${n}`,e],[`grid-${n}`,e]]);function ZN(n,{theme:e}){var t;return((t=e.spacing)==null?void 0:t[n])??H.bracket.cssvar.global.auto.fraction.rem(n)}function Fy([,n,e],t){const r=ZN(e,t);if(r!=null&&n in YU)return YU[n].map(i=>[i.slice(1),r])}const Dae=[[/^(?:position-|pos-)?inset-(.+)$/,([,n],e)=>({inset:ZN(n,e)}),{autocomplete:["(position|pos)-inset-<directions>-$spacing","(position|pos)-inset-(block|inline)-$spacing","(position|pos)-inset-(bs|be|is|ie)-$spacing","(position|pos)-(top|left|right|bottom)-$spacing"]}],[/^(?:position-|pos-)?(start|end)-(.+)$/,Fy],[/^(?:position-|pos-)?inset-([xy])-(.+)$/,Fy],[/^(?:position-|pos-)?inset-([rltbse])-(.+)$/,Fy],[/^(?:position-|pos-)?inset-(block|inline)-(.+)$/,Fy],[/^(?:position-|pos-)?inset-([bi][se])-(.+)$/,Fy],[/^(?:position-|pos-)?(top|left|right|bottom)-(.+)$/,([,n,e],t)=>({[n]:ZN(e,t)})]],Nae=[["float-left",{float:"left"}],["float-right",{float:"right"}],["float-none",{float:"none"}],...Je("float"),["clear-left",{clear:"left"}],["clear-right",{clear:"right"}],["clear-both",{clear:"both"}],["clear-none",{clear:"none"}],...Je("clear")],Fae=[[/^(?:position-|pos-)?z([\d.]+)$/,([,n])=>({"z-index":H.number(n)})],[/^(?:position-|pos-)?z-(.+)$/,([,n])=>({"z-index":H.bracket.cssvar.global.auto.number(n)}),{autocomplete:"z-<num>"}]],Lae=[["box-border",{"box-sizing":"border-box"}],["box-content",{"box-sizing":"content-box"}],...Je("box","box-sizing")],R9e=["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"],O9e=["none","strict","content","size","inline-size","layout","style","paint"],yt=" ",zae=[["inline",{display:"inline"}],["block",{display:"block"}],["inline-block",{display:"inline-block"}],["contents",{display:"contents"}],["flow-root",{display:"flow-root"}],["list-item",{display:"list-item"}],["hidden",{display:"none"}],[/^display-(.+)$/,([,n])=>({display:H.bracket.cssvar.global(n)||n})]],Bae=[["visible",{visibility:"visible"}],["invisible",{visibility:"hidden"}],["backface-visible",{"backface-visibility":"visible"}],["backface-hidden",{"backface-visibility":"hidden"}],...Je("backface","backface-visibility")],jae=[[/^cursor-(.+)$/,([,n])=>({cursor:H.bracket.cssvar.global(n)})],...R9e.map(n=>[`cursor-${n}`,{cursor:n}])],Vae=[[/^contain-(.*)$/,([,n])=>H.bracket(n)!=null?{contain:H.bracket(n).split(" ").map(e=>H.cssvar.fraction(e)??e).join(" ")}:O9e.includes(n)?{contain:n}:void 0]],qae=[["pointer-events-auto",{"pointer-events":"auto"}],["pointer-events-none",{"pointer-events":"none"}],...Je("pointer-events")],Kae=[["resize-x",{resize:"horizontal"}],["resize-y",{resize:"vertical"}],["resize",{resize:"both"}],["resize-none",{resize:"none"}],...Je("resize")],Uae=[["select-auto",{"-webkit-user-select":"auto","user-select":"auto"}],["select-all",{"-webkit-user-select":"all","user-select":"all"}],["select-text",{"-webkit-user-select":"text","user-select":"text"}],["select-none",{"-webkit-user-select":"none","user-select":"none"}],...Je("select","user-select")],Hae=[[/^(?:whitespace-|ws-)([-\w]+)$/,([,n])=>["normal","nowrap","pre","pre-line","pre-wrap","break-spaces",...On].includes(n)?{"white-space":n}:void 0,{autocomplete:"(whitespace|ws)-(normal|nowrap|pre|pre-line|pre-wrap|break-spaces)"}]],Wae=[[/^intrinsic-size-(.+)$/,([,n])=>({"contain-intrinsic-size":H.bracket.cssvar.global.fraction.rem(n)}),{autocomplete:"intrinsic-size-<num>"}],["content-visibility-visible",{"content-visibility":"visible"}],["content-visibility-hidden",{"content-visibility":"hidden"}],["content-visibility-auto",{"content-visibility":"auto"}],...Je("content-visibility")],Gae=[[/^content-(.+)$/,([,n])=>({content:H.bracket.cssvar(n)})],["content-empty",{content:'""'}],["content-none",{content:"none"}]],Jae=[["break-normal",{"overflow-wrap":"normal","word-break":"normal"}],["break-words",{"overflow-wrap":"break-word"}],["break-all",{"word-break":"break-all"}],["break-keep",{"word-break":"keep-all"}],["break-anywhere",{"overflow-wrap":"anywhere"}]],Qae=[["text-wrap",{"text-wrap":"wrap"}],["text-nowrap",{"text-wrap":"nowrap"}],["text-balance",{"text-wrap":"balance"}]],Yae=[["truncate",{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}],["text-truncate",{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}],["text-ellipsis",{"text-overflow":"ellipsis"}],["text-clip",{"text-overflow":"clip"}]],Xae=[["case-upper",{"text-transform":"uppercase"}],["case-lower",{"text-transform":"lowercase"}],["case-capital",{"text-transform":"capitalize"}],["case-normal",{"text-transform":"none"}],...Je("case","text-transform")],Zae=[["italic",{"font-style":"italic"}],["not-italic",{"font-style":"normal"}],["font-italic",{"font-style":"italic"}],["font-not-italic",{"font-style":"normal"}],["oblique",{"font-style":"oblique"}],["not-oblique",{"font-style":"normal"}],["font-oblique",{"font-style":"oblique"}],["font-not-oblique",{"font-style":"normal"}]],ele=[["antialiased",{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","font-smoothing":"grayscale"}],["subpixel-antialiased",{"-webkit-font-smoothing":"auto","-moz-osx-font-smoothing":"auto","font-smoothing":"auto"}]],tle={"--un-ring-inset":yt,"--un-ring-offset-width":"0px","--un-ring-offset-color":"#fff","--un-ring-width":"0px","--un-ring-color":"rgba(147,197,253,0.5)","--un-shadow":"0 0 rgba(0,0,0,0)"},nle=[[/^ring(?:-(.+))?$/,([,n],{theme:e})=>{var r;const t=((r=e.ringWidth)==null?void 0:r[n||"DEFAULT"])??H.px(n||"1");if(t)return{"--un-ring-width":t,"--un-ring-offset-shadow":"var(--un-ring-inset) 0 0 0 var(--un-ring-offset-width) var(--un-ring-offset-color)","--un-ring-shadow":"var(--un-ring-inset) 0 0 0 calc(var(--un-ring-width) + var(--un-ring-offset-width)) var(--un-ring-color)","box-shadow":"var(--un-ring-offset-shadow), var(--un-ring-shadow), var(--un-shadow)"}},{autocomplete:"ring-$ringWidth"}],[/^ring-(?:width-|size-)(.+)$/,([,n],{theme:e})=>{var t;return{"--un-ring-width":((t=e.lineWidth)==null?void 0:t[n])??H.bracket.cssvar.px(n)}},{autocomplete:"ring-(width|size)-$lineWidth"}],["ring-offset",{"--un-ring-offset-width":"1px"}],[/^ring-offset-(?:width-|size-)?(.+)$/,([,n],{theme:e})=>{var t;return{"--un-ring-offset-width":((t=e.lineWidth)==null?void 0:t[n])??H.bracket.cssvar.px(n)}},{autocomplete:"ring-offset-(width|size)-$lineWidth"}],[/^ring-(.+)$/,gr("--un-ring-color","ring"),{autocomplete:"ring-$colors"}],[/^ring-op(?:acity)?-?(.+)$/,([,n])=>({"--un-ring-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"ring-(op|opacity)-<percent>"}],[/^ring-offset-(.+)$/,gr("--un-ring-offset-color","ring-offset"),{autocomplete:"ring-offset-$colors"}],[/^ring-offset-op(?:acity)?-?(.+)$/,([,n])=>({"--un-ring-offset-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"ring-offset-(op|opacity)-<percent>"}],["ring-inset",{"--un-ring-inset":"inset"}]],rle={"--un-ring-offset-shadow":"0 0 rgba(0,0,0,0)","--un-ring-shadow":"0 0 rgba(0,0,0,0)","--un-shadow-inset":yt,"--un-shadow":"0 0 rgba(0,0,0,0)"},ile=[[/^shadow(?:-(.+))?$/,(n,e)=>{var o;const[,t]=n,{theme:r}=e,i=(o=r.boxShadow)==null?void 0:o[t||"DEFAULT"],s=t?H.bracket.cssvar(t):void 0;return(i!=null||s!=null)&&!Vz(s,r)?{"--un-shadow":jz(i||s,"--un-shadow-color").join(","),"box-shadow":"var(--un-ring-offset-shadow), var(--un-ring-shadow), var(--un-shadow)"}:gr("--un-shadow-color","shadow")(n,e)},{autocomplete:["shadow-$colors","shadow-$boxShadow"]}],[/^shadow-op(?:acity)?-?(.+)$/,([,n])=>({"--un-shadow-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"shadow-(op|opacity)-<percent>"}],["shadow-inset",{"--un-shadow-inset":"inset"}]],rH=["translate","rotate","scale"],Hh=["translateX(var(--un-translate-x))","translateY(var(--un-translate-y))","translateZ(var(--un-translate-z))","rotate(var(--un-rotate))","rotateX(var(--un-rotate-x))","rotateY(var(--un-rotate-y))","rotateZ(var(--un-rotate-z))","skewX(var(--un-skew-x))","skewY(var(--un-skew-y))","scaleX(var(--un-scale-x))","scaleY(var(--un-scale-y))","scaleZ(var(--un-scale-z))"].join(" "),P9e=["translate3d(var(--un-translate-x), var(--un-translate-y), var(--un-translate-z))","rotate(var(--un-rotate))","rotateX(var(--un-rotate-x))","rotateY(var(--un-rotate-y))","rotateZ(var(--un-rotate-z))","skewX(var(--un-skew-x))","skewY(var(--un-skew-y))","scaleX(var(--un-scale-x))","scaleY(var(--un-scale-y))","scaleZ(var(--un-scale-z))"].join(" "),sle={"--un-rotate":0,"--un-rotate-x":0,"--un-rotate-y":0,"--un-rotate-z":0,"--un-scale-x":1,"--un-scale-y":1,"--un-scale-z":1,"--un-skew-x":0,"--un-skew-y":0,"--un-translate-x":0,"--un-translate-y":0,"--un-translate-z":0},ole=[[/^(?:transform-)?origin-(.+)$/,([,n])=>({"transform-origin":Ni[n]??H.bracket.cssvar(n)}),{autocomplete:[`transform-origin-(${Object.keys(Ni).join("|")})`,`origin-(${Object.keys(Ni).join("|")})`]}],[/^(?:transform-)?perspect(?:ive)?-(.+)$/,([,n])=>{const e=H.bracket.cssvar.px.numberWithUnit(n);if(e!=null)return{"-webkit-perspective":e,perspective:e}}],[/^(?:transform-)?perspect(?:ive)?-origin-(.+)$/,([,n])=>{const e=H.bracket.cssvar(n)??(n.length>=3?Ni[n]:void 0);if(e!=null)return{"-webkit-perspective-origin":e,"perspective-origin":e}}],[/^(?:transform-)?translate-()(.+)$/,iH],[/^(?:transform-)?translate-([xyz])-(.+)$/,iH],[/^(?:transform-)?rotate-()(.+)$/,oH],[/^(?:transform-)?rotate-([xyz])-(.+)$/,oH],[/^(?:transform-)?skew-()(.+)$/,aH],[/^(?:transform-)?skew-([xy])-(.+)$/,aH,{autocomplete:["transform-skew-(x|y)-<percent>"]}],[/^(?:transform-)?scale-()(.+)$/,sH],[/^(?:transform-)?scale-([xyz])-(.+)$/,sH,{autocomplete:[`transform-(${rH.join("|")})-<percent>`,`transform-(${rH.join("|")})-(x|y|z)-<percent>`]}],[/^(?:transform-)?preserve-3d$/,()=>({"transform-style":"preserve-3d"})],[/^(?:transform-)?preserve-flat$/,()=>({"transform-style":"flat"})],["transform",{transform:Hh}],["transform-cpu",{transform:Hh}],["transform-gpu",{transform:P9e}],["transform-none",{transform:"none"}],...Je("transform")];function iH([,n,e],{theme:t}){var i;const r=((i=t.spacing)==null?void 0:i[e])??H.bracket.cssvar.fraction.rem(e);if(r!=null)return[...Bz[n].map(s=>[`--un-translate${s}`,r]),["transform",Hh]]}function sH([,n,e]){const t=H.bracket.cssvar.fraction.percent(e);if(t!=null)return[...Bz[n].map(r=>[`--un-scale${r}`,t]),["transform",Hh]]}function oH([,n="",e]){const t=H.bracket.cssvar.degree(e);if(t!=null)return n?{"--un-rotate":0,[`--un-rotate-${n}`]:t,transform:Hh}:{"--un-rotate-x":0,"--un-rotate-y":0,"--un-rotate-z":0,"--un-rotate":t,transform:Hh}}function aH([,n,e]){const t=H.bracket.cssvar.degree(e);if(t!=null)return[...Bz[n].map(r=>[`--un-skew${r}`,t]),["transform",Hh]]}const ale=[[/^@container(?:\/(\w+))?(?:-(normal))?$/,([,n,e])=>(e1("The container query rule is experimental and may not follow semver."),{"container-type":e??"inline-size","container-name":n})]],lle=[["flex",{display:"flex"}],["inline-flex",{display:"inline-flex"}],["flex-inline",{display:"inline-flex"}],[/^flex-(.*)$/,([,n])=>({flex:H.bracket(n)!=null?H.bracket(n).split(" ").map(e=>H.cssvar.fraction(e)??e).join(" "):H.cssvar.fraction(n)})],["flex-1",{flex:"1 1 0%"}],["flex-auto",{flex:"1 1 auto"}],["flex-initial",{flex:"0 1 auto"}],["flex-none",{flex:"none"}],[/^(?:flex-)?shrink(?:-(.*))?$/,([,n=""])=>({"flex-shrink":H.bracket.cssvar.number(n)??1}),{autocomplete:["flex-shrink-<num>","shrink-<num>"]}],[/^(?:flex-)?grow(?:-(.*))?$/,([,n=""])=>({"flex-grow":H.bracket.cssvar.number(n)??1}),{autocomplete:["flex-grow-<num>","grow-<num>"]}],[/^(?:flex-)?basis-(.+)$/,([,n],{theme:e})=>{var t;return{"flex-basis":((t=e.spacing)==null?void 0:t[n])??H.bracket.cssvar.auto.fraction.rem(n)}},{autocomplete:["flex-basis-$spacing","basis-$spacing"]}],["flex-row",{"flex-direction":"row"}],["flex-row-reverse",{"flex-direction":"row-reverse"}],["flex-col",{"flex-direction":"column"}],["flex-col-reverse",{"flex-direction":"column-reverse"}],["flex-wrap",{"flex-wrap":"wrap"}],["flex-wrap-reverse",{"flex-wrap":"wrap-reverse"}],["flex-nowrap",{"flex-wrap":"nowrap"}]];function lH(n,e){var t;return((t=e.lineHeight)==null?void 0:t[n])||H.bracket.cssvar.global.rem(n)}const cle=[[/^text-(.+)$/,([,n="base"],{theme:e})=>{var a;const[t,r]=pae(n,"length"),i=Er((a=e.fontSize)==null?void 0:a[t]),s=r?lH(r,e):void 0;if(i!=null&&i[0]){const[l,c]=i;return{"font-size":l,"line-height":s??c??"1"}}const o=H.bracketOfLength.rem(t);return s&&o?{"font-size":o,"line-height":s}:{"font-size":H.bracketOfLength.rem(n)}},{autocomplete:"text-$fontSize"}],[/^text-size-(.+)$/,([,n],{theme:e})=>{var i;const t=Er((i=e.fontSize)==null?void 0:i[n]),r=(t==null?void 0:t[0])??H.bracket.cssvar.global.rem(n);if(r!=null)return{"font-size":r}},{autocomplete:"text-size-$fontSize"}],[/^(?:font|fw)-?([^-]+)$/,([,n],{theme:e})=>{var t;return{"font-weight":((t=e.fontWeight)==null?void 0:t[n])||H.bracket.global.number(n)}},{autocomplete:["(font|fw)-(100|200|300|400|500|600|700|800|900)","(font|fw)-$fontWeight"]}],[/^(?:font-)?(?:leading|lh|line-height)-(.+)$/,([,n],{theme:e})=>({"line-height":lH(n,e)}),{autocomplete:"(leading|lh|line-height)-$lineHeight"}],["font-synthesis-weight",{"font-synthesis":"weight"}],["font-synthesis-style",{"font-synthesis":"style"}],["font-synthesis-small-caps",{"font-synthesis":"small-caps"}],["font-synthesis-none",{"font-synthesis":"none"}],[/^font-synthesis-(.+)$/,([,n])=>({"font-synthesis":H.bracket.cssvar.global(n)})],[/^(?:font-)?tracking-(.+)$/,([,n],{theme:e})=>{var t;return{"letter-spacing":((t=e.letterSpacing)==null?void 0:t[n])||H.bracket.cssvar.global.rem(n)}},{autocomplete:"tracking-$letterSpacing"}],[/^(?:font-)?word-spacing-(.+)$/,([,n],{theme:e})=>{var t;return{"word-spacing":((t=e.wordSpacing)==null?void 0:t[n])||H.bracket.cssvar.global.rem(n)}},{autocomplete:"word-spacing-$wordSpacing"}],[/^font-(.+)$/,([,n],{theme:e})=>{var t;return{"font-family":((t=e.fontFamily)==null?void 0:t[n])||H.bracket.cssvar.global(n)}},{autocomplete:"font-$fontFamily"}]],ule=[[/^tab(?:-(.+))?$/,([,n])=>{const e=H.bracket.cssvar.global.number(n||"4");if(e!=null)return{"-moz-tab-size":e,"-o-tab-size":e,"tab-size":e}}]],dle=[[/^indent(?:-(.+))?$/,([,n],{theme:e})=>{var t;return{"text-indent":((t=e.textIndent)==null?void 0:t[n||"DEFAULT"])||H.bracket.cssvar.global.fraction.rem(n)}},{autocomplete:"indent-$textIndent"}]],fle=[[/^text-stroke(?:-(.+))?$/,([,n],{theme:e})=>{var t;return{"-webkit-text-stroke-width":((t=e.textStrokeWidth)==null?void 0:t[n||"DEFAULT"])||H.bracket.cssvar.px(n)}},{autocomplete:"text-stroke-$textStrokeWidth"}],[/^text-stroke-(.+)$/,gr("-webkit-text-stroke-color","text-stroke"),{autocomplete:"text-stroke-$colors"}],[/^text-stroke-op(?:acity)?-?(.+)$/,([,n])=>({"--un-text-stroke-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"text-stroke-(op|opacity)-<percent>"}]],hle=[[/^text-shadow(?:-(.+))?$/,([,n],{theme:e})=>{var r;const t=(r=e.textShadow)==null?void 0:r[n||"DEFAULT"];return t!=null?{"--un-text-shadow":jz(t,"--un-text-shadow-color").join(","),"text-shadow":"var(--un-text-shadow)"}:{"text-shadow":H.bracket.cssvar.global(n)}},{autocomplete:"text-shadow-$textShadow"}],[/^text-shadow-color-(.+)$/,gr("--un-text-shadow-color","text-shadow"),{autocomplete:"text-shadow-color-$colors"}],[/^text-shadow-color-op(?:acity)?-?(.+)$/,([,n])=>({"--un-text-shadow-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"text-shadow-color-(op|opacity)-<percent>"}]],D9e={"":"",x:"column-",y:"row-"};function cH([,n="",e],{theme:t}){var i;const r=((i=t.spacing)==null?void 0:i[e])??H.bracket.cssvar.global.rem(e);if(r!=null)return{[`${D9e[n]}gap`]:r}}const ple=[[/^(?:flex-|grid-)?gap-?()(.+)$/,cH,{autocomplete:["gap-$spacing","gap-<num>"]}],[/^(?:flex-|grid-)?gap-([xy])-?(.+)$/,cH,{autocomplete:["gap-(x|y)-$spacing","gap-(x|y)-<num>"]}]];function dl(n){return n.replace("col","column")}function e3(n){return n[0]==="r"?"Row":"Column"}function N9e(n,e,t){var i;const r=(i=e[`gridAuto${e3(n)}`])==null?void 0:i[t];if(r!=null)return r;switch(t){case"min":return"min-content";case"max":return"max-content";case"fr":return"minmax(0,1fr)"}return H.bracket.cssvar.auto.rem(t)}const mle=[["grid",{display:"grid"}],["inline-grid",{display:"inline-grid"}],[/^(?:grid-)?(row|col)-(.+)$/,([,n,e],{theme:t})=>{var r;return{[`grid-${dl(n)}`]:((r=t[`grid${e3(n)}`])==null?void 0:r[e])??H.bracket.cssvar.auto(e)}}],[/^(?:grid-)?(row|col)-span-(.+)$/,([,n,e])=>{if(e==="full")return{[`grid-${dl(n)}`]:"1/-1"};const t=H.bracket.number(e);if(t!=null)return{[`grid-${dl(n)}`]:`span ${t}/span ${t}`}},{autocomplete:["grid-(row|col)-span-<num>","(row|col)-span-<num>"]}],[/^(?:grid-)?(row|col)-start-(.+)$/,([,n,e])=>({[`grid-${dl(n)}-start`]:H.bracket.cssvar(e)??e})],[/^(?:grid-)?(row|col)-end-(.+)$/,([,n,e])=>({[`grid-${dl(n)}-end`]:H.bracket.cssvar(e)??e}),{autocomplete:["grid-(row|col)-(start|end)-<num>"]}],[/^(?:grid-)?auto-(rows|cols)-(.+)$/,([,n,e],{theme:t})=>({[`grid-auto-${dl(n)}`]:N9e(n,t,e)}),{autocomplete:["grid-auto-(rows|cols)-<num>"]}],[/^(?:grid-auto-flow|auto-flow|grid-flow)-(.+)$/,([,n])=>({"grid-auto-flow":H.bracket.cssvar(n)})],[/^(?:grid-auto-flow|auto-flow|grid-flow)-(row|col|dense|row-dense|col-dense)$/,([,n])=>({"grid-auto-flow":dl(n).replace("-"," ")}),{autocomplete:["(grid-auto-flow|auto-flow|grid-flow)-(row|col|dense|row-dense|col-dense)"]}],[/^grid-(rows|cols)-(.+)$/,([,n,e],{theme:t})=>{var r;return{[`grid-template-${dl(n)}`]:((r=t[`gridTemplate${e3(n)}`])==null?void 0:r[e])??H.bracket.cssvar(e)}}],[/^grid-(rows|cols)-minmax-([\w.-]+)$/,([,n,e])=>({[`grid-template-${dl(n)}`]:`repeat(auto-fill,minmax(${e},1fr))`})],[/^grid-(rows|cols)-(\d+)$/,([,n,e])=>({[`grid-template-${dl(n)}`]:`repeat(${e},minmax(0,1fr))`}),{autocomplete:["grid-(rows|cols)-<num>","grid-(rows|cols)-none"]}],[/^grid-area(s)?-(.+)$/,([,n,e])=>n!=null?{"grid-template-areas":H.cssvar(e)??e.split("-").map(t=>`"${H.bracket(t)}"`).join(" ")}:{"grid-area":H.bracket.cssvar(e)}],["grid-rows-none",{"grid-template-rows":"none"}],["grid-cols-none",{"grid-template-columns":"none"}]],F9e={h:"height",w:"width",inline:"inline-size",block:"block-size"};function rv(n,e){return`${n||""}${F9e[e]}`}function uH(n,e,t,r){var o;const i=rv(n,e).replace(/-(\w)/g,(a,l)=>l.toUpperCase()),s=(o=t[i])==null?void 0:o[r];if(s!=null)return s;switch(r){case"fit":case"max":case"min":return`${r}-content`}return H.bracket.cssvar.global.auto.fraction.rem(r)}const gle=[[/^(?:size-)?(min-|max-)?([wh])-?(.+)$/,([,n,e,t],{theme:r})=>({[rv(n,e)]:uH(n,e,r,t)})],[/^(?:size-)?(min-|max-)?(block|inline)-(.+)$/,([,n,e,t],{theme:r})=>({[rv(n,e)]:uH(n,e,r,t)}),{autocomplete:["(w|h)-$width|height|maxWidth|maxHeight|minWidth|minHeight|inlineSize|blockSize|maxInlineSize|maxBlockSize|minInlineSize|minBlockSize","(block|inline)-$width|height|maxWidth|maxHeight|minWidth|minHeight|inlineSize|blockSize|maxInlineSize|maxBlockSize|minInlineSize|minBlockSize","(max|min)-(w|h|block|inline)","(max|min)-(w|h|block|inline)-$width|height|maxWidth|maxHeight|minWidth|minHeight|inlineSize|blockSize|maxInlineSize|maxBlockSize|minInlineSize|minBlockSize"]}],[/^(?:size-)?(min-|max-)?(h)-screen-(.+)$/,([,n,e,t],r)=>{var i;return{[rv(n,e)]:(i=k9e(r))==null?void 0:i[t]}}],[/^(?:size-)?(min-|max-)?(w)-screen-(.+)$/,([,n,e,t],r)=>{var i;return{[rv(n,e)]:(i=L_(r))==null?void 0:i[t]}},{autocomplete:["(w|h)-screen","(min|max)-(w|h)-screen","h-screen-$verticalBreakpoints","(min|max)-h-screen-$verticalBreakpoints","w-screen-$breakpoints","(min|max)-w-screen-$breakpoints"]}]];function L9e(n){if(/^\d+\/\d+$/.test(n))return n;switch(n){case"square":return"1/1";case"video":return"16/9"}return H.bracket.cssvar.global.auto.number(n)}const yle=[[/^(?:size-)?aspect-(?:ratio-)?(.+)$/,([,n])=>({"aspect-ratio":L9e(n)}),{autocomplete:["aspect-(square|video|ratio)","aspect-ratio-(square|video)"]}]],vle=[[/^pa?()-?(-?.+)$/,gn("padding"),{autocomplete:["(m|p)<num>","(m|p)-<num>"]}],[/^p-?xy()()$/,gn("padding"),{autocomplete:"(m|p)-(xy)"}],[/^p-?([xy])(?:-?(-?.+))?$/,gn("padding")],[/^p-?([rltbse])(?:-?(-?.+))?$/,gn("padding"),{autocomplete:"(m|p)<directions>-<num>"}],[/^p-(block|inline)(?:-(-?.+))?$/,gn("padding"),{autocomplete:"(m|p)-(block|inline)-<num>"}],[/^p-?([bi][se])(?:-?(-?.+))?$/,gn("padding"),{autocomplete:"(m|p)-(bs|be|is|ie)-<num>"}]],ble=[[/^ma?()-?(-?.+)$/,gn("margin")],[/^m-?xy()()$/,gn("margin")],[/^m-?([xy])(?:-?(-?.+))?$/,gn("margin")],[/^m-?([rltbse])(?:-?(-?.+))?$/,gn("margin")],[/^m-(block|inline)(?:-(-?.+))?$/,gn("margin")],[/^m-?([bi][se])(?:-?(-?.+))?$/,gn("margin")]],z9e={backface:"backface-visibility",break:"word-break",case:"text-transform",content:"align-content",fw:"font-weight",items:"align-items",justify:"justify-content",select:"user-select",self:"align-self",vertical:"vertical-align",visible:"visibility",whitespace:"white-space",ws:"white-space"},kle=[[/^(.+?)-(\$.+)$/,([,n,e])=>{const t=z9e[n];if(t)return{[t]:H.cssvar(e)}}]],xle=[[/^\[(--(\w|\\\W)+|[\w-]+):(("[^\s"]+?"|'[^\s']+?'|`[^\s`]+?`|[^\s:'"`;{}]+?)+)\]$/,([n,e,,t])=>{if(!B9e(n.slice(1,-1)))return{[e]:H.bracket(`[${t}]`)}}]];function B9e(n){if(!n.includes("://"))return!1;try{return new URL(n).host!==""}catch{return!1}}const Sle=[[/^(where|\?)$/,(n,{constructCSS:e,generator:t})=>{if(t.userConfig.envMode==="dev")return`@keyframes __un_qm{0%{box-shadow:inset 4px 4px #ff1e90, inset -4px -4px #ff1e90}100%{box-shadow:inset 8px 8px #3399ff, inset -8px -8px #3399ff}}
${e({animation:"__un_qm 0.5s ease-in-out alternate infinite"})}`}]],wle=[[/^fill-(.+)$/,gr("fill","fill"),{autocomplete:"fill-$colors"}],[/^fill-op(?:acity)?-?(.+)$/,([,n])=>({"--un-fill-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"fill-(op|opacity)-<percent>"}],["fill-none",{fill:"none"}],[/^stroke-(?:width-|size-)?(.+)$/,([,n],{theme:e})=>{var t;return{"stroke-width":((t=e.lineWidth)==null?void 0:t[n])??H.bracket.cssvar.fraction.px.number(n)}},{autocomplete:["stroke-width-$lineWidth","stroke-size-$lineWidth"]}],[/^stroke-dash-(.+)$/,([,n])=>({"stroke-dasharray":H.bracket.cssvar.number(n)}),{autocomplete:"stroke-dash-<num>"}],[/^stroke-offset-(.+)$/,([,n],{theme:e})=>{var t;return{"stroke-dashoffset":((t=e.lineWidth)==null?void 0:t[n])??H.bracket.cssvar.px.numberWithUnit(n)}},{autocomplete:"stroke-offset-$lineWidth"}],[/^stroke-(.+)$/,gr("stroke","stroke"),{autocomplete:"stroke-$colors"}],[/^stroke-op(?:acity)?-?(.+)$/,([,n])=>({"--un-stroke-opacity":H.bracket.percent.cssvar(n)}),{autocomplete:"stroke-(op|opacity)-<percent>"}],["stroke-cap-square",{"stroke-linecap":"square"}],["stroke-cap-round",{"stroke-linecap":"round"}],["stroke-cap-auto",{"stroke-linecap":"butt"}],["stroke-join-arcs",{"stroke-linejoin":"arcs"}],["stroke-join-bevel",{"stroke-linejoin":"bevel"}],["stroke-join-clip",{"stroke-linejoin":"miter-clip"}],["stroke-join-round",{"stroke-linejoin":"round"}],["stroke-join-auto",{"stroke-linejoin":"miter"}],["stroke-none",{stroke:"none"}]],j9e=[kle,xle,vle,ble,zae,Eae,Mae,I9e,wle,$ae,Wae,Gae,cle,ule,dle,Yae,Tae,fle,hle,Xae,kae,Cae,Zae,ele,ile,nle,lle,mle,ple,Iae,gle,yle,jae,Bae,qae,Kae,bae,Uae,Hae,Jae,Aae,xae,Sae,Rae,Uz,Hz,Oae,Pae,Dae,Nae,Fae,Lae,_ae,ole,wae,ale,Vae,Qae,Sle].flat(1),$le={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},light:{50:"#fdfdfd",100:"#fcfcfc",200:"#fafafa",300:"#f8f9fa",400:"#f6f6f6",500:"#f2f2f2",600:"#f1f3f5",700:"#e9ecef",800:"#dee2e6",900:"#dde1e3",950:"#d8dcdf"},dark:{50:"#4a4a4a",100:"#3c3c3c",200:"#323232",300:"#2d2d2d",400:"#222222",500:"#1f1f1f",600:"#1c1c1e",700:"#1b1b1b",800:"#181818",900:"#0f0f0f",950:"#080808"},get lightblue(){return this.sky},get lightBlue(){return this.sky},get warmgray(){return this.stone},get warmGray(){return this.stone},get truegray(){return this.neutral},get trueGray(){return this.neutral},get coolgray(){return this.gray},get coolGray(){return this.gray},get bluegray(){return this.slate},get blueGray(){return this.slate}};Object.values($le).forEach(n=>{typeof n!="string"&&n!==void 0&&(n.DEFAULT=n.DEFAULT||n[400],Object.keys(n).forEach(e=>{const t=+e/100;t===Math.round(t)&&(n[t]=n[e])}))});const V9e={sans:["ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'].join(","),serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"].join(","),mono:["ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"].join(",")},q9e={xs:["0.75rem","1rem"],sm:["0.875rem","1.25rem"],base:["1rem","1.5rem"],lg:["1.125rem","1.75rem"],xl:["1.25rem","1.75rem"],"2xl":["1.5rem","2rem"],"3xl":["1.875rem","2.25rem"],"4xl":["2.25rem","2.5rem"],"5xl":["3rem","1"],"6xl":["3.75rem","1"],"7xl":["4.5rem","1"],"8xl":["6rem","1"],"9xl":["8rem","1"]},K9e={DEFAULT:"1.5rem",xs:"0.5rem",sm:"1rem",md:"1.5rem",lg:"2rem",xl:"2.5rem","2xl":"3rem","3xl":"4rem"},U9e={DEFAULT:"1.5rem",none:"0",sm:"thin",md:"medium",lg:"thick"},H9e={DEFAULT:["0 0 1px rgba(0,0,0,0.2)","0 0 1px rgba(1,0,5,0.1)"],none:"0 0 rgba(0,0,0,0)",sm:"1px 1px 3px rgba(36,37,47,0.25)",md:["0 1px 2px rgba(30,29,39,0.19)","1px 2px 4px rgba(54,64,147,0.18)"],lg:["3px 3px 6px rgba(0,0,0,0.26)","0 0 5px rgba(15,3,86,0.22)"],xl:["1px 1px 3px rgba(0,0,0,0.29)","2px 4px 7px rgba(73,64,125,0.35)"]},W9e={none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2"},Ele={tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},G9e={thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},J9e=Ele,Cle={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},Q9e={...Cle},Y9e={DEFAULT:"1px",none:"0"},X9e={DEFAULT:"1rem",none:"0",xs:"0.75rem",sm:"0.875rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"},Z9e={DEFAULT:"150ms",none:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},eje={DEFAULT:"0.25rem",none:"0",sm:"0.125rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},tje={DEFAULT:["var(--un-shadow-inset) 0 1px 3px 0 rgba(0,0,0,0.1)","var(--un-shadow-inset) 0 1px 2px -1px rgba(0,0,0,0.1)"],none:"0 0 rgba(0,0,0,0)",sm:"var(--un-shadow-inset) 0 1px 2px 0 rgba(0,0,0,0.05)",md:["var(--un-shadow-inset) 0 4px 6px -1px rgba(0,0,0,0.1)","var(--un-shadow-inset) 0 2px 4px -2px rgba(0,0,0,0.1)"],lg:["var(--un-shadow-inset) 0 10px 15px -3px rgba(0,0,0,0.1)","var(--un-shadow-inset) 0 4px 6px -4px rgba(0,0,0,0.1)"],xl:["var(--un-shadow-inset) 0 20px 25px -5px rgba(0,0,0,0.1)","var(--un-shadow-inset) 0 8px 10px -6px rgba(0,0,0,0.1)"],"2xl":"var(--un-shadow-inset) 0 25px 50px -12px rgba(0,0,0,0.25)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.05)"},nje={DEFAULT:"cubic-bezier(0.4, 0, 0.2, 1)",linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)","in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},rje={DEFAULT:"1px",none:"0"},ije={DEFAULT:"8px",0:"0",sm:"4px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},sje={DEFAULT:["0 1px 2px rgba(0,0,0,0.1)","0 1px 1px rgba(0,0,0,0.06)"],sm:"0 1px 1px rgba(0,0,0,0.05)",md:["0 4px 3px rgba(0,0,0,0.07)","0 2px 2px rgba(0,0,0,0.06)"],lg:["0 10px 8px rgba(0,0,0,0.04)","0 4px 3px rgba(0,0,0,0.1)"],xl:["0 20px 13px rgba(0,0,0,0.03)","0 8px 5px rgba(0,0,0,0.08)"],"2xl":"0 25px 25px rgba(0,0,0,0.15)",none:"0 0 rgba(0,0,0,0)"},t1={xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem",prose:"65ch"},dH={auto:"auto",...t1,screen:"100vw"},_x={none:"none",...t1,screen:"100vw"},fH={auto:"auto",...t1,screen:"100vh"},Ax={none:"none",...t1,screen:"100vh"},oje=Object.fromEntries(Object.entries(t1).map(([n,e])=>[n,`(min-width: ${e})`])),aje={...sle,...rle,...tle},Mle={width:dH,height:fH,maxWidth:_x,maxHeight:Ax,minWidth:_x,minHeight:Ax,inlineSize:dH,blockSize:fH,maxInlineSize:_x,maxBlockSize:Ax,minInlineSize:_x,minBlockSize:Ax,colors:$le,fontFamily:V9e,fontSize:q9e,fontWeight:G9e,breakpoints:Cle,verticalBreakpoints:Q9e,borderRadius:eje,lineHeight:W9e,letterSpacing:Ele,wordSpacing:J9e,boxShadow:tje,textIndent:K9e,textShadow:H9e,textStrokeWidth:U9e,blur:ije,dropShadow:sje,easing:nje,lineWidth:Y9e,spacing:X9e,duration:Z9e,ringWidth:rje,preflightBase:aje,containers:oje};function $d(n,e){let t;return{name:n,match(r,i){t||(t=new RegExp(`^${ik(n)}(?:${i.generator.config.separators.join("|")})`));const s=r.match(t);if(s)return{matcher:r.slice(s[0].length),handle:(o,a)=>a({...o,...e(o)})}},autocomplete:`${n}:`}}function Qa(n,e){let t;return{name:n,match(r,i){t||(t=new RegExp(`^${ik(n)}(?:${i.generator.config.separators.join("|")})`));const s=r.match(t);if(s)return{matcher:r.slice(s[0].length),handle:(o,a)=>a({...o,parent:`${o.parent?`${o.parent} $$ `:""}${e}`})}},autocomplete:`${n}:`}}function n1(n,e,t){if(e.startsWith(`${n}[`)){const[r,i]=qz(e.slice(n.length),"[","]")??[];if(r&&i){for(const s of t)if(i.startsWith(s))return[r,i.slice(s.length),s];return[r,i,""]}}}function jd(n,e,t){if(e.startsWith(n)){const r=n1(n,e,t);if(r){const[i="",s=r[1]]=jd("/",r[1],t)??[];return[r[0],s,i]}for(const i of t.filter(s=>s!=="/")){const s=e.indexOf(i,n.length);if(s!==-1){const o=e.indexOf("/",n.length),a=o===-1||s<=o;return[e.slice(n.length,a?s:o),e.slice(s+i.length),a?"":e.slice(o+1,s)]}}}}const lje={name:"aria",match(n,e){var r;const t=jd("aria-",n,e.generator.config.separators);if(t){const[i,s]=t,o=H.bracket(i)??((r=e.theme.aria)==null?void 0:r[i])??"";if(o)return{matcher:s,selector:a=>`${a}[aria-${o}]`}}}};function hH(n){var i;const e=((i=n.match(/^-?[0-9]+\.?[0-9]*/))==null?void 0:i[0])||"",t=n.slice(e.length),r=Number.parseFloat(e)-.1;return Number.isNaN(r)?n:`${r}${t}`}function cje(){const n={};return{name:"breakpoints",match(e,t){const r=Object.entries(L_(t)??{}).map(([i,s],o)=>[i,s,o]);for(const[i,s,o]of r){n[i]||(n[i]=new RegExp(`^((?:([al]t-|[<~]))?${i}(?:${t.generator.config.separators.join("|")}))`));const a=e.match(n[i]);if(!a)continue;const[,l]=a,c=e.slice(l.length);if(c==="container")continue;const u=l.startsWith("lt-")||l.startsWith("<"),d=l.startsWith("at-")||l.startsWith("~");let f=1e3;return u?(f-=o+1,{matcher:c,handle:(h,p)=>p({...h,parent:`${h.parent?`${h.parent} $$ `:""}@media (max-width: ${hH(s)})`,parentOrder:f})}):(f+=o+1,d&&o<r.length-1?{matcher:c,handle:(h,p)=>p({...h,parent:`${h.parent?`${h.parent} $$ `:""}@media (min-width: ${s}) and (max-width: ${hH(r[o+1][1])})`,parentOrder:f})}:{matcher:c,handle:(h,p)=>p({...h,parent:`${h.parent?`${h.parent} $$ `:""}@media (min-width: ${s})`,parentOrder:f})})}},multiPass:!0,autocomplete:"(at-|lt-|)$breakpoints:"}}function Ly(n,e){return{name:`combinator:${n}`,match(t,r){if(!t.startsWith(n))return;const i=r.generator.config.separators;let s=n1(`${n}-`,t,i);if(!s){for(const a of i)if(t.startsWith(`${n}${a}`)){s=["",t.slice(n.length+a.length)];break}if(!s)return}let o=H.bracket(s[0])??"";return o===""&&(o="*"),{matcher:s[1],selector:a=>`${a}${e}${o}`}},multiPass:!0}}const uje=[Ly("all"," "),Ly("children",">"),Ly("next","+"),Ly("sibling","+"),Ly("siblings","~")],dje={name:"@",match(n,e){var r;if(n.startsWith("@container"))return;const t=jd("@",n,e.generator.config.separators);if(t){const[i,s,o]=t,a=H.bracket(i);let l;if(a){const c=H.numberWithUnit(a);c&&(l=`(min-width: ${c})`)}else l=((r=e.theme.containers)==null?void 0:r[i])??"";if(l)return e1("The container query variant is experimental and may not follow semver."),{matcher:s,handle:(c,u)=>u({...c,parent:`${c.parent?`${c.parent} $$ `:""}@container${o?` ${o} `:" "}${l}`})}}},multiPass:!0};function fje(n={}){if((n==null?void 0:n.dark)==="class"||typeof n.dark=="object"){const{dark:e=".dark",light:t=".light"}=typeof n.dark=="string"?{}:n.dark;return[$d("dark",r=>({prefix:`${e} $$ ${r.prefix}`})),$d("light",r=>({prefix:`${t} $$ ${r.prefix}`}))]}return[Qa("dark","@media (prefers-color-scheme: dark)"),Qa("light","@media (prefers-color-scheme: light)")]}const hje={name:"data",match(n,e){var r;const t=jd("data-",n,e.generator.config.separators);if(t){const[i,s]=t,o=H.bracket(i)??((r=e.theme.data)==null?void 0:r[i])??"";if(o)return{matcher:s,selector:a=>`${a}[data-${o}]`}}}},pje=[$d("rtl",n=>({prefix:`[dir="rtl"] $$ ${n.prefix}`})),$d("ltr",n=>({prefix:`[dir="ltr"] $$ ${n.prefix}`}))],mje={name:"selector",match(n,e){const t=n1("selector-",n,e.generator.config.separators);if(t){const[r,i]=t,s=H.bracket(r);if(s)return{matcher:i,selector:()=>s}}}},gje={name:"layer",match(n,e){const t=jd("layer-",n,e.generator.config.separators);if(t){const[r,i]=t,s=H.bracket(r)??r;if(s)return{matcher:i,handle:(o,a)=>a({...o,parent:`${o.parent?`${o.parent} $$ `:""}@layer ${s}`})}}}},yje={name:"uno-layer",match(n,e){const t=jd("uno-layer-",n,e.generator.config.separators);if(t){const[r,i]=t,s=H.bracket(r)??r;if(s)return{matcher:i,layer:s}}}},vje={name:"scope",match(n,e){const t=n1("scope-",n,e.generator.config.separators);if(t){const[r,i]=t,s=H.bracket(r);if(s)return{matcher:i,selector:o=>`${s} $$ ${o}`}}}},bje={name:"variables",match(n,e){if(!n.startsWith("["))return;const[t,r]=qz(n,"[","]")??[];if(!(t&&r))return;let i;for(const a of e.generator.config.separators)if(r.startsWith(a)){i=r.slice(a.length);break}if(i==null)return;const s=H.bracket(t)??"",o=s.startsWith("@");if(o||s.includes("&"))return{matcher:i,handle(a,l){const c=o?{parent:`${a.parent?`${a.parent} $$ `:""}${s}`}:{selector:s.replace(/&/g,a.selector)};return l({...a,...c})}}},multiPass:!0},pH=/[0-9.]+(?:[a-z]+|%)?/,kje=[/opacity|color|flex/];function xje(n){const e=n.match(/^(calc|clamp|max|min)\s*(\(.*)/);if(e){const[t,r]=mae(e[2],"(",")"," ")??[];if(t)return`calc(${e[1]}${t} * -1)${r?` ${r}`:""}`}}const Sje={name:"negative",match(n){if(n.startsWith("-"))return{matcher:n.slice(1),body:e=>{if(e.find(r=>r[0]===b9e))return;let t=!1;return e.forEach(r=>{var o;const i=(o=r[1])==null?void 0:o.toString();if(!i||i==="0"||kje.some(a=>r[0].match(a)))return;const s=xje(i);s?(r[1]=s,t=!0):pH.test(i)&&(r[1]=i.replace(pH,a=>`-${a}`),t=!0)}),t?e:[]}}}};function wje(){let n;return{name:"important",match(e,t){n||(n=new RegExp(`^(important(?:${t.generator.config.separators.join("|")})|!)`));let r;const i=e.match(n);if(i?r=e.slice(i[0].length):e.endsWith("!")&&(r=e.slice(0,-1)),r)return{matcher:r,body:s=>(s.forEach(o=>{o[1]&&(o[1]+=" !important")}),s)}}}}const $je=Qa("print","@media print"),Eje={name:"media",match(n,e){var r;const t=jd("media-",n,e.generator.config.separators);if(t){const[i,s]=t;let o=H.bracket(i)??"";if(o===""&&(o=((r=e.theme.media)==null?void 0:r[i])??""),o)return{matcher:s,handle:(a,l)=>l({...a,parent:`${a.parent?`${a.parent} $$ `:""}@media ${o}`})}}},multiPass:!0},Cje={name:"supports",match(n,e){var r;const t=jd("supports-",n,e.generator.config.separators);if(t){const[i,s]=t;let o=H.bracket(i)??"";if(o===""&&(o=((r=e.theme.supports)==null?void 0:r[i])??""),o)return{matcher:s,handle:(a,l)=>l({...a,parent:`${a.parent?`${a.parent} $$ `:""}@supports ${o}`})}}},multiPass:!0},E0=Object.fromEntries([["first-letter","::first-letter"],["first-line","::first-line"],"any-link","link","visited","target",["open","[open]"],"default","checked","indeterminate","placeholder-shown","autofill","optional","required","valid","invalid","in-range","out-of-range","read-only","read-write","empty","focus-within","hover","focus","focus-visible","active","enabled","disabled","root","empty",["even-of-type",":nth-of-type(even)"],["even",":nth-child(even)"],["odd-of-type",":nth-of-type(odd)"],["odd",":nth-child(odd)"],"first-of-type",["first",":first-child"],"last-of-type",["last",":last-child"],"only-child","only-of-type",["backdrop-element","::backdrop"],["placeholder","::placeholder"],["before","::before"],["after","::after"],["selection","::selection"],["marker","::marker"],["file","::file-selector-button"]].map(n=>Array.isArray(n)?n:[n,`:${n}`])),Tle=Object.keys(E0),C0=Object.fromEntries([["backdrop","::backdrop"]].map(n=>Array.isArray(n)?n:[n,`:${n}`])),_le=Object.keys(C0),Mje=["not","is","where","has"],t3=Object.entries(E0).filter(([,n])=>!n.startsWith("::")).map(([n])=>n).sort((n,e)=>e.length-n.length).join("|"),n3=Object.entries(C0).filter(([,n])=>!n.startsWith("::")).map(([n])=>n).sort((n,e)=>e.length-n.length).join("|"),Kf=Mje.join("|");function Ix(n,e,t){const r=new RegExp(`^(${ik(e)}:)(\\S+)${ik(t)}\\1`);let i,s,o,a;const l=d=>{var k;const f=n1(`${n}-`,d,[]);if(!f)return;const[h,p]=f,m=H.bracket(h);if(m==null)return;const g=((k=p.split(i,1))==null?void 0:k[0])??"",y=`${e}${Av(g)}`;return[g,d.slice(d.length-(p.length-g.length-1)),m.includes("&")?m.replace(/&/g,y):`${y}${m}`]},c=d=>{const f=d.match(s)||d.match(o);if(!f)return;const[h,p,m]=f,g=f[3]??"";let y=E0[m]||C0[m]||`:${m}`;return p&&(y=`:${p}(${y})`),[g,d.slice(h.length),`${e}${Av(g)}${y}`,m]},u=d=>{const f=d.match(a);if(!f)return;const[h,p,m]=f,g=f[3]??"",y=`:${p}(${m})`;return[g,d.slice(h.length),`${e}${Av(g)}${y}`]};return{name:`pseudo:${n}`,match(d,f){if(i&&s&&o||(i=new RegExp(`(?:${f.generator.config.separators.join("|")})`),s=new RegExp(`^${n}-(?:(?:(${Kf})-)?(${t3}))(?:(/\\w+))?(?:${f.generator.config.separators.join("|")})`),o=new RegExp(`^${n}-(?:(?:(${Kf})-)?(${n3}))(?:(/\\w+))?(?:${f.generator.config.separators.filter(k=>k!=="-").join("|")})`),a=new RegExp(`^${n}-(?:(${Kf})-)?\\[(.+)\\](?:(/\\w+))?(?:${f.generator.config.separators.filter(k=>k!=="-").join("|")})`)),!d.startsWith(n))return;const h=l(d)||c(d)||u(d);if(!h)return;const[p,m,g,y=""]=h;return p!==""&&e1("The labeled variant is experimental and may not follow semver."),{matcher:m,handle:(k,b)=>b({...k,prefix:`${g}${t}${k.prefix}`.replace(r,"$1$2:"),sort:Tle.indexOf(y)??_le.indexOf(y)})}},multiPass:!0}}const Tje=["::-webkit-resizer","::-webkit-scrollbar","::-webkit-scrollbar-button","::-webkit-scrollbar-corner","::-webkit-scrollbar-thumb","::-webkit-scrollbar-track","::-webkit-scrollbar-track-piece","::file-selector-button"],mH=Object.entries(E0).map(([n])=>n).sort((n,e)=>e.length-n.length).join("|"),gH=Object.entries(C0).map(([n])=>n).sort((n,e)=>e.length-n.length).join("|");function _je(){let n,e;return{name:"pseudo",match(t,r){n&&n||(n=new RegExp(`^(${mH})(?:${r.generator.config.separators.join("|")})`),e=new RegExp(`^(${gH})(?:${r.generator.config.separators.filter(s=>s!=="-").join("|")})`));const i=t.match(n)||t.match(e);if(i){const s=E0[i[1]]||C0[i[1]]||`:${i[1]}`;let o=Tle.indexOf(i[1]);return o===-1&&(o=_le.indexOf(i[1])),o===-1&&(o=void 0),{matcher:t.slice(i[0].length),handle:(a,l)=>{const c=s.startsWith("::")&&!Tje.includes(s)?{pseudo:`${a.pseudo}${s}`}:{selector:`${a.selector}${s}`};return l({...a,...c,sort:o,noMerge:!0})}}}},multiPass:!0,autocomplete:`(${mH}|${gH}):`}}function Aje(){let n,e,t;return{match(r,i){n&&e||(n=new RegExp(`^(${Kf})-(${t3})(?:${i.generator.config.separators.join("|")})`),e=new RegExp(`^(${Kf})-(${n3})(?:${i.generator.config.separators.filter(o=>o!=="-").join("|")})`),t=new RegExp(`^(${Kf})-(\\[.+\\])(?:${i.generator.config.separators.filter(o=>o!=="-").join("|")})`));const s=r.match(n)||r.match(e)||r.match(t);if(s){const o=s[1],l=qz(s[2],"[","]")?H.bracket(s[2]):E0[s[2]]||C0[s[2]]||`:${s[2]}`;return{matcher:r.slice(s[0].length),selector:c=>`${c}:${o}(${l})`}}},multiPass:!0,autocomplete:`(${Kf})-(${t3}|${n3}):`}}function Ije(n={}){const e=!!(n!=null&&n.attributifyPseudo);return[Ix("group",e?'[group=""]':".group"," "),Ix("peer",e?'[peer=""]':".peer","~"),Ix("parent",e?'[parent=""]':".parent",">"),Ix("previous",e?'[previous=""]':".previous","+")]}const Rje=/(part-\[(.+)]:)(.+)/,Oje={match(n){const e=n.match(Rje);if(e){const t=`part(${e[2]})`;return{matcher:n.slice(e[1].length),selector:r=>`${r}::${t}`}}},multiPass:!0};function Ale(n){return[lje,hje,gje,mje,yje,Sje,wje(),Cje,$je,Eje,cje(),...uje,_je(),Aje(),...Ije(n),Oje,...fje(n),...pje,vje,dje,bje]}const Pje=[{layer:"preflights",getCSS(n){if(n.theme.preflightBase){const e=Pw(Object.entries(n.theme.preflightBase));return Er(n.theme.preflightRoot??["*,::before,::after","::backdrop"]).map(r=>`${r}{${e}}`).join("")}}}];function Dje(n={}){return n.dark=n.dark??"class",n.attributifyPseudo=n.attributifyPseudo??!1,n.preflight=n.preflight??!0,n.variablePrefix=n.variablePrefix??"un-",{name:"@unocss/preset-mini",theme:Mle,rules:j9e,variants:Ale(n),options:n,prefix:n.prefix,postprocess:Nje(n.variablePrefix),preflights:n.preflight?Fje(Pje,n.variablePrefix):[],extractorDefault:n.arbitraryVariants===!1?void 0:Y7e}}function Nje(n){if(n!=="un-")return e=>{e.entries.forEach(t=>{t[0]=t[0].replace(/^--un-/,`--${n}`),typeof t[1]=="string"&&(t[1]=t[1].replace(/var\(--un-/g,`var(--${n}`))})}}function Fje(n,e){return e!=="un-"?n.map(t=>({...t,getCSS:(()=>async r=>{const i=await t.getCSS(r);if(i)return i.replace(/--un-/g,`--${e}`)})()})):n}const Lje=[[/^(?:animate-)?keyframes-(.+)$/,([,n],{theme:e})=>{var r,i;const t=(i=(r=e.animation)==null?void 0:r.keyframes)==null?void 0:i[n];if(t)return[`@keyframes ${n}${t}`,{animation:n}]},{autocomplete:["animate-keyframes-$animation.keyframes","keyframes-$animation.keyframes"]}],[/^animate-(.+)$/,([,n],{theme:e})=>{var r,i,s,o,a,l,c,u,d,f;const t=(i=(r=e.animation)==null?void 0:r.keyframes)==null?void 0:i[n];if(t){const h=((o=(s=e.animation)==null?void 0:s.durations)==null?void 0:o[n])??"1s",p=((l=(a=e.animation)==null?void 0:a.timingFns)==null?void 0:l[n])??"linear",m=((u=(c=e.animation)==null?void 0:c.counts)==null?void 0:u[n])??1,g=(f=(d=e.animation)==null?void 0:d.properties)==null?void 0:f[n];return[`@keyframes ${n}${t}`,{animation:`${n} ${h} ${p} ${m}`,...g}]}return{animation:H.bracket.cssvar(n)}},{autocomplete:"animate-$animation.keyframes"}],[/^animate-name-(.+)/,([,n])=>({"animation-name":H.bracket.cssvar(n)??n})],[/^animate-duration-(.+)$/,([,n],{theme:e})=>{var t;return{"animation-duration":((t=e.duration)==null?void 0:t[n||"DEFAULT"])??H.bracket.cssvar.time(n)}},{autocomplete:["animate-duration","animate-duration-$duration"]}],[/^animate-delay-(.+)$/,([,n],{theme:e})=>{var t;return{"animation-delay":((t=e.duration)==null?void 0:t[n||"DEFAULT"])??H.bracket.cssvar.time(n)}},{autocomplete:["animate-delay","animate-delay-$duration"]}],[/^animate-ease(?:-(.+))?$/,([,n],{theme:e})=>{var t;return{"animation-timing-function":((t=e.easing)==null?void 0:t[n||"DEFAULT"])??H.bracket.cssvar(n)}},{autocomplete:["animate-ease","animate-ease-$easing"]}],[/^animate-(fill-mode-|fill-|mode-)?(.+)$/,([,n,e])=>["none","forwards","backwards","both",n?On:[]].includes(e)?{"animation-fill-mode":e}:void 0,{autocomplete:["animate-(fill|mode|fill-mode)","animate-(fill|mode|fill-mode)-(none|forwards|backwards|both|inherit|initial|revert|revert-layer|unset)","animate-(none|forwards|backwards|both|inherit|initial|revert|revert-layer|unset)"]}],[/^animate-(direction-)?(.+)$/,([,n,e])=>["normal","reverse","alternate","alternate-reverse",n?On:[]].includes(e)?{"animation-direction":e}:void 0,{autocomplete:["animate-direction","animate-direction-(normal|reverse|alternate|alternate-reverse|inherit|initial|revert|revert-layer|unset)","animate-(normal|reverse|alternate|alternate-reverse|inherit|initial|revert|revert-layer|unset)"]}],[/^animate-(?:iteration-count-|iteration-|count-)(.+)$/,([,n])=>({"animation-iteration-count":H.bracket.cssvar(n)??n.replace(/\-/g,",")}),{autocomplete:["animate-(iteration|count|iteration-count)","animate-(iteration|count|iteration-count)-<num>"]}],[/^animate-(play-state-|play-|state-)?(.+)$/,([,n,e])=>["paused","running",n?On:[]].includes(e)?{"animation-play-state":e}:void 0,{autocomplete:["animate-(play|state|play-state)","animate-(play|state|play-state)-(paused|running|inherit|initial|revert|revert-layer|unset)","animate-(paused|running|inherit|initial|revert|revert-layer|unset)"]}],["animate-none",{animation:"none"}],...Je("animate","animation")];function yH(n){return n?Oo(n,0):"rgba(255,255,255,0)"}function zje(n,e,t,r){return e?r!=null?Oo(e,r):Oo(e,`var(--un-${n}-opacity, ${Z$(e)})`):Oo(t,r)}function LI(){return([,n,e],{theme:t})=>{const r=F_(e,t);if(!r)return;const{alpha:i,color:s,cssColor:o}=r;if(!s)return;const a=zje(n,o,s,i);switch(n){case"from":return{"--un-gradient-from-position":"0%","--un-gradient-from":`${a} var(--un-gradient-from-position)`,"--un-gradient-to-position":"100%","--un-gradient-to":`${yH(o)} var(--un-gradient-to-position)`,"--un-gradient-stops":"var(--un-gradient-from), var(--un-gradient-to)"};case"via":return{"--un-gradient-via-position":"50%","--un-gradient-to":yH(o),"--un-gradient-stops":`var(--un-gradient-from), ${a} var(--un-gradient-via-position), var(--un-gradient-to)`};case"to":return{"--un-gradient-to-position":"100%","--un-gradient-to":`${a} var(--un-gradient-to-position)`}}}}function Bje(){return([,n,e])=>({[`--un-gradient-${n}-position`]:`${Number(H.bracket.cssvar.percent(e))*100}%`})}const jje=/^\[url\(.+\)\]$/,Vje=/^\[length:.+\]$/,qje=/^\[position:.+\]$/,Kje=[[/^bg-(.+)$/,([,n])=>{if(jje.test(n))return{"--un-url":H.bracket(n),"background-image":"var(--un-url)"};if(Vje.test(n)&&H.bracketOfLength(n)!=null)return{"background-size":H.bracketOfLength(n).split(" ").map(e=>H.fraction.auto.px.cssvar(e)??e).join(" ")};if(qje.test(n)&&H.bracketOfPosition(n)!=null)return{"background-position":H.bracketOfPosition(n).split(" ").map(e=>H.position.fraction.auto.px.cssvar(e)??e).join(" ")}}],[/^bg-gradient-(.+)$/,([,n])=>({"--un-gradient":H.bracket(n)}),{autocomplete:["bg-gradient","bg-gradient-(from|to|via)","bg-gradient-(from|to|via)-$colors","bg-gradient-(from|to|via)-(op|opacity)","bg-gradient-(from|to|via)-(op|opacity)-<percent>"]}],[/^(?:bg-gradient-)?stops-(\[.+\])$/,([,n])=>({"--un-gradient-stops":H.bracket(n)})],[/^(?:bg-gradient-)?(from)-(.+)$/,LI()],[/^(?:bg-gradient-)?(via)-(.+)$/,LI()],[/^(?:bg-gradient-)?(to)-(.+)$/,LI()],[/^(?:bg-gradient-)?(from|via|to)-op(?:acity)?-?(.+)$/,([,n,e])=>({[`--un-${n}-opacity`]:H.bracket.percent(e)})],[/^(from|via|to)-([\d\.]+)%$/,Bje()],[/^bg-gradient-((?:repeating-)?(?:linear|radial|conic))$/,([,n])=>({"background-image":`${n}-gradient(var(--un-gradient, var(--un-gradient-stops, rgba(255, 255, 255, 0))))`}),{autocomplete:["bg-gradient-repeating","bg-gradient-(linear|radial|conic)","bg-gradient-repeating-(linear|radial|conic)"]}],[/^bg-gradient-to-([rltb]{1,2})$/,([,n])=>{if(n in Ni)return{"--un-gradient-shape":`to ${Ni[n]}`,"--un-gradient":"var(--un-gradient-shape), var(--un-gradient-stops)","background-image":"linear-gradient(var(--un-gradient))"}},{autocomplete:`bg-gradient-to-(${Object.keys(Ni).filter(n=>n.length<=2&&Array.from(n).every(e=>"rltb".includes(e))).join("|")})`}],[/^(?:bg-gradient-)?shape-(.+)$/,([,n])=>{const e=n in Ni?`to ${Ni[n]}`:H.bracket(n);if(e!=null)return{"--un-gradient-shape":e,"--un-gradient":"var(--un-gradient-shape), var(--un-gradient-stops)"}},{autocomplete:["bg-gradient-shape",`bg-gradient-shape-(${Object.keys(Ni).join("|")})`,`shape-(${Object.keys(Ni).join("|")})`]}],["bg-none",{"background-image":"none"}],["box-decoration-slice",{"box-decoration-break":"slice"}],["box-decoration-clone",{"box-decoration-break":"clone"}],...Je("box-decoration","box-decoration-break"),["bg-auto",{"background-size":"auto"}],["bg-cover",{"background-size":"cover"}],["bg-contain",{"background-size":"contain"}],["bg-fixed",{"background-attachment":"fixed"}],["bg-local",{"background-attachment":"local"}],["bg-scroll",{"background-attachment":"scroll"}],["bg-clip-border",{"-webkit-background-clip":"border-box","background-clip":"border-box"}],["bg-clip-content",{"-webkit-background-clip":"content-box","background-clip":"content-box"}],["bg-clip-padding",{"-webkit-background-clip":"padding-box","background-clip":"padding-box"}],["bg-clip-text",{"-webkit-background-clip":"text","background-clip":"text"}],...On.map(n=>[`bg-clip-${n}`,{"-webkit-background-clip":n,"background-clip":n}]),[/^bg-([-\w]{3,})$/,([,n])=>({"background-position":Ni[n]})],["bg-repeat",{"background-repeat":"repeat"}],["bg-no-repeat",{"background-repeat":"no-repeat"}],["bg-repeat-x",{"background-repeat":"repeat-x"}],["bg-repeat-y",{"background-repeat":"repeat-y"}],["bg-repeat-round",{"background-repeat":"round"}],["bg-repeat-space",{"background-repeat":"space"}],...Je("bg-repeat","background-repeat"),["bg-origin-border",{"background-origin":"border-box"}],["bg-origin-padding",{"background-origin":"padding-box"}],["bg-origin-content",{"background-origin":"content-box"}],...Je("bg-origin","background-origin")],zI={disc:"disc",circle:"circle",square:"square",decimal:"decimal","zero-decimal":"decimal-leading-zero",greek:"lower-greek",roman:"lower-roman","upper-roman":"upper-roman",alpha:"lower-alpha","upper-alpha":"upper-alpha",latin:"lower-latin","upper-latin":"upper-latin"},Uje=[[/^list-(.+?)(?:-(outside|inside))?$/,([,n,e])=>{const t=zI[n];if(t)return e?{"list-style-position":e,"list-style-type":t}:{"list-style-type":t}},{autocomplete:[`list-(${Object.keys(zI).join("|")})`,`list-(${Object.keys(zI).join("|")})-(outside|inside)`]}],["list-outside",{"list-style-position":"outside"}],["list-inside",{"list-style-position":"inside"}],["list-none",{"list-style-type":"none"}],[/^list-image-(.+)$/,([,n])=>{if(/^\[url\(.+\)\]$/.test(n))return{"list-style-image":H.bracket(n)}}],["list-image-none",{"list-style-image":"none"}],...Je("list","list-style-type")],Hje=[[/^accent-(.+)$/,gr("accent-color","accent"),{autocomplete:"accent-$colors"}],[/^accent-op(?:acity)?-?(.+)$/,([,n])=>({"--un-accent-opacity":H.bracket.percent(n)}),{autocomplete:["accent-(op|opacity)","accent-(op|opacity)-<percent>"]}]],Wje=[[/^caret-(.+)$/,gr("caret-color","caret"),{autocomplete:"caret-$colors"}],[/^caret-op(?:acity)?-?(.+)$/,([,n])=>({"--un-caret-opacity":H.bracket.percent(n)}),{autocomplete:["caret-(op|opacity)","caret-(op|opacity)-<percent>"]}]],Gje=[["image-render-auto",{"image-rendering":"auto"}],["image-render-edge",{"image-rendering":"crisp-edges"}],["image-render-pixel",[["-ms-interpolation-mode","nearest-neighbor"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-pixelated"],["image-rendering","pixelated"]]]],Jje=[["overscroll-auto",{"overscroll-behavior":"auto"}],["overscroll-contain",{"overscroll-behavior":"contain"}],["overscroll-none",{"overscroll-behavior":"none"}],...Je("overscroll","overscroll-behavior"),["overscroll-x-auto",{"overscroll-behavior-x":"auto"}],["overscroll-x-contain",{"overscroll-behavior-x":"contain"}],["overscroll-x-none",{"overscroll-behavior-x":"none"}],...Je("overscroll-x","overscroll-behavior-x"),["overscroll-y-auto",{"overscroll-behavior-y":"auto"}],["overscroll-y-contain",{"overscroll-behavior-y":"contain"}],["overscroll-y-none",{"overscroll-behavior-y":"none"}],...Je("overscroll-y","overscroll-behavior-y")],Qje=[["scroll-auto",{"scroll-behavior":"auto"}],["scroll-smooth",{"scroll-behavior":"smooth"}],...Je("scroll","scroll-behavior")],Yje=[[/^columns-(.+)$/,([,n])=>({columns:H.bracket.global.number.auto.numberWithUnit(n)}),{autocomplete:"columns-<num>"}],["break-before-auto",{"break-before":"auto"}],["break-before-avoid",{"break-before":"avoid"}],["break-before-all",{"break-before":"all"}],["break-before-avoid-page",{"break-before":"avoid-page"}],["break-before-page",{"break-before":"page"}],["break-before-left",{"break-before":"left"}],["break-before-right",{"break-before":"right"}],["break-before-column",{"break-before":"column"}],...Je("break-before"),["break-inside-auto",{"break-inside":"auto"}],["break-inside-avoid",{"break-inside":"avoid"}],["break-inside-avoid-page",{"break-inside":"avoid-page"}],["break-inside-avoid-column",{"break-inside":"avoid-column"}],...Je("break-inside"),["break-after-auto",{"break-after":"auto"}],["break-after-avoid",{"break-after":"avoid"}],["break-after-all",{"break-after":"all"}],["break-after-avoid-page",{"break-after":"avoid-page"}],["break-after-page",{"break-after":"page"}],["break-after-left",{"break-after":"left"}],["break-after-right",{"break-after":"right"}],["break-after-column",{"break-after":"column"}],...Je("break-after")],Xje=/@media \(min-width: (.+)\)/,Zje=[[/^__container$/,(n,e)=>{var c,u,d,f,h,p;const{theme:t,variantHandlers:r}=e,i=(c=t.container)==null?void 0:c.padding;let s;_n(i)?s=i:s=i==null?void 0:i.DEFAULT;const o=(u=t.container)==null?void 0:u.maxWidth;let a;for(const m of r){const g=(f=(d=m.handle)==null?void 0:d.call(m,{},y=>y))==null?void 0:f.parent;if(_n(g)){const y=(h=g.match(Xje))==null?void 0:h[1];if(y){const k=L_(e)??{},b=Object.keys(k).find(S=>k[S]===y);o?b&&(a=o==null?void 0:o[b]):a=y,b&&!_n(i)&&(s=(i==null?void 0:i[b])??s)}}}const l={"max-width":a};return r.length||(l.width="100%"),(p=t.container)!=null&&p.center&&(l["margin-left"]="auto",l["margin-right"]="auto"),i&&(l["padding-left"]=s,l["padding-right"]=s),l},{internal:!0}]],eVe=[[/^(?:(\w+)[:-])?container$/,([,n],e)=>{let t=Object.keys(L_(e)??{});if(n){if(!t.includes(n))return;t=t.slice(t.indexOf(n))}const r=t.map(i=>`${i}:__container`);return n||r.unshift("__container"),r}]],tVe={"--un-blur":yt,"--un-brightness":yt,"--un-contrast":yt,"--un-drop-shadow":yt,"--un-grayscale":yt,"--un-hue-rotate":yt,"--un-invert":yt,"--un-saturate":yt,"--un-sepia":yt},eE="var(--un-blur) var(--un-brightness) var(--un-contrast) var(--un-drop-shadow) var(--un-grayscale) var(--un-hue-rotate) var(--un-invert) var(--un-saturate) var(--un-sepia)",nVe={"--un-backdrop-blur":yt,"--un-backdrop-brightness":yt,"--un-backdrop-contrast":yt,"--un-backdrop-grayscale":yt,"--un-backdrop-hue-rotate":yt,"--un-backdrop-invert":yt,"--un-backdrop-opacity":yt,"--un-backdrop-saturate":yt,"--un-backdrop-sepia":yt},tE="var(--un-backdrop-blur) var(--un-backdrop-brightness) var(--un-backdrop-contrast) var(--un-backdrop-grayscale) var(--un-backdrop-hue-rotate) var(--un-backdrop-invert) var(--un-backdrop-opacity) var(--un-backdrop-saturate) var(--un-backdrop-sepia)";function BI(n){let e=H.bracket.cssvar(n||"");if(e!=null||(e=n?H.percent(n):"1",e!=null&&Number.parseFloat(e)<=1))return e}function Sc(n,e){return([,t,r],{theme:i})=>{const s=e(r,i)??(r==="none"?"0":"");if(s!=="")return t?{[`--un-${t}${n}`]:`${n}(${s})`,"-webkit-backdrop-filter":tE,"backdrop-filter":tE}:{[`--un-${n}`]:`${n}(${s})`,filter:eE}}}function rVe([,n],{theme:e}){var r;let t=(r=e.dropShadow)==null?void 0:r[n||"DEFAULT"];if(t!=null)return{"--un-drop-shadow":`drop-shadow(${jz(t,"--un-drop-shadow-color").join(") drop-shadow(")})`,filter:eE};if(t=H.bracket.cssvar(n),t!=null)return{"--un-drop-shadow":`drop-shadow(${t})`,filter:eE}}const iVe=[[/^(?:(backdrop-)|filter-)?blur(?:-(.+))?$/,Sc("blur",(n,e)=>{var t;return((t=e.blur)==null?void 0:t[n||"DEFAULT"])||H.bracket.cssvar.px(n)}),{autocomplete:["(backdrop|filter)-blur-$blur","blur-$blur","filter-blur"]}],[/^(?:(backdrop-)|filter-)?brightness-(.+)$/,Sc("brightness",n=>H.bracket.cssvar.percent(n)),{autocomplete:["(backdrop|filter)-brightness-<percent>","brightness-<percent>"]}],[/^(?:(backdrop-)|filter-)?contrast-(.+)$/,Sc("contrast",n=>H.bracket.cssvar.percent(n)),{autocomplete:["(backdrop|filter)-contrast-<percent>","contrast-<percent>"]}],[/^(?:filter-)?drop-shadow(?:-(.+))?$/,rVe,{autocomplete:["filter-drop","filter-drop-shadow","filter-drop-shadow-color","drop-shadow","drop-shadow-color","filter-drop-shadow-$dropShadow","drop-shadow-$dropShadow","filter-drop-shadow-color-$colors","drop-shadow-color-$colors","filter-drop-shadow-color-(op|opacity)","drop-shadow-color-(op|opacity)","filter-drop-shadow-color-(op|opacity)-<percent>","drop-shadow-color-(op|opacity)-<percent>"]}],[/^(?:filter-)?drop-shadow-color-(.+)$/,gr("--un-drop-shadow-color","drop-shadow")],[/^(?:filter-)?drop-shadow-color-op(?:acity)?-?(.+)$/,([,n])=>({"--un-drop-shadow-opacity":H.bracket.percent(n)})],[/^(?:(backdrop-)|filter-)?grayscale(?:-(.+))?$/,Sc("grayscale",BI),{autocomplete:["(backdrop|filter)-grayscale","(backdrop|filter)-grayscale-<percent>","grayscale-<percent>"]}],[/^(?:(backdrop-)|filter-)?hue-rotate-(.+)$/,Sc("hue-rotate",n=>H.bracket.cssvar.degree(n))],[/^(?:(backdrop-)|filter-)?invert(?:-(.+))?$/,Sc("invert",BI),{autocomplete:["(backdrop|filter)-invert","(backdrop|filter)-invert-<percent>","invert-<percent>"]}],[/^(backdrop-)op(?:acity)-(.+)$/,Sc("opacity",n=>H.bracket.cssvar.percent(n)),{autocomplete:["backdrop-(op|opacity)","backdrop-(op|opacity)-<percent>"]}],[/^(?:(backdrop-)|filter-)?saturate-(.+)$/,Sc("saturate",n=>H.bracket.cssvar.percent(n)),{autocomplete:["(backdrop|filter)-saturate","(backdrop|filter)-saturate-<percent>","saturate-<percent>"]}],[/^(?:(backdrop-)|filter-)?sepia(?:-(.+))?$/,Sc("sepia",BI),{autocomplete:["(backdrop|filter)-sepia","(backdrop|filter)-sepia-<percent>","sepia-<percent>"]}],["filter",{filter:eE}],["backdrop-filter",{"-webkit-backdrop-filter":tE,"backdrop-filter":tE}],["filter-none",{filter:"none"}],["backdrop-filter-none",{"-webkit-backdrop-filter":"none","backdrop-filter":"none"}],...On.map(n=>[`filter-${n}`,{filter:n}]),...On.map(n=>[`backdrop-filter-${n}`,{"-webkit-backdrop-filter":n,"backdrop-filter":n}])],sVe=[[/^space-?([xy])-?(-?.+)$/,vH,{autocomplete:["space-(x|y|block|inline)","space-(x|y|block|inline)-reverse","space-(x|y|block|inline)-$spacing"]}],[/^space-?([xy])-reverse$/,([,n])=>({[`--un-space-${n}-reverse`]:1})],[/^space-(block|inline)-(-?.+)$/,vH],[/^space-(block|inline)-reverse$/,([,n])=>({[`--un-space-${n}-reverse`]:1})]];function vH([,n,e],{theme:t}){var i;let r=((i=t.spacing)==null?void 0:i[e||"DEFAULT"])??H.bracket.cssvar.auto.fraction.rem(e||"1");if(r!=null){r==="0"&&(r="0px");const s=Bo[n].map(o=>{const a=`margin${o}`,l=o.endsWith("right")||o.endsWith("bottom")?`calc(${r} * var(--un-space-${n}-reverse))`:`calc(${r} * calc(1 - var(--un-space-${n}-reverse)))`;return[a,l]});if(s)return[[`--un-space-${n}-reverse`,0],...s]}}const oVe=[["uppercase",{"text-transform":"uppercase"}],["lowercase",{"text-transform":"lowercase"}],["capitalize",{"text-transform":"capitalize"}],["normal-case",{"text-transform":"none"}]],aVe=[...["manual","auto","none",...On].map(n=>[`hyphens-${n}`,{"-webkit-hyphens":n,"-ms-hyphens":n,hyphens:n}])],lVe=[["write-vertical-right",{"writing-mode":"vertical-rl"}],["write-vertical-left",{"writing-mode":"vertical-lr"}],["write-normal",{"writing-mode":"horizontal-tb"}],...Je("write","writing-mode")],cVe=[["write-orient-mixed",{"text-orientation":"mixed"}],["write-orient-sideways",{"text-orientation":"sideways"}],["write-orient-upright",{"text-orientation":"upright"}],...Je("write-orient","text-orientation")],uVe=[["sr-only",{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0,0,0,0)","white-space":"nowrap","border-width":0}],["not-sr-only",{position:"static",width:"auto",height:"auto",padding:"0",margin:"0",overflow:"visible",clip:"auto","white-space":"normal"}]],dVe=[["isolate",{isolation:"isolate"}],["isolate-auto",{isolation:"auto"}],["isolation-auto",{isolation:"auto"}]],fVe=[["object-cover",{"object-fit":"cover"}],["object-contain",{"object-fit":"contain"}],["object-fill",{"object-fit":"fill"}],["object-scale-down",{"object-fit":"scale-down"}],["object-none",{"object-fit":"none"}],[/^object-(.+)$/,([,n])=>{if(Ni[n])return{"object-position":Ni[n]};if(H.bracketOfPosition(n)!=null)return{"object-position":H.bracketOfPosition(n).split(" ").map(e=>H.position.fraction.auto.px.cssvar(e)??e).join(" ")}},{autocomplete:`object-(${Object.keys(Ni).join("|")})`}]],hVe=[["bg-blend-multiply",{"background-blend-mode":"multiply"}],["bg-blend-screen",{"background-blend-mode":"screen"}],["bg-blend-overlay",{"background-blend-mode":"overlay"}],["bg-blend-darken",{"background-blend-mode":"darken"}],["bg-blend-lighten",{"background-blend-mode":"lighten"}],["bg-blend-color-dodge",{"background-blend-mode":"color-dodge"}],["bg-blend-color-burn",{"background-blend-mode":"color-burn"}],["bg-blend-hard-light",{"background-blend-mode":"hard-light"}],["bg-blend-soft-light",{"background-blend-mode":"soft-light"}],["bg-blend-difference",{"background-blend-mode":"difference"}],["bg-blend-exclusion",{"background-blend-mode":"exclusion"}],["bg-blend-hue",{"background-blend-mode":"hue"}],["bg-blend-saturation",{"background-blend-mode":"saturation"}],["bg-blend-color",{"background-blend-mode":"color"}],["bg-blend-luminosity",{"background-blend-mode":"luminosity"}],["bg-blend-normal",{"background-blend-mode":"normal"}],...Je("bg-blend","background-blend")],pVe=[["mix-blend-multiply",{"mix-blend-mode":"multiply"}],["mix-blend-screen",{"mix-blend-mode":"screen"}],["mix-blend-overlay",{"mix-blend-mode":"overlay"}],["mix-blend-darken",{"mix-blend-mode":"darken"}],["mix-blend-lighten",{"mix-blend-mode":"lighten"}],["mix-blend-color-dodge",{"mix-blend-mode":"color-dodge"}],["mix-blend-color-burn",{"mix-blend-mode":"color-burn"}],["mix-blend-hard-light",{"mix-blend-mode":"hard-light"}],["mix-blend-soft-light",{"mix-blend-mode":"soft-light"}],["mix-blend-difference",{"mix-blend-mode":"difference"}],["mix-blend-exclusion",{"mix-blend-mode":"exclusion"}],["mix-blend-hue",{"mix-blend-mode":"hue"}],["mix-blend-saturation",{"mix-blend-mode":"saturation"}],["mix-blend-color",{"mix-blend-mode":"color"}],["mix-blend-luminosity",{"mix-blend-mode":"luminosity"}],["mix-blend-plus-lighter",{"mix-blend-mode":"plus-lighter"}],["mix-blend-normal",{"mix-blend-mode":"normal"}],...Je("mix-blend")],mVe={"--un-border-spacing-x":0,"--un-border-spacing-y":0},bH="var(--un-border-spacing-x) var(--un-border-spacing-y)",gVe=[["inline-table",{display:"inline-table"}],["table",{display:"table"}],["table-caption",{display:"table-caption"}],["table-cell",{display:"table-cell"}],["table-column",{display:"table-column"}],["table-column-group",{display:"table-column-group"}],["table-footer-group",{display:"table-footer-group"}],["table-header-group",{display:"table-header-group"}],["table-row",{display:"table-row"}],["table-row-group",{display:"table-row-group"}],["border-collapse",{"border-collapse":"collapse"}],["border-separate",{"border-collapse":"separate"}],[/^border-spacing-(.+)$/,([,n],{theme:e})=>{var r;const t=((r=e.spacing)==null?void 0:r[n])??H.bracket.cssvar.global.auto.fraction.rem(n);if(t!=null)return{"--un-border-spacing-x":t,"--un-border-spacing-y":t,"border-spacing":bH}},{autocomplete:["border-spacing","border-spacing-$spacing"]}],[/^border-spacing-([xy])-(.+)$/,([,n,e],{theme:t})=>{var i;const r=((i=t.spacing)==null?void 0:i[e])??H.bracket.cssvar.global.auto.fraction.rem(e);if(r!=null)return{[`--un-border-spacing-${n}`]:r,"border-spacing":bH}},{autocomplete:["border-spacing-(x|y)","border-spacing-(x|y)-$spacing"]}],["caption-top",{"caption-side":"top"}],["caption-bottom",{"caption-side":"bottom"}],["table-auto",{"table-layout":"auto"}],["table-fixed",{"table-layout":"fixed"}],["table-empty-cells-visible",{"empty-cells":"show"}],["table-empty-cells-hidden",{"empty-cells":"hide"}]],yVe={"bg-blend":"background-blend-mode","bg-clip":"-webkit-background-clip","bg-gradient":"linear-gradient","bg-image":"background-image","bg-origin":"background-origin","bg-position":"background-position","bg-repeat":"background-repeat","bg-size":"background-size","mix-blend":"mix-blend-mode",object:"object-fit","object-position":"object-position",write:"writing-mode","write-orient":"text-orientation"},vVe=[[/^(.+?)-(\$.+)$/,([,n,e])=>{const t=yVe[n];if(t)return{[t]:H.cssvar(e)}}]],bVe=[[/^divide-?([xy])$/,Rx,{autocomplete:["divide-(x|y|block|inline)","divide-(x|y|block|inline)-reverse","divide-(x|y|block|inline)-$lineWidth"]}],[/^divide-?([xy])-?(-?.+)$/,Rx],[/^divide-?([xy])-reverse$/,([,n])=>({[`--un-divide-${n}-reverse`]:1})],[/^divide-(block|inline)$/,Rx],[/^divide-(block|inline)-(-?.+)$/,Rx],[/^divide-(block|inline)-reverse$/,([,n])=>({[`--un-divide-${n}-reverse`]:1})],[/^divide-(.+)$/,gr("border-color","divide"),{autocomplete:"divide-$colors"}],[/^divide-op(?:acity)?-?(.+)$/,([,n])=>({"--un-divide-opacity":H.bracket.percent(n)}),{autocomplete:["divide-(op|opacity)","divide-(op|opacity)-<percent>"]}],...dg.map(n=>[`divide-${n}`,{"border-style":n}])];function Rx([,n,e],{theme:t}){var i;let r=((i=t.lineWidth)==null?void 0:i[e||"DEFAULT"])??H.bracket.cssvar.px(e||"1");if(r!=null){r==="0"&&(r="0px");const s=Bo[n].map(o=>{const a=`border${o}-width`,l=o.endsWith("right")||o.endsWith("bottom")?`calc(${r} * var(--un-divide-${n}-reverse))`:`calc(${r} * calc(1 - var(--un-divide-${n}-reverse)))`;return[a,l]});if(s)return[[`--un-divide-${n}-reverse`,0],...s]}}const kVe=[[/^line-clamp-(\d+)$/,([,n])=>({overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n,"line-clamp":n}),{autocomplete:["line-clamp","line-clamp-<num>"]}],...["none",...On].map(n=>[`line-clamp-${n}`,{overflow:"visible",display:"block","-webkit-box-orient":"horizontal","-webkit-line-clamp":n,"line-clamp":n}])],xVe={"--un-ordinal":yt,"--un-slashed-zero":yt,"--un-numeric-figure":yt,"--un-numeric-spacing":yt,"--un-numeric-fraction":yt};function gu(n){return{...n,"font-variant-numeric":"var(--un-ordinal) var(--un-slashed-zero) var(--un-numeric-figure) var(--un-numeric-spacing) var(--un-numeric-fraction)"}}const SVe=[[/^ordinal$/,()=>gu({"--un-ordinal":"ordinal"}),{autocomplete:"ordinal"}],[/^slashed-zero$/,()=>gu({"--un-slashed-zero":"slashed-zero"}),{autocomplete:"slashed-zero"}],[/^lining-nums$/,()=>gu({"--un-numeric-figure":"lining-nums"}),{autocomplete:"lining-nums"}],[/^oldstyle-nums$/,()=>gu({"--un-numeric-figure":"oldstyle-nums"}),{autocomplete:"oldstyle-nums"}],[/^proportional-nums$/,()=>gu({"--un-numeric-spacing":"proportional-nums"}),{autocomplete:"proportional-nums"}],[/^tabular-nums$/,()=>gu({"--un-numeric-spacing":"tabular-nums"}),{autocomplete:"tabular-nums"}],[/^diagonal-fractions$/,()=>gu({"--un-numeric-fraction":"diagonal-fractions"}),{autocomplete:"diagonal-fractions"}],[/^stacked-fractions$/,()=>gu({"--un-numeric-fraction":"stacked-fractions"}),{autocomplete:"stacked-fractions"}],["normal-nums",{"font-variant-numeric":"normal"}]],wVe={"--un-pan-x":yt,"--un-pan-y":yt,"--un-pinch-zoom":yt},jI="var(--un-pan-x) var(--un-pan-y) var(--un-pinch-zoom)",$Ve=[[/^touch-pan-(x|left|right)$/,([,n])=>({"--un-pan-x":`pan-${n}`,"touch-action":jI}),{autocomplete:["touch-pan","touch-pan-(x|left|right|y|up|down)"]}],[/^touch-pan-(y|up|down)$/,([,n])=>({"--un-pan-y":`pan-${n}`,"touch-action":jI})],["touch-pinch-zoom",{"--un-pinch-zoom":"pinch-zoom","touch-action":jI}],["touch-auto",{"touch-action":"auto"}],["touch-manipulation",{"touch-action":"manipulation"}],["touch-none",{"touch-action":"none"}],...Je("touch","touch-action")],EVe={"--un-scroll-snap-strictness":"proximity"},CVe=[[/^snap-(x|y)$/,([,n])=>({"scroll-snap-type":`${n} var(--un-scroll-snap-strictness)`}),{autocomplete:"snap-(x|y|both)"}],[/^snap-both$/,()=>({"scroll-snap-type":"both var(--un-scroll-snap-strictness)"})],["snap-mandatory",{"--un-scroll-snap-strictness":"mandatory"}],["snap-proximity",{"--un-scroll-snap-strictness":"proximity"}],["snap-none",{"scroll-snap-type":"none"}],["snap-start",{"scroll-snap-align":"start"}],["snap-end",{"scroll-snap-align":"end"}],["snap-center",{"scroll-snap-align":"center"}],["snap-align-none",{"scroll-snap-align":"none"}],["snap-normal",{"scroll-snap-stop":"normal"}],["snap-always",{"scroll-snap-stop":"always"}],[/^scroll-ma?()-?(-?.+)$/,gn("scroll-margin"),{autocomplete:["scroll-(m|p|ma|pa|block|inline)","scroll-(m|p|ma|pa|block|inline)-$spacing","scroll-(m|p|ma|pa|block|inline)-(x|y|r|l|t|b|bs|be|is|ie)","scroll-(m|p|ma|pa|block|inline)-(x|y|r|l|t|b|bs|be|is|ie)-$spacing"]}],[/^scroll-m-?([xy])-?(-?.+)$/,gn("scroll-margin")],[/^scroll-m-?([rltb])-?(-?.+)$/,gn("scroll-margin")],[/^scroll-m-(block|inline)-(-?.+)$/,gn("scroll-margin")],[/^scroll-m-?([bi][se])-?(-?.+)$/,gn("scroll-margin")],[/^scroll-pa?()-?(-?.+)$/,gn("scroll-padding")],[/^scroll-p-?([xy])-?(-?.+)$/,gn("scroll-padding")],[/^scroll-p-?([rltb])-?(-?.+)$/,gn("scroll-padding")],[/^scroll-p-(block|inline)-(-?.+)$/,gn("scroll-padding")],[/^scroll-p-?([bi][se])-?(-?.+)$/,gn("scroll-padding")]],MVe=[[/^\$ placeholder-(.+)$/,gr("color","placeholder"),{autocomplete:"placeholder-$colors"}],[/^\$ placeholder-op(?:acity)?-?(.+)$/,([,n])=>({"--un-placeholder-opacity":H.bracket.percent(n)}),{autocomplete:["placeholder-(op|opacity)","placeholder-(op|opacity)-<percent>"]}]],TVe=[kle,vVe,xle,Zje,Vae,uVe,qae,Bae,Iae,Dae,kVe,dVe,Fae,Rae,mle,Nae,ble,Lae,zae,yle,gle,lle,gVe,ole,Lje,jae,$Ve,Uae,Kae,CVe,Uje,Sae,Yje,Oae,Hz,Uz,ple,Pae,sVe,bVe,Aae,Jje,Qje,Yae,Hae,Jae,$ae,Mae,Kje,wle,fVe,vle,kae,dle,Qae,bae,cle,Xae,oVe,Zae,SVe,Cae,Tae,ele,ule,fle,hle,aVe,lVe,cVe,Wje,Hje,Eae,hVe,pVe,ile,xae,nle,Gje,iVe,_ae,wae,Wae,Gae,MVe,ale,Sle].flat(1),_Ve=[...eVe],AVe={...Mle,aria:{busy:'busy="true"',checked:'checked="true"',disabled:'disabled="true"',expanded:'expanded="true"',hidden:'hidden="true"',pressed:'pressed="true"',readonly:'readonly="true"',required:'required="true"',selected:'selected="true"'},animation:{keyframes:{pulse:"{0%, 100% {opacity:1} 50% {opacity:.5}}",bounce:"{0%, 100% {transform:translateY(-25%);animation-timing-function:cubic-bezier(0.8,0,1,1)} 50% {transform:translateY(0);animation-timing-function:cubic-bezier(0,0,0.2,1)}}",spin:"{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}",ping:"{0%{transform:scale(1);opacity:1}75%,100%{transform:scale(2);opacity:0}}","bounce-alt":"{from,20%,53%,80%,to{animation-timing-function:cubic-bezier(0.215,0.61,0.355,1);transform:translate3d(0,0,0)}40%,43%{animation-timing-function:cubic-bezier(0.755,0.05,0.855,0.06);transform:translate3d(0,-30px,0)}70%{animation-timing-function:cubic-bezier(0.755,0.05,0.855,0.06);transform:translate3d(0,-15px,0)}90%{transform:translate3d(0,-4px,0)}}",flash:"{from,50%,to{opacity:1}25%,75%{opacity:0}}","pulse-alt":"{from{transform:scale3d(1,1,1)}50%{transform:scale3d(1.05,1.05,1.05)}to{transform:scale3d(1,1,1)}}","rubber-band":"{from{transform:scale3d(1,1,1)}30%{transform:scale3d(1.25,0.75,1)}40%{transform:scale3d(0.75,1.25,1)}50%{transform:scale3d(1.15,0.85,1)}65%{transform:scale3d(0.95,1.05,1)}75%{transform:scale3d(1.05,0.95,1)}to{transform:scale3d(1,1,1)}}","shake-x":"{from,to{transform:translate3d(0,0,0)}10%,30%,50%,70%,90%{transform:translate3d(-10px,0,0)}20%,40%,60%,80%{transform:translate3d(10px,0,0)}}","shake-y":"{from,to{transform:translate3d(0,0,0)}10%,30%,50%,70%,90%{transform:translate3d(0,-10px,0)}20%,40%,60%,80%{transform:translate3d(0,10px,0)}}","head-shake":"{0%{transform:translateX(0)}6.5%{transform:translateX(-6px) rotateY(-9deg)}18.5%{transform:translateX(5px) rotateY(7deg)}31.5%{transform:translateX(-3px) rotateY(-5deg)}43.5%{transform:translateX(2px) rotateY(3deg)}50%{transform:translateX(0)}}",swing:"{20%{transform:rotate3d(0,0,1,15deg)}40%{transform:rotate3d(0,0,1,-10deg)}60%{transform:rotate3d(0,0,1,5deg)}80%{transform:rotate3d(0,0,1,-5deg)}to{transform:rotate3d(0,0,1,0deg)}}",tada:"{from{transform:scale3d(1,1,1)}10%,20%{transform:scale3d(0.9,0.9,0.9) rotate3d(0,0,1,-3deg)}30%,50%,70%,90%{transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg)}40%,60%,80%{transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg)}to{transform:scale3d(1,1,1)}}",wobble:"{from{transform:translate3d(0,0,0)}15%{transform:translate3d(-25%,0,0) rotate3d(0,0,1,-5deg)}30%{transform:translate3d(20%,0,0) rotate3d(0,0,1,3deg)}45%{transform:translate3d(-15%,0,0) rotate3d(0,0,1,-3deg)}60%{transform:translate3d(10%,0,0) rotate3d(0,0,1,2deg)}75%{transform:translate3d(-5%,0,0) rotate3d(0,0,1,-1deg)}to{transform:translate3d(0,0,0)}}",jello:"{from,11.1% to{transform:translate3d(0,0,0)}22.2%{transform:skewX(-12.5deg) skewY(-12.5deg)}33.3%{transform:skewX(6.25deg) skewY(6.25deg)}44.4%{transform:skewX(-3.125deg)skewY(-3.125deg)}55.5%{transform:skewX(1.5625deg) skewY(1.5625deg)}66.6%{transform:skewX(-0.78125deg) skewY(-0.78125deg)}77.7%{transform:skewX(0.390625deg) skewY(0.390625deg)}88.8%{transform:skewX(-0.1953125deg) skewY(-0.1953125deg)}}","heart-beat":"{0%{transform:scale(1)}14%{transform:scale(1.3)}28%{transform:scale(1)}42%{transform:scale(1.3)}70%{transform:scale(1)}}",hinge:"{0%{transform-origin:top left;animation-timing-function:ease-in-out}20%,60%{transform:rotate3d(0,0,1,80deg);transform-origin:top left;animation-timing-function:ease-in-out}40%,80%{transform:rotate3d(0,0,1,60deg);transform-origin:top left;animation-timing-function:ease-in-out}to{transform:translate3d(0,700px,0);opacity:0}}","jack-in-the-box":"{from{opacity:0;transform-origin:center bottom;transform:scale(0.1) rotate(30deg)}50%{transform:rotate(-10deg)}70%{transform:rotate(3deg)}to{transform:scale(1)}}","light-speed-in-left":"{from{opacity:0;transform:translate3d(-100%,0,0) skewX(-30deg)}60%{opacity:1;transform:skewX(20deg)}80%{transform:skewX(-5deg)}to{transform:translate3d(0,0,0)}}","light-speed-in-right":"{from{opacity:0;transform:translate3d(100%,0,0) skewX(-30deg)}60%{opacity:1;transform:skewX(20deg)}80%{transform:skewX(-5deg)}to{transform:translate3d(0,0,0)}}","light-speed-out-left":"{from{opacity:1}to{opacity:0;transform:translate3d(-100%,0,0) skewX(30deg)}}","light-speed-out-right":"{from{opacity:1}to{opacity:0;transform:translate3d(100%,0,0) skewX(30deg)}}",flip:"{from{transform:perspective(400px) scale3d(1,1,1) translate3d(0,0,0) rotate3d(0,1,0,-360deg);animation-timing-function:ease-out}40%{transform:perspective(400px) scale3d(1,1,1) translate3d(0,0,150px) rotate3d(0,1,0,-190deg);animation-timing-function:ease-out}50%{transform:perspective(400px) scale3d(1,1,1) translate3d(0,0,150px) rotate3d(0,1,0,-170deg);animation-timing-function:ease-in}80%{transform:perspective(400px) scale3d(0.95,0.95,0.95) translate3d(0,0,0) rotate3d(0,1,0,0deg);animation-timing-function:ease-in}to{transform:perspective(400px) scale3d(1,1,1) translate3d(0,0,0) rotate3d(0,1,0,0deg);animation-timing-function:ease-in}}","flip-in-x":"{from{transform:perspective(400px) rotate3d(1,0,0,90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotate3d(1,0,0,-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotate3d(1,0,0,10deg);opacity:1}80%{transform:perspective(400px) rotate3d(1,0,0,-5deg)}to{transform:perspective(400px)}}","flip-in-y":"{from{transform:perspective(400px) rotate3d(0,1,0,90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotate3d(0,1,0,-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotate3d(0,1,0,10deg);opacity:1}80%{transform:perspective(400px) rotate3d(0,1,0,-5deg)}to{transform:perspective(400px)}}","flip-out-x":"{from{transform:perspective(400px)}30%{transform:perspective(400px) rotate3d(1,0,0,-20deg);opacity:1}to{transform:perspective(400px) rotate3d(1,0,0,90deg);opacity:0}}","flip-out-y":"{from{transform:perspective(400px)}30%{transform:perspective(400px) rotate3d(0,1,0,-15deg);opacity:1}to{transform:perspective(400px) rotate3d(0,1,0,90deg);opacity:0}}","rotate-in":"{from{transform-origin:center;transform:rotate3d(0,0,1,-200deg);opacity:0}to{transform-origin:center;transform:translate3d(0,0,0);opacity:1}}","rotate-in-down-left":"{from{transform-origin:left bottom;transform:rotate3d(0,0,1,-45deg);opacity:0}to{transform-origin:left bottom;transform:translate3d(0,0,0);opacity:1}}","rotate-in-down-right":"{from{transform-origin:right bottom;transform:rotate3d(0,0,1,45deg);opacity:0}to{transform-origin:right bottom;transform:translate3d(0,0,0);opacity:1}}","rotate-in-up-left":"{from{transform-origin:left top;transform:rotate3d(0,0,1,45deg);opacity:0}to{transform-origin:left top;transform:translate3d(0,0,0);opacity:1}}","rotate-in-up-right":"{from{transform-origin:right bottom;transform:rotate3d(0,0,1,-90deg);opacity:0}to{transform-origin:right bottom;transform:translate3d(0,0,0);opacity:1}}","rotate-out":"{from{transform-origin:center;opacity:1}to{transform-origin:center;transform:rotate3d(0,0,1,200deg);opacity:0}}","rotate-out-down-left":"{from{transform-origin:left bottom;opacity:1}to{transform-origin:left bottom;transform:rotate3d(0,0,1,45deg);opacity:0}}","rotate-out-down-right":"{from{transform-origin:right bottom;opacity:1}to{transform-origin:right bottom;transform:rotate3d(0,0,1,-45deg);opacity:0}}","rotate-out-up-left":"{from{transform-origin:left bottom;opacity:1}to{transform-origin:left bottom;transform:rotate3d(0,0,1,-45deg);opacity:0}}","rotate-out-up-right":"{from{transform-origin:right bottom;opacity:1}to{transform-origin:left bottom;transform:rotate3d(0,0,1,90deg);opacity:0}}","roll-in":"{from{opacity:0;transform:translate3d(-100%,0,0) rotate3d(0,0,1,-120deg)}to{opacity:1;transform:translate3d(0,0,0)}}","roll-out":"{from{opacity:1}to{opacity:0;transform:translate3d(100%,0,0) rotate3d(0,0,1,120deg)}}","zoom-in":"{from{opacity:0;transform:scale3d(0.3,0.3,0.3)}50%{opacity:1}}","zoom-in-down":"{from{opacity:0;transform:scale3d(0.1,0.1,0.1) translate3d(0,-1000px,0);animation-timing-function:cubic-bezier(0.55,0.055,0.675,0.19)}60%{opacity:1;transform:scale3d(0.475,0.475,0.475) translate3d(0,60px,0);animation-timing-function:cubic-bezier(0.175,0.885,0.32,1)}}","zoom-in-left":"{from{opacity:0;transform:scale3d(0.1,0.1,0.1) translate3d(-1000px,0,0);animation-timing-function:cubic-bezier(0.55,0.055,0.675,0.19)}60%{opacity:1;transform:scale3d(0.475,0.475,0.475) translate3d(10px,0,0);animation-timing-function:cubic-bezier(0.175,0.885,0.32,1)}}","zoom-in-right":"{from{opacity:0;transform:scale3d(0.1,0.1,0.1) translate3d(1000px,0,0);animation-timing-function:cubic-bezier(0.55,0.055,0.675,0.19)}60%{opacity:1;transform:scale3d(0.475,0.475,0.475) translate3d(-10px,0,0);animation-timing-function:cubic-bezier(0.175,0.885,0.32,1)}}","zoom-in-up":"{from{opacity:0;transform:scale3d(0.1,0.1,0.1) translate3d(0,1000px,0);animation-timing-function:cubic-bezier(0.55,0.055,0.675,0.19)}60%{opacity:1;transform:scale3d(0.475,0.475,0.475) translate3d(0,-60px,0);animation-timing-function:cubic-bezier(0.175,0.885,0.32,1)}}","zoom-out":"{from{opacity:1}50%{opacity:0;transform:scale3d(0.3,0.3,0.3)}to{opacity:0}}","zoom-out-down":"{40%{opacity:1;transform:scale3d(0.475,0.475,0.475) translate3d(0,-60px,0);animation-timing-function:cubic-bezier(0.55,0.055,0.675,0.19)}to{opacity:0;transform:scale3d(0.1,0.1,0.1) translate3d(0,2000px,0);transform-origin:center bottom;animation-timing-function:cubic-bezier(0.175,0.885,0.32,1)}}","zoom-out-left":"{40%{opacity:1;transform:scale3d(0.475,0.475,0.475) translate3d(42px,0,0)}to{opacity:0;transform:scale(0.1) translate3d(-2000px,0,0);transform-origin:left center}}","zoom-out-right":"{40%{opacity:1;transform:scale3d(0.475,0.475,0.475) translate3d(-42px,0,0)}to{opacity:0;transform:scale(0.1) translate3d(2000px,0,0);transform-origin:right center}}","zoom-out-up":"{40%{opacity:1;transform:scale3d(0.475,0.475,0.475) translate3d(0,60px,0);animation-timing-function:cubic-bezier(0.55,0.055,0.675,0.19)}to{opacity:0;transform:scale3d(0.1,0.1,0.1) translate3d(0,-2000px,0);transform-origin:center bottom;animation-timing-function:cubic-bezier(0.175,0.885,0.32,1)}}","bounce-in":"{from,20%,40%,60%,80%,to{animation-timing-function:ease-in-out}0%{opacity:0;transform:scale3d(0.3,0.3,0.3)}20%{transform:scale3d(1.1,1.1,1.1)}40%{transform:scale3d(0.9,0.9,0.9)}60%{transform:scale3d(1.03,1.03,1.03);opacity:1}80%{transform:scale3d(0.97,0.97,0.97)}to{opacity:1;transform:scale3d(1,1,1)}}","bounce-in-down":"{from,60%,75%,90%,to{animation-timing-function:cubic-bezier(0.215,0.61,0.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:translate3d(0,0,0)}}","bounce-in-left":"{from,60%,75%,90%,to{animation-timing-function:cubic-bezier(0.215,0.61,0.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:translate3d(0,0,0)}}","bounce-in-right":"{from,60%,75%,90%,to{animation-timing-function:cubic-bezier(0.215,0.61,0.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:translate3d(0,0,0)}}","bounce-in-up":"{from,60%,75%,90%,to{animation-timing-function:cubic-bezier(0.215,0.61,0.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translate3d(0,0,0)}}","bounce-out":"{20%{transform:scale3d(0.9,0.9,0.9)}50%,55%{opacity:1;transform:scale3d(1.1,1.1,1.1)}to{opacity:0;transform:scale3d(0.3,0.3,0.3)}}","bounce-out-down":"{20%{transform:translate3d(0,10px,0)}40%,45%{opacity:1;transform:translate3d(0,-20px,0)}to{opacity:0;transform:translate3d(0,2000px,0)}}","bounce-out-left":"{20%{opacity:1;transform:translate3d(20px,0,0)}to{opacity:0;transform:translate3d(-2000px,0,0)}}","bounce-out-right":"{20%{opacity:1;transform:translate3d(-20px,0,0)}to{opacity:0;transform:translate3d(2000px,0,0)}}","bounce-out-up":"{20%{transform:translate3d(0,-10px,0)}40%,45%{opacity:1;transform:translate3d(0,20px,0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}","slide-in-down":"{from{transform:translate3d(0,-100%,0);visibility:visible}to{transform:translate3d(0,0,0)}}","slide-in-left":"{from{transform:translate3d(-100%,0,0);visibility:visible}to{transform:translate3d(0,0,0)}}","slide-in-right":"{from{transform:translate3d(100%,0,0);visibility:visible}to{transform:translate3d(0,0,0)}}","slide-in-up":"{from{transform:translate3d(0,100%,0);visibility:visible}to{transform:translate3d(0,0,0)}}","slide-out-down":"{from{transform:translate3d(0,0,0)}to{visibility:hidden;transform:translate3d(0,100%,0)}}","slide-out-left":"{from{transform:translate3d(0,0,0)}to{visibility:hidden;transform:translate3d(-100%,0,0)}}","slide-out-right":"{from{transform:translate3d(0,0,0)}to{visibility:hidden;transform:translate3d(100%,0,0)}}","slide-out-up":"{from{transform:translate3d(0,0,0)}to{visibility:hidden;transform:translate3d(0,-100%,0)}}","fade-in":"{from{opacity:0}to{opacity:1}}","fade-in-down":"{from{opacity:0;transform:translate3d(0,-100%,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-down-big":"{from{opacity:0;transform:translate3d(0,-2000px,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-left":"{from{opacity:0;transform:translate3d(-100%,0,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-left-big":"{from{opacity:0;transform:translate3d(-2000px,0,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-right":"{from{opacity:0;transform:translate3d(100%,0,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-right-big":"{from{opacity:0;transform:translate3d(2000px,0,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-up":"{from{opacity:0;transform:translate3d(0,100%,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-up-big":"{from{opacity:0;transform:translate3d(0,2000px,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-top-left":"{from{opacity:0;transform:translate3d(-100%,-100%,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-top-right":"{from{opacity:0;transform:translate3d(100%,-100%,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-bottom-left":"{from{opacity:0;transform:translate3d(-100%,100%,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-in-bottom-right":"{from{opacity:0;transform:translate3d(100%,100%,0)}to{opacity:1;transform:translate3d(0,0,0)}}","fade-out":"{from{opacity:1}to{opacity:0}}","fade-out-down":"{from{opacity:1}to{opacity:0;transform:translate3d(0,100%,0)}}","fade-out-down-big":"{from{opacity:1}to{opacity:0;transform:translate3d(0,2000px,0)}}","fade-out-left":"{from{opacity:1}to{opacity:0;transform:translate3d(-100%,0,0)}}","fade-out-left-big":"{from{opacity:1}to{opacity:0;transform:translate3d(-2000px,0,0)}}","fade-out-right":"{from{opacity:1}to{opacity:0;transform:translate3d(100%,0,0)}}","fade-out-right-big":"{from{opacity:1}to{opacity:0;transform:translate3d(2000px,0,0)}}","fade-out-up":"{from{opacity:1}to{opacity:0;transform:translate3d(0,-100%,0)}}","fade-out-up-big":"{from{opacity:1}to{opacity:0;transform:translate3d(0,-2000px,0)}}","fade-out-top-left":"{from{opacity:1;transform:translate3d(0,0,0)}to{opacity:0;transform:translate3d(-100%,-100%,0)}}","fade-out-top-right":"{from{opacity:1;transform:translate3d(0,0,0)}to{opacity:0;transform:translate3d(100%,-100%,0)}}","fade-out-bottom-left":"{from{opacity:1;transform:translate3d(0,0,0)}to{opacity:0;transform:translate3d(-100%,100%,0)}}","fade-out-bottom-right":"{from{opacity:1;transform:translate3d(0,0,0)}to{opacity:0;transform:translate3d(100%,100%,0)}}","back-in-up":"{0%{opacity:0.7;transform:translateY(1200px) scale(0.7)}80%{opacity:0.7;transform:translateY(0px) scale(0.7)}100%{opacity:1;transform:scale(1)}}","back-in-down":"{0%{opacity:0.7;transform:translateY(-1200px) scale(0.7)}80%{opacity:0.7;transform:translateY(0px) scale(0.7)}100%{opacity:1;transform:scale(1)}}","back-in-right":"{0%{opacity:0.7;transform:translateX(2000px) scale(0.7)}80%{opacity:0.7;transform:translateY(0px) scale(0.7)}100%{opacity:1;transform:scale(1)}}","back-in-left":"{0%{opacity:0.7;transform:translateX(-2000px) scale(0.7)}80%{opacity:0.7;transform:translateX(0px) scale(0.7)}100%{opacity:1;transform:scale(1)}}","back-out-up":"{0%{opacity:1;transform:scale(1)}80%{opacity:0.7;transform:translateY(0px) scale(0.7)}100%{opacity:0.7;transform:translateY(-700px) scale(0.7)}}","back-out-down":"{0%{opacity:1;transform:scale(1)}80%{opacity:0.7;transform:translateY(0px) scale(0.7)}100%{opacity:0.7;transform:translateY(700px) scale(0.7)}}","back-out-right":"{0%{opacity:1;transform:scale(1)}80%{opacity:0.7;transform:translateY(0px) scale(0.7)}100%{opacity:0.7;transform:translateX(2000px) scale(0.7)}}","back-out-left":"{0%{opacity:1;transform:scale(1)}80%{opacity:0.7;transform:translateX(-2000px) scale(0.7)}100%{opacity:0.7;transform:translateY(-700px) scale(0.7)}}"},durations:{pulse:"2s","heart-beat":"1.3s","bounce-in":"0.75s","bounce-out":"0.75s","flip-out-x":"0.75s","flip-out-y":"0.75s",hinge:"2s"},timingFns:{pulse:"cubic-bezier(0.4,0,.6,1)",ping:"cubic-bezier(0,0,.2,1)","head-shake":"ease-in-out","heart-beat":"ease-in-out","pulse-alt":"ease-in-out","light-speed-in-left":"ease-out","light-speed-in-right":"ease-out","light-speed-out-left":"ease-in","light-speed-out-right":"ease-in"},properties:{"bounce-alt":{"transform-origin":"center bottom"},jello:{"transform-origin":"center"},swing:{"transform-origin":"top center"},flip:{"backface-visibility":"visible"},"flip-in-x":{"backface-visibility":"visible !important"},"flip-in-y":{"backface-visibility":"visible !important"},"flip-out-x":{"backface-visibility":"visible !important"},"flip-out-y":{"backface-visibility":"visible !important"},"rotate-in":{"transform-origin":"center"},"rotate-in-down-left":{"transform-origin":"left bottom"},"rotate-in-down-right":{"transform-origin":"right bottom"},"rotate-in-up-left":{"transform-origin":"left bottom"},"rotate-in-up-right":{"transform-origin":"right bottom"},"rotate-out":{"transform-origin":"center"},"rotate-out-down-left":{"transform-origin":"left bottom"},"rotate-out-down-right":{"transform-origin":"right bottom"},"rotate-out-up-left":{"transform-origin":"left bottom"},"rotate-out-up-right":{"transform-origin":"right bottom"},hinge:{"transform-origin":"top left"},"zoom-out-down":{"transform-origin":"center bottom"},"zoom-out-left":{"transform-origin":"left center"},"zoom-out-right":{"transform-origin":"right center"},"zoom-out-up":{"transform-origin":"center bottom"}},counts:{spin:"infinite",ping:"infinite",pulse:"infinite","pulse-alt":"infinite",bounce:"infinite","bounce-alt":"infinite"}},media:{portrait:"(orientation: portrait)",landscape:"(orientation: landscape)",os_dark:"(prefers-color-scheme: dark)",os_light:"(prefers-color-scheme: light)",motion_ok:"(prefers-reduced-motion: no-preference)",motion_not_ok:"(prefers-reduced-motion: reduce)",high_contrast:"(prefers-contrast: high)",low_contrast:"(prefers-contrast: low)",opacity_ok:"(prefers-reduced-transparency: no-preference)",opacity_not_ok:"(prefers-reduced-transparency: reduce)",useData_ok:"(prefers-reduced-data: no-preference)",useData_not_ok:"(prefers-reduced-data: reduce)",touch:"(hover: none) and (pointer: coarse)",stylus:"(hover: none) and (pointer: fine)",pointer:"(hover) and (pointer: coarse)",mouse:"(hover) and (pointer: fine)",hd_color:"(dynamic-range: high)"},supports:{grid:"(display: grid)"},preflightBase:{...sle,...wVe,...EVe,...xVe,...mVe,...rle,...tle,...tVe,...nVe}},IVe=[$d("svg",n=>({selector:`${n.selector} svg`}))],RVe=[$d(".dark",n=>({prefix:`.dark $$ ${n.prefix}`})),$d(".light",n=>({prefix:`.light $$ ${n.prefix}`})),Qa("@dark","@media (prefers-color-scheme: dark)"),Qa("@light","@media (prefers-color-scheme: light)")],OVe=[$d("@hover",n=>(e1("The @hover variant is experimental and may not follow semver."),{parent:`${n.parent?`${n.parent} $$ `:""}@media (hover: hover) and (pointer: fine)`,selector:`${n.selector||""}:hover`}))],PVe=[Qa("contrast-more","@media (prefers-contrast: more)"),Qa("contrast-less","@media (prefers-contrast: less)")],DVe=[Qa("motion-reduce","@media (prefers-reduced-motion: reduce)"),Qa("motion-safe","@media (prefers-reduced-motion: no-preference)")],NVe=[Qa("landscape","@media (orientation: landscape)"),Qa("portrait","@media (orientation: portrait)")],FVe=n=>{if(!n.startsWith("_")&&(/space-?([xy])-?(-?.+)$/.test(n)||/divide-/.test(n)))return{matcher:n,selector:e=>{const t=">:not([hidden])~:not([hidden])";return e.includes(t)?e:`${e}${t}`}}},LVe=(n,{theme:e})=>{const t=n.match(/^(.*)\b(placeholder-)(.+)$/);if(t){const[,r="",i,s]=t;if(Vz(s,e)||zVe(s))return{matcher:`${r}placeholder-$ ${i}${s}`}}};function zVe(n){const e=n.match(/^op(?:acity)?-?(.+)$/);return e&&e[1]!=null?H.bracket.percent(e[1])!=null:!1}function BVe(n){return[LVe,FVe,...Ale(n),...PVe,...NVe,...DVe,...IVe,...RVe,...OVe]}function jVe(n={}){return{...Dje(n),name:"@unocss/preset-wind",theme:AVe,rules:TVe,shortcuts:_Ve,variants:BVe(n)}}const kH={"h1,h2,h3,h4,h5,h6":{color:"var(--un-prose-headings)","font-weight":"600","line-height":1.25},a:{color:"var(--un-prose-links)","text-decoration":"underline","font-weight":"500"},"a code":{color:"var(--un-prose-links)"},"p,ul,ol,pre":{margin:"1em 0","line-height":1.75},blockquote:{margin:"1em 0","padding-left":"1em","font-style":"italic","border-left":".25em solid var(--un-prose-borders)"},h1:{margin:"1rem 0","font-size":"2.25em"},h2:{margin:"1.75em 0 .5em","font-size":"1.75em"},h3:{margin:"1.5em 0 .5em","font-size":"1.375em"},h4:{margin:"1em 0","font-size":"1.125em"},"img,video":{"max-width":"100%"},"figure,picture":{margin:"1em 0"},figcaption:{color:"var(--un-prose-captions)","font-size":".875em"},code:{color:"var(--un-prose-code)","font-size":".875em","font-weight":600,"font-family":"var(--un-prose-font-mono)"},":not(pre) > code::before,:not(pre) > code::after":{content:'"`"'},pre:{padding:"1.25rem 1.5rem","overflow-x":"auto","border-radius":".375rem"},"pre,code":{"white-space":"pre","word-spacing":"normal","word-break":"normal","word-wrap":"normal","-moz-tab-size":4,"-o-tab-size":4,"tab-size":4,"-webkit-hyphens":"none","-moz-hyphens":"none",hyphens:"none",background:"transparent"},"pre code":{"font-weight":"inherit"},"ol,ul":{"padding-left":"1.25em"},ol:{"list-style-type":"decimal"},'ol[type="A"]':{"list-style-type":"upper-alpha"},'ol[type="a"]':{"list-style-type":"lower-alpha"},'ol[type="A" s]':{"list-style-type":"upper-alpha"},'ol[type="a" s]':{"list-style-type":"lower-alpha"},'ol[type="I"]':{"list-style-type":"upper-roman"},'ol[type="i"]':{"list-style-type":"lower-roman"},'ol[type="I" s]':{"list-style-type":"upper-roman"},'ol[type="i" s]':{"list-style-type":"lower-roman"},'ol[type="1"]':{"list-style-type":"decimal"},ul:{"list-style-type":"disc"},"ol > li::marker,ul > li::marker,summary::marker":{color:"var(--un-prose-lists)"},hr:{margin:"2em 0",border:"1px solid var(--un-prose-hr)"},table:{display:"block",margin:"1em 0","border-collapse":"collapse","overflow-x":"auto"},"tr:nth-child(2n)":{background:"var(--un-prose-bg-soft)"},"td,th":{border:"1px solid var(--un-prose-borders)",padding:".625em 1em"},abbr:{cursor:"help"},kbd:{color:"var(--un-prose-code)",border:"1px solid",padding:".25rem .5rem","font-size":".875em","border-radius":".25rem"},details:{margin:"1em 0",padding:"1.25rem 1.5rem",background:"var(--un-prose-bg-soft)"},summary:{cursor:"pointer","font-weight":"600"}};function xH(n){let e="";const{escapedSelector:t,selectorName:r,preflights:i,compatibility:s}=n,o=(s==null?void 0:s.noColonNot)||(s==null?void 0:s.noColonWhere);for(const a in i){const l=i[a],c=`:not(:where(.not-${r},.not-${r} *))`,u=a.split(",").map(d=>{const f=d.match(/::?(?:[\(\)\:\-\d\w]+)$/g);if(f){const h=f[0];return d=d.replace(h,""),t.map(p=>o?`${p} ${d}${h}`:`${p} :where(${d})${c}${h}`).join(",")}return null}).filter(d=>d);u.length?e+=u.join(","):e+=t.map(d=>o?a.split(",").map(f=>`${d} ${f}`).join(","):`${d} :where(${a})${c}`).join(","),e+="{";for(const d in l){const f=l[d];e+=`${d}:${f};`}e+="}"}return e}function VVe(n){const{escapedSelectors:e,selectorName:t,cssExtend:r,compatibility:i}=n;let s=Array.from(e);return!s[s.length-1].startsWith(".")&&!(i!=null&&i.noColonIs)&&(s=[`:is(${s[s.length-1]},.${t})`]),xH(r?{escapedSelector:s,selectorName:t,preflights:zz(kH,r),compatibility:i}:{escapedSelector:s,selectorName:t,preflights:kH,compatibility:i})}function qVe(n){n!=null&&n.className&&console.warn('[unocss:preset-typography] "className" is deprecated. Use "selectorName" instead.');const e=new Set,t=(n==null?void 0:n.selectorName)||(n==null?void 0:n.className)||"prose",r=new RegExp(`^${t}$`),i=new RegExp(`^${t}-([-\\w]+)$`),s=new RegExp(`^${t}-invert$`),o=n==null?void 0:n.cssExtend,a=n==null?void 0:n.compatibility;return{name:"@unocss/preset-typography",enforce:"post",layers:{typography:-20},rules:[[r,(l,{rawSelector:c})=>(e.add(dae(c)),{color:"var(--un-prose-body)","max-width":"65ch"}),{layer:"typography"}],[i,([,l],{theme:c})=>{var f,h;const u=(f=c.colors)==null?void 0:f[l];if(u==null)return;const d=typeof u=="object"?u:{};return{"--un-prose-body":d[700]??u,"--un-prose-headings":d[900]??u,"--un-prose-links":d[900]??u,"--un-prose-lists":d[400]??u,"--un-prose-hr":d[200]??u,"--un-prose-captions":d[500]??u,"--un-prose-code":d[900]??u,"--un-prose-borders":d[200]??u,"--un-prose-bg-soft":d[100]??u,"--un-prose-invert-body":d[200]??u,"--un-prose-invert-headings":d[100]??u,"--un-prose-invert-links":d[100]??u,"--un-prose-invert-lists":d[500]??u,"--un-prose-invert-hr":d[700]??u,"--un-prose-invert-captions":d[400]??u,"--un-prose-invert-code":d[100]??u,"--un-prose-invert-borders":d[700]??u,"--un-prose-invert-bg-soft":d[800]??u,"--un-prose-font-mono":(h=c.fontFamily)==null?void 0:h.mono}},{layer:"typography"}],[s,()=>({"--un-prose-body":"var(--un-prose-invert-body)","--un-prose-headings":"var(--un-prose-invert-headings)","--un-prose-links":"var(--un-prose-invert-links)","--un-prose-lists":"var(--un-prose-invert-lists)","--un-prose-hr":"var(--un-prose-invert-hr)","--un-prose-captions":"var(--un-prose-invert-captions)","--un-prose-code":"var(--un-prose-invert-code)","--un-prose-borders":"var(--un-prose-invert-borders)","--un-prose-bg-soft":"var(--un-prose-invert-bg-soft)"}),{layer:"typography"}]],preflights:[{layer:"typography",getCSS:()=>{if(e.size>0)return VVe({escapedSelectors:e,selectorName:t,cssExtend:o,compatibility:a})}}]}}const Hn={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"}},KVe={cli:{entry:{patterns:["{apps,plugins,packages}/**/*.{html,tsx}"],outFile:"apps/web/uno.css"}},presets:[jVe(),qVe()],theme:{colors:{transparent:"transparent",current:"currentColor",primary:Hn.indigo,background:{50:Hn.gray[50],100:Hn.gray[100],200:Hn.gray[200],300:Hn.gray[300]},foreground:{900:Hn.gray[900],800:Hn.gray[700],700:Hn.gray[500],600:Hn.gray[400]},positive:Hn.green,negative:Hn.red,warning:Hn.yellow},boxShadow:{sm:"0 1px 6px 0 rgba(0, 0, 0, 0.05)",DEFAULT:"0 1px 9px 0 rgba(0, 0, 0, 0.07), 0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 18px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -1px rgba(0, 0, 0, 0.05)",lg:"0 10px 25px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 50px -5px rgba(0, 0, 0, 0.07), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 75px -12px rgba(0, 0, 0, 0.25)",inner:"inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)",none:"none"},borderRadius:{none:"0",sm:"0.25rem",DEFAULT:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem","2xl":"1.5rem","3xl":"2.25rem",full:"9999px"}}};function Ile(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=Ile(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function Rle(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=Ile(n))&&(r&&(r+=" "),r+=e);return r}function UVe(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=Ole(e))&&(r&&(r+=" "),r+=t);return r}function Ole(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=Ole(n[r]))&&(t&&(t+=" "),t+=e);return t}var Wz="-";function HVe(n){var e=GVe(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(Wz);return l[0]===""&&l.length!==1&&l.shift(),Ple(l,e)||WVe(a)}function o(a,l){var c=t[a]||[];return l&&i[a]?[].concat(c,i[a]):c}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function Ple(n,e){var o;if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?Ple(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(Wz);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var SH=/^\[(.+)\]$/;function WVe(n){if(SH.test(n)){var e=SH.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function GVe(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=QVe(Object.entries(n.classGroups),t);return i.forEach(function(s){var o=s[0],a=s[1];r3(a,r,o,e)}),r}function r3(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:wH(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(JVe(i)){r3(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];r3(l,wH(e,a),t,r)})})}function wH(n,e){var t=n;return e.split(Wz).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function JVe(n){return n.isThemeGetter}function QVe(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,s]}):n}function YVe(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,o){t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):i(o,a)}}}var Dle="!";function XVe(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,c=0,u,d=0;d<o.length;d++){var f=o[d];if(l===0){if(f===r&&(t||o.slice(d,d+i)===e)){a.push(o.slice(c,d)),c=d+i;continue}if(f==="/"){u=d;continue}}f==="["?l++:f==="]"&&l--}var h=a.length===0?o:o.substring(c),p=h.startsWith(Dle),m=p?h.substring(1):h,g=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}}}function ZVe(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function eqe(n){return{cache:YVe(n.cacheSize),splitModifiers:XVe(n),...HVe(n)}}var tqe=/\s+/;function nqe(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(tqe).map(function(o){var a=t(o),l=a.modifiers,c=a.hasImportantModifier,u=a.baseClassName,d=a.maybePostfixModifierPosition,f=r(d?u.substring(0,d):u),h=!!d;if(!f){if(!d)return{isTailwindClass:!1,originalClassName:o};if(f=r(u),!f)return{isTailwindClass:!1,originalClassName:o};h=!1}var p=ZVe(l).join(":"),m=c?p+Dle:p;return{isTailwindClass:!0,modifierId:m,classGroupId:f,originalClassName:o,hasPostfixModifier:h}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,u=a+l;return s.has(u)?!1:(s.add(u),i(l,c).forEach(function(d){return s.add(a+d)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function rqe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,o=a;function a(c){var u=e[0],d=e.slice(1),f=d.reduce(function(h,p){return p(h)},u());return r=eqe(f),i=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){var u=i(c);if(u)return u;var d=nqe(c,r);return s(c,d),d}return function(){return o(UVe.apply(null,arguments))}}function Ct(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var Nle=/^\[(?:([a-z-]+):)?(.+)\]$/i,iqe=/^\d+\/\d+$/,sqe=new Set(["px","full","screen"]),oqe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aqe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lqe=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function na(n){return Uf(n)||sqe.has(n)||iqe.test(n)||i3(n)}function i3(n){return gp(n,"length",pqe)}function cqe(n){return gp(n,"size",Fle)}function uqe(n){return gp(n,"position",Fle)}function dqe(n){return gp(n,"url",mqe)}function Ox(n){return gp(n,"number",Uf)}function Uf(n){return!Number.isNaN(Number(n))}function fqe(n){return n.endsWith("%")&&Uf(n.slice(0,-1))}function zy(n){return $H(n)||gp(n,"number",$H)}function Qe(n){return Nle.test(n)}function By(){return!0}function yu(n){return oqe.test(n)}function hqe(n){return gp(n,"",gqe)}function gp(n,e,t){var r=Nle.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function pqe(n){return aqe.test(n)}function Fle(){return!1}function mqe(n){return n.startsWith("url(")}function $H(n){return Number.isInteger(Number(n))}function gqe(n){return lqe.test(n)}function yqe(){var n=Ct("colors"),e=Ct("spacing"),t=Ct("blur"),r=Ct("brightness"),i=Ct("borderColor"),s=Ct("borderRadius"),o=Ct("borderSpacing"),a=Ct("borderWidth"),l=Ct("contrast"),c=Ct("grayscale"),u=Ct("hueRotate"),d=Ct("invert"),f=Ct("gap"),h=Ct("gradientColorStops"),p=Ct("gradientColorStopPositions"),m=Ct("inset"),g=Ct("margin"),y=Ct("opacity"),k=Ct("padding"),b=Ct("saturate"),S=Ct("scale"),w=Ct("sepia"),x=Ct("skew"),$=Ct("space"),E=Ct("translate"),C=function(){return["auto","contain","none"]},M=function(){return["auto","hidden","clip","visible","scroll"]},P=function(){return["auto",Qe,e]},I=function(){return[Qe,e]},N=function(){return["",na]},T=function(){return["auto",Uf,Qe]},R=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},A=function(){return["solid","dashed","dotted","double","none"]},L=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},F=function(){return["start","end","center","between","around","evenly","stretch"]},O=function(){return["","0",Qe]},z=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},j=function(){return[Uf,Ox]},K=function(){return[Uf,Qe]};return{cacheSize:500,theme:{colors:[By],spacing:[na],blur:["none","",yu,Qe],brightness:j(),borderColor:[n],borderRadius:["none","","full",yu,Qe],borderSpacing:I(),borderWidth:N(),contrast:j(),grayscale:O(),hueRotate:K(),invert:O(),gap:I(),gradientColorStops:[n],gradientColorStopPositions:[fqe,i3],inset:P(),margin:P(),opacity:j(),padding:I(),saturate:j(),scale:j(),sepia:O(),skew:K(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Qe]}],container:["container"],columns:[{columns:[yu]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(R(),[Qe])}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zy]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qe]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",zy]}],"grid-cols":[{"grid-cols":[By]}],"col-start-end":[{col:["auto",{span:["full",zy]},Qe]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[By]}],"row-start-end":[{row:["auto",{span:[zy]},Qe]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(F())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(F(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(F(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Qe,e]}],"min-w":[{"min-w":["min","max","fit",Qe,na]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[yu]},yu,Qe]}],h:[{h:[Qe,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Qe,na]}],"max-h":[{"max-h":[Qe,e,"min","max","fit"]}],"font-size":[{text:["base",yu,i3]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ox]}],"font-family":[{font:[By]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qe]}],"line-clamp":[{"line-clamp":["none",Uf,Ox]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Qe,na]}],"list-image":[{"list-image":["none",Qe]}],"list-style-type":[{list:["none","disc","decimal",Qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(A(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",na]}],"underline-offset":[{"underline-offset":["auto",Qe,na]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(R(),[uqe])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cqe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dqe]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(A(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:A()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(A())}],"outline-offset":[{"outline-offset":[Qe,na]}],"outline-w":[{outline:[na]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[na]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",yu,hqe]}],"shadow-color":[{shadow:[By]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":L()}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",yu,Qe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qe]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",Qe]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[zy,Qe]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qe]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[na,Ox]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var vqe=rqe(yqe);const Ce=(...n)=>vqe(Rle(...n)),bqe=n=>{const e=(n.size??20)/4;return _("img",{src:"FlowIcon.svg",alt:"Flow icon",className:`h-${e} w-${e}`})};var Lle={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},nE=ee.createContext&&ee.createContext(Lle),md=globalThis&&globalThis.__assign||function(){return md=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},md.apply(this,arguments)},kqe=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function zle(n){return n&&n.map(function(e,t){return ee.createElement(e.tag,md({key:t},e.attr),zle(e.child))})}function At(n){return function(e){return ee.createElement(xqe,md({attr:md({},n.attr)},e),zle(n.child))}}function xqe(n){var e=function(t){var r=n.attr,i=n.size,s=n.title,o=kqe(n,["attr","size","title"]),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),ee.createElement("svg",md({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:md(md({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ee.createElement("title",null,s),n.children)};return nE!==void 0?ee.createElement(nE.Consumer,null,function(t){return e(t)}):e(Lle)}function Sqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1v7.5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 12.5V5a1 1 0 0 1-1-1V2zm2 3v7.5A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5V5H2zm13-3H1v2h14V2zM5 7.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"}}]})(n)}function N_n(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"}}]})(n)}function wqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"}}]})(n)}function F_n(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"}}]})(n)}function $qe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"}}]})(n)}function Eqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v1h14V3a1 1 0 0 0-1-1H2zm13 3H1v9a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V5z"}}]})(n)}function s3(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z"}}]})(n)}function Wh(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"}}]})(n)}function Ble(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"}}]})(n)}function jle(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"circle",attr:{cx:"8",cy:"8",r:"8"}}]})(n)}function Cqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"}},{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"}}]})(n)}function Mqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"}},{tag:"path",attr:{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"}}]})(n)}function Tqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855-.143.268-.276.56-.395.872.705.157 1.472.257 2.282.287V1.077zM4.249 3.539c.142-.384.304-.744.481-1.078a6.7 6.7 0 0 1 .597-.933A7.01 7.01 0 0 0 3.051 3.05c.362.184.763.349 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9.124 9.124 0 0 1-1.565-.667A6.964 6.964 0 0 0 1.018 7.5h2.49zm1.4-2.741a12.344 12.344 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332zM8.5 5.09V7.5h2.99a12.342 12.342 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.612 13.612 0 0 1 7.5 10.91V8.5H4.51zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741H8.5zm-3.282 3.696c.12.312.252.604.395.872.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a6.696 6.696 0 0 1-.598-.933 8.853 8.853 0 0 1-.481-1.079 8.38 8.38 0 0 0-1.198.49 7.01 7.01 0 0 0 2.276 1.522zm-1.383-2.964A13.36 13.36 0 0 1 3.508 8.5h-2.49a6.963 6.963 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667zm6.728 2.964a7.009 7.009 0 0 0 2.275-1.521 8.376 8.376 0 0 0-1.197-.49 8.853 8.853 0 0 1-.481 1.078 6.688 6.688 0 0 1-.597.933zM8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855.143-.268.276-.56.395-.872A12.63 12.63 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.963 6.963 0 0 0 14.982 8.5h-2.49a13.36 13.36 0 0 1-.437 3.008zM14.982 7.5a6.963 6.963 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008h2.49zM11.27 2.461c.177.334.339.694.482 1.078a8.368 8.368 0 0 0 1.196-.49 7.01 7.01 0 0 0-2.275-1.52c.218.283.418.597.597.932zm-.488 1.343a7.765 7.765 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"}}]})(n)}function _qe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.98 4a.5.5 0 0 0-.39.188L1.54 8H6a.5.5 0 0 1 .5.5 1.5 1.5 0 1 0 3 0A.5.5 0 0 1 10 8h4.46l-3.05-3.812A.5.5 0 0 0 11.02 4H4.98zm9.954 5H10.45a2.5 2.5 0 0 1-4.9 0H1.066l.32 2.562a.5.5 0 0 0 .497.438h12.234a.5.5 0 0 0 .496-.438L14.933 9zM3.809 3.563A1.5 1.5 0 0 1 4.981 3h6.038a1.5 1.5 0 0 1 1.172.563l3.7 4.625a.5.5 0 0 1 .105.374l-.39 3.124A1.5 1.5 0 0 1 14.117 13H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .106-.374l3.7-4.625z"}}]})(n)}function L_n(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}},{tag:"path",attr:{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"}}]})(n)}function Aqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"}},{tag:"path",attr:{d:"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"}},{tag:"path",attr:{d:"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"}}]})(n)}function Iqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.5 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h11zm-11-1a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2h-11z"}},{tag:"path",attr:{d:"M6.5 3a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3zm-4 0a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3zm8 0a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V3z"}}]})(n)}function z_n(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"}},{tag:"path",attr:{d:"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"}}]})(n)}function Rqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"}}]})(n)}function B_n(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"}}]})(n)}function Oqe(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}}]})(n)}function j_n(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.5 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V8.752l-6.267 3.636c-.52.302-1.233-.043-1.233-.696v-2.94l-6.267 3.636C.713 12.69 0 12.345 0 11.692V4.308c0-.653.713-.998 1.233-.696L7.5 7.248v-2.94c0-.653.713-.998 1.233-.696L15 7.248V4a.5.5 0 0 1 .5-.5zM1 4.633v6.734L6.804 8 1 4.633zm7.5 0v6.734L14.304 8 8.5 4.633z"}}]})(n)}function V_n(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"}},{tag:"path",attr:{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"}}]})(n)}function rE(n){return At({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"}}]})(n)}function Pqe(n){return At({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z",clipRule:"evenodd"}}]})(n)}function Ed(){return Ed=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ed.apply(this,arguments)}function me(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Dqe(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function z_(...n){return e=>n.forEach(t=>Dqe(t,e))}function at(...n){return v.useCallback(z_(...n),n)}function Jo(n,e=[]){let t=[];function r(s,o){const a=v.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[n][l])||a,g=v.useMemo(()=>p,Object.values(p));return v.createElement(m.Provider,{value:g},h)}function u(d,f){const h=(f==null?void 0:f[n][l])||a,p=v.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>v.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return v.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,Nqe(i,...e)]}function Nqe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function o3(){return o3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o3.apply(this,arguments)}function a3(){return a3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},a3.apply(this,arguments)}function iE(){return iE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iE.apply(this,arguments)}const Cd=v.forwardRef((n,e)=>{const{children:t,...r}=n,i=v.Children.toArray(t),s=i.find(Fqe);if(s){const o=s.props.children,a=i.map(l=>l===s?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:l);return v.createElement(l3,iE({},r,{ref:e}),v.isValidElement(o)?v.cloneElement(o,void 0,a):null)}return v.createElement(l3,iE({},r,{ref:e}),t)});Cd.displayName="Slot";const l3=v.forwardRef((n,e)=>{const{children:t,...r}=n;return v.isValidElement(t)?v.cloneElement(t,{...Lqe(r,t.props),ref:e?z_(e,t.ref):t.ref}):v.Children.count(t)>1?v.Children.only(null):null});l3.displayName="SlotClone";const Vle=({children:n})=>v.createElement(v.Fragment,null,n);function Fqe(n){return v.isValidElement(n)&&n.type===Vle}function Lqe(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const zqe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],qe=zqe.reduce((n,e)=>{const t=v.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Cd:e;return v.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),v.createElement(a,a3({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Gz(n,e){n&&Za.flushSync(()=>n.dispatchEvent(e))}function Bn(n){const e=v.useRef(n);return v.useEffect(()=>{e.current=n}),v.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function qle(n,e=globalThis==null?void 0:globalThis.document){const t=Bn(n);v.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const c3="dismissableLayer.update",Bqe="dismissableLayer.pointerDownOutside",jqe="dismissableLayer.focusOutside";let EH;const Vqe=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),B_=v.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=v.useContext(Vqe),[d,f]=v.useState(null),h=(t=d==null?void 0:d.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,p]=v.useState({}),m=at(e,E=>f(E)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),k=g.indexOf(y),b=d?g.indexOf(d):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,w=b>=k,x=qqe(E=>{const C=E.target,M=[...u.branches].some(P=>P.contains(C));!w||M||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},h),$=Kqe(E=>{const C=E.target;[...u.branches].some(P=>P.contains(C))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},h);return qle(E=>{b===u.layers.size-1&&(i==null||i(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},h),v.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(EH=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),CH(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=EH)}},[d,h,r,u]),v.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),CH())},[d,u]),v.useEffect(()=>{const E=()=>p({});return document.addEventListener(c3,E),()=>document.removeEventListener(c3,E)},[]),v.createElement(qe.div,o3({},c,{ref:m,style:{pointerEvents:S?w?"auto":"none":void 0,...n.style},onFocusCapture:me(n.onFocusCapture,$.onFocusCapture),onBlurCapture:me(n.onBlurCapture,$.onBlurCapture),onPointerDownCapture:me(n.onPointerDownCapture,x.onPointerDownCapture)}))});function qqe(n,e=globalThis==null?void 0:globalThis.document){const t=Bn(n),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){Kle(Bqe,t,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Kqe(n,e=globalThis==null?void 0:globalThis.document){const t=Bn(n),r=v.useRef(!1);return v.useEffect(()=>{const i=s=>{s.target&&!r.current&&Kle(jqe,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function CH(){const n=new CustomEvent(c3);document.dispatchEvent(n)}function Kle(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Gz(i,s):i.dispatchEvent(s)}const to=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},Uqe=KL["useId".toString()]||(()=>{});let Hqe=0;function Qs(n){const[e,t]=v.useState(Uqe());return to(()=>{n||t(r=>r??String(Hqe++))},[n]),n||(e?`radix-${e}`:"")}function sE(){return sE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sE.apply(this,arguments)}const Wqe=["top","right","bottom","left"],Md=Math.min,Cs=Math.max,oE=Math.round,Px=Math.floor,Td=n=>({x:n,y:n}),Gqe={left:"right",right:"left",bottom:"top",top:"bottom"},Jqe={start:"end",end:"start"};function u3(n,e,t){return Cs(n,Md(e,t))}function Wc(n,e){return typeof n=="function"?n(e):n}function Gc(n){return n.split("-")[0]}function M0(n){return n.split("-")[1]}function Jz(n){return n==="x"?"y":"x"}function Qz(n){return n==="y"?"height":"width"}function T0(n){return["top","bottom"].includes(Gc(n))?"y":"x"}function Yz(n){return Jz(T0(n))}function Qqe(n,e,t){t===void 0&&(t=!1);const r=M0(n),i=Yz(n),s=Qz(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=aE(o)),[o,aE(o)]}function Yqe(n){const e=aE(n);return[d3(n),e,d3(e)]}function d3(n){return n.replace(/start|end/g,e=>Jqe[e])}function Xqe(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Zqe(n,e,t,r){const i=M0(n);let s=Xqe(Gc(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(d3)))),s}function aE(n){return n.replace(/left|right|bottom|top/g,e=>Gqe[e])}function eKe(n){return{top:0,right:0,bottom:0,left:0,...n}}function Ule(n){return typeof n!="number"?eKe(n):{top:n,right:n,bottom:n,left:n}}function lE(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function MH(n,e,t){let{reference:r,floating:i}=n;const s=T0(e),o=Yz(e),a=Qz(o),l=Gc(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(M0(e)){case"start":h[o]-=f*(t&&c?-1:1);break;case"end":h[o]+=f*(t&&c?-1:1);break}return h}const tKe=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:d}=MH(c,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:k,y:b,data:S,reset:w}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:n,floating:e}});if(u=k??u,d=b??d,h={...h,[g]:{...h[g],...S}},w&&p<=50){p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(c=w.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):w.rects),{x:u,y:d}=MH(c,f,l)),m=-1;continue}}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function sk(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Wc(e,n),p=Ule(h),g=a[f?d==="floating"?"reference":"floating":d],y=lE(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(g)))==null||t?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),k=d==="floating"?{...o.floating,x:r,y:i}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=lE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:k,offsetParent:b,strategy:l}):k);return{top:(y.top-w.top+p.top)/S.y,bottom:(w.bottom-y.bottom+p.bottom)/S.y,left:(y.left-w.left+p.left)/S.x,right:(w.right-y.right+p.right)/S.x}}const TH=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Wc(n,e)||{};if(c==null)return{};const d=Ule(u),f={x:t,y:r},h=Yz(i),p=Qz(h),m=await o.getDimensions(c),g=h==="y",y=g?"top":"left",k=g?"bottom":"right",b=g?"clientHeight":"clientWidth",S=s.reference[p]+s.reference[h]-f[h]-s.floating[p],w=f[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let $=x?x[b]:0;(!$||!await(o.isElement==null?void 0:o.isElement(x)))&&($=a.floating[b]||s.floating[p]);const E=S/2-w/2,C=$/2-m[p]/2-1,M=Md(d[y],C),P=Md(d[k],C),I=M,N=$-m[p]-P,T=$/2-m[p]/2+E,R=u3(I,T,N),A=!l.arrow&&M0(i)!=null&&T!=R&&s.reference[p]/2-(T<I?M:P)-m[p]/2<0,L=A?T<I?T-I:T-N:0;return{[h]:f[h]+L,data:{[h]:R,centerOffset:T-R-L,...A&&{alignmentOffset:L}},reset:A}}}),Hle=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Wc(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const y=Gc(i),k=Gc(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(k||!m?[aE(a)]:Yqe(a));!f&&p!=="none"&&S.push(...Zqe(a,m,p,b));const w=[a,...S],x=await sk(e,g),$=[];let E=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&$.push(x[y]),d){const I=Qqe(i,o,b);$.push(x[I[0]],x[I[1]])}if(E=[...E,{placement:i,overflows:$}],!$.every(I=>I<=0)){var C,M;const I=(((C=s.flip)==null?void 0:C.index)||0)+1,N=w[I];if(N)return{data:{index:I,overflows:E},reset:{placement:N}};let T=(M=E.filter(R=>R.overflows[0]<=0).sort((R,A)=>R.overflows[1]-A.overflows[1])[0])==null?void 0:M.placement;if(!T)switch(h){case"bestFit":{var P;const R=(P=E.map(A=>[A.placement,A.overflows.filter(L=>L>0).reduce((L,F)=>L+F,0)]).sort((A,L)=>A[1]-L[1])[0])==null?void 0:P[0];R&&(T=R);break}case"initialPlacement":T=a;break}if(i!==T)return{reset:{placement:T}}}return{}}}};function _H(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function AH(n){return Wqe.some(e=>n[e]>=0)}const Wle=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Wc(n,e);switch(r){case"referenceHidden":{const s=await sk(e,{...i,elementContext:"reference"}),o=_H(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:AH(o)}}}case"escaped":{const s=await sk(e,{...i,altBoundary:!0}),o=_H(s,t.floating);return{data:{escapedOffsets:o,escaped:AH(o)}}}default:return{}}}}};async function nKe(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Gc(t),a=M0(t),l=T0(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=Wc(e,n);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Gle=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:r}=e,i=await nKe(e,n);return{x:t+i.x,y:r+i.y,data:i}}}},Jle=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:k}=g;return{x:y,y:k}}},...l}=Wc(n,e),c={x:t,y:r},u=await sk(e,l),d=T0(Gc(i)),f=Jz(d);let h=c[f],p=c[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",k=h+u[g],b=h-u[y];h=u3(k,h,b)}if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",k=p+u[g],b=p-u[y];p=u3(k,p,b)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-t,y:m.y-r}}}}},Qle=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Wc(n,e),u={x:t,y:r},d=T0(i),f=Jz(d);let h=u[f],p=u[d];const m=Wc(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",S=s.reference[f]-s.floating[b]+g.mainAxis,w=s.reference[f]+s.reference[b]-g.mainAxis;h<S?h=S:h>w&&(h=w)}if(c){var y,k;const b=f==="y"?"width":"height",S=["top","left"].includes(Gc(i)),w=s.reference[d]-s.floating[b]+(S&&((y=o.offset)==null?void 0:y[d])||0)+(S?0:g.crossAxis),x=s.reference[d]+s.reference[b]+(S?0:((k=o.offset)==null?void 0:k[d])||0)-(S?g.crossAxis:0);p<w?p=w:p>x&&(p=x)}return{[f]:h,[d]:p}}}},Yle=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=Wc(n,e),l=await sk(e,a),c=Gc(t),u=M0(t),d=T0(t)==="y",{width:f,height:h}=r.floating;let p,m;c==="top"||c==="bottom"?(p=c,m=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p=u==="end"?"top":"bottom");const g=h-l[p],y=f-l[m],k=!e.middlewareData.shift;let b=g,S=y;if(d){const x=f-l.left-l.right;S=u||k?Md(y,x):x}else{const x=h-l.top-l.bottom;b=u||k?Md(g,x):x}if(k&&!u){const x=Cs(l.left,0),$=Cs(l.right,0),E=Cs(l.top,0),C=Cs(l.bottom,0);d?S=f-2*(x!==0||$!==0?x+$:Cs(l.left,l.right)):b=h-2*(E!==0||C!==0?E+C:Cs(l.top,l.bottom))}await o({...e,availableWidth:S,availableHeight:b});const w=await i.getDimensions(s.floating);return f!==w.width||h!==w.height?{reset:{rects:!0}}:{}}}};function _d(n){return Xle(n)?(n.nodeName||"").toLowerCase():"#document"}function Ys(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function cu(n){var e;return(e=(Xle(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Xle(n){return n instanceof Node||n instanceof Ys(n).Node}function Jc(n){return n instanceof Element||n instanceof Ys(n).Element}function oc(n){return n instanceof HTMLElement||n instanceof Ys(n).HTMLElement}function IH(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ys(n).ShadowRoot}function r1(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Vo(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function rKe(n){return["table","td","th"].includes(_d(n))}function Xz(n){const e=Zz(),t=Vo(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function iKe(n){let e=Jg(n);for(;oc(e)&&!j_(e);){if(Xz(e))return e;e=Jg(e)}return null}function Zz(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function j_(n){return["html","body","#document"].includes(_d(n))}function Vo(n){return Ys(n).getComputedStyle(n)}function V_(n){return Jc(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Jg(n){if(_d(n)==="html")return n;const e=n.assignedSlot||n.parentNode||IH(n)&&n.host||cu(n);return IH(e)?e.host:e}function Zle(n){const e=Jg(n);return j_(e)?n.ownerDocument?n.ownerDocument.body:n.body:oc(e)&&r1(e)?e:Zle(e)}function ok(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Zle(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Ys(i);return s?e.concat(o,o.visualViewport||[],r1(i)?i:[],o.frameElement&&t?ok(o.frameElement):[]):e.concat(i,ok(i,[],t))}function ece(n){const e=Vo(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=oc(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=oE(t)!==s||oE(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function e8(n){return Jc(n)?n:n.contextElement}function Tg(n){const e=e8(n);if(!oc(e))return Td(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=ece(e);let o=(s?oE(t.width):t.width)/r,a=(s?oE(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const sKe=Td(0);function tce(n){const e=Ys(n);return!Zz()||!e.visualViewport?sKe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function oKe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ys(n)?!1:e}function Gh(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=e8(n);let o=Td(1);e&&(r?Jc(r)&&(o=Tg(r)):o=Tg(n));const a=oKe(s,t,r)?tce(s):Td(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=Ys(s),h=r&&Jc(r)?Ys(r):r;let p=f.frameElement;for(;p&&r&&h!==f;){const m=Tg(p),g=p.getBoundingClientRect(),y=Vo(p),k=g.left+(p.clientLeft+parseFloat(y.paddingLeft))*m.x,b=g.top+(p.clientTop+parseFloat(y.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=k,c+=b,p=Ys(p).frameElement}}return lE({width:u,height:d,x:l,y:c})}function aKe(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=oc(t),s=cu(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=Td(1);const l=Td(0);if((i||!i&&r!=="fixed")&&((_d(t)!=="body"||r1(s))&&(o=V_(t)),oc(t))){const c=Gh(t);a=Tg(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function lKe(n){return Array.from(n.getClientRects())}function nce(n){return Gh(cu(n)).left+V_(n).scrollLeft}function cKe(n){const e=cu(n),t=V_(n),r=n.ownerDocument.body,i=Cs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Cs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+nce(n);const a=-t.scrollTop;return Vo(r).direction==="rtl"&&(o+=Cs(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function uKe(n,e){const t=Ys(n),r=cu(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Zz();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function dKe(n,e){const t=Gh(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=oc(n)?Tg(n):Td(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function RH(n,e,t){let r;if(e==="viewport")r=uKe(n,t);else if(e==="document")r=cKe(cu(n));else if(Jc(e))r=dKe(e,t);else{const i=tce(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return lE(r)}function rce(n,e){const t=Jg(n);return t===e||!Jc(t)||j_(t)?!1:Vo(t).position==="fixed"||rce(t,e)}function fKe(n,e){const t=e.get(n);if(t)return t;let r=ok(n,[],!1).filter(a=>Jc(a)&&_d(a)!=="body"),i=null;const s=Vo(n).position==="fixed";let o=s?Jg(n):n;for(;Jc(o)&&!j_(o);){const a=Vo(o),l=Xz(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||r1(o)&&!l&&rce(n,o))?r=r.filter(u=>u!==o):i=a,o=Jg(o)}return e.set(n,r),r}function hKe(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?fKe(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const d=RH(e,u,i);return c.top=Cs(d.top,c.top),c.right=Md(d.right,c.right),c.bottom=Md(d.bottom,c.bottom),c.left=Cs(d.left,c.left),c},RH(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function pKe(n){return ece(n)}function mKe(n,e,t){const r=oc(e),i=cu(e),s=t==="fixed",o=Gh(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Td(0);if(r||!r&&!s)if((_d(e)!=="body"||r1(i))&&(a=V_(e)),r){const c=Gh(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=nce(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function OH(n,e){return!oc(n)||Vo(n).position==="fixed"?null:e?e(n):n.offsetParent}function ice(n,e){const t=Ys(n);if(!oc(n))return t;let r=OH(n,e);for(;r&&rKe(r)&&Vo(r).position==="static";)r=OH(r,e);return r&&(_d(r)==="html"||_d(r)==="body"&&Vo(r).position==="static"&&!Xz(r))?t:r||iKe(n)||t}const gKe=async function(n){let{reference:e,floating:t,strategy:r}=n;const i=this.getOffsetParent||ice,s=this.getDimensions;return{reference:mKe(e,await i(t),r),floating:{x:0,y:0,...await s(t)}}};function yKe(n){return Vo(n).direction==="rtl"}const vKe={convertOffsetParentRelativeRectToViewportRelativeRect:aKe,getDocumentElement:cu,getClippingRect:hKe,getOffsetParent:ice,getElementRects:gKe,getClientRects:lKe,getDimensions:pKe,getScale:Tg,isElement:Jc,isRTL:yKe};function bKe(n,e){let t=null,r;const i=cu(n);function s(){clearTimeout(r),t&&t.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:f}=n.getBoundingClientRect();if(a||e(),!d||!f)return;const h=Px(u),p=Px(i.clientWidth-(c+d)),m=Px(i.clientHeight-(u+f)),g=Px(c),k={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Cs(0,Md(1,l))||1};let b=!0;function S(w){const x=w[0].intersectionRatio;if(x!==l){if(!b)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},100)}b=!1}try{t=new IntersectionObserver(S,{...k,root:i.ownerDocument})}catch{t=new IntersectionObserver(S,k)}t.observe(n)}return o(!0),s}function sce(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=e8(n),u=i||s?[...c?ok(c):[],...ok(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",t,{passive:!0}),s&&y.addEventListener("resize",t)});const d=c&&a?bKe(c,t):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[k]=y;k&&k.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(e)})),t()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?Gh(n):null;l&&g();function g(){const y=Gh(n);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&t(),m=y,p=requestAnimationFrame(g)}return t(),()=>{u.forEach(y=>{i&&y.removeEventListener("scroll",t),s&&y.removeEventListener("resize",t)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const kKe=(n,e,t)=>{const r=new Map,i={platform:vKe,...t},s={...i.platform,_c:r};return tKe(n,e,{...i,platform:s})},oce=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?TH({element:r.current,padding:i}).fn(t):{}:r?TH({element:r,padding:i}).fn(t):{}}}};var Fw=typeof document<"u"?v.useLayoutEffect:v.useEffect;function cE(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!cE(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!cE(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function ace(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function PH(n,e){const t=ace(n);return Math.round(e*t)/t}function DH(n){const e=v.useRef(n);return Fw(()=>{e.current=n}),e}function lce(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,d]=v.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=v.useState(r);cE(f,r)||h(r);const[p,m]=v.useState(null),[g,y]=v.useState(null),k=v.useCallback(A=>{A!=x.current&&(x.current=A,m(A))},[m]),b=v.useCallback(A=>{A!==$.current&&($.current=A,y(A))},[y]),S=s||p,w=o||g,x=v.useRef(null),$=v.useRef(null),E=v.useRef(u),C=DH(l),M=DH(i),P=v.useCallback(()=>{if(!x.current||!$.current)return;const A={placement:e,strategy:t,middleware:f};M.current&&(A.platform=M.current),kKe(x.current,$.current,A).then(L=>{const F={...L,isPositioned:!0};I.current&&!cE(E.current,F)&&(E.current=F,Za.flushSync(()=>{d(F)}))})},[f,e,t,M]);Fw(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(A=>({...A,isPositioned:!1})))},[c]);const I=v.useRef(!1);Fw(()=>(I.current=!0,()=>{I.current=!1}),[]),Fw(()=>{if(S&&(x.current=S),w&&($.current=w),S&&w){if(C.current)return C.current(S,w,P);P()}},[S,w,P,C]);const N=v.useMemo(()=>({reference:x,floating:$,setReference:k,setFloating:b}),[k,b]),T=v.useMemo(()=>({reference:S,floating:w}),[S,w]),R=v.useMemo(()=>{const A={position:t,left:0,top:0};if(!T.floating)return A;const L=PH(T.floating,u.x),F=PH(T.floating,u.y);return a?{...A,transform:"translate("+L+"px, "+F+"px)",...ace(T.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:L,top:F}},[t,a,T.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:P,refs:N,elements:T,floatingStyles:R}),[u,P,N,T,R])}function t8(n){const[e,t]=v.useState(void 0);return to(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const cce="Popper",[uce,_0]=Jo(cce),[xKe,dce]=uce(cce),SKe=n=>{const{__scopePopper:e,children:t}=n,[r,i]=v.useState(null);return v.createElement(xKe,{scope:e,anchor:r,onAnchorChange:i},t)},wKe="PopperAnchor",$Ke=v.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=dce(wKe,t),o=v.useRef(null),a=at(e,o);return v.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:v.createElement(qe.div,sE({},i,{ref:a}))}),fce="PopperContent",[EKe,q_n]=uce(fce),CKe=v.forwardRef((n,e)=>{var t,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:g=!0,collisionBoundary:y=[],collisionPadding:k=0,sticky:b="partial",hideWhenDetached:S=!1,updatePositionStrategy:w="optimized",onPlaced:x,...$}=n,E=dce(fce,u),[C,M]=v.useState(null),P=at(e,Ft=>M(Ft)),[I,N]=v.useState(null),T=t8(I),R=(t=T==null?void 0:T.width)!==null&&t!==void 0?t:0,A=(r=T==null?void 0:T.height)!==null&&r!==void 0?r:0,L=d+(h!=="center"?"-"+h:""),F=typeof k=="number"?k:{top:0,right:0,bottom:0,left:0,...k},O=Array.isArray(y)?y:[y],z=O.length>0,j={padding:F,boundary:O.filter(MKe),altBoundary:z},{refs:K,floatingStyles:Z,placement:te,isPositioned:pe,middlewareData:he}=lce({strategy:"fixed",placement:L,whileElementsMounted:(...Ft)=>sce(...Ft,{animationFrame:w==="always"}),elements:{reference:E.anchor},middleware:[Gle({mainAxis:f+A,alignmentAxis:p}),g&&Jle({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?Qle():void 0,...j}),g&&Hle({...j}),Yle({...j,apply:({elements:Ft,rects:ts,availableWidth:ys,availableHeight:B})=>{const{width:U,height:J}=ts.reference,ue=Ft.floating.style;ue.setProperty("--radix-popper-available-width",`${ys}px`),ue.setProperty("--radix-popper-available-height",`${B}px`),ue.setProperty("--radix-popper-anchor-width",`${U}px`),ue.setProperty("--radix-popper-anchor-height",`${J}px`)}}),I&&oce({element:I,padding:m}),TKe({arrowWidth:R,arrowHeight:A}),S&&Wle({strategy:"referenceHidden",...j})]}),[se,ke]=hce(te),xe=Bn(x);to(()=>{pe&&(xe==null||xe())},[pe,xe]);const be=(i=he.arrow)===null||i===void 0?void 0:i.x,ye=(s=he.arrow)===null||s===void 0?void 0:s.y,Re=((o=he.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[ft,nt]=v.useState();return to(()=>{C&&nt(window.getComputedStyle(C).zIndex)},[C]),v.createElement("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:pe?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ft,"--radix-popper-transform-origin":[(a=he.transformOrigin)===null||a===void 0?void 0:a.x,(l=he.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},v.createElement(EKe,{scope:u,placedSide:se,onArrowChange:N,arrowX:be,arrowY:ye,shouldHideArrow:Re},v.createElement(qe.div,sE({"data-side":se,"data-align":ke},$,{ref:P,style:{...$.style,animation:pe?void 0:"none",opacity:(c=he.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function MKe(n){return n!==null}const TKe=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,f=d?0:n.arrowWidth,h=d?0:n.arrowHeight,[p,m]=hce(a),g={start:"0%",center:"50%",end:"100%"}[m],y=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,k=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let b="",S="";return p==="bottom"?(b=d?g:`${y}px`,S=`${-h}px`):p==="top"?(b=d?g:`${y}px`,S=`${l.floating.height+h}px`):p==="right"?(b=`${-h}px`,S=d?g:`${k}px`):p==="left"&&(b=`${l.floating.width+h}px`,S=d?g:`${k}px`),{data:{x:b,y:S}}}});function hce(n){const[e,t="center"]=n.split("-");return[e,t]}const q_=SKe,n8=$Ke,r8=CKe;function f3(){return f3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},f3.apply(this,arguments)}const i8=v.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?Vk.createPortal(v.createElement(qe.div,f3({},i,{ref:e})),r):null});function _Ke(n,e){return v.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const Qo=n=>{const{present:e,children:t}=n,r=AKe(e),i=typeof t=="function"?t({present:r.isPresent}):v.Children.only(t),s=at(r.ref,i.ref);return typeof t=="function"||r.isPresent?v.cloneElement(i,{ref:s}):null};Qo.displayName="Presence";function AKe(n){const[e,t]=v.useState(),r=v.useRef({}),i=v.useRef(n),s=v.useRef("none"),o=n?"mounted":"unmounted",[a,l]=_Ke(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=Dx(r.current);s.current=a==="mounted"?c:"none"},[a]),to(()=>{const c=r.current,u=i.current;if(u!==n){const f=s.current,h=Dx(c);n?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),to(()=>{if(e){const c=d=>{const h=Dx(r.current).includes(d.animationName);d.target===e&&h&&Za.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=Dx(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function Dx(n){return(n==null?void 0:n.animationName)||"none"}function Qc({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=IKe({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Bn(t),l=v.useCallback(c=>{if(s){const d=typeof c=="function"?c(n):c;d!==n&&a(d)}else i(c)},[s,n,i,a]);return[o,l]}function IKe({defaultProp:n,onChange:e}){const t=v.useState(n),[r]=t,i=v.useRef(r),s=Bn(e);return v.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}function h3(){return h3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},h3.apply(this,arguments)}const pce=v.forwardRef((n,e)=>v.createElement(qe.span,h3({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),RKe=pce,[K_,K_n]=Jo("Tooltip",[_0]),s8=_0(),OKe="TooltipProvider",PKe=700,p3="tooltip.open",[DKe,o8]=K_(OKe),NKe=n=>{const{__scopeTooltip:e,delayDuration:t=PKe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,[o,a]=v.useState(!0),l=v.useRef(!1),c=v.useRef(0);return v.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),v.createElement(DKe,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:v.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:v.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:v.useCallback(u=>{l.current=u},[]),disableHoverableContent:i},s)},a8="Tooltip",[FKe,U_]=K_(a8),LKe=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=o8(a8,n.__scopeTooltip),c=s8(e),[u,d]=v.useState(null),f=Qs(),h=v.useRef(0),p=o??l.disableHoverableContent,m=a??l.delayDuration,g=v.useRef(!1),[y=!1,k]=Qc({prop:r,defaultProp:i,onChange:$=>{$?(l.onOpen(),document.dispatchEvent(new CustomEvent(p3))):l.onClose(),s==null||s($)}}),b=v.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),S=v.useCallback(()=>{window.clearTimeout(h.current),g.current=!1,k(!0)},[k]),w=v.useCallback(()=>{window.clearTimeout(h.current),k(!1)},[k]),x=v.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,k(!0)},m)},[m,k]);return v.useEffect(()=>()=>window.clearTimeout(h.current),[]),v.createElement(q_,c,v.createElement(FKe,{scope:e,contentId:f,open:y,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:v.useCallback(()=>{l.isOpenDelayed?x():S()},[l.isOpenDelayed,x,S]),onTriggerLeave:v.useCallback(()=>{p?w():window.clearTimeout(h.current)},[w,p]),onOpen:S,onClose:w,disableHoverableContent:p},t))},NH="TooltipTrigger",zKe=v.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=U_(NH,t),s=o8(NH,t),o=s8(t),a=v.useRef(null),l=at(e,a,i.onTriggerChange),c=v.useRef(!1),u=v.useRef(!1),d=v.useCallback(()=>c.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),v.createElement(n8,Ed({asChild:!0},o),v.createElement(qe.button,Ed({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:me(n.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:me(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:me(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:me(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:me(n.onBlur,i.onClose),onClick:me(n.onClick,i.onClose)})))}),BKe="TooltipPortal",[U_n,jKe]=K_(BKe,{forceMount:void 0}),ak="TooltipContent",VKe=v.forwardRef((n,e)=>{const t=jKe(ak,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=U_(ak,n.__scopeTooltip);return v.createElement(Qo,{present:r||o.open},o.disableHoverableContent?v.createElement(mce,Ed({side:i},s,{ref:e})):v.createElement(qKe,Ed({side:i},s,{ref:e})))}),qKe=v.forwardRef((n,e)=>{const t=U_(ak,n.__scopeTooltip),r=o8(ak,n.__scopeTooltip),i=v.useRef(null),s=at(e,i),[o,a]=v.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=r,f=v.useCallback(()=>{a(null),d(!1)},[d]),h=v.useCallback((p,m)=>{const g=p.currentTarget,y={x:p.clientX,y:p.clientY},k=UKe(y,g.getBoundingClientRect()),b=HKe(y,k),S=WKe(m.getBoundingClientRect()),w=JKe([...b,...S]);a(w),d(!0)},[d]);return v.useEffect(()=>()=>f(),[f]),v.useEffect(()=>{if(l&&u){const p=g=>h(g,u),m=g=>h(g,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",m)}}},[l,u,h,f]),v.useEffect(()=>{if(o){const p=m=>{const g=m.target,y={x:m.clientX,y:m.clientY},k=(l==null?void 0:l.contains(g))||(u==null?void 0:u.contains(g)),b=!GKe(y,o);k?f():b&&(f(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,f]),v.createElement(mce,Ed({},n,{ref:s}))}),[KKe,H_n]=K_(a8,{isInside:!1}),mce=v.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=U_(ak,t),c=s8(t),{onClose:u}=l;return v.useEffect(()=>(document.addEventListener(p3,u),()=>document.removeEventListener(p3,u)),[u]),v.useEffect(()=>{if(l.trigger){const d=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),v.createElement(B_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u},v.createElement(r8,Ed({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),v.createElement(Vle,null,r),v.createElement(KKe,{scope:t,isInside:!0},v.createElement(RKe,{id:l.contentId,role:"tooltip"},i||r))))});function UKe(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function HKe(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function WKe(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function GKe(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function JKe(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),QKe(e)}function QKe(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const YKe=NKe,XKe=LKe,ZKe=zKe,eUe=VKe,gce=YKe,Jh=XKe,Qh=v.forwardRef((n,e)=>_(ZKe,{ref:e,...n,className:Ce("leading-none",n.className)})),Yh=v.forwardRef((n,e)=>_(eUe,{ref:e,...n,sideOffset:n.sideOffset??4,className:Ce("bg-background-50 animate-fade-in animate-duration-100 text-foreground-900 ring-0.5 ring-primary-100 z-50 rounded p-1 text-sm shadow-md",n.className),"un-cloak":!0})),l8=(n,e=[])=>{const[t,r]=v.useState(null),[i,s]=v.useState(!0),[o,a]=v.useState(null);return v.useEffect(()=>{n().then(l=>a(l)).catch(l=>r(l)).finally(()=>s(!1))},e),[o,i,t]},yce=function(){var n={defaultValue:null,kind:"LocalArgument",name:"currentDayId"},e={defaultValue:null,kind:"LocalArgument",name:"previousDayId"},t={defaultValue:null,kind:"LocalArgument",name:"routineId"},r=[{kind:"Variable",name:"id",variableName:"previousDayId"}],i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Routine",kind:"LinkedField",name:"routines",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"done",storageKey:null}],storageKey:null}],type:"Day",abstractKey:null},o=[s],a=[{kind:"Variable",name:"id",variableName:"currentDayId"}],l=[{kind:"Variable",name:"id",variableName:"routineId"}],c={alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"stepSlug",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"shouldSkip",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},h=[f,s,i];return{fragment:{argumentDefinitions:[n,e,t],kind:"Fragment",metadata:null,name:"RoutineViewQuery",selections:[{alias:"previousDay",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:o,storageKey:null},{alias:"currentDay",args:a,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:o,storageKey:null},{alias:"routine",args:l,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i,{alias:null,args:null,concreteType:"RoutineStep",kind:"LinkedField",name:"steps",plural:!0,selections:[c,u,d,{args:null,kind:"FragmentSpread",name:"RoutineStep_step"}],storageKey:null}],type:"Routine",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,n,t],kind:"Operation",name:"RoutineViewQuery",selections:[{alias:"previousDay",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:h,storageKey:null},{alias:"currentDay",args:a,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:h,storageKey:null},{alias:"routine",args:l,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[f,i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"RoutineStep",kind:"LinkedField",name:"steps",plural:!0,selections:[c,u,d],storageKey:null}],type:"Routine",abstractKey:null}],storageKey:null}]},params:{cacheID:"ef7e77b11ceba36e52eb070df9b51c1f",id:null,metadata:{},name:"RoutineViewQuery",operationKind:"query",text:`query RoutineViewQuery(
  $previousDayId: ID!
  $currentDayId: ID!
  $routineId: ID!
) {
  previousDay: node(id: $previousDayId) {
    __typename
    ... on Day {
      routines {
        id
        done
      }
    }
    id
  }
  currentDay: node(id: $currentDayId) {
    __typename
    ... on Day {
      routines {
        id
        done
      }
    }
    id
  }
  routine: node(id: $routineId) {
    __typename
    ... on Routine {
      id
      steps {
        pluginSlug
        stepSlug
        shouldSkip
        ...RoutineStep_step
      }
    }
    id
  }
}

fragment RoutineStep_step on RoutineStep {
  pluginSlug
  stepSlug
}
`}}}();yce.hash="5782a345a9d9f42355e61cd788be7484";const vce=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"todayDayId"}],e=[{kind:"Variable",name:"id",variableName:"todayDayId"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Routine",kind:"LinkedField",name:"routines",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},{alias:null,args:null,concreteType:"RoutineStep",kind:"LinkedField",name:"steps",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stepSlug",storageKey:null}],storageKey:null}],storageKey:null}],type:"Day",abstractKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"RoutineViewLatestQuery",selections:[{alias:"today",args:e,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"RoutineViewLatestQuery",selections:[{alias:"today",args:e,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,t],storageKey:null}]},params:{cacheID:"a0ad91b876bbf645835248f6fb930aef",id:null,metadata:{},name:"RoutineViewLatestQuery",operationKind:"query",text:`query RoutineViewLatestQuery(
  $todayDayId: ID!
) {
  today: node(id: $todayDayId) {
    __typename
    ... on Day {
      routines {
        id
        name
        time
        steps {
          pluginSlug
          stepSlug
        }
      }
    }
    id
  }
}
`}}}();vce.hash="853c76b5792ed7f7f8da34f57e832247";var bce={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(kd,function(){var t=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var R=["th","st","nd","rd"],A=T%100;return"["+T+(R[(A-20)%10]||R[A]||R[0])+"]"}},b=function(T,R,A){var L=String(T);return!L||L.length>=R?T:""+Array(R+1-L.length).join(A)+T},S={s:b,z:function(T){var R=-T.utcOffset(),A=Math.abs(R),L=Math.floor(A/60),F=A%60;return(R<=0?"+":"-")+b(L,2,"0")+":"+b(F,2,"0")},m:function T(R,A){if(R.date()<A.date())return-T(A,R);var L=12*(A.year()-R.year())+(A.month()-R.month()),F=R.clone().add(L,d),O=A-F<0,z=R.clone().add(L+(O?-1:1),d);return+(-(L+(A-F)/(O?F-z:z-F))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:d,y:h,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:f}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},w="en",x={};x[w]=k;var $="$isDayjsObject",E=function(T){return T instanceof I||!(!T||!T[$])},C=function T(R,A,L){var F;if(!R)return w;if(typeof R=="string"){var O=R.toLowerCase();x[O]&&(F=O),A&&(x[O]=A,F=O);var z=R.split("-");if(!F&&z.length>1)return T(z[0])}else{var j=R.name;x[j]=R,F=j}return!L&&F&&(w=F),F||!L&&w},M=function(T,R){if(E(T))return T.clone();var A=typeof R=="object"?R:{};return A.date=T,A.args=arguments,new I(A)},P=S;P.l=C,P.i=E,P.w=function(T,R){return M(T,{locale:R.$L,utc:R.$u,x:R.$x,$offset:R.$offset})};var I=function(){function T(A){this.$L=C(A.locale,null,!0),this.parse(A),this.$x=this.$x||A.x||{},this[$]=!0}var R=T.prototype;return R.parse=function(A){this.$d=function(L){var F=L.date,O=L.utc;if(F===null)return new Date(NaN);if(P.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var z=F.match(g);if(z){var j=z[2]-1||0,K=(z[7]||"0").substring(0,3);return O?new Date(Date.UTC(z[1],j,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)):new Date(z[1],j,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)}}return new Date(F)}(A),this.init()},R.init=function(){var A=this.$d;this.$y=A.getFullYear(),this.$M=A.getMonth(),this.$D=A.getDate(),this.$W=A.getDay(),this.$H=A.getHours(),this.$m=A.getMinutes(),this.$s=A.getSeconds(),this.$ms=A.getMilliseconds()},R.$utils=function(){return P},R.isValid=function(){return this.$d.toString()!==m},R.isSame=function(A,L){var F=M(A);return this.startOf(L)<=F&&F<=this.endOf(L)},R.isAfter=function(A,L){return M(A)<this.startOf(L)},R.isBefore=function(A,L){return this.endOf(L)<M(A)},R.$g=function(A,L,F){return P.u(A)?this[L]:this.set(F,A)},R.unix=function(){return Math.floor(this.valueOf()/1e3)},R.valueOf=function(){return this.$d.getTime()},R.startOf=function(A,L){var F=this,O=!!P.u(L)||L,z=P.p(A),j=function(xe,be){var ye=P.w(F.$u?Date.UTC(F.$y,be,xe):new Date(F.$y,be,xe),F);return O?ye:ye.endOf(c)},K=function(xe,be){return P.w(F.toDate()[xe].apply(F.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(be)),F)},Z=this.$W,te=this.$M,pe=this.$D,he="set"+(this.$u?"UTC":"");switch(z){case h:return O?j(1,0):j(31,11);case d:return O?j(1,te):j(0,te+1);case u:var se=this.$locale().weekStart||0,ke=(Z<se?Z+7:Z)-se;return j(O?pe-ke:pe+(6-ke),te);case c:case p:return K(he+"Hours",0);case l:return K(he+"Minutes",1);case a:return K(he+"Seconds",2);case o:return K(he+"Milliseconds",3);default:return this.clone()}},R.endOf=function(A){return this.startOf(A,!1)},R.$set=function(A,L){var F,O=P.p(A),z="set"+(this.$u?"UTC":""),j=(F={},F[c]=z+"Date",F[p]=z+"Date",F[d]=z+"Month",F[h]=z+"FullYear",F[l]=z+"Hours",F[a]=z+"Minutes",F[o]=z+"Seconds",F[s]=z+"Milliseconds",F)[O],K=O===c?this.$D+(L-this.$W):L;if(O===d||O===h){var Z=this.clone().set(p,1);Z.$d[j](K),Z.init(),this.$d=Z.set(p,Math.min(this.$D,Z.daysInMonth())).$d}else j&&this.$d[j](K);return this.init(),this},R.set=function(A,L){return this.clone().$set(A,L)},R.get=function(A){return this[P.p(A)]()},R.add=function(A,L){var F,O=this;A=Number(A);var z=P.p(L),j=function(te){var pe=M(O);return P.w(pe.date(pe.date()+Math.round(te*A)),O)};if(z===d)return this.set(d,this.$M+A);if(z===h)return this.set(h,this.$y+A);if(z===c)return j(1);if(z===u)return j(7);var K=(F={},F[a]=r,F[l]=i,F[o]=t,F)[z]||1,Z=this.$d.getTime()+A*K;return P.w(Z,this)},R.subtract=function(A,L){return this.add(-1*A,L)},R.format=function(A){var L=this,F=this.$locale();if(!this.isValid())return F.invalidDate||m;var O=A||"YYYY-MM-DDTHH:mm:ssZ",z=P.z(this),j=this.$H,K=this.$m,Z=this.$M,te=F.weekdays,pe=F.months,he=F.meridiem,se=function(be,ye,Re,ft){return be&&(be[ye]||be(L,O))||Re[ye].slice(0,ft)},ke=function(be){return P.s(j%12||12,be,"0")},xe=he||function(be,ye,Re){var ft=be<12?"AM":"PM";return Re?ft.toLowerCase():ft};return O.replace(y,function(be,ye){return ye||function(Re){switch(Re){case"YY":return String(L.$y).slice(-2);case"YYYY":return P.s(L.$y,4,"0");case"M":return Z+1;case"MM":return P.s(Z+1,2,"0");case"MMM":return se(F.monthsShort,Z,pe,3);case"MMMM":return se(pe,Z);case"D":return L.$D;case"DD":return P.s(L.$D,2,"0");case"d":return String(L.$W);case"dd":return se(F.weekdaysMin,L.$W,te,2);case"ddd":return se(F.weekdaysShort,L.$W,te,3);case"dddd":return te[L.$W];case"H":return String(j);case"HH":return P.s(j,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return xe(j,K,!0);case"A":return xe(j,K,!1);case"m":return String(K);case"mm":return P.s(K,2,"0");case"s":return String(L.$s);case"ss":return P.s(L.$s,2,"0");case"SSS":return P.s(L.$ms,3,"0");case"Z":return z}return null}(be)||z.replace(":","")})},R.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},R.diff=function(A,L,F){var O,z=this,j=P.p(L),K=M(A),Z=(K.utcOffset()-this.utcOffset())*r,te=this-K,pe=function(){return P.m(z,K)};switch(j){case h:O=pe()/12;break;case d:O=pe();break;case f:O=pe()/3;break;case u:O=(te-Z)/6048e5;break;case c:O=(te-Z)/864e5;break;case l:O=te/i;break;case a:O=te/r;break;case o:O=te/t;break;default:O=te}return F?O:P.a(O)},R.daysInMonth=function(){return this.endOf(d).$D},R.$locale=function(){return x[this.$L]},R.locale=function(A,L){if(!A)return this.$L;var F=this.clone(),O=C(A,L,!0);return O&&(F.$L=O),F},R.clone=function(){return P.w(this.$d,this)},R.toDate=function(){return new Date(this.valueOf())},R.toJSON=function(){return this.isValid()?this.toISOString():null},R.toISOString=function(){return this.$d.toISOString()},R.toString=function(){return this.$d.toUTCString()},T}(),N=I.prototype;return M.prototype=N,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",h],["$D",p]].forEach(function(T){N[T[1]]=function(R){return this.$g(R,T[0],T[1])}}),M.extend=function(T,R){return T.$i||(T(R,I,M),T.$i=!0),M},M.locale=C,M.isDayjs=E,M.unix=function(T){return M(1e3*T)},M.en=x[w],M.Ls=x,M.p={},M})})(bce);var tUe=bce.exports;const H_=tu(tUe);var kce={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(kd,function(){return function(t,r){r.prototype.weekday=function(i){var s=this.$locale().weekStart||0,o=this.$W,a=(o<s?o+7:o)-s;return this.$utils().u(i)?a:this.subtract(a,"day").add(i,"day")}}})})(kce);var nUe=kce.exports;const rUe=tu(nUe);var xce={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(kd,function(){var t={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,l=function(f,h,p){p===void 0&&(p={});var m=new Date(f),g=function(y,k){k===void 0&&(k={});var b=k.timeZoneName||"short",S=y+"|"+b,w=r[S];return w||(w=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[S]=w),w}(h,p);return g.formatToParts(m)},c=function(f,h){for(var p=l(f,h),m=[],g=0;g<p.length;g+=1){var y=p[g],k=y.type,b=y.value,S=t[k];S>=0&&(m[S]=parseInt(b,10))}var w=m[3],x=w===24?0:w,$=m[0]+"-"+m[1]+"-"+m[2]+" "+x+":"+m[4]+":"+m[5]+":000",E=+f;return(o.utc($).valueOf()-(E-=E%1e3))/6e4},u=s.prototype;u.tz=function(f,h){f===void 0&&(f=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:f}),y=Math.round((m-new Date(g))/1e3/60),k=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=k.utcOffset();k=k.add(p-b,"minute")}return k.$x.$timezone=f,k},u.offsetName=function(f){var h=this.$x.$timezone||o.tz.guess(),p=l(this.valueOf(),h,{timeZoneName:f}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var d=u.startOf;u.startOf=function(f,h){if(!this.$x||!this.$x.$timezone)return d.call(this,f,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(p,f,h).tz(this.$x.$timezone,!0)},o.tz=function(f,h,p){var m=p&&h,g=p||h||a,y=c(+o(),g);if(typeof f!="string")return o(f).tz(g);var k=function(x,$,E){var C=x-60*$*1e3,M=c(C,E);if($===M)return[C,$];var P=c(C-=60*(M-$)*1e3,E);return M===P?[C,M]:[x-60*Math.min(M,P)*1e3,Math.max(M,P)]}(o.utc(f,m).valueOf(),y,g),b=k[0],S=k[1],w=o(b).utcOffset(S);return w.$x.$timezone=g,w},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}})})(xce);var iUe=xce.exports;const sUe=tu(iUe);var Sce={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(kd,function(){return function(t,r,i){t=t||{};var s=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(c,u,d,f){return s.fromToBase(c,u,d,f)}i.en.relativeTime=o,s.fromToBase=function(c,u,d,f,h){for(var p,m,g,y=d.$locale().relativeTime||o,k=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],b=k.length,S=0;S<b;S+=1){var w=k[S];w.d&&(p=f?i(c).diff(d,w.d,!0):d.diff(c,w.d,!0));var x=(t.rounding||Math.round)(Math.abs(p));if(g=p>0,x<=w.r||!w.r){x<=1&&S>0&&(w=k[S-1]);var $=y[w.l];h&&(x=h(""+x)),m=typeof $=="string"?$.replace("%d",x):$(x,u,w.l,g);break}}if(u)return m;var E=g?y.future:y.past;return typeof E=="function"?E(m):E.replace("%s",m)},s.to=function(c,u){return a(c,u,this,!0)},s.from=function(c,u){return a(c,u,this)};var l=function(c){return c.$u?i.utc():i()};s.toNow=function(c){return this.to(l(this),c)},s.fromNow=function(c){return this.from(l(this),c)}}})})(Sce);var oUe=Sce.exports;const aUe=tu(oUe);H_.extend(rUe);H_.extend(sUe);H_.extend(aUe);const Qn=H_,wce={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RoutineStep_step",selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stepSlug",storageKey:null}],type:"RoutineStep",abstractKey:null};wce.hash="552b8b92650f6bdfd4dda68254f2185e";const $ce=function(){var n=[{alias:null,args:null,concreteType:"PluginInstallation",kind:"LinkedField",name:"installedPlugins",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasWebRuntime",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"getPluginsQuery",selections:n,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"getPluginsQuery",selections:n},params:{cacheID:"dac0380ffc6d789624c7776dbfe836aa",id:null,metadata:{},name:"getPluginsQuery",operationKind:"query",text:`query getPluginsQuery {
  installedPlugins {
    slug
    url
    hasWebRuntime
  }
}
`}}}();$ce.hash="93d06b733036481a7b6fddb9a465ae27";const Ece=function(){var n=[{alias:null,args:null,concreteType:"PluginInstallation",kind:"LinkedField",name:"installedPlugins",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasWebRuntime",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"getPluginsUsePluginsQuery",selections:n,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"getPluginsUsePluginsQuery",selections:n},params:{cacheID:"af79a4c6593f816571e6eebcf991c101",id:null,metadata:{},name:"getPluginsUsePluginsQuery",operationKind:"query",text:`query getPluginsUsePluginsQuery {
  installedPlugins {
    slug
    url
    hasWebRuntime
  }
}
`}}}();Ece.hash="2e1c25a85cb9ea7d4198f9468b272edc";const lUe=n=>{const e={xs:"h-3 w-3 border-2",sm:"h-4 w-4 border-2",md:"h-6 w-6 border-2",lg:"h-8 w-8 border-4"}[n.xs?"xs":n.sm?"sm":n.lg?"lg":"md"];return _("div",{className:"flex items-center justify-center",children:_("div",{className:Rle("border-t-primary-700 border-background-50 z-10 animate-spin rounded-full",e)})})},Kl=v.forwardRef((n,e)=>de("button",{...n,ref:e,disabled:n.disabled??n.loading,className:Ce("rounded-md text-sm shadow-none",n.danger?"bg-negative-500 text-negative-50 hover:bg-negative-600 active:bg-negative-700 bg-opacity-100":n.secondary?"bg-primary-100 text-primary-500 active:bg-primary-200 bg-opacity-70 hover:bg-opacity-100 active:bg-opacity-70":n.tertiary?"text-primary-500 hover:text-primary-400 active:text-primary-600 bg-transparent":"bg-primary-500 text-primary-50 hover:bg-primary-600 active:bg-primary-700 bg-opacity-100",n.sm?"px-2 py-1":n.lg?"px-4 py-3":"px-3 py-2",n.loading?"relative":"",n.className),children:[n.children,n.loading&&_("div",{className:"bg-background-50 absolute bottom-0 left-0 right-0 top-0 flex items-center justify-center rounded-md opacity-50",children:_(lUe,{sm:!0,xs:n.sm})})]})),Yc=v.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),A0=v.createContext({}),I0=v.createContext(null),i1=typeof document<"u",Vd=i1?v.useLayoutEffect:v.useEffect,c8=v.createContext({strict:!1}),lk=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Cce="framerAppearId",u8="data-"+lk(Cce);function cUe(n,e,t,r){const{visualElement:i}=v.useContext(A0),s=v.useContext(c8),o=v.useContext(I0),a=v.useContext(Yc).reducedMotion,l=v.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;v.useInsertionEffect(()=>{c&&c.update(t,o)});const u=v.useRef(!!(t[u8]&&!window.HandoffComplete));return Vd(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),v.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function fg(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function uUe(n,e,t){return v.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):fg(t)&&(t.current=r))},[e])}function ck(n){return typeof n=="string"||Array.isArray(n)}function W_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const d8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],f8=["initial",...d8];function G_(n){return W_(n.animate)||f8.some(e=>ck(n[e]))}function Mce(n){return!!(G_(n)||n.variants)}function dUe(n,e){if(G_(n)){const{initial:t,animate:r}=n;return{initial:t===!1||ck(t)?t:void 0,animate:ck(r)?r:void 0}}return n.inherit!==!1?e:{}}function fUe(n){const{initial:e,animate:t}=dUe(n,v.useContext(A0));return v.useMemo(()=>({initial:e,animate:t}),[FH(e),FH(t)])}function FH(n){return Array.isArray(n)?n.join(" "):n}const LH={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uk={};for(const n in LH)uk[n]={isEnabled:e=>LH[n].some(t=>!!e[t])};function m3(n){for(const e in n)uk[e]={...uk[e],...n[e]}}const Qg=v.createContext({}),h8=v.createContext({}),p8=Symbol.for("motionComponentSymbol");function m8({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&m3(n);function s(a,l){let c;const u={...v.useContext(Yc),...a,layoutId:hUe(a)},{isStatic:d}=u,f=fUe(a),h=r(a,d);if(!d&&i1){f.visualElement=cUe(i,h,u,e);const p=v.useContext(h8),m=v.useContext(c8).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,m,n,p))}return v.createElement(A0.Provider,{value:f},c&&f.visualElement?v.createElement(c,{visualElement:f.visualElement,...u}):null,t(i,a,uUe(h,f.visualElement,l),h,d,f.visualElement))}const o=v.forwardRef(s);return o[p8]=i,o}function hUe({layoutId:n}){const e=v.useContext(Qg).id;return e&&n!==void 0?e+"-"+n:n}function Tce(n){function e(r,i={}){return m8(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const pUe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function g8(n){return typeof n!="string"||n.includes("-")?!1:!!(pUe.indexOf(n)>-1||/[A-Z]/.test(n))}const uE={};function _ce(n){Object.assign(uE,n)}const s1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ac=new Set(s1);function Ace(n,{layout:e,layoutId:t}){return ac.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!uE[n]||n==="opacity")}const kn=n=>!!(n&&n.getVelocity),mUe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gUe=s1.length;function Ice(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let o=0;o<gUe;o++){const a=s1[o];if(n[a]!==void 0){const l=mUe[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const Rce=n=>e=>typeof e=="string"&&e.startsWith(n),y8=Rce("--"),g3=Rce("var(--"),yUe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,vUe=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Xc=(n,e,t)=>Math.min(Math.max(t,n),e),yp={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ov={...yp,transform:n=>Xc(0,1,n)},Nx={...yp,default:1},Pv=n=>Math.round(n*1e5)/1e5,J_=/(-)?([\d]*\.?[\d])+/g,Oce=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,bUe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function o1(n){return typeof n=="string"}const a1=n=>({test:e=>o1(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),xu=a1("deg"),tc=a1("%"),_e=a1("px"),kUe=a1("vh"),xUe=a1("vw"),zH={...tc,parse:n=>tc.parse(n)/100,transform:n=>tc.transform(n*100)},BH={...yp,transform:Math.round},Pce={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,radius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,size:_e,top:_e,right:_e,bottom:_e,left:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,rotate:xu,rotateX:xu,rotateY:xu,rotateZ:xu,scale:Nx,scaleX:Nx,scaleY:Nx,scaleZ:Nx,skew:xu,skewX:xu,skewY:xu,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:Ov,originX:zH,originY:zH,originZ:_e,zIndex:BH,fillOpacity:Ov,strokeOpacity:Ov,numOctaves:BH};function v8(n,e,t,r){const{style:i,vars:s,transform:o,transformOrigin:a}=n;let l=!1,c=!1,u=!0;for(const d in e){const f=e[d];if(y8(d)){s[d]=f;continue}const h=Pce[d],p=vUe(f,h);if(ac.has(d)){if(l=!0,o[d]=p,!u)continue;f!==(h.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=p):i[d]=p}if(e.transform||(l||r?i.transform=Ice(n.transform,t,u,r):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:h=0}=a;i.transformOrigin=`${d} ${f} ${h}`}}const b8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Dce(n,e,t){for(const r in e)!kn(e[r])&&!Ace(r,t)&&(n[r]=e[r])}function SUe({transformTemplate:n},e,t){return v.useMemo(()=>{const r=b8();return v8(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function wUe(n,e,t){const r=n.style||{},i={};return Dce(i,r,n),Object.assign(i,SUe(n,e,t)),n.transformValues?n.transformValues(i):i}function $Ue(n,e,t){const r={},i=wUe(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const EUe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dk(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||EUe.has(n)}let Nce=n=>!dk(n);function Fce(n){n&&(Nce=e=>e.startsWith("on")?!dk(e):n(e))}try{Fce(require("@emotion/is-prop-valid").default)}catch{}function Lce(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(Nce(i)||t===!0&&dk(i)||!e&&!dk(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function jH(n,e,t){return typeof n=="string"?n:_e.transform(e+t*n)}function CUe(n,e,t){const r=jH(e,n.x,n.width),i=jH(t,n.y,n.height);return`${r} ${i}`}const MUe={offset:"stroke-dashoffset",array:"stroke-dasharray"},TUe={offset:"strokeDashoffset",array:"strokeDasharray"};function _Ue(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?MUe:TUe;n[s.offset]=_e.transform(-r);const o=_e.transform(e),a=_e.transform(t);n[s.array]=`${o} ${a}`}function k8(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,f){if(v8(n,c,u,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:p,dimensions:m}=n;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=CUe(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),r!==void 0&&(h.scale=r),o!==void 0&&_Ue(h,o,a,l,!1)}const zce=()=>({...b8(),attrs:{}}),x8=n=>typeof n=="string"&&n.toLowerCase()==="svg";function AUe(n,e,t,r){const i=v.useMemo(()=>{const s=zce();return k8(s,e,{enableHardwareAcceleration:!1},x8(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};Dce(s,n.style,n),i.style={...s,...i.style}}return i}function IUe(n=!1){return(t,r,i,{latestValues:s},o)=>{const l=(g8(t)?AUe:$Ue)(r,s,o,t),u={...Lce(r,typeof t=="string",n),...l,ref:i},{children:d}=r,f=v.useMemo(()=>kn(d)?d.get():d,[d]);return v.createElement(t,{...u,children:f})}}function Bce(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const jce=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vce(n,e,t,r){Bce(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(jce.has(i)?i:lk(i),e.attrs[i])}function S8(n,e){const{style:t}=n,r={};for(const i in t)(kn(t[i])||e.style&&kn(e.style[i])||Ace(i,n))&&(r[i]=t[i]);return r}function qce(n,e){const t=S8(n,e);for(const r in n)if(kn(n[r])||kn(e[r])){const i=s1.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function w8(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function Or(n){const e=v.useRef(null);return e.current===null&&(e.current=n()),e.current}const dE=n=>Array.isArray(n),RUe=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),OUe=n=>dE(n)?n[n.length-1]||0:n;function Dv(n){const e=kn(n)?n.get():n;return RUe(e)?e.toValue():e}function PUe({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const o={latestValues:DUe(r,i,s,n),renderState:e()};return t&&(o.mount=a=>t(r,a,o)),o}const Q_=n=>(e,t)=>{const r=v.useContext(A0),i=v.useContext(I0),s=()=>PUe(n,e,r,i);return t?s():Or(s)};function DUe(n,e,t,r){const i={},s=r(n,{});for(const f in s)i[f]=Dv(s[f]);let{initial:o,animate:a}=n;const l=G_(n),c=Mce(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!W_(d)&&(Array.isArray(d)?d:[d]).forEach(h=>{const p=w8(n,h);if(!p)return;const{transitionEnd:m,transition:g,...y}=p;for(const k in y){let b=y[k];if(Array.isArray(b)){const S=u?b.length-1:0;b=b[S]}b!==null&&(i[k]=b)}for(const k in m)i[k]=m[k]}),i}const qt=n=>n;class VH{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function NUe(n){let e=new VH,t=new VH,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&i,f=d?e:t;return c&&o.add(l),f.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),n())}i=!1,s&&(s=!1,a.process(l))}};return a}const iv=["prepare","read","update","preRender","render","postRender"],FUe=40;function LUe(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=iv.reduce((d,f)=>(d[f]=NUe(()=>t=!0),d),{}),o=d=>s[d].process(i),a=()=>{const d=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(d-i.timestamp,FUe),1),i.timestamp=d,i.isProcessing=!0,iv.forEach(o),i.isProcessing=!1,t&&e&&(r=!1,n(a))},l=()=>{t=!0,r=!0,i.isProcessing||n(a)};return{schedule:iv.reduce((d,f)=>{const h=s[f];return d[f]=(p,m=!1,g=!1)=>(t||l(),h.schedule(p,m,g)),d},{}),cancel:d=>iv.forEach(f=>s[f].cancel(d)),state:i,steps:s}}const{schedule:Ge,cancel:Bi,state:An,steps:Lw}=LUe(typeof requestAnimationFrame<"u"?requestAnimationFrame:qt,!0),zUe={useVisualState:Q_({scrapeMotionValuesFromProps:qce,createRenderState:zce,onMount:(n,e,{renderState:t,latestValues:r})=>{Ge.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Ge.render(()=>{k8(t,r,{enableHardwareAcceleration:!1},x8(e.tagName),n.transformTemplate),Vce(e,t)})}})},BUe={useVisualState:Q_({scrapeMotionValuesFromProps:S8,createRenderState:b8})};function $8(n,{forwardMotionProps:e=!1},t,r){return{...g8(n)?zUe:BUe,preloadedFeatures:t,useRender:IUe(e),createVisualElement:r,Component:n}}function Ul(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const Kce=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Y_(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const Uce=n=>e=>Kce(e)&&n(e,Y_(e));function nc(n,e,t,r){return Ul(n,e,Uce(t),r)}const jUe=(n,e)=>t=>e(n(t)),Lc=(...n)=>n.reduce(jUe);function Hce(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const qH=Hce("dragHorizontal"),KH=Hce("dragVertical");function Wce(n){let e=!1;if(n==="y")e=KH();else if(n==="x")e=qH();else{const t=qH(),r=KH();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function E8(){const n=Wce(!0);return n?(n(),!1):!0}class qd{constructor(e){this.isMounted=!1,this.node=e}update(){}}function UH(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||E8())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[r]&&Ge.update(()=>a[r](s,o))};return nc(n.current,t,i,{passive:!n.getProps()[r]})}class VUe extends qd{mount(){this.unmount=Lc(UH(this.node,!0),UH(this.node,!1))}unmount(){}}class qUe extends qd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lc(Ul(this.node.current,"focus",()=>this.onFocus()),Ul(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Gce=(n,e)=>e?n===e?!0:Gce(n,e.parentElement):!1;function VI(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Y_(t))}class KUe extends qd{constructor(){super(...arguments),this.removeStartListeners=qt,this.removeEndListeners=qt,this.removeAccessibleListeners=qt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=nc(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();Ge.update(()=>{!d&&!Gce(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=nc(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Lc(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||VI("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Ge.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Ul(this.node.current,"keyup",o),VI("down",(a,l)=>{this.startPress(a,l)})},t=Ul(this.node.current,"keydown",e),r=()=>{this.isPressing&&VI("cancel",(s,o)=>this.cancelPress(s,o))},i=Ul(this.node.current,"blur",r);this.removeAccessibleListeners=Lc(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ge.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!E8()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ge.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=nc(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Ul(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Lc(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const y3=new WeakMap,qI=new WeakMap,UUe=n=>{const e=y3.get(n.target);e&&e(n)},HUe=n=>{n.forEach(UUe)};function WUe({root:n,...e}){const t=n||document;qI.has(t)||qI.set(t,{});const r=qI.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(HUe,{root:n,...e})),r[i]}function GUe(n,e,t){const r=WUe(e);return y3.set(n,t),r.observe(n),()=>{y3.delete(n),r.unobserve(n)}}const JUe={some:0,all:1};class QUe extends qd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:JUe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return GUe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(YUe(e,t))&&this.startObserver()}unmount(){}}function YUe({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Jce={inView:{Feature:QUe},tap:{Feature:KUe},focus:{Feature:qUe},hover:{Feature:VUe}};function Qce(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function XUe(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function ZUe(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function X_(n,e,t){const r=n.getProps();return w8(r,e,t!==void 0?t:r.custom,XUe(n),ZUe(n))}let C8=qt,l1=qt;const zc=n=>n*1e3,wa=n=>n/1e3,fk={current:!1},Yce=n=>Array.isArray(n)&&typeof n[0]=="number";function Xce(n){return!!(!n||typeof n=="string"&&Zce[n]||Yce(n)||Array.isArray(n)&&n.every(Xce))}const sv=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Zce={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sv([0,.65,.55,1]),circOut:sv([.55,0,1,.45]),backIn:sv([.31,.01,.66,-.59]),backOut:sv([.33,1.53,.69,.99])};function eue(n){if(n)return Yce(n)?sv(n):Array.isArray(n)?n.map(eue):Zce[n]}function v3(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=eue(a);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function eHe(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const tue=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,tHe=1e-7,nHe=12;function rHe(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=tue(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>tHe&&++a<nHe);return o}function R0(n,e,t,r){if(n===e&&t===r)return qt;const i=s=>rHe(s,0,1,n,t);return s=>s===0||s===1?s:tue(i(s),e,r)}const nue=R0(.42,0,1,1),rue=R0(0,0,.58,1),M8=R0(.42,0,.58,1),iue=n=>Array.isArray(n)&&typeof n[0]!="number",T8=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,_8=n=>e=>1-n(1-e),Z_=n=>1-Math.sin(Math.acos(n)),A8=_8(Z_),sue=T8(Z_),I8=R0(.33,1.53,.69,.99),eA=_8(I8),oue=T8(eA),aue=n=>(n*=2)<1?.5*eA(n):.5*(2-Math.pow(2,-10*(n-1))),iHe={linear:qt,easeIn:nue,easeInOut:M8,easeOut:rue,circIn:Z_,circInOut:sue,circOut:A8,backIn:eA,backInOut:oue,backOut:I8,anticipate:aue},b3=n=>{if(Array.isArray(n)){l1(n.length===4);const[e,t,r,i]=n;return R0(e,t,r,i)}else if(typeof n=="string")return iHe[n];return n},R8=(n,e)=>t=>!!(o1(t)&&bUe.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),lue=(n,e,t)=>r=>{if(!o1(r))return r;const[i,s,o,a]=r.match(J_);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},sHe=n=>Xc(0,255,n),KI={...yp,transform:n=>Math.round(sHe(n))},Hf={test:R8("rgb","red"),parse:lue("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+KI.transform(n)+", "+KI.transform(e)+", "+KI.transform(t)+", "+Pv(Ov.transform(r))+")"};function oHe(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const k3={test:R8("#"),parse:oHe,transform:Hf.transform},hg={test:R8("hsl","hue"),parse:lue("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+tc.transform(Pv(e))+", "+tc.transform(Pv(t))+", "+Pv(Ov.transform(r))+")"},Sr={test:n=>Hf.test(n)||k3.test(n)||hg.test(n),parse:n=>Hf.test(n)?Hf.parse(n):hg.test(n)?hg.parse(n):k3.parse(n),transform:n=>o1(n)?n:n.hasOwnProperty("red")?Hf.transform(n):hg.transform(n)},$t=(n,e,t)=>-t*n+t*e+n;function UI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function aHe({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=UI(l,a,n+1/3),s=UI(l,a,n),o=UI(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const HI=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},lHe=[k3,Hf,hg],cHe=n=>lHe.find(e=>e.test(n));function HH(n){const e=cHe(n);let t=e.parse(n);return e===hg&&(t=aHe(t)),t}const cue=(n,e)=>{const t=HH(n),r=HH(e),i={...t};return s=>(i.red=HI(t.red,r.red,s),i.green=HI(t.green,r.green,s),i.blue=HI(t.blue,r.blue,s),i.alpha=$t(t.alpha,r.alpha,s),Hf.transform(i))};function uHe(n){var e,t;return isNaN(n)&&o1(n)&&(((e=n.match(J_))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Oce))===null||t===void 0?void 0:t.length)||0)>0}const uue={regex:yUe,countKey:"Vars",token:"${v}",parse:qt},due={regex:Oce,countKey:"Colors",token:"${c}",parse:Sr.parse},fue={regex:J_,countKey:"Numbers",token:"${n}",parse:yp.parse};function WI(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function fE(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&WI(t,uue),WI(t,due),WI(t,fue),t}function hue(n){return fE(n).values}function pue(n){const{values:e,numColors:t,numVars:r,tokenised:i}=fE(n),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(uue.token,o[l]):l<r+t?a=a.replace(due.token,Sr.transform(o[l])):a=a.replace(fue.token,Pv(o[l]));return a}}const dHe=n=>typeof n=="number"?0:n;function fHe(n){const e=hue(n);return pue(n)(e.map(dHe))}const Zc={test:uHe,parse:hue,createTransformer:pue,getAnimatableNone:fHe},mue=(n,e)=>t=>`${t>0?e:n}`;function gue(n,e){return typeof n=="number"?t=>$t(n,e,t):Sr.test(n)?cue(n,e):n.startsWith("var(")?mue(n,e):vue(n,e)}const yue=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,o)=>gue(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}},hHe=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=gue(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},vue=(n,e)=>{const t=Zc.createTransformer(e),r=fE(n),i=fE(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Lc(yue(r.values,i.values),t):mue(n,e)},Ad=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},WH=(n,e)=>t=>$t(n,e,t);function pHe(n){return typeof n=="number"?WH:typeof n=="string"?Sr.test(n)?cue:vue:Array.isArray(n)?yue:typeof n=="object"?hHe:WH}function mHe(n,e,t){const r=[],i=t||pHe(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||qt:e;a=Lc(l,a)}r.push(a)}return r}function c1(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(l1(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=mHe(e,r,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<n.length-2&&!(c<n[u+1]);u++);const d=Ad(n[u],n[u+1],c);return o[u](d)};return t?c=>l(Xc(n[0],n[s-1],c)):l}function bue(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Ad(0,e,r);n.push($t(t,1,i))}}function O8(n){const e=[0];return bue(e,n.length-1),e}function gHe(n,e){return n.map(t=>t*e)}function yHe(n,e){return n.map(()=>e||M8).splice(0,n.length-1)}function hE({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=iue(r)?r.map(b3):b3(r),s={done:!1,value:e[0]},o=gHe(t&&t.length===e.length?t:O8(e),n),a=c1(o,e,{ease:Array.isArray(i)?i:yHe(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function P8(n,e){return e?n*(1e3/e):0}const vHe=5;function kue(n,e,t){const r=Math.max(e-vHe,0);return P8(t-n(r),e-r)}const GI=.001,bHe=.01,GH=10,kHe=.05,xHe=1;function SHe({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s;C8(n<=zc(GH));let o=1-e;o=Xc(kHe,xHe,o),n=Xc(bHe,GH,wa(n)),o<1?(i=c=>{const u=c*o,d=u*n,f=u-t,h=x3(c,o),p=Math.exp(-d);return GI-f/h*p},s=c=>{const d=c*o*n,f=d*t+t,h=Math.pow(o,2)*Math.pow(c,2)*n,p=Math.exp(-d),m=x3(Math.pow(c,2),o);return(-i(c)+GI>0?-1:1)*((f-h)*p)/m}):(i=c=>{const u=Math.exp(-c*n),d=(c-t)*n+1;return-GI+u*d},s=c=>{const u=Math.exp(-c*n),d=(t-c)*(n*n);return u*d});const a=5/n,l=$He(i,s,a);if(n=zc(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:n}}}const wHe=12;function $He(n,e,t){let r=t;for(let i=1;i<wHe;i++)r=r-n(r)/e(r);return r}function x3(n,e){return n*Math.sqrt(1-e*e)}const EHe=["duration","bounce"],CHe=["stiffness","damping","mass"];function JH(n,e){return e.some(t=>n[t]!==void 0)}function MHe(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!JH(n,CHe)&&JH(n,EHe)){const t=SHe(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function tA({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:f}=MHe({...r,velocity:-wa(r.velocity||0)}),h=d||0,p=l/(2*Math.sqrt(a*c)),m=s-i,g=wa(Math.sqrt(a/c)),y=Math.abs(m)<5;t||(t=y?.01:2),e||(e=y?.005:.5);let k;if(p<1){const b=x3(g,p);k=S=>{const w=Math.exp(-p*g*S);return s-w*((h+p*g*m)/b*Math.sin(b*S)+m*Math.cos(b*S))}}else if(p===1)k=b=>s-Math.exp(-g*b)*(m+(h+g*m)*b);else{const b=g*Math.sqrt(p*p-1);k=S=>{const w=Math.exp(-p*g*S),x=Math.min(b*S,300);return s-w*((h+p*g*m)*Math.sinh(x)+b*m*Math.cosh(x))/b}}return{calculatedDuration:f&&u||null,next:b=>{const S=k(b);if(f)o.done=b>=u;else{let w=h;b!==0&&(p<1?w=kue(k,b,S):w=0);const x=Math.abs(w)<=t,$=Math.abs(s-S)<=e;o.done=x&&$}return o.value=o.done?s:S,o}}}function QH({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=n[0],f={done:!1,value:d},h=E=>a!==void 0&&E<a||l!==void 0&&E>l,p=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let m=t*e;const g=d+m,y=o===void 0?g:o(g);y!==g&&(m=y-d);const k=E=>-m*Math.exp(-E/r),b=E=>y+k(E),S=E=>{const C=k(E),M=b(E);f.done=Math.abs(C)<=c,f.value=f.done?y:M};let w,x;const $=E=>{h(f.value)&&(w=E,x=tA({keyframes:[f.value,p(f.value)],velocity:kue(b,E,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return $(0),{calculatedDuration:null,next:E=>{let C=!1;return!x&&w===void 0&&(C=!0,S(E),$(E)),w!==void 0&&E>w?x.next(E-w):(!C&&S(E),f)}}}const THe=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ge.update(e,!0),stop:()=>Bi(e),now:()=>An.isProcessing?An.timestamp:performance.now()}},S3=2e4;function w3(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<S3;)e+=t,r=n.next(e);return e>=S3?1/0:e}const _He={decay:QH,inertia:QH,tween:hE,keyframes:hE,spring:tA};function Yg({autoplay:n=!0,delay:e=0,driver:t=THe,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...f}){let h=1,p=!1,m,g;const y=()=>{g=new Promise(j=>{m=j})};y();let k;const b=_He[i]||hE;let S;b!==hE&&typeof r[0]!="number"&&(S=c1([0,100],r,{clamp:!1}),r=[0,100]);const w=b({...f,keyframes:r});let x;a==="mirror"&&(x=b({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let $="idle",E=null,C=null,M=null;w.calculatedDuration===null&&s&&(w.calculatedDuration=w3(w));const{calculatedDuration:P}=w;let I=1/0,N=1/0;P!==null&&(I=P+o,N=I*(s+1)-o);let T=0;const R=j=>{if(C===null)return;h>0&&(C=Math.min(C,j)),h<0&&(C=Math.min(j-N/h,C)),E!==null?T=E:T=Math.round(j-C)*h;const K=T-e*(h>=0?1:-1),Z=h>=0?K<0:K>N;T=Math.max(K,0),$==="finished"&&E===null&&(T=N);let te=T,pe=w;if(s){const xe=Math.min(T,N)/I;let be=Math.floor(xe),ye=xe%1;!ye&&xe>=1&&(ye=1),ye===1&&be--,be=Math.min(be,s+1),!!(be%2)&&(a==="reverse"?(ye=1-ye,o&&(ye-=o/I)):a==="mirror"&&(pe=x)),te=Xc(0,1,ye)*I}const he=Z?{done:!1,value:r[0]}:pe.next(te);S&&(he.value=S(he.value));let{done:se}=he;!Z&&P!==null&&(se=h>=0?T>=N:T<=0);const ke=E===null&&($==="finished"||$==="running"&&se);return d&&d(he.value),ke&&F(),he},A=()=>{k&&k.stop(),k=void 0},L=()=>{$="idle",A(),m(),y(),C=M=null},F=()=>{$="finished",u&&u(),A(),m()},O=()=>{if(p)return;k||(k=t(R));const j=k.now();l&&l(),E!==null?C=j-E:(!C||$==="finished")&&(C=j),$==="finished"&&y(),M=C,E=null,$="running",k.start()};n&&O();const z={then(j,K){return g.then(j,K)},get time(){return wa(T)},set time(j){j=zc(j),T=j,E!==null||!k||h===0?E=j:C=k.now()-j/h},get duration(){const j=w.calculatedDuration===null?w3(w):w.calculatedDuration;return wa(j)},get speed(){return h},set speed(j){j===h||!k||(h=j,z.time=wa(T))},get state(){return $},play:O,pause:()=>{$="paused",E=T},stop:()=>{p=!0,$!=="idle"&&($="idle",c&&c(),L())},cancel:()=>{M!==null&&R(M),L()},complete:()=>{$="finished"},sample:j=>(C=0,R(j))};return z}function xue(n){let e;return()=>(e===void 0&&(e=n()),e)}const AHe=xue(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),IHe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Fx=10,RHe=2e4,OHe=(n,e)=>e.type==="spring"||n==="backgroundColor"||!Xce(e.ease);function PHe(n,e,{onUpdate:t,onComplete:r,...i}){if(!(AHe()&&IHe.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(b=>{a=b})};u();let{keyframes:d,duration:f=300,ease:h,times:p}=i;if(OHe(e,i)){const b=Yg({...i,repeat:0,delay:0});let S={done:!1,value:d[0]};const w=[];let x=0;for(;!S.done&&x<RHe;)S=b.sample(x),w.push(S.value),x+=Fx;p=void 0,d=w,f=x-Fx,h="linear"}const m=v3(n.owner.current,e,d,{...i,duration:f,ease:h,times:p}),g=()=>{c=!1,m.cancel()},y=()=>{c=!0,Ge.update(g),a(),u()};return m.onfinish=()=>{c||(n.set(eHe(d,i)),r&&r(),y())},{then(b,S){return l.then(b,S)},attachTimeline(b){return m.timeline=b,m.onfinish=null,qt},get time(){return wa(m.currentTime||0)},set time(b){m.currentTime=zc(b)},get speed(){return m.playbackRate},set speed(b){m.playbackRate=b},get duration(){return wa(f)},play:()=>{o||(m.play(),Bi(g))},pause:()=>m.pause(),stop:()=>{if(o=!0,m.playState==="idle")return;const{currentTime:b}=m;if(b){const S=Yg({...i,autoplay:!1});n.setWithVelocity(S.sample(b-Fx).value,S.sample(b).value,Fx)}y()},complete:()=>{c||m.finish()},cancel:y}}function DHe({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:qt,pause:qt,stop:qt,then:s=>(s(),Promise.resolve()),cancel:qt,complete:qt});return e?Yg({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const NHe={type:"spring",stiffness:500,damping:25,restSpeed:10},FHe=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),LHe={type:"keyframes",duration:.8},zHe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BHe=(n,{keyframes:e})=>e.length>2?LHe:ac.has(n)?n.startsWith("scale")?FHe(e[1]):NHe:zHe,$3=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zc.test(e)||e==="0")&&!e.startsWith("url(")),jHe=new Set(["brightness","contrast","saturate","opacity"]);function VHe(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(J_)||[];if(!r)return n;const i=t.replace(r,"");let s=jHe.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const qHe=/([a-z-]*)\(.*?\)/g,E3={...Zc,getAnimatableNone:n=>{const e=n.match(qHe);return e?e.map(VHe).join(" "):n}},KHe={...Pce,color:Sr,backgroundColor:Sr,outlineColor:Sr,fill:Sr,stroke:Sr,borderColor:Sr,borderTopColor:Sr,borderRightColor:Sr,borderBottomColor:Sr,borderLeftColor:Sr,filter:E3,WebkitFilter:E3},D8=n=>KHe[n];function Sue(n,e){let t=D8(n);return t!==E3&&(t=Zc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const wue=n=>/^0[^.\s]+$/.test(n);function UHe(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||wue(n)}function HHe(n,e,t,r){const i=$3(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=r.from!==void 0?r.from:n.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),UHe(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];s[u]=Sue(e,a)}return s}function WHe({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function N8(n,e){return n[e]||n.default||n}const $ue={skipAnimations:!1},F8=(n,e,t,r={})=>i=>{const s=N8(r,n)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-zc(o);const l=HHe(e,n,t,s),c=l[0],u=l[l.length-1],d=$3(n,c),f=$3(n,u);let h={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{e.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(WHe(s)||(h={...h,...BHe(n,h)}),h.duration&&(h.duration=zc(h.duration)),h.repeatDelay&&(h.repeatDelay=zc(h.repeatDelay)),!d||!f||fk.current||s.type===!1||$ue.skipAnimations)return DHe(fk.current?{...h,delay:0}:h);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=PHe(e,n,h);if(p)return p}return Yg(h)};function pE(n){return!!(kn(n)&&n.add)}const Eue=n=>/^\-?\d*\.?\d+$/.test(n);function nA(n,e){n.indexOf(e)===-1&&n.push(e)}function Xg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function GHe([...n],e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}return n}class L8{constructor(){this.subscriptions=[]}add(e){return nA(this.subscriptions,e),()=>Xg(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const JHe=n=>!isNaN(parseFloat(n)),Nv={current:void 0};class z8{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=An;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ge.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ge.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=JHe(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new L8);const r=this.events[e].add(t);return e==="change"?()=>{r(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Nv.current&&Nv.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?P8(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Po(n,e){return new z8(n,e)}const Cue=n=>e=>e.test(n),QHe={test:n=>n==="auto",parse:n=>n},Mue=[yp,_e,tc,xu,xUe,kUe,QHe],jy=n=>Mue.find(Cue(n)),YHe=[...Mue,Sr,Zc],XHe=n=>YHe.find(Cue(n));function ZHe(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Po(t))}function B8(n,e){const t=X_(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const o in s){const a=OUe(s[o]);ZHe(n,o,a)}}function C3(n,e){[...e].reverse().forEach(r=>{const i=n.getVariant(r);i&&B8(n,i),n.variantChildren&&n.variantChildren.forEach(s=>{C3(s,e)})})}function eWe(n,e){if(Array.isArray(e))return C3(n,e);if(typeof e=="string")return C3(n,[e]);B8(n,e)}function j8(n,e,t){var r,i;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(r=t[l])!==null&&r!==void 0?r:n.readValue(l))!==null&&i!==void 0?i:e[l]),u!=null&&(typeof u=="string"&&(Eue(u)||wue(u))?u=parseFloat(u):!XHe(u)&&Zc.test(c)&&(u=Sue(l,c)),n.addValue(l,Po(u,{owner:n})),t[l]===void 0&&(t[l]=u),u!==null&&n.setBaseTarget(l,u))}}function tWe(n,e){return e?(e[n]||e.default||e).from:void 0}function Tue(n,e,t){const r={};for(const i in n){const s=tWe(i,e);if(s!==void 0)r[i]=s;else{const o=t.getValue(i);o&&(r[i]=o.get())}}return r}function nWe({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function rWe(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function V8(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");r&&(s=r);const c=[],u=i&&n.animationState&&n.animationState.getState()[i];for(const d in a){const f=n.getValue(d),h=a[d];if(!f||h===void 0||u&&nWe(u,d))continue;const p={delay:t,elapsed:0,...N8(s||{},d)};if(window.HandoffAppearAnimations){const y=n.getProps()[u8];if(y){const k=window.HandoffAppearAnimations(y,d,f,Ge);k!==null&&(p.elapsed=k,p.isHandoff=!0)}}let m=!p.isHandoff&&!rWe(f,h);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(m=!1),f.animation&&(m=!1),m)continue;f.start(F8(d,f,h,n.shouldReduceMotion&&ac.has(d)?{type:!1}:p));const g=f.animation;pE(l)&&(l.add(d),g.then(()=>l.remove(d))),c.push(g)}return o&&Promise.all(c).then(()=>{o&&B8(n,o)}),c}function M3(n,e,t={}){const r=X_(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(V8(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=i;return iWe(n,e,c+l,u,d,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function iWe(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(n.variantChildren).sort(sWe).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(M3(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function sWe(n,e){return n.sortNodePosition(e)}function rA(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>M3(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=M3(n,e,t);else{const i=typeof e=="function"?X_(n,e,t.custom):e;r=Promise.all(V8(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const oWe=[...d8].reverse(),aWe=d8.length;function lWe(n){return e=>Promise.all(e.map(({animation:t,options:r})=>rA(n,t,r)))}function cWe(n){let e=lWe(n);const t=dWe();let r=!0;const i=(l,c)=>{const u=X_(n,c);if(u){const{transition:d,transitionEnd:f,...h}=u;l={...l,...h,...f}}return l};function s(l){e=l(n)}function o(l,c){const u=n.getProps(),d=n.getVariantContext(!0)||{},f=[],h=new Set;let p={},m=1/0;for(let y=0;y<aWe;y++){const k=oWe[y],b=t[k],S=u[k]!==void 0?u[k]:d[k],w=ck(S),x=k===c?b.isActive:null;x===!1&&(m=y);let $=S===d[k]&&S!==u[k]&&w;if($&&r&&n.manuallyAnimateOnMount&&($=!1),b.protectedKeys={...p},!b.isActive&&x===null||!S&&!b.prevProp||W_(S)||typeof S=="boolean")continue;let C=uWe(b.prevProp,S)||k===c&&b.isActive&&!$&&w||y>m&&w,M=!1;const P=Array.isArray(S)?S:[S];let I=P.reduce(i,{});x===!1&&(I={});const{prevResolvedValues:N={}}=b,T={...N,...I},R=A=>{C=!0,h.has(A)&&(M=!0,h.delete(A)),b.needsAnimating[A]=!0};for(const A in T){const L=I[A],F=N[A];if(p.hasOwnProperty(A))continue;let O=!1;dE(L)&&dE(F)?O=!Qce(L,F):O=L!==F,O?L!==void 0?R(A):h.add(A):L!==void 0&&h.has(A)?R(A):b.protectedKeys[A]=!0}b.prevProp=S,b.prevResolvedValues=I,b.isActive&&(p={...p,...I}),r&&n.blockInitialAnimation&&(C=!1),C&&(!$||M)&&f.push(...P.map(A=>({animation:A,options:{type:k,...l}})))}if(h.size){const y={};h.forEach(k=>{const b=n.getBaseTarget(k);b!==void 0&&(y[k]=b)}),f.push({animation:y})}let g=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(f):Promise.resolve()}function a(l,c,u){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),t[l].isActive=c;const f=o(u,l);for(const h in t)t[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function uWe(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Qce(e,n):!1}function xf(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dWe(){return{animate:xf(!0),whileInView:xf(),whileHover:xf(),whileTap:xf(),whileDrag:xf(),whileFocus:xf(),exit:xf()}}class fWe extends qd{constructor(e){super(e),e.animationState||(e.animationState=cWe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),W_(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let hWe=0;class pWe extends qd{constructor(){super(...arguments),this.id=hWe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const q8={animation:{Feature:fWe},exit:{Feature:pWe}},T3=(n,e)=>Math.abs(n-e);function _ue(n,e){const t=T3(n.x,e.x),r=T3(n.y,e.y);return Math.sqrt(t**2+r**2)}class Aue{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=QI(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=_ue(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:m}=An;this.history.push({...p,timestamp:m});const{onStart:g,onMove:y}=this.handlers;f||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=JI(f,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=QI(d.type==="pointercancel"?this.lastMoveEventInfo:JI(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,g),p&&p(d,g)},!Kce(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=Y_(e),a=JI(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=An;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,QI(a,this.history)),this.removeListeners=Lc(nc(this.contextWindow,"pointermove",this.handlePointerMove),nc(this.contextWindow,"pointerup",this.handlePointerUp),nc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Bi(this.updatePoint)}}function JI(n,e){return e?{point:e(n.point)}:n}function YH(n,e){return{x:n.x-e.x,y:n.y-e.y}}function QI({point:n},e){return{point:n,delta:YH(n,Iue(e)),offset:YH(n,mWe(e)),velocity:gWe(e,.1)}}function mWe(n){return n[0]}function Iue(n){return n[n.length-1]}function gWe(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=Iue(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>zc(e)));)t--;if(!r)return{x:0,y:0};const s=wa(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ms(n){return n.max-n.min}function _3(n,e=0,t=.01){return Math.abs(n-e)<=t}function XH(n,e,t,r=.5){n.origin=r,n.originPoint=$t(e.min,e.max,n.origin),n.scale=ms(t)/ms(e),(_3(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=$t(t.min,t.max,n.origin)-n.originPoint,(_3(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Fv(n,e,t,r){XH(n.x,e.x,t.x,r?r.originX:void 0),XH(n.y,e.y,t.y,r?r.originY:void 0)}function ZH(n,e,t){n.min=t.min+e.min,n.max=n.min+ms(e)}function yWe(n,e,t){ZH(n.x,e.x,t.x),ZH(n.y,e.y,t.y)}function eW(n,e,t){n.min=e.min-t.min,n.max=n.min+ms(e)}function Lv(n,e,t){eW(n.x,e.x,t.x),eW(n.y,e.y,t.y)}function vWe(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?$t(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?$t(t,n,r.max):Math.min(n,t)),n}function tW(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function bWe(n,{top:e,left:t,bottom:r,right:i}){return{x:tW(n.x,t,i),y:tW(n.y,e,r)}}function nW(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function kWe(n,e){return{x:nW(n.x,e.x),y:nW(n.y,e.y)}}function xWe(n,e){let t=.5;const r=ms(n),i=ms(e);return i>r?t=Ad(e.min,e.max-r,n.min):r>i&&(t=Ad(n.min,n.max-i,e.min)),Xc(0,1,t)}function SWe(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const A3=.35;function wWe(n=A3){return n===!1?n=0:n===!0&&(n=A3),{x:rW(n,"left","right"),y:rW(n,"top","bottom")}}function rW(n,e,t){return{min:iW(n,e),max:iW(n,t)}}function iW(n,e){return typeof n=="number"?n:n[e]||0}const sW=()=>({translate:0,scale:1,origin:0,originPoint:0}),pg=()=>({x:sW(),y:sW()}),oW=()=>({min:0,max:0}),pn=()=>({x:oW(),y:oW()});function vo(n){return[n("x"),n("y")]}function Rue({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function $We({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function EWe(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function YI(n){return n===void 0||n===1}function I3({scale:n,scaleX:e,scaleY:t}){return!YI(n)||!YI(e)||!YI(t)}function Tf(n){return I3(n)||Oue(n)||n.z||n.rotate||n.rotateX||n.rotateY}function Oue(n){return aW(n.x)||aW(n.y)}function aW(n){return n&&n!=="0%"}function mE(n,e,t){const r=n-t,i=e*r;return t+i}function lW(n,e,t,r,i){return i!==void 0&&(n=mE(n,i,r)),mE(n,t,r)+e}function R3(n,e=0,t=1,r,i){n.min=lW(n.min,e,t,r,i),n.max=lW(n.max,e,t,r,i)}function Pue(n,{x:e,y:t}){R3(n.x,e.translate,e.scale,e.originPoint),R3(n.y,t.translate,t.scale,t.originPoint)}function CWe(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&mg(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Pue(n,o)),r&&Tf(s.latestValues)&&mg(n,s.latestValues))}e.x=cW(e.x),e.y=cW(e.y)}function cW(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Iu(n,e){n.min=n.min+e,n.max=n.max+e}function uW(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,o=$t(n.min,n.max,s);R3(n,e[t],e[r],o,e.scale)}const MWe=["x","scaleX","originX"],TWe=["y","scaleY","originY"];function mg(n,e){uW(n.x,e,MWe),uW(n.y,e,TWe)}function Due(n,e){return Rue(EWe(n.getBoundingClientRect(),e))}function _We(n,e,t){const r=Due(n,t),{scroll:i}=e;return i&&(Iu(r.x,i.offset.x),Iu(r.y,i.offset.y)),r}const Nue=({current:n})=>n?n.ownerDocument.defaultView:null,AWe=new WeakMap;class IWe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Y_(u,"page").point)},s=(u,d)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Wce(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vo(g=>{let y=this.getAxisMotionValue(g).get()||0;if(tc.test(y)){const{projection:k}=this.visualElement;if(k&&k.layout){const b=k.layout.layoutBox[g];b&&(y=ms(b)*(parseFloat(y)/100))}}this.originPoint[g]=y}),p&&Ge.update(()=>p(u,d),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:g}=d;if(h&&this.currentDirection===null){this.currentDirection=RWe(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),m&&m(u,d)},a=(u,d)=>this.stop(u,d),l=()=>vo(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Aue(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Nue(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ge.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Lx(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=vWe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&fg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=bWe(i.layoutBox,t):this.constraints=!1,this.elastic=wWe(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&vo(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=SWe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!fg(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=_We(r,i.root,this.visualElement.getTransformPagePoint());let o=kWe(i.layout.layoutBox,s);if(t){const a=t($We(o));this.hasMutatedConstraints=!!a,a&&(o=Rue(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=vo(u=>{if(!Lx(u,t,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(F8(e,r,0,t))}stopAnimation(){vo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vo(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){vo(t=>{const{drag:r}=this.getProps();if(!Lx(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-$t(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!fg(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};vo(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=xWe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vo(o=>{if(!Lx(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set($t(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;AWe.set(this.visualElement,this);const e=this.visualElement.current,t=nc(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();fg(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Ul(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(vo(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=A3,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Lx(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function RWe(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class OWe extends qd{constructor(e){super(e),this.removeGroupControls=qt,this.removeListeners=qt,this.controls=new IWe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qt}unmount(){this.removeGroupControls(),this.removeListeners()}}const dW=n=>(e,t)=>{n&&Ge.update(()=>n(e,t))};class PWe extends qd{constructor(){super(...arguments),this.removePointerDownListener=qt}onPointerDown(e){this.session=new Aue(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Nue(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:dW(e),onStart:dW(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ge.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=nc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Fue(){const n=v.useContext(I0);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=v.useId();return v.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}function DWe(){return NWe(v.useContext(I0))}function NWe(n){return n===null?!0:n.isPresent}const zw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fW(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Vy={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(_e.test(n))n=parseFloat(n);else return n;const t=fW(n,e.target.x),r=fW(n,e.target.y);return`${t}% ${r}%`}},FWe={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Zc.parse(n);if(i.length>5)return r;const s=Zc.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=$t(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class LWe extends ee.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;_ce(zWe),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),zw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ge.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Lue(n){const[e,t]=Fue(),r=v.useContext(Qg);return ee.createElement(LWe,{...n,layoutGroup:r,switchLayoutGroup:v.useContext(h8),isPresent:e,safeToRemove:t})}const zWe={borderRadius:{...Vy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vy,borderTopRightRadius:Vy,borderBottomLeftRadius:Vy,borderBottomRightRadius:Vy,boxShadow:FWe},zue=["TopLeft","TopRight","BottomLeft","BottomRight"],BWe=zue.length,hW=n=>typeof n=="string"?parseFloat(n):n,pW=n=>typeof n=="number"||_e.test(n);function jWe(n,e,t,r,i,s){i?(n.opacity=$t(0,t.opacity!==void 0?t.opacity:1,VWe(r)),n.opacityExit=$t(e.opacity!==void 0?e.opacity:1,0,qWe(r))):s&&(n.opacity=$t(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<BWe;o++){const a=`border${zue[o]}Radius`;let l=mW(e,a),c=mW(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||pW(l)===pW(c)?(n[a]=Math.max($t(hW(l),hW(c),r),0),(tc.test(c)||tc.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=$t(e.rotate||0,t.rotate||0,r))}function mW(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const VWe=Bue(0,.5,A8),qWe=Bue(.5,.95,qt);function Bue(n,e,t){return r=>r<n?0:r>e?1:t(Ad(n,e,r))}function gW(n,e){n.min=e.min,n.max=e.max}function po(n,e){gW(n.x,e.x),gW(n.y,e.y)}function yW(n,e,t,r,i){return n-=e,n=mE(n,1/t,r),i!==void 0&&(n=mE(n,1/i,r)),n}function KWe(n,e=0,t=1,r=.5,i,s=n,o=n){if(tc.test(e)&&(e=parseFloat(e),e=$t(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=$t(s.min,s.max,r);n===s&&(a-=e),n.min=yW(n.min,e,t,a,i),n.max=yW(n.max,e,t,a,i)}function vW(n,e,[t,r,i],s,o){KWe(n,e[t],e[r],e[i],e.scale,s,o)}const UWe=["x","scaleX","originX"],HWe=["y","scaleY","originY"];function bW(n,e,t,r){vW(n.x,e,UWe,t?t.x:void 0,r?r.x:void 0),vW(n.y,e,HWe,t?t.y:void 0,r?r.y:void 0)}function kW(n){return n.translate===0&&n.scale===1}function jue(n){return kW(n.x)&&kW(n.y)}function WWe(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function Vue(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function xW(n){return ms(n.x)/ms(n.y)}class GWe{constructor(){this.members=[]}add(e){nA(this.members,e),e.scheduleRender()}remove(e){if(Xg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function SW(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:c,rotateY:u}=t;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const JWe=(n,e)=>n.depth-e.depth;class que{constructor(){this.children=[],this.isDirty=!1}add(e){nA(this.children,e),this.isDirty=!0}remove(e){Xg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JWe),this.isDirty=!1,this.children.forEach(e)}}function Kue(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Bi(r),n(s-e))};return Ge.read(r,!0),()=>Bi(r)}function QWe(n){window.MotionDebug&&window.MotionDebug.record(n)}function Uue(n){return n instanceof SVGElement&&n.tagName!=="svg"}function K8(n,e,t){const r=kn(n)?n:Po(n);return r.start(F8("",r,e,t)),r.animation}const wW=["","X","Y","Z"],YWe={visibility:"hidden"},$W=1e3;let XWe=0;const _f={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Hue({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=XWe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_f.totalNodes=_f.resolvedTargetDeltas=_f.recalculatedProjection=0,this.nodes.forEach(tGe),this.nodes.forEach(oGe),this.nodes.forEach(aGe),this.nodes.forEach(nGe),QWe(_f)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new que)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new L8),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Uue(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let d;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Kue(f,250),zw.hasAnimatedSinceResize&&(zw.hasAnimatedSinceResize=!1,this.nodes.forEach(CW))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||fGe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),k=!this.targetLayout||!Vue(this.targetLayout,p)||h,b=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const S={...N8(m,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||CW(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lGe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(EW);return}this.isUpdating||this.nodes.forEach(iGe),this.isUpdating=!1,this.nodes.forEach(sGe),this.nodes.forEach(ZWe),this.nodes.forEach(eGe),this.clearAllSnapshots();const a=performance.now();An.delta=Xc(0,1e3/60,a-An.timestamp),An.timestamp=a,An.isProcessing=!0,Lw.update.process(An),Lw.preRender.process(An),Lw.render.process(An),An.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(rGe),this.sharedNodes.forEach(cGe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!jue(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Tf(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),hGe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return pn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Iu(a.x,l.offset.x),Iu(a.y,l.offset.y)),a}removeElementScroll(o){const a=pn();po(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){po(a,o);const{scroll:f}=this.root;f&&(Iu(a.x,-f.offset.x),Iu(a.y,-f.offset.y))}Iu(a.x,u.offset.x),Iu(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=pn();po(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&mg(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Tf(u.latestValues)&&mg(l,u.latestValues)}return Tf(this.latestValues)&&mg(l,this.latestValues),l}removeTransform(o){const a=pn();po(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Tf(c.latestValues))continue;I3(c.latestValues)&&c.updateSnapshot();const u=pn(),d=c.measurePageBox();po(u,d),bW(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Tf(this.latestValues)&&bW(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==An.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=An.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),Lv(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yWe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):po(this.target,this.layout.layoutBox),Pue(this.target,this.targetDelta)):po(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),Lv(this.relativeTargetOrigin,this.target,h.target),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_f.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||I3(this.parent.latestValues)||Oue(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===An.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;po(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;CWe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=pg(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=pg(),this.projectionDeltaWithTransform=pg());const m=this.projectionTransform;Fv(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=SW(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==f||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),_f.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=pg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=pn(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,g=this.getStack(),y=!g||g.members.length<=1,k=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(dGe));this.animationProgress=0;let b;this.mixTargetDelta=S=>{const w=S/1e3;MW(d.x,o.x,w),MW(d.y,o.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lv(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uGe(this.relativeTarget,this.relativeTargetOrigin,f,w),b&&WWe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=pn()),po(b,this.relativeTarget)),m&&(this.animationValues=u,jWe(u,c,this.latestValues,w,k,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{zw.hasAnimatedSinceResize=!0,this.currentAnimation=K8(0,$W,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($W),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Wue(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||pn();const d=ms(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=ms(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}po(a,l),mg(a,u),Fv(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new GWe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<wW.length;u++){const d="rotate"+wW[u];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return YWe;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Dv(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Dv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Tf(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=SW(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:h,y:p}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in uE){if(f[m]===void 0)continue;const{correct:g,applyTo:y}=uE[m],k=c.transform==="none"?f[m]:g(f[m],d);if(y){const b=y.length;for(let S=0;S<b;S++)c[y[S]]=k}else c[m]=k}return this.options.layoutId&&(c.pointerEvents=d===this?Dv(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(EW),this.root.sharedNodes.clear()}}}function ZWe(n){n.updateLayout()}function eGe(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?vo(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],h=ms(f);f.min=r[d].min,f.max=f.min+h}):Wue(s,t.layoutBox,r)&&vo(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],h=ms(r[d]);f.max=f.min+h,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+h)});const a=pg();Fv(a,r,t.layoutBox);const l=pg();o?Fv(l,n.applyTransform(i,!0),t.measuredBox):Fv(l,r,t.layoutBox);const c=!jue(a);let u=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=pn();Lv(p,t.layoutBox,f.layoutBox);const m=pn();Lv(m,r,h.layoutBox),Vue(p,m)||(u=!0),d.options.layoutRoot&&(n.relativeTarget=m,n.relativeTargetOrigin=p,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function tGe(n){_f.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function nGe(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function rGe(n){n.clearSnapshot()}function EW(n){n.clearMeasurements()}function iGe(n){n.isLayoutDirty=!1}function sGe(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function CW(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function oGe(n){n.resolveTargetDelta()}function aGe(n){n.calcProjection()}function lGe(n){n.resetRotation()}function cGe(n){n.removeLeadSnapshot()}function MW(n,e,t){n.translate=$t(e.translate,0,t),n.scale=$t(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function TW(n,e,t,r){n.min=$t(e.min,t.min,r),n.max=$t(e.max,t.max,r)}function uGe(n,e,t,r){TW(n.x,e.x,t.x,r),TW(n.y,e.y,t.y,r)}function dGe(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const fGe={duration:.45,ease:[.4,0,.1,1]},_W=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),AW=_W("applewebkit/")&&!_W("chrome/")?Math.round:qt;function IW(n){n.min=AW(n.min),n.max=AW(n.max)}function hGe(n){IW(n.x),IW(n.y)}function Wue(n,e,t){return n==="position"||n==="preserve-aspect"&&!_3(xW(e),xW(t),.2)}const pGe=Hue({attachResizeListener:(n,e)=>Ul(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wh={current:void 0},Gue=Hue({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!wh.current){const n=new pGe({});n.mount(window),n.setOptions({layoutScroll:!0}),wh.current=n}return wh.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Jue={pan:{Feature:PWe},drag:{Feature:OWe,ProjectionNode:Gue,MeasureLayout:Lue}},mGe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function gGe(n){const e=mGe.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function O3(n,e,t=1){const[r,i]=gGe(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Eue(o)?parseFloat(o):o}else return g3(i)?O3(i,e,t+1):i}function yGe(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!g3(s))return;const o=O3(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!g3(s))continue;const o=O3(s,r);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const vGe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Que=n=>vGe.has(n),bGe=n=>Object.keys(n).some(Que),RW=n=>n===yp||n===_e,OW=(n,e)=>parseFloat(n.split(", ")[e]),PW=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return OW(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?OW(s[1],n):0}},kGe=new Set(["x","y","z"]),xGe=s1.filter(n=>!kGe.has(n));function SGe(n){const e=[];return xGe.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Zg={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:PW(4,13),y:PW(5,14)};Zg.translateX=Zg.x;Zg.translateY=Zg.y;const wGe=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(c=>{a[c]=Zg[c](r,s)}),e.render();const l=e.measureViewportBox();return t.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),n[c]=Zg[c](l,s)}),n},$Ge=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(Que);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=n.getValue(l);if(!n.hasValue(l))return;let u=t[l],d=jy(u);const f=e[l];let h;if(dE(f)){const p=f.length,m=f[0]===null?1:0;u=f[m],d=jy(u);for(let g=m;g<p&&f[g]!==null;g++)h?l1(jy(f[g])===h):h=jy(f[g])}else h=jy(f);if(d!==h)if(RW(d)&&RW(h)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&h===_e&&(e[l]=f.map(parseFloat))}else d!=null&&d.transform&&(h!=null&&h.transform)&&(u===0||f===0)?u===0?c.set(h.transform(u)):e[l]=d.transform(f):(o||(s=SGe(n),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=wGe(e,n,a);return s.length&&s.forEach(([u,d])=>{n.getValue(u).set(d)}),n.render(),i1&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function EGe(n,e,t,r){return bGe(e)?$Ge(n,e,t,r):{target:e,transitionEnd:r}}const CGe=(n,e,t,r)=>{const i=yGe(n,e,r);return e=i.target,r=i.transitionEnd,EGe(n,e,t,r)},gE={current:null},U8={current:!1};function Yue(){if(U8.current=!0,!!i1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>gE.current=n.matches;n.addListener(e),e()}else gE.current=!1}function MGe(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],o=t[i];if(kn(s))n.addValue(i,s),pE(r)&&r.add(i);else if(kn(o))n.addValue(i,Po(s,{owner:n})),pE(r)&&r.remove(i);else if(o!==s)if(n.hasValue(i)){const a=n.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,Po(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const e0=new WeakMap,Xue=Object.keys(uk),TGe=Xue.length,DW=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],_Ge=f8.length;class H8{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ge.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=G_(t),this.isVariantNode=Mce(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(t,{});for(const d in u){const f=u[d];a[d]!==void 0&&kn(f)&&(f.set(a[d],!1),pE(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,e0.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),U8.current||Yue(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){e0.delete(this.current),this.projection&&this.projection.unmount(),Bi(this.notifyUpdate),Bi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=ac.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ge.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let o,a;for(let l=0;l<TGe;l++){const c=Xue[l],{isEnabled:u,Feature:d,ProjectionNode:f,MeasureLayout:h}=uk[c];f&&(o=f),u(t)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:h}=t;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&fg(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:h})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<DW.length;r++){const i=DW[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=MGe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<_Ge;r++){const i=f8[r],s=this.props[i];(ck(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Po(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=w8(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!kn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new L8),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Zue extends H8{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let o=Tue(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),o&&(o=i(o))),s){j8(this,r,o);const a=CGe(this,r,o,t);t=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:t,...r}}}function AGe(n){return window.getComputedStyle(n)}class ede extends Zue{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ac.has(t)){const r=D8(t);return r&&r.default||0}else{const r=AGe(e),i=(y8(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Due(e,t)}build(e,t,r,i){v8(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return S8(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){Bce(e,t,r,i)}}class tde extends Zue{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ac.has(t)){const r=D8(t);return r&&r.default||0}return t=jce.has(t)?t:lk(t),e.getAttribute(t)}measureInstanceViewportBox(){return pn()}scrapeMotionValuesFromProps(e,t){return qce(e,t)}build(e,t,r,i){k8(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){Vce(e,t,r,i)}mount(e){this.isSVGTag=x8(e.tagName),super.mount(e)}}const W8=(n,e)=>g8(n)?new tde(e,{enableHardwareAcceleration:!1}):new ede(e,{enableHardwareAcceleration:!0}),nde={layout:{ProjectionNode:Gue,MeasureLayout:Lue}},rde={...q8,...Jce,...Jue,...nde},Xu=Tce((n,e)=>$8(n,e,rde,W8));function IGe(n){return m8($8(n,{forwardMotionProps:!1},rde,W8))}const RGe=Tce($8);function ide(){const n=v.useRef(!1);return Vd(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function iA(){const n=ide(),[e,t]=v.useState(0),r=v.useCallback(()=>{n.current&&t(e+1)},[e]);return[v.useCallback(()=>Ge.postRender(r),[r]),e]}class OGe extends v.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PGe({children:n,isPresent:e}){const t=v.useId(),r=v.useRef(null),i=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=t;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),v.createElement(OGe,{isPresent:e,childRef:r,sizeRef:i},v.cloneElement(n,{ref:r}))}const XI=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Or(DGe),l=v.useId(),c=v.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),s?void 0:[t]);return v.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[t]),v.useEffect(()=>{!t&&!a.size&&r&&r()},[t]),o==="popLayout"&&(n=v.createElement(PGe,{isPresent:t},n)),v.createElement(I0.Provider,{value:c},n)};function DGe(){return new Map}function G8(n){return v.useEffect(()=>()=>n(),[])}const Af=n=>n.key||"";function NGe(n,e){n.forEach(t=>{const r=Af(t);e.set(r,t)})}function FGe(n){const e=[];return v.Children.forEach(n,t=>{v.isValidElement(t)&&e.push(t)}),e}const sde=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=v.useContext(Qg).forceRender||iA()[0],l=ide(),c=FGe(n);let u=c;const d=v.useRef(new Map).current,f=v.useRef(u),h=v.useRef(new Map).current,p=v.useRef(!0);if(Vd(()=>{p.current=!1,NGe(c,h),f.current=u}),G8(()=>{p.current=!0,h.clear(),d.clear()}),p.current)return v.createElement(v.Fragment,null,u.map(k=>v.createElement(XI,{key:Af(k),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},k)));u=[...u];const m=f.current.map(Af),g=c.map(Af),y=m.length;for(let k=0;k<y;k++){const b=m[k];g.indexOf(b)===-1&&!d.has(b)&&d.set(b,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((k,b)=>{if(g.indexOf(b)!==-1)return;const S=h.get(b);if(!S)return;const w=m.indexOf(b);let x=k;if(!x){const $=()=>{d.delete(b);const E=Array.from(h.keys()).filter(C=>!g.includes(C));if(E.forEach(C=>h.delete(C)),f.current=c.filter(C=>{const M=Af(C);return M===b||E.includes(M)}),!d.size){if(l.current===!1)return;a(),r&&r()}};x=v.createElement(XI,{key:Af(S),isPresent:!1,onExitComplete:$,custom:e,presenceAffectsLayout:s,mode:o},S),d.set(b,x)}u.splice(w,0,x)}),u=u.map(k=>{const b=k.key;return d.has(b)?k:v.createElement(XI,{key:Af(k),isPresent:!0,presenceAffectsLayout:s,mode:o},k)}),v.createElement(v.Fragment,null,d.size?u:u.map(k=>v.cloneElement(k)))};function LGe({children:n,isValidProp:e,...t}){e&&Fce(e),t={...v.useContext(Yc),...t},t.isStatic=Or(()=>t.isStatic);const r=v.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return v.createElement(Yc.Provider,{value:r},n)}function zGe({children:n,features:e,strict:t=!1}){const[,r]=v.useState(!ZI(e)),i=v.useRef(void 0);if(!ZI(e)){const{renderer:s,...o}=e;i.current=s,m3(o)}return v.useEffect(()=>{ZI(e)&&e().then(({renderer:s,...o})=>{m3(o),i.current=s,r(!0)})},[]),v.createElement(c8.Provider,{value:{renderer:i.current,strict:t}},n)}function ZI(n){return typeof n=="function"}const ode=v.createContext(null),BGe=n=>!n.isLayoutDirty&&n.willUpdate(!1);function NW(){const n=new Set,e=new WeakMap,t=()=>n.forEach(BGe);return{add:r=>{n.add(r),e.set(r,r.addEventListener("willUpdate",t))},remove:r=>{n.delete(r);const i=e.get(r);i&&(i(),e.delete(r)),t()},dirty:t}}const ade=n=>n===!0,jGe=n=>ade(n===!0)||n==="id",lde=({children:n,id:e,inherit:t=!0})=>{const r=v.useContext(Qg),i=v.useContext(ode),[s,o]=iA(),a=v.useRef(null),l=r.id||i;a.current===null&&(jGe(t)&&l&&(e=e?l+"-"+e:l),a.current={id:e,group:ade(t)&&r.group||NW()});const c=v.useMemo(()=>({...a.current,forceRender:s}),[o]);return v.createElement(Qg.Provider,{value:c},n)},cde=v.createContext(null);function VGe(n,e,t,r){if(!r)return n;const i=n.findIndex(u=>u.value===e);if(i===-1)return n;const s=r>0?1:-1,o=n[i+s];if(!o)return n;const a=n[i],l=o.layout,c=$t(l.min,l.max,.5);return s===1&&a.layout.max+t>c||s===-1&&a.layout.min+t<c?GHe(n,i,i+s):n}function qGe({children:n,as:e="ul",axis:t="y",onReorder:r,values:i,...s},o){const a=Or(()=>Xu(e)),l=[],c=v.useRef(!1),u={axis:t,registerItem:(d,f)=>{const h=l.findIndex(p=>d===p.value);h!==-1?l[h].layout=f[t]:l.push({value:d,layout:f[t]}),l.sort(HGe)},updateOrder:(d,f,h)=>{if(c.current)return;const p=VGe(l,d,f,h);l!==p&&(c.current=!0,r(p.map(UGe).filter(m=>i.indexOf(m)!==-1)))}};return v.useEffect(()=>{c.current=!1}),v.createElement(a,{...s,ref:o,ignoreStrict:!0},v.createElement(cde.Provider,{value:u},n))}const KGe=v.forwardRef(qGe);function UGe(n){return n.value}function HGe(n,e){return n.layout.min-e.layout.min}function Id(n){const e=Or(()=>Po(n)),{isStatic:t}=v.useContext(Yc);if(t){const[,r]=v.useState(n);v.useEffect(()=>e.on("change",r),[])}return e}const WGe=n=>n&&typeof n=="object"&&n.mix,GGe=n=>WGe(n)?n.mix:void 0;function ude(...n){const e=!Array.isArray(n[0]),t=e?0:-1,r=n[0+t],i=n[1+t],s=n[2+t],o=n[3+t],a=c1(i,s,{mixer:GGe(s[0]),...o});return e?a(r):a}function J8(n,e){const t=Id(e()),r=()=>t.set(e());return r(),Vd(()=>{const i=()=>Ge.update(r,!1,!0),s=n.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),Bi(r)}}),t}function JGe(n){Nv.current=[],n();const e=J8(Nv.current,n);return Nv.current=void 0,e}function yE(n,e,t,r){if(typeof n=="function")return JGe(n);const i=typeof e=="function"?e:ude(e,t,r);return Array.isArray(n)?FW(n,i):FW([n],([s])=>i(s))}function FW(n,e){const t=Or(()=>[]);return J8(n,()=>{t.length=0;const r=n.length;for(let i=0;i<r;i++)t[i]=n[i].get();return e(t)})}function LW(n,e=0){return kn(n)?n:Id(e)}function QGe({children:n,style:e={},value:t,as:r="li",onDrag:i,layout:s=!0,...o},a){const l=Or(()=>Xu(r)),c=v.useContext(cde),u={x:LW(e.x),y:LW(e.y)},d=yE([u.x,u.y],([m,g])=>m||g?1:"unset"),{axis:f,registerItem:h,updateOrder:p}=c;return v.createElement(l,{drag:f,...o,dragSnapToOrigin:!0,style:{...e,x:u.x,y:u.y,zIndex:d},layout:s,onDrag:(m,g)=>{const{velocity:y}=g;y[f]&&p(t,u[f].get(),y[f]),i&&i(m,g)},onLayoutMeasure:m=>h(t,m),ref:a,ignoreStrict:!0},n)}const YGe=v.forwardRef(QGe),XGe={Group:KGe,Item:YGe},dde={renderer:W8,...q8,...Jce},ZGe={...dde,...Jue,...nde};function eJe(n,...e){const t=n.length;function r(){let i="";for(let s=0;s<t;s++){i+=n[s];const o=e[s];o&&(i+=kn(o)?o.get():o)}return i}return J8(e.filter(kn),r)}function tJe(n,e={}){const{isStatic:t}=v.useContext(Yc),r=v.useRef(null),i=Id(kn(n)?n.get():n),s=()=>{r.current&&r.current.stop()};return v.useInsertionEffect(()=>i.attach((o,a)=>{if(t)return a(o);if(s(),r.current=Yg({keyframes:[i.get(),o],velocity:i.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:a}),!An.isProcessing){const l=performance.now()-An.timestamp;l<30&&(r.current.time=wa(l))}return i.get()},s),[JSON.stringify(e)]),Vd(()=>{if(kn(n))return n.on("change",o=>i.set(parseFloat(o)))},[i]),i}function fde(n,e,t){v.useInsertionEffect(()=>n.on(e,t),[n,e,t])}function nJe(n){const e=Id(n.getVelocity());return fde(n,"velocityChange",t=>{e.set(t)}),e}function sA(n,e,t){var r;if(typeof n=="string"){let i=document;e&&(l1(!!e.current),i=e.current),t?((r=t[n])!==null&&r!==void 0||(t[n]=i.querySelectorAll(n)),n=t[n]):n=i.querySelectorAll(n)}else n instanceof Element&&(n=[n]);return Array.from(n||[])}const Bw=new WeakMap;let Su;function rJe(n,e){if(e){const{inlineSize:t,blockSize:r}=e[0];return{width:t,height:r}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function iJe({target:n,contentRect:e,borderBoxSize:t}){var r;(r=Bw.get(n))===null||r===void 0||r.forEach(i=>{i({target:n,contentSize:e,get size(){return rJe(n,t)}})})}function sJe(n){n.forEach(iJe)}function oJe(){typeof ResizeObserver>"u"||(Su=new ResizeObserver(sJe))}function aJe(n,e){Su||oJe();const t=sA(n);return t.forEach(r=>{let i=Bw.get(r);i||(i=new Set,Bw.set(r,i)),i.add(e),Su==null||Su.observe(r)}),()=>{t.forEach(r=>{const i=Bw.get(r);i==null||i.delete(e),i!=null&&i.size||Su==null||Su.unobserve(r)})}}const jw=new Set;let zv;function lJe(){zv=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};jw.forEach(t=>t(e))},window.addEventListener("resize",zv)}function cJe(n){return jw.add(n),zv||lJe(),()=>{jw.delete(n),!jw.size&&zv&&(zv=void 0)}}function uJe(n,e){return typeof n=="function"?cJe(n):aJe(n,e)}const dJe=50,zW=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),fJe=()=>({time:0,x:zW(),y:zW()}),hJe={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function BW(n,e,t,r){const i=t[e],{length:s,position:o}=hJe[e],a=i.current,l=t.time;i.current=n["scroll"+o],i.scrollLength=n["scroll"+s]-n["client"+s],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=Ad(0,i.scrollLength,i.current);const c=r-l;i.velocity=c>dJe?0:P8(i.current-a,c)}function pJe(n,e,t){BW(n,"x",e,t),BW(n,"y",e,t),e.time=t}function mJe(n,e){const t={x:0,y:0};let r=n;for(;r&&r!==e;)if(r instanceof HTMLElement)t.x+=r.offsetLeft,t.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const i=r.getBoundingClientRect();r=r.parentElement;const s=r.getBoundingClientRect();t.x+=i.left-s.left,t.y+=i.top-s.top}else if(r instanceof SVGGraphicsElement){const{x:i,y:s}=r.getBBox();t.x+=i,t.y+=s;let o=null,a=r.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=r.parentNode;r=o}else break;return t}const gJe={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},P3={start:0,center:.5,end:1};function jW(n,e,t=0){let r=0;if(P3[n]!==void 0&&(n=P3[n]),typeof n=="string"){const i=parseFloat(n);n.endsWith("px")?r=i:n.endsWith("%")?n=i/100:n.endsWith("vw")?r=i/100*document.documentElement.clientWidth:n.endsWith("vh")?r=i/100*document.documentElement.clientHeight:n=i}return typeof n=="number"&&(r=e*n),t+r}const yJe=[0,0];function vJe(n,e,t,r){let i=Array.isArray(n)?n:yJe,s=0,o=0;return typeof n=="number"?i=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?i=n.split(" "):i=[n,P3[n]?n:"0"]),s=jW(i[0],t,r),o=jW(i[1],e),s-o}const bJe={x:0,y:0};function kJe(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function xJe(n,e,t){let{offset:r=gJe.All}=t;const{target:i=n,axis:s="y"}=t,o=s==="y"?"height":"width",a=i!==n?mJe(i,n):bJe,l=i===n?{width:n.scrollWidth,height:n.scrollHeight}:kJe(i),c={width:n.clientWidth,height:n.clientHeight};e[s].offset.length=0;let u=!e[s].interpolate;const d=r.length;for(let f=0;f<d;f++){const h=vJe(r[f],c[o],l[o],a[s]);!u&&h!==e[s].interpolatorOffsets[f]&&(u=!0),e[s].offset[f]=h}u&&(e[s].interpolate=c1(e[s].offset,O8(r)),e[s].interpolatorOffsets=[...e[s].offset]),e[s].progress=e[s].interpolate(e[s].current)}function SJe(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let r=e;for(;r&&r!==n;)t.x.targetOffset+=r.offsetLeft,t.y.targetOffset+=r.offsetTop,r=r.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function wJe(n,e,t,r={}){return{measure:()=>SJe(n,r.target,t),update:i=>{pJe(n,t,i),(r.offset||r.target)&&xJe(n,t,r)},notify:()=>e(t)}}const qy=new WeakMap,VW=new WeakMap,eR=new WeakMap,qW=n=>n===document.documentElement?window:n;function Q8(n,{container:e=document.documentElement,...t}={}){let r=eR.get(e);r||(r=new Set,eR.set(e,r));const i=fJe(),s=wJe(e,n,i,t);if(r.add(s),!qy.has(e)){const a=()=>{for(const f of r)f.measure()},l=()=>{for(const f of r)f.update(An.timestamp)},c=()=>{for(const f of r)f.notify()},u=()=>{Ge.read(a,!1,!0),Ge.read(l,!1,!0),Ge.update(c,!1,!0)};qy.set(e,u);const d=qW(e);window.addEventListener("resize",u,{passive:!0}),e!==document.documentElement&&VW.set(e,uJe(e,u)),d.addEventListener("scroll",u,{passive:!0})}const o=qy.get(e);return Ge.read(o,!1,!0),()=>{var a;Bi(o);const l=eR.get(e);if(!l||(l.delete(s),l.size))return;const c=qy.get(e);qy.delete(e),c&&(qW(e).removeEventListener("scroll",c),(a=VW.get(e))===null||a===void 0||a(),window.removeEventListener("resize",c))}}function KW(n,e){C8(!!(!e||e.current))}const $Je=()=>({scrollX:Po(0),scrollY:Po(0),scrollXProgress:Po(0),scrollYProgress:Po(0)});function Y8({container:n,target:e,layoutEffect:t=!0,...r}={}){const i=Or($Je);return(t?Vd:v.useEffect)(()=>(KW("target",e),KW("container",n),Q8(({x:o,y:a})=>{i.scrollX.set(o.current),i.scrollXProgress.set(o.progress),i.scrollY.set(a.current),i.scrollYProgress.set(a.progress)},{...r,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(r.offset)]),i}function EJe(n){return Y8({container:n})}function CJe(){return Y8()}function hde(n){const e=v.useRef(0),{isStatic:t}=v.useContext(Yc);v.useEffect(()=>{if(t)return;const r=({timestamp:i,delta:s})=>{e.current||(e.current=i),n(i-e.current,s)};return Ge.update(r,!0),()=>Bi(r)},[n])}function MJe(){const n=Id(0);return hde(e=>n.set(e)),n}class TJe extends z8{constructor(){super(...arguments),this.members=[],this.transforms=new Set}add(e){let t;ac.has(e)?(this.transforms.add(e),t="transform"):!e.startsWith("origin")&&!y8(e)&&e!=="willChange"&&(t=lk(e)),t&&(nA(this.members,t),this.update())}remove(e){ac.has(e)?(this.transforms.delete(e),this.transforms.size||Xg(this.members,"transform")):Xg(this.members,lk(e)),this.update()}update(){this.set(this.members.length?this.members.join(", "):"auto")}}function _Je(){return Or(()=>new TJe("auto"))}function pde(){!U8.current&&Yue();const[n]=v.useState(gE.current);return n}function AJe(){const n=pde(),{reducedMotion:e}=v.useContext(Yc);return e==="never"?!1:e==="always"?!0:n}function IJe(n){n.values.forEach(e=>e.stop())}function mde(){const n=new Set,e={subscribe(t){return n.add(t),()=>void n.delete(t)},start(t,r){const i=[];return n.forEach(s=>{i.push(rA(s,t,{transitionOverride:r}))}),Promise.all(i)},set(t){return n.forEach(r=>{eWe(r,t)})},stop(){n.forEach(t=>{IJe(t)})},mount(){return()=>{e.stop()}}};return e}function gde(n,e){let t;const r=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;t!==o&&n(o),t=o};return Ge.update(r,!0),()=>Bi(r)}const yde=xue(()=>window.ScrollTimeline!==void 0);class vde{constructor(e){this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e){const t=this.animations.map(r=>{if(yde()&&r.attachTimeline)r.attachTimeline(e);else return r.pause(),gde(i=>{r.time=r.duration*i},e)});return()=>{t.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function RJe(n){return typeof n=="object"&&!Array.isArray(n)}function OJe(n){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=Uue(n)?new tde(e,{enableHardwareAcceleration:!1}):new ede(e,{enableHardwareAcceleration:!0});t.mount(n),e0.set(n,t)}function PJe(n,e=100){const t=tA({keyframes:[0,e],...n}),r=Math.min(w3(t),S3);return{type:"keyframes",ease:i=>t.next(r*i).value/e,duration:wa(r)}}function UW(n,e,t,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,n+parseFloat(e)):e==="<"?t:(i=r.get(e))!==null&&i!==void 0?i:n}const X8=(n,e,t)=>{const r=e-n;return((t-n)%r+r)%r+n};function DJe(n,e){return iue(n)?n[X8(0,n.length,e)]:n}function NJe(n,e,t){for(let r=0;r<n.length;r++){const i=n[r];i.at>e&&i.at<t&&(Xg(n,i),r--)}}function FJe(n,e,t,r,i,s){NJe(n,i,s);for(let o=0;o<e.length;o++)n.push({value:e[o],at:$t(i,s,r[o]),easing:DJe(t,o)})}function LJe(n,e){return n.at===e.at?n.value===null?1:e.value===null?-1:0:n.at-e.at}const zJe="easeInOut";function BJe(n,{defaultTransition:e={},...t}={},r){const i=e.duration||.3,s=new Map,o=new Map,a={},l=new Map;let c=0,u=0,d=0;for(let f=0;f<n.length;f++){const h=n[f];if(typeof h=="string"){l.set(h,u);continue}else if(!Array.isArray(h)){l.set(h.name,UW(u,h.at,c,l));continue}let[p,m,g={}]=h;g.at!==void 0&&(u=UW(u,g.at,c,l));let y=0;const k=(b,S,w,x=0,$=0)=>{const E=jJe(b),{delay:C=0,times:M=O8(E),type:P="keyframes",...I}=S;let{ease:N=e.ease||"easeOut",duration:T}=S;const R=typeof C=="function"?C(x,$):C,A=E.length;if(A<=2&&P==="spring"){let z=100;if(A===2&&KJe(E)){const Z=E[1]-E[0];z=Math.abs(Z)}const j={...I};T!==void 0&&(j.duration=zc(T));const K=PJe(j,z);N=K.ease,T=K.duration}T??(T=i);const L=u+R,F=L+T;M.length===1&&M[0]===0&&(M[1]=1);const O=M.length-E.length;O>0&&bue(M,O),E.length===1&&E.unshift(null),FJe(w,E,N,M,L,F),y=Math.max(R+T,y),d=Math.max(F,d)};if(kn(p)){const b=HW(p,o);k(m,g,WW("default",b))}else{const b=sA(p,r,a),S=b.length;for(let w=0;w<S;w++){m=m,g=g;const x=b[w],$=HW(x,o);for(const E in m)k(m[E],VJe(g,E),WW(E,$),w,S)}}c=u,u+=y}return o.forEach((f,h)=>{for(const p in f){const m=f[p];m.sort(LJe);const g=[],y=[],k=[];for(let S=0;S<m.length;S++){const{at:w,value:x,easing:$}=m[S];g.push(x),y.push(Ad(0,d,w)),k.push($||"easeOut")}y[0]!==0&&(y.unshift(0),g.unshift(g[0]),k.unshift(zJe)),y[y.length-1]!==1&&(y.push(1),g.push(null)),s.has(h)||s.set(h,{keyframes:{},transition:{}});const b=s.get(h);b.keyframes[p]=g,b.transition[p]={...e,duration:d,ease:k,times:y,...t}}}),s}function HW(n,e){return!e.has(n)&&e.set(n,{}),e.get(n)}function WW(n,e){return e[n]||(e[n]=[]),e[n]}function jJe(n){return Array.isArray(n)?n:[n]}function VJe(n,e){return n[e]?{...n,...n[e]}:{...n}}const qJe=n=>typeof n=="number",KJe=n=>n.every(qJe);function bde(n,e,t,r){const i=sA(n,r),s=i.length,o=[];for(let a=0;a<s;a++){const l=i[a];e0.has(l)||OJe(l);const c=e0.get(l),u={...t};typeof u.delay=="function"&&(u.delay=u.delay(a,s)),o.push(...V8(c,{...e,transition:u},{}))}return new vde(o)}const UJe=n=>Array.isArray(n)&&Array.isArray(n[0]);function HJe(n,e,t){const r=[];return BJe(n,e,t).forEach(({keyframes:s,transition:o},a)=>{let l;kn(a)?l=K8(a,s.default,o.default):l=bde(a,s,o),r.push(l)}),new vde(r)}const Z8=n=>{function e(t,r,i){let s;return UJe(t)?s=HJe(t,r,n):RJe(r)?s=bde(t,r,i,n):s=K8(t,r,i),n&&n.animations.push(s),s}return e},WJe=Z8();function GJe(){const n=Or(()=>({current:null,animations:[]})),e=Or(()=>Z8(n));return G8(()=>{n.animations.forEach(t=>t.stop())}),[n,e]}function kde(){const n=Or(mde);return Vd(n.mount,[]),n}const JJe=kde;function QJe(...n){const e=v.useRef(0),[t,r]=v.useState(n[e.current]),i=v.useCallback(s=>{e.current=typeof s!="number"?X8(0,n.length,e.current+1):s,r(n[e.current])},[n.length,...n]);return[t,i]}const YJe={some:0,all:1};function xde(n,e,{root:t,margin:r,amount:i="some"}={}){const s=sA(n),o=new WeakMap,a=c=>{c.forEach(u=>{const d=o.get(u.target);if(u.isIntersecting!==!!d)if(u.isIntersecting){const f=e(u);typeof f=="function"?o.set(u.target,f):l.unobserve(u.target)}else d&&(d(u),o.delete(u.target))})},l=new IntersectionObserver(a,{root:t,rootMargin:r,threshold:typeof i=="number"?i:YJe[i]});return s.forEach(c=>l.observe(c)),()=>l.disconnect()}function XJe(n,{root:e,margin:t,amount:r,once:i=!1}={}){const[s,o]=v.useState(!1);return v.useEffect(()=>{if(!n.current||i&&s)return;const a=()=>(o(!0),i?void 0:()=>o(!1)),l={root:e&&e.current||void 0,margin:t,amount:r};return xde(n.current,a,l)},[e,n,t,i,r]),s}class Sde{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,t)})}}const ZJe=()=>new Sde;function eQe(){return Or(ZJe)}function tQe(n,e,t,r){v.useEffect(()=>{const i=n.current;if(t&&i)return Ul(i,e,t,r)},[n,e,t,r])}function wde(n){return n!==null&&typeof n=="object"&&p8 in n}function nQe(n){if(wde(n))return n[p8]}function $de(){return rQe}function rQe(n){wh.current&&(wh.current.isUpdating=!1,wh.current.blockUpdate(),n&&n())}function iQe(){const[n,e]=iA(),t=$de(),r=v.useRef();return v.useEffect(()=>{Ge.postRender(()=>Ge.postRender(()=>{e===r.current&&(fk.current=!1)}))},[e]),i=>{t(()=>{fk.current=!0,n(),i(),r.current=e+1})}}function sQe(){fk.current=!1}function oQe(){return v.useCallback(()=>{const e=wh.current;e&&e.resetTree()},[])}const Ede=(n,e)=>`${n}: ${e}`,vE=new Map;let tR;function aQe(n,e,t,r){const i=ac.has(e)?"transform":e,s=Ede(n,i),o=vE.get(s);if(!o)return null;const{animation:a,startTime:l}=o,c=()=>{vE.delete(s);try{a.cancel()}catch{}};return l===null||window.HandoffComplete?(c(),null):(tR===void 0&&(tR=performance.now()),tR-l||0)}let zx,Up;function lQe(n,e,t,r,i){if(window.HandoffComplete){window.HandoffAppearAnimations=void 0;return}const s=n.dataset[Cce];if(!s)return;window.HandoffAppearAnimations=aQe;const o=Ede(s,e);Up||(Up=v3(n,e,[t[0],t[0]],{duration:1e4,ease:"linear"}),vE.set(o,{animation:Up,startTime:null}));const a=()=>{Up.cancel();const l=v3(n,e,t,r);zx===void 0&&(zx=performance.now()),l.startTime=zx,vE.set(o,{animation:l,startTime:zx}),i&&i(l)};Up.ready?Up.ready.then(a).catch(qt):a()}const D3=()=>({});class cQe extends H8{build(){}measureInstanceViewportBox(){return pn()}resetTransform(){}restoreTransform(){}removeValueFromRenderState(){}renderInstance(){}scrapeMotionValuesFromProps(){return D3()}getBaseTargetFromProps(){}readValueFromInstance(e,t,r){return r.initialState[t]||0}sortInstanceNodePosition(){return 0}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r}){const i=Tue(r,e||{},this);return j8(this,r,i),{transition:e,transitionEnd:t,...r}}}const uQe=Q_({scrapeMotionValuesFromProps:D3,createRenderState:D3});function dQe(n){const[e,t]=v.useState(n),r=uQe({},!1),i=Or(()=>new cQe({props:{},visualState:r,presenceContext:null},{initialState:n}));v.useEffect(()=>(i.mount({}),()=>i.unmount()),[i]),v.useEffect(()=>{i.update({onUpdate:o=>{t({...o})}},null)},[t,i]);const s=Or(()=>o=>rA(i,o));return[e,s]}const fQe=1e5,GW=n=>n>.001?1/n:fQe;function hQe(n){let e=Id(1),t=Id(1);const{visualElement:r}=v.useContext(A0);n?(e=n.scaleX||e,t=n.scaleY||t):r&&(e=r.getValue("scaleX",1),t=r.getValue("scaleY",1));const i=yE(e,GW),s=yE(t,GW);return{scaleX:i,scaleY:s}}let pQe=0;const mQe=({children:n})=>(v.useEffect(()=>{},[]),v.createElement(lde,{id:Or(()=>`asl-${pQe++}`)},n));function gQe({source:n,axis:e="y"}){const t={value:0},r=Q8(i=>{t.value=i[e].progress*100},{container:n,axis:e});return{currentTime:t,cancel:r}}const nR=new Map;function yQe({source:n=document.documentElement,axis:e="y"}={}){nR.has(n)||nR.set(n,{});const t=nR.get(n);return t[e]||(t[e]=yde()?new ScrollTimeline({source:n,axis:e}):gQe({source:n,axis:e})),t[e]}function vQe(n,e){const t=yQe(e);return typeof n=="function"?gde(n,t):n.attachTimeline(t)}function bQe(n,e){if(n==="first")return 0;{const t=e-1;return n==="last"?t:t/2}}function kQe(n=.1,{startDelay:e=0,from:t=0,ease:r}={}){return(i,s)=>{const o=typeof t=="number"?t:bQe(t,s),a=Math.abs(o-i);let l=n*a;if(r){const c=s*n;l=b3(r)(l/c)*c}return e+l}}const xQe=Ge,SQe=iv.reduce((n,e)=>(n[e]=t=>Bi(t),n),{}),wQe=Object.freeze(Object.defineProperty({__proto__:null,AnimatePresence:sde,AnimateSharedLayout:mQe,DeprecatedLayoutGroupContext:ode,DragControls:Sde,FlatTree:que,LayoutGroup:lde,LayoutGroupContext:Qg,LazyMotion:zGe,MotionConfig:LGe,MotionConfigContext:Yc,MotionContext:A0,MotionGlobalConfig:$ue,MotionValue:z8,PresenceContext:I0,Reorder:XGe,SwitchLayoutGroupContext:h8,VisualElement:H8,addPointerEvent:nc,addPointerInfo:Uce,addScaleCorrector:_ce,animate:WJe,animateValue:Yg,animateVisualElement:rA,animationControls:mde,animations:q8,anticipate:aue,backIn:eA,backInOut:oue,backOut:I8,buildTransform:Ice,calcLength:ms,cancelFrame:Bi,cancelSync:SQe,checkTargetForNewValues:j8,circIn:Z_,circInOut:sue,circOut:A8,clamp:Xc,color:Sr,complex:Zc,createBox:pn,createDomMotionComponent:IGe,createMotionComponent:m8,createScopedAnimate:Z8,cubicBezier:R0,delay:Kue,disableInstantTransitions:sQe,distance:T3,distance2D:_ue,domAnimation:dde,domMax:ZGe,easeIn:nue,easeInOut:M8,easeOut:rue,filterProps:Lce,frame:Ge,frameData:An,inView:xde,interpolate:c1,invariant:l1,isBrowser:i1,isDragActive:E8,isMotionComponent:wde,isMotionValue:kn,isValidMotionProp:dk,m:RGe,makeUseVisualState:Q_,mirrorEasing:T8,mix:$t,motion:Xu,motionValue:Po,optimizedAppearDataAttribute:u8,pipe:Lc,progress:Ad,px:_e,resolveMotionValue:Dv,reverseEasing:_8,scroll:vQe,scrollInfo:Q8,spring:tA,stagger:kQe,startOptimizedAppearAnimation:lQe,steps:Lw,sync:xQe,transform:ude,unwrapMotionComponent:nQe,useAnimate:GJe,useAnimation:JJe,useAnimationControls:kde,useAnimationFrame:hde,useCycle:QJe,useDeprecatedAnimatedState:dQe,useDeprecatedInvertedScale:hQe,useDomEvent:tQe,useDragControls:eQe,useElementScroll:EJe,useForceUpdate:iA,useInView:XJe,useInstantLayoutTransition:$de,useInstantTransition:iQe,useIsPresent:DWe,useIsomorphicLayoutEffect:Vd,useMotionTemplate:eJe,useMotionValue:Id,useMotionValueEvent:fde,usePresence:Fue,useReducedMotion:pde,useReducedMotionConfig:AJe,useResetProjection:oQe,useScroll:Y8,useSpring:tJe,useTime:MJe,useTransform:yE,useUnmountEffect:G8,useVelocity:nJe,useViewportScroll:CJe,useWillChange:_Je,visualElementStore:e0,warning:C8,wrap:X8},Symbol.toStringTag,{value:"Module"}));function Nn(n){this.content=n}Nn.prototype={constructor:Nn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new Nn(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Nn(t)},addToStart:function(n,e){return new Nn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Nn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new Nn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Nn.from(n),n.size?new Nn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Nn.from(n),n.size?new Nn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Nn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Nn.from=function(n){if(n instanceof Nn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Nn(e)};function Cde(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Cde(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Mde(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Mde(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let $a=class ri{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ri(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ri(r,i)}cutByIndex(e,t){return e==t?ri.empty:e==0&&t==this.content.length?this:new ri(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ri(i,s)}addToStart(e){return new ri([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ri(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Cde(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Mde(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Bx(0,e);if(e==this.size)return Bx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Bx(r+1,o):Bx(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ri.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ri(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ri.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ri(t||e,r)}static from(e){if(!e)return ri.empty;if(e instanceof ri)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ri([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};$a.empty=new $a([],0);const rR={index:0,offset:0};function Bx(n,e){return rR.index=n,rR.offset=e,rR}function bE(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!bE(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!bE(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Ic=class N3{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&bE(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return N3.none;if(e instanceof N3)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Ic.none=[];let F3=class extends Error{},Ya=class um{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=_de(this.content,e+this.openStart,t);return r&&new um(r,this.openStart,this.openEnd)}removeBetween(e,t){return new um(Tde(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return um.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new um($a.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new um(e,r,i)}};Ya.empty=new Ya($a.empty,0,0);function Tde(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Tde(s.content,e-i-1,t-i-1)))}function _de(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=_de(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function $Qe(n,e,t){if(t.openStart>n.depth)throw new F3("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new F3("Inconsistent open depths");return Ade(n,e,t,0)}function Ade(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=Ade(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Eh(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=EQe(t,n);return Eh(s,Rde(n,o,a,e,r))}else return Eh(s,kE(n,e,r))}function Ide(n,e){if(!e.type.compatibleContent(n.type))throw new F3("Cannot join "+e.type.name+" onto "+n.type.name)}function L3(n,e,t){let r=n.node(t);return Ide(r,e.node(t)),r}function $h(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Bv(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&($h(n.nodeAfter,r),s++));for(let a=s;a<o;a++)$h(i.child(a),r);e&&e.depth==t&&e.textOffset&&$h(e.nodeBefore,r)}function Eh(n,e){return n.type.checkContent(e),n.copy(e)}function Rde(n,e,t,r,i){let s=n.depth>i&&L3(n,e,i+1),o=r.depth>i&&L3(t,r,i+1),a=[];return Bv(null,n,i,a),s&&o&&e.index(i)==t.index(i)?(Ide(s,o),$h(Eh(s,Rde(n,e,t,r,i+1)),a)):(s&&$h(Eh(s,kE(n,e,i+1)),a),Bv(e,t,i,a),o&&$h(Eh(o,kE(t,r,i+1)),a)),Bv(r,null,i,a),new $a(a)}function kE(n,e,t){let r=[];if(Bv(null,n,t,r),n.depth>t){let i=L3(n,e,t+1);$h(Eh(i,kE(n,e,t+1)),r)}return Bv(e,null,t,r),new $a(r)}function EQe(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy($a.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}let JW=class z3{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Ic.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new MQe(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new z3(t,r,s)}static resolveCached(e,t){for(let i=0;i<iR.length;i++){let s=iR[i];if(s.pos==t&&s.doc==e)return s}let r=iR[sR]=z3.resolve(e,t);return sR=(sR+1)%CQe,r}},iR=[],sR=0,CQe=12,MQe=class{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}};const TQe=Object.create(null);let Ode=class B3{constructor(e,t,r,i=Ic.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||$a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&bE(this.attrs,t||e.defaultAttrs||TQe)&&Ic.sameSet(this.marks,r||Ic.none)}copy(e=null){return e==this.content?this:new B3(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new B3(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Ya.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new Ya(c,i.depth-o,s.depth-o)}replace(e,t,r){return $Qe(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return JW.resolveCached(this,e)}resolveNoCache(e){return JW.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),_Qe(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=$a.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Ic.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!Ic.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=$a.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}};Ode.prototype.text=void 0;function _Qe(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}function Pde(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Pde(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Dde(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Dde(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let it=class ii{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ii(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ii(r,i)}cutByIndex(e,t){return e==t?ii.empty:e==0&&t==this.content.length?this:new ii(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ii(i,s)}addToStart(e){return new ii([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ii(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Pde(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Dde(this,e,t,r)}findIndex(e,t=-1){if(e==0)return jx(0,e);if(e==this.size)return jx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?jx(r+1,o):jx(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ii.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ii(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ii.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ii(t||e,r)}static from(e){if(!e)return ii.empty;if(e instanceof ii)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ii([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};it.empty=new it([],0);const oR={index:0,offset:0};function jx(n,e){return oR.index=n,oR.offset=e,oR}function j3(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!j3(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!j3(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let xE=class V3{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&j3(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return V3.none;if(e instanceof V3)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};xE.none=[];let AQe=class extends Error{},tt=class dm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Fde(this.content,e+this.openStart,t);return r&&new dm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new dm(Nde(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return dm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new dm(it.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new dm(e,r,i)}};tt.empty=new tt(it.empty,0,0);function Nde(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Nde(s.content,e-i-1,t-i-1)))}function Fde(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Fde(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function IQe(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function RQe(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function OQe(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new PQe(n[t]);return e}let PQe=class{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}},DQe=class Lde{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=OQe(i.attrs),this.excluded=null;let s=IQe(this.attrs);this.instance=s?new xE(this,s):null}create(e=null){return!e&&this.instance?this.instance:new xE(this,RQe(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Lde(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}};const zde=65535,Bde=Math.pow(2,16);function NQe(n,e){return n+e*Bde}function QW(n){return n&zde}function FQe(n){return(n-(n&zde))/Bde}const jde=1,Vde=2,Vw=4,qde=8;class q3{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&qde)>0}get deletedBefore(){return(this.delInfo&(jde|Vw))>0}get deletedAfter(){return(this.delInfo&(Vde|Vw))>0}get deletedAcross(){return(this.delInfo&Vw)>0}}class Ms{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Ms.empty)return Ms.empty}recover(e){let t=0,r=QW(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+FQe(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:t:t,h=l+i+(f<0?0:u);if(r)return h;let p=e==(t<0?l:d)?null:NQe(a/3,e-l),m=e==l?Vde:e==d?jde:Vw;return(t<0?e!=l:e!=d)&&(m|=qde),new q3(h,m,p)}i+=u-c}return r?e+i:new q3(e+i,0,null)}touches(e,t){let r=0,i=QW(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+t],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Ms(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ms.empty:new Ms(e<0?[0,-e,0]:[0,0,e])}}Ms.empty=new Ms([]);class _g{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new _g(this.maps,this.mirror,e,t)}copy(){return new _g(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new _g;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new q3(e,i,null)}}const aR=Object.create(null);class ti{getMap(){return Ms.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=aR[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in aR)throw new RangeError("Duplicate use of step JSON ID "+e);return aR[e]=t,t.prototype.jsonID=e,t}}class Rn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Rn(e,null)}static fail(e){return new Rn(null,e)}static fromReplace(e,t,r,i){try{return Rn.ok(e.replace(t,r,i))}catch(s){if(s instanceof AQe)return Rn.fail(s.message);throw s}}}function eB(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(eB(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return it.fromArray(r)}class Zu extends ti{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new tt(eB(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return Rn.fromReplace(e,this.from,this.to,s)}invert(){return new Hl(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Zu(t.pos,r.pos,this.mark)}merge(e){return e instanceof Zu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Zu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Zu(t.from,t.to,e.markFromJSON(t.mark))}}ti.jsonID("addMark",Zu);class Hl extends ti{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new tt(eB(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Rn.fromReplace(e,this.from,this.to,r)}invert(){return new Zu(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Hl(t.pos,r.pos,this.mark)}merge(e){return e instanceof Hl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Hl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Hl(t.from,t.to,e.markFromJSON(t.mark))}}ti.jsonID("removeMark",Hl);class ed extends ti{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Rn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Rn.fromReplace(e,this.pos,this.pos+1,new tt(it.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new ed(this.pos,t.marks[i]);return new ed(this.pos,this.mark)}}return new t0(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ed(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ed(t.pos,e.markFromJSON(t.mark))}}ti.jsonID("addNodeMark",ed);class t0 extends ti{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Rn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Rn.fromReplace(e,this.pos,this.pos+1,new tt(it.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ed(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new t0(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t0(t.pos,e.markFromJSON(t.mark))}}ti.jsonID("removeNodeMark",t0);class je extends ti{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&K3(e,this.from,this.to)?Rn.fail("Structure replace would overwrite content"):Rn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ms([this.from,this.to-this.from,this.slice.size])}invert(e){return new je(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new je(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof je)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?tt.empty:new tt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new je(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?tt.empty:new tt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new je(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new je(t.from,t.to,tt.fromJSON(e,t.slice),!!t.structure)}}ti.jsonID("replace",je);class Ve extends ti{constructor(e,t,r,i,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(K3(e,this.from,this.gapFrom)||K3(e,this.gapTo,this.to)))return Rn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Rn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Rn.fromReplace(e,this.from,this.to,r):Rn.fail("Content does not fit in gap")}getMap(){return new Ms([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ve(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new Ve(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ve(t.from,t.to,t.gapFrom,t.gapTo,tt.fromJSON(e,t.slice),t.insert,!!t.structure)}}ti.jsonID("replaceAround",Ve);function K3(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function LQe(n,e,t,r){let i=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,t),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=h:i.push(o=new Hl(f,h,d[m])));a&&a.to==f?a.to=h:s.push(a=new Zu(f,h,r))}}),i.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function zQe(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof DQe){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=c,f.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>n.step(new Hl(o.from,o.to,o.style)))}function BQe(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new je(o,c,tt.empty));else{r=u;for(let d=0;d<l.marks.length;d++)t.allowsMarkType(l.marks[d].type)||n.step(new Hl(o,c,l.marks[d]));if(l.isText&&!t.spec.code){let d,f=/\r?\n|\r/g,h;for(;d=f.exec(l.text);)h||(h=new tt(it.from(t.schema.text(" ",t.allowedMarks(l.marks))),0,0)),s.push(new je(o+d.index,o+d.index+d[0].length,h))}}o=c}if(!r.validEnd){let a=r.fillBefore(it.empty,!0);n.replace(o,o,new tt(a,0,0))}for(let a=s.length-1;a>=0;a--)n.step(s[a])}function jQe(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function vt(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!jQe(i,s,o))break}return null}function VQe(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=it.empty,d=0;for(let p=s,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,u=it.from(r.node(p).copy(u)),d++):l--;let f=it.empty,h=0;for(let p=s,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=it.from(i.node(p).copy(f)),h++):c++;n.step(new Ve(l,c,o,a,new tt(u.append(f),d,h),u.size-d,!0))}function u1(n,e,t=null,r=n){let i=qQe(n,e),s=i&&KQe(r,e);return s?i.map(YW).concat({type:e,attrs:t}).concat(s.map(YW)):null}function YW(n){return{type:n,attrs:null}}function qQe(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function KQe(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function UQe(n,e,t){let r=it.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=it.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new Ve(i,s,i,s,new tt(r,0,0),t.length,!0))}function HQe(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&WQe(n.doc,n.mapping.slice(s).map(a),r)){n.clearIncompatible(n.mapping.slice(s).map(a,1),r);let l=n.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return n.step(new Ve(c,u,c+1,u-1,new tt(it.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function WQe(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function GQe(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Ve(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new tt(it.from(o),0,0),1,!0))}function ne(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=t-2;c>s;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function JQe(n,e,t=1,r){let i=n.doc.resolve(e),s=it.empty,o=it.empty;for(let a=i.depth,l=i.depth-t,c=t-1;a>l;a--,c--){s=it.from(i.node(a).copy(s));let u=r&&r[c];o=it.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}n.step(new je(e,e,new tt(s.append(o),t,t),!0))}function Me(n,e){let t=n.resolve(e),r=t.index();return Kde(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Kde(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Oe(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):t>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&Kde(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function QQe(n,e,t){let r=new je(e-t,e+t,tt.empty,!0);n.step(r)}function YQe(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function oA(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function aA(n,e,t=e,r=tt.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return Ude(i,s,r)?new je(e,t,r):new XQe(i,s,r).fit()}function Ude(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class XQe{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=it.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=it.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new tt(s,o,a);return e>-1?new Ve(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new je(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=lR(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(t==1&&(o?c.matchType(o.type)||(d=c.fillBefore(it.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=lR(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new tt(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=lR(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new tt(ov(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new tt(ov(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));d=d.matchFragment(i)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=d.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(d=g,u.push(Hde(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=av(this.placed,t,it.from(u)),this.frontier[t].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<h;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?tt.empty:new tt(ov(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new tt(ov(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!cR(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=cR(e,t,i,r,s);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=cR(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=av(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=av(this.placed,this.depth,it.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(it.empty,!0);t.childCount&&(this.placed=av(this.placed,this.frontier.length,t))}}function ov(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ov(n.firstChild.content,e-1,t)))}function av(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(av(n.lastChild.content,e-1,t)))}function lR(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Hde(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Hde(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(it.empty,!0)))),n.copy(r)}function cR(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!ZQe(t,s.content,o)?a:null}function ZQe(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function eYe(n){return n.spec.defining||n.spec.definingForContent}function tYe(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(Ude(i,s,r))return n.step(new je(e,t,r));let o=Gde(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=eYe(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let k=i.node(g-1),b=i.index(g-1);if(k.canReplaceWith(b,b,p.type,p.marks))return n.replace(i.before(g),y?s.after(g):t,new tt(Wde(r.content,0,r.openStart,h),h,r.openEnd))}}let d=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>d));f--){let h=o[f];h<0||(e=i.before(h),t=s.after(h))}}function Wde(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Wde(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(it.empty,!0))}return n}function nYe(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=YQe(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new tt(it.from(r),0,0))}function rYe(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=Gde(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o)return n.delete(r.before(o),t);n.delete(e,t)}function Gde(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class Ag extends ti{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Rn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Rn.fromReplace(e,this.pos,this.pos+1,new tt(it.from(i),0,t.isLeaf?0:1))}getMap(){return Ms.empty}invert(e){return new Ag(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ag(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ag(t.pos,t.attr,t.value)}}ti.jsonID("attr",Ag);class hk extends ti{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Rn.ok(r)}getMap(){return Ms.empty}invert(e){return new hk(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new hk(t.attr,t.value)}}ti.jsonID("docAttr",hk);let n0=class extends Error{};n0=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};n0.prototype=Object.create(Error.prototype);n0.prototype.constructor=n0;n0.prototype.name="TransformError";class Jde{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new _g}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new n0(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=tt.empty){let i=aA(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new tt(it.from(r),0,0))}delete(e,t){return this.replace(e,t,tt.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return tYe(this,e,t,r),this}replaceRangeWith(e,t,r){return nYe(this,e,t,r),this}deleteRange(e,t){return rYe(this,e,t),this}lift(e,t){return VQe(this,e,t),this}join(e,t=1){return QQe(this,e,t),this}wrap(e,t){return UQe(this,e,t),this}setBlockType(e,t=e,r,i=null){return HQe(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return GQe(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Ag(e,t,r)),this}setDocAttribute(e,t){return this.step(new hk(e,t)),this}addNodeMark(e,t){return this.step(new ed(e,t)),this}removeNodeMark(e,t){if(!(t instanceof xE)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new t0(e,t)),this}split(e,t=1,r){return JQe(this,e,t,r),this}addMark(e,t,r){return LQe(this,e,t,r),this}removeMark(e,t,r){return zQe(this,e,t,r),this}clearIncompatible(e,t,r){return BQe(this,e,t,r),this}}const uR=Object.create(null);class V{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new iYe(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Ya.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Ya.empty:t),a==0&&eG(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),eG(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new D(e):fm(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?fm(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):fm(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Xs(e.node(0))}static atStart(e){return fm(e,e,0,0,1)||new Xs(e)}static atEnd(e){return fm(e,e,e.content.size,e.childCount,-1)||new Xs(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=uR[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in uR)throw new RangeError("Duplicate use of selection JSON ID "+e);return uR[e]=t,t.prototype.jsonID=e,t}getBookmark(){return D.between(this.$anchor,this.$head).getBookmark()}}V.prototype.visible=!0;class iYe{constructor(e,t){this.$from=e,this.$to=t}}let XW=!1;function ZW(n){!XW&&!n.parent.inlineContent&&(XW=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class D extends V{constructor(e,t=e){ZW(e),ZW(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return V.near(r);let i=e.resolve(t.map(this.anchor));return new D(i.parent.inlineContent?i:r,r)}replace(e,t=Ya.empty){if(super.replace(e,t),t==Ya.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof D&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new lA(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new D(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=V.findFrom(t,r,!0)||V.findFrom(t,-r,!0);if(s)t=s.$head;else return V.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(V.findFrom(e,-r,!0)||V.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new D(e,t)}}V.jsonID("text",D);class lA{constructor(e,t){this.anchor=e,this.head=t}map(e){return new lA(e.map(this.anchor),e.map(this.head))}resolve(e){return D.between(e.resolve(this.anchor),e.resolve(this.head))}}class G extends V{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?V.near(s):new G(s)}content(){return new Ya($a.from(this.node),0,0)}eq(e){return e instanceof G&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new tB(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new G(e.resolve(t.anchor))}static create(e,t){return new G(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}G.prototype.visible=!1;V.jsonID("node",G);class tB{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new lA(r,r):new tB(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&G.isSelectable(r)?new G(t):V.near(t)}}class Xs extends V{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Ya.empty){if(t==Ya.empty){e.delete(0,e.doc.content.size);let r=V.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Xs(e)}map(e){return new Xs(e)}eq(e){return e instanceof Xs}getBookmark(){return sYe}}V.jsonID("all",Xs);const sYe={map(){return this},resolve(n){return new Xs(n)}};function fm(n,e,t,r,i,s=!1){if(e.inlineContent)return D.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&G.isSelectable(a))return G.create(n,t-(i<0?a.nodeSize:0))}else{let l=fm(n,a,t+i,i<0?a.childCount:0,i,s);if(l)return l}t+=a.nodeSize*i}return null}function eG(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;let s=n.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const tG=1,Vx=2,nG=4;class oYe extends Jde{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|tG)&~Vx,this.storedMarks=null,this}get selectionSet(){return(this.updated&tG)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Vx,this}ensureMarks(e){return Ic.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Vx)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Vx,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ic.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(V.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=nG,this}get scrolledIntoView(){return(this.updated&nG)>0}}function rG(n,e){return!e||!n?n:n.bind(e)}class lv{constructor(e,t,r){this.name=e,this.init=rG(t.init,r),this.apply=rG(t.apply,r)}}const aYe=[new lv("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new lv("selection",{init(n,e){return n.selection||V.atStart(e.doc)},apply(n){return n.selection}}),new lv("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new lv("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class dR{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=aYe.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new lv(r.key,r.spec.state,r))})}}class gg{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new gg(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new oYe(this)}static create(e){let t=new dR(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new gg(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new dR(this.schema,e.plugins),r=t.fields,i=new gg(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new dR(e.schema,e.plugins),s=new gg(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ode.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=V.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=c.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Qde(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Qde(i,e,{})),t[r]=i}return t}class Q{constructor(e){this.spec=e,this.props={},e.props&&Qde(e.props,this,this.props),this.key=e.key?e.key.key:Yde("plugin")}getState(e){return e[this.key]}}const fR=Object.create(null);function Yde(n){return n in fR?n+"$"+ ++fR[n]:(fR[n]=0,n+"$")}class Y{constructor(e="key"){this.key=Yde(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}function Xde(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Xde(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Zde(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Zde(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ea=class si{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new si(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new si(r,i)}cutByIndex(e,t){return e==t?si.empty:e==0&&t==this.content.length?this:new si(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new si(i,s)}addToStart(e){return new si([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new si(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Xde(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Zde(this,e,t,r)}findIndex(e,t=-1){if(e==0)return qx(0,e);if(e==this.size)return qx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?qx(r+1,o):qx(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return si.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new si(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return si.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new si(t||e,r)}static from(e){if(!e)return si.empty;if(e instanceof si)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new si([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ea.empty=new Ea([],0);const hR={index:0,offset:0};function qx(n,e){return hR.index=n,hR.offset=e,hR}function U3(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!U3(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!U3(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let pl=class H3{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&U3(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return H3.none;if(e instanceof H3)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};pl.none=[];let SE=class hm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=tfe(this.content,e+this.openStart,t);return r&&new hm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new hm(efe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return hm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new hm(Ea.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new hm(e,r,i)}};SE.empty=new SE(Ea.empty,0,0);function efe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(efe(s.content,e-i-1,t-i-1)))}function tfe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=tfe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let lYe=class W3{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new sG(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new sG(this,t,!0);return r.addAll(e,t.from,t.to),SE.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(dYe(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=oG(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=oG(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new W3(e,W3.schemaRules(e)))}};const nfe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cYe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rfe={ol:!0,ul:!0},wE=1,$E=2,jv=4;function iG(n,e,t){return e!=null?(e?wE:0)|(e==="full"?$E:0):n&&n.whitespace=="pre"?wE|$E:t&~jv}let Kx=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=pl.none,this.stashMarks=[],this.match=o||(a&jv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ea.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&wE)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ea.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ea.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):hYe(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!nfe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},sG=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=iG(null,t.preserveWhitespace,0)|(r?jv:0);i?s=new Kx(i.type,i.attrs,pl.none,pl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new Kx(null,null,pl.none,pl.none,!0,null,o):s=new Kx(e.schema.topNodeType,null,pl.none,pl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(fYe(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&$E||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&wE)r.options&$E?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;rfe.hasOwnProperty(r)&&this.parser.normalizeLists&&uYe(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:cYe.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(nfe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=pl.none,r=pl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=iG(e,i,s.options);s.options&jv&&s.content.length==0&&(o|=jv),this.nodes.push(new Kx(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=pYe(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function uYe(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&rfe.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function dYe(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function fYe(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function oG(n){let e={};for(let t in n)e[t]=n[t];return e}function hYe(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function pYe(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}var Rd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},EE={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mYe=typeof navigator<"u"&&/Mac/.test(navigator.platform),gYe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var dr=0;dr<10;dr++)Rd[48+dr]=Rd[96+dr]=String(dr);for(var dr=1;dr<=24;dr++)Rd[dr+111]="F"+dr;for(var dr=65;dr<=90;dr++)Rd[dr]=String.fromCharCode(dr+32),EE[dr]=String.fromCharCode(dr);for(var pR in Rd)EE.hasOwnProperty(pR)||(EE[pR]=Rd[pR]);function yYe(n){var e=mYe&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||gYe&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?EE:Rd)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const vYe=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function bYe(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))vYe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function kYe(n){let e=Object.create(null);for(let t in n)e[bYe(t)]=n[t];return e}function mR(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function xYe(n){return new Q({props:{handleKeyDown:ife(n)}})}function ife(n){let e=kYe(n);return function(t,r){let i=yYe(r),s,o=e[mR(i,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[mR(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Rd[r.keyCode])&&s!=i){let a=e[mR(s,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}function sfe(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=sfe(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function ofe(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=ofe(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Rc=class oi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new oi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new oi(r,i)}cutByIndex(e,t){return e==t?oi.empty:e==0&&t==this.content.length?this:new oi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new oi(i,s)}addToStart(e){return new oi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new oi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return sfe(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return ofe(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Ux(0,e);if(e==this.size)return Ux(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Ux(r+1,o):Ux(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return oi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new oi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return oi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new oi(t||e,r)}static from(e){if(!e)return oi.empty;if(e instanceof oi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new oi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Rc.empty=new Rc([],0);const gR={index:0,offset:0};function Ux(n,e){return gR.index=n,gR.offset=e,gR}let Xh=class pm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=lfe(this.content,e+this.openStart,t);return r&&new pm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new pm(afe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return pm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pm(Rc.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new pm(e,r,i)}};Xh.empty=new Xh(Rc.empty,0,0);function afe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(afe(s.content,e-i-1,t-i-1)))}function lfe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=lfe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}const Ht=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function cfe(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Wt=(n,e,t)=>{let r=cfe(n,t);if(!r)return!1;let i=nB(r);if(!i){let o=r.blockRange(),a=o&&vt(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&hfe(n,i,e))return!0;if(r.parent.content.size==0&&(r0(s,"end")||G.isSelectable(s))){let o=aA(n.doc,r.before(),r.after(),Xh.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(r0(s,"end")?V.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):G.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Cn=(n,e,t)=>{let r=cfe(n,t);if(!r)return!1;let i=nB(r);return i?ufe(n,i,e):!1},Mn=(n,e,t)=>{let r=dfe(n,t);if(!r)return!1;let i=rB(r);return i?ufe(n,i,e):!1};function ufe(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=aA(n.doc,s,l,Xh.empty);if(!c||c.from!=s||c instanceof je&&c.slice.size>=l-s)return!1;if(t){let u=n.tr.step(c);u.setSelection(D.create(u.doc,s)),t(u.scrollIntoView())}return!0}function r0(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const Gt=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=nB(r)}let o=s&&s.nodeBefore;return!o||!G.isSelectable(o)?!1:(e&&e(n.tr.setSelection(G.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function nB(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function dfe(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Jt=(n,e,t)=>{let r=dfe(n,t);if(!r)return!1;let i=rB(r);if(!i)return!1;let s=i.nodeAfter;if(hfe(n,i,e))return!0;if(r.parent.content.size==0&&(r0(s,"start")||G.isSelectable(s))){let o=aA(n.doc,r.before(),r.after(),Xh.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(r0(s,"start")?V.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):G.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Qt=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=rB(r)}let o=s&&s.nodeAfter;return!o||!G.isSelectable(o)?!1:(e&&e(n.tr.setSelection(G.create(n.doc,s.pos)).scrollIntoView()),!0)};function rB(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Yt=(n,e)=>{let t=n.selection,r=t instanceof G,i;if(r){if(t.node.isTextblock||!Me(n.doc,t.from))return!1;i=t.from}else if(i=Oe(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(G.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Xt=(n,e)=>{let t=n.selection,r;if(t instanceof G){if(t.node.isTextblock||!Me(n.doc,t.to))return!1;r=t.to}else if(r=Oe(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},Zt=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&vt(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},en=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function ffe(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const tn=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=ffe(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(V.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},nn=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Xs||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=ffe(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(D.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},rn=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(ne(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&vt(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},sn=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(G.create(n.doc,i))),!0)};function SYe(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Me(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function hfe(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(SYe(n,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(t){let d=e.pos+i.nodeSize,f=Rc.empty;for(let m=s.length-1;m>=0;m--)f=Rc.from(s[m].create(null,f));f=Rc.from(r.copy(f));let h=n.tr.step(new Ve(e.pos-1,d,e.pos,d,new Xh(f,1,0),s.length,!0)),p=d+2*s.length;Me(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let l=V.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&vt(c);if(u!=null&&u>=e.depth)return t&&t(n.tr.lift(c,u).scrollIntoView()),!0;if(a&&r0(i,"start",!0)&&r0(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(t){let m=Rc.empty;for(let y=f.length-1;y>=0;y--)m=Rc.from(f[y].copy(m));let g=n.tr.step(new Ve(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new Xh(m,f.length,0),0,!0));t(g.scrollIntoView())}return!0}}return!1}function pfe(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(D.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const on=pfe(-1),an=pfe(1);function ln(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=o&&u1(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function De(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)i=!0;else{let u=t.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];s.setBlockType(a,l,n,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function mfe(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=mfe(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function gfe(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=gfe(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Gn=class ai{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ai(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ai(r,i)}cutByIndex(e,t){return e==t?ai.empty:e==0&&t==this.content.length?this:new ai(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ai(i,s)}addToStart(e){return new ai([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ai(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return mfe(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return gfe(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Hx(0,e);if(e==this.size)return Hx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Hx(r+1,o):Hx(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ai.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ai(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ai.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ai(t||e,r)}static from(e){if(!e)return ai.empty;if(e instanceof ai)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ai([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Gn.empty=new Gn([],0);const yR={index:0,offset:0};function Hx(n,e){return yR.index=n,yR.offset=e,yR}let i0=class mm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=vfe(this.content,e+this.openStart,t);return r&&new mm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new mm(yfe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return mm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new mm(Gn.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new mm(e,r,i)}};i0.empty=new i0(Gn.empty,0,0);function yfe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(yfe(s.content,e-i-1,t-i-1)))}function vfe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=vfe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let G3=class{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}};function cn(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=t.doc.resolve(o.start-2);l=new G3(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new G3(i,t.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=u1(l,n,e,o);return c?(r&&r(wYe(t.tr,o,c,a,n).scrollIntoView()),!0):!1}}function wYe(n,e,t,r,i){let s=Gn.empty;for(let u=t.length-1;u>=0;u--)s=Gn.from(t[u].type.create(t[u].attrs,s));n.step(new Ve(e.start-(r?2:0),e.end,e.start,e.end,new i0(s,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==i&&(o=u+1);let a=t.length-o,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&ne(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function un(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?$Ye(e,t,n,s):EYe(e,t,s):!0:!1}}function $Ye(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ve(s-1,o,s,o,new i0(Gn.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new G3(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=vt(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return Me(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function EYe(n,e,t){let r=n.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Gn.empty:Gn.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new Ve(d-(a?1:0),f+(l?1:0),d+1,f-1,new i0((a?Gn.empty:Gn.from(i.copy(Gn.empty))).append(l?Gn.empty:Gn.from(i.copy(Gn.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function dn(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=Gn.from(c?n.create():null),d=new i0(Gn.from(n.create(null,Gn.from(a.type.create(null,u)))),c?3:1,0),f=s.start,h=s.end;t(e.tr.step(new Ve(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function bfe(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let CYe=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:bfe({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Ku(n,e,t){return n.config[e]===void 0&&n.parent?Ku(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ku(n.parent,e,t):null}):n.config[e]}function MYe(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Pr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function TYe(n){return typeof n=="function"}function gm(n,e=void 0,...t){return TYe(n)?e?n.bind(e)(...t):n(...t):n}function _Ye(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function AYe(n){return Object.prototype.toString.call(n).slice(8,-1)}function vR(n){return AYe(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function kfe(n,e){const t={...n};return vR(n)&&vR(e)&&Object.keys(e).forEach(r=>{vR(e[r])?r in n?t[r]=kfe(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let uu=class J3{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=gm(Ku(this,"addOptions",{name:this.name}))),this.storage=gm(Ku(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new J3(e)}configure(e={}){const t=this.extend();return t.options=kfe(this.options,e),t.storage=gm(Ku(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new J3(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=gm(Ku(t,"addOptions",{name:t.name})),t.storage=gm(Ku(t,"addStorage",{name:t.name,options:t.options})),t}};function IYe(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function RYe(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}uu.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=RYe(t);return IYe(r,{from:o,to:a},{textSerializers:l})}}})]}});const OYe=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),PYe=(n=!1)=>({commands:e})=>e.setContent("",n),DYe=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},NYe=n=>e=>n(e),FYe=()=>({state:n,dispatch:e})=>nn(n,e),LYe=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},zYe=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},BYe=n=>({tr:e,state:t,dispatch:r})=>{const i=Pr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},jYe=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},VYe=()=>({state:n,dispatch:e})=>Ht(n,e),qYe=()=>({commands:n})=>n.keyboardShortcut("Enter"),KYe=()=>({state:n,dispatch:e})=>tn(n,e);function CE(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:_Ye(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Q3(n,e,t={}){return n.find(r=>r.type===e&&CE(r.attrs,t))}function UYe(n,e,t={}){return!!Q3(n,e,t)}function xfe(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=Q3([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(Q3([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&UYe([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Kd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const HYe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Kd(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=xfe(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},WYe=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Sfe(n){return n instanceof D}function Wf(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function GYe(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,Wf(0,i,s),Wf(n.content.size,i,s)):D.create(n,Wf(e,i,s),Wf(e,i,s))}function iB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const JYe=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{iB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Sfe(t.state.selection))return o(),!0;const a=GYe(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},QYe=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),YYe=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function aG(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function ME(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ea.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),ME("",e,t)}if(typeof n=="string"){const r=lYe.fromSchema(e);return t.slice?r.parseSlice(aG(n),t.parseOptions).content:r.parse(aG(n),t.parseOptions)}return ME("",e,t)}function XYe(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const ZYe=n=>n.toString().startsWith("<"),eXe=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=ME(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((ZYe(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&XYe(r,r.steps.length-1,-1)}return!0},tXe=()=>({state:n,dispatch:e})=>Yt(n,e),nXe=()=>({state:n,dispatch:e})=>Xt(n,e),rXe=()=>({state:n,dispatch:e})=>Wt(n,e),iXe=()=>({state:n,dispatch:e})=>Jt(n,e),sXe=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},oXe=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}};function wfe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function aXe(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))iB()||wfe()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const lXe=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=aXe(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function sB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Pr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>CE(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const cXe=(n,e={})=>({state:t,dispatch:r})=>{const i=Pr(n,t.schema);return sB(t,i,e)?Zt(t,r):!1},uXe=()=>({state:n,dispatch:e})=>rn(n,e),dXe=n=>({state:e,dispatch:t})=>{const r=Pr(n,e.schema);return un(r)(e,t)},fXe=()=>({state:n,dispatch:e})=>en(n,e);function $fe(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function lG(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const hXe=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=$fe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Pr(n,r.schema)),a==="mark"&&(o=Kd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,lG(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(lG(d.attrs,e)))})})}),!0):!1},pXe=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),mXe=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),gXe=()=>({state:n,dispatch:e})=>Gt(n,e),yXe=()=>({state:n,dispatch:e})=>Qt(n,e),vXe=()=>({state:n,dispatch:e})=>sn(n,e),bXe=()=>({state:n,dispatch:e})=>an(n,e),kXe=()=>({state:n,dispatch:e})=>on(n,e);function xXe(n,e,t={}){return ME(n,e,{slice:!1,parseOptions:t})}const SXe=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=xXe(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function wXe(n,e){const t=Kd(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function $Xe(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function EXe(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function oB(n){return e=>EXe(e.$from,n)}function qw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function CXe(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Kd(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>CE(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>CE(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function cG(n,e){const{nodeExtensions:t}=MYe(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=gm(Ku(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function MXe(n,e,t){var r;const{selection:i}=e;let s=null;if(Sfe(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const TXe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Kd(n,r.schema);if(i)if(o){const c=wXe(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return MXe(r,t,l)},_Xe=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),AXe=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Pr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},IXe=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Wf(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},RXe=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=Wf(i,o,a),c=Wf(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},OXe=n=>({state:e,dispatch:t})=>{const r=Pr(n,e.schema);return dn(r)(e,t)};function uG(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const PXe=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=qw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&uG(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:$Xe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&uG(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},DXe=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Pr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ea.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ea.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=qw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ea.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new SE(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=qw(d,u.type.name,u.attrs),p=qw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},bR=(n,e)=>{const t=oB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},kR=(n,e)=>{const t=oB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},NXe=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Pr(n,o.schema),p=Pr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=oB(x=>cG(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(cG(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>bR(s,h)).command(()=>kR(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>bR(s,h)).command(()=>kR(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>bR(s,h)).command(()=>kR(s,h)).run()},FXe=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Kd(n,r.schema);return CXe(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},LXe=(n,e,t={})=>({state:r,commands:i})=>{const s=Pr(n,r.schema),o=Pr(e,r.schema);return sB(r,s,t)?i.setNode(o):i.setNode(s,t)},zXe=(n,e={})=>({state:t,commands:r})=>{const i=Pr(n,t.schema);return sB(t,i,e)?r.lift(i):r.wrapIn(i,e)},BXe=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},jXe=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},VXe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Kd(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=xfe(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},qXe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=$fe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Pr(n,r.schema)),a==="mark"&&(o=Kd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},KXe=(n,e={})=>({state:t,dispatch:r})=>{const i=Pr(n,t.schema);return ln(i,e)(t,r)},UXe=(n,e={})=>({state:t,dispatch:r})=>{const i=Pr(n,t.schema);return cn(i,e)(t,r)};var HXe=Object.freeze({__proto__:null,blur:OYe,clearContent:PYe,clearNodes:DYe,command:NYe,createParagraphNear:FYe,cut:LYe,deleteCurrentNode:zYe,deleteNode:BYe,deleteRange:jYe,deleteSelection:VYe,enter:qYe,exitCode:KYe,extendMarkRange:HYe,first:WYe,focus:JYe,forEach:QYe,insertContent:YYe,insertContentAt:eXe,joinUp:tXe,joinDown:nXe,joinBackward:rXe,joinForward:iXe,joinItemBackward:sXe,joinItemForward:oXe,keyboardShortcut:lXe,lift:cXe,liftEmptyBlock:uXe,liftListItem:dXe,newlineInCode:fXe,resetAttributes:hXe,scrollIntoView:pXe,selectAll:mXe,selectNodeBackward:gXe,selectNodeForward:yXe,selectParentNode:vXe,selectTextblockEnd:bXe,selectTextblockStart:kXe,setContent:SXe,setMark:TXe,setMeta:_Xe,setNode:AXe,setNodeSelection:IXe,setTextSelection:RXe,sinkListItem:OXe,splitBlock:PXe,splitListItem:DXe,toggleList:NXe,toggleMark:FXe,toggleNode:LXe,toggleWrap:zXe,undoInputRule:BXe,unsetAllMarks:jXe,unsetMark:VXe,updateAttributes:qXe,wrapIn:KXe,wrapInList:UXe});uu.create({name:"commands",addCommands(){return{...HXe}}});uu.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});uu.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});uu.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return iB()||wfe()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=bfe({state:t,transaction:d}),{commands:h}=new CYe({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});uu.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Efe(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Efe(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Cfe(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Cfe(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ca=class li{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new li(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new li(r,i)}cutByIndex(e,t){return e==t?li.empty:e==0&&t==this.content.length?this:new li(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new li(i,s)}addToStart(e){return new li([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new li(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Efe(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Cfe(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Wx(0,e);if(e==this.size)return Wx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Wx(r+1,o):Wx(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return li.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new li(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return li.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new li(t||e,r)}static from(e){if(!e)return li.empty;if(e instanceof li)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new li([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ca.empty=new Ca([],0);const xR={index:0,offset:0};function Wx(n,e){return xR.index=n,xR.offset=e,xR}function Y3(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Y3(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Y3(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ml=class X3{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Y3(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return X3.none;if(e instanceof X3)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};ml.none=[];let TE=class ym{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Tfe(this.content,e+this.openStart,t);return r&&new ym(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ym(Mfe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ym.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ym(Ca.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new ym(e,r,i)}};TE.empty=new TE(Ca.empty,0,0);function Mfe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Mfe(s.content,e-i-1,t-i-1)))}function Tfe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Tfe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let WXe=class Z3{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new fG(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new fG(this,t,!0);return r.addAll(e,t.from,t.to),TE.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(QXe(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=hG(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=hG(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Z3(e,Z3.schemaRules(e)))}};const _fe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},GXe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Afe={ol:!0,ul:!0},_E=1,AE=2,Vv=4;function dG(n,e,t){return e!=null?(e?_E:0)|(e==="full"?AE:0):n&&n.whitespace=="pre"?_E|AE:t&~Vv}let Gx=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=ml.none,this.stashMarks=[],this.match=o||(a&Vv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ca.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&_E)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ca.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ca.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):XXe(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_fe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},fG=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=dG(null,t.preserveWhitespace,0)|(r?Vv:0);i?s=new Gx(i.type,i.attrs,ml.none,ml.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new Gx(null,null,ml.none,ml.none,!0,null,o):s=new Gx(e.schema.topNodeType,null,ml.none,ml.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(YXe(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&AE||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&_E)r.options&AE?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Afe.hasOwnProperty(r)&&this.parser.normalizeLists&&JXe(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:GXe.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(_fe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=ml.none,r=ml.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=dG(e,i,s.options);s.options&Vv&&s.content.length==0&&(o|=Vv),this.nodes.push(new Gx(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=ZXe(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function JXe(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Afe.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function QXe(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function YXe(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function hG(n){let e={};for(let t in n)e[t]=n[t];return e}function XXe(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function ZXe(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Ife(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let eZe=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Ife({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Ts(n,e,t){return n.config[e]===void 0&&n.parent?Ts(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ts(n.parent,e,t):null}):n.config[e]}function tZe(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Dr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function nZe(n){return typeof n=="function"}function ha(n,e=void 0,...t){return nZe(n)?e?n.bind(e)(...t):n(...t):n}function rZe(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function iZe(n){return Object.prototype.toString.call(n).slice(8,-1)}function SR(n){return iZe(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function aB(n,e){const t={...n};return SR(n)&&SR(e)&&Object.keys(e).forEach(r=>{SR(e[r])?r in n?t[r]=aB(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let O0=class eF{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ha(Ts(this,"addOptions",{name:this.name}))),this.storage=ha(Ts(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new eF(e)}configure(e={}){const t=this.extend();return t.options=aB(this.options,e),t.storage=ha(Ts(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new eF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ha(Ts(t,"addOptions",{name:t.name})),t.storage=ha(Ts(t,"addStorage",{name:t.name,options:t.options})),t}};function sZe(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function oZe(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}O0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=oZe(t);return sZe(r,{from:o,to:a},{textSerializers:l})}}})]}});const aZe=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),lZe=(n=!1)=>({commands:e})=>e.setContent("",n),cZe=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},uZe=n=>e=>n(e),dZe=()=>({state:n,dispatch:e})=>nn(n,e),fZe=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},hZe=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},pZe=n=>({tr:e,state:t,dispatch:r})=>{const i=Dr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},mZe=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},gZe=()=>({state:n,dispatch:e})=>Ht(n,e),yZe=()=>({commands:n})=>n.keyboardShortcut("Enter"),vZe=()=>({state:n,dispatch:e})=>tn(n,e);function IE(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:rZe(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function tF(n,e,t={}){return n.find(r=>r.type===e&&IE(r.attrs,t))}function bZe(n,e,t={}){return!!tF(n,e,t)}function Rfe(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=tF([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(tF([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&bZe([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Ud(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const kZe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Ud(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Rfe(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},xZe=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Ofe(n){return n instanceof D}function Gf(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function SZe(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,Gf(0,i,s),Gf(n.content.size,i,s)):D.create(n,Gf(e,i,s),Gf(e,i,s))}function lB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const wZe=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{lB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Ofe(t.state.selection))return o(),!0;const a=SZe(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},$Ze=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),EZe=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Pfe=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Pfe(r)}return n};function pG(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Pfe(t)}function RE(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ca.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),RE("",e,t)}if(typeof n=="string"){const r=WXe.fromSchema(e);return t.slice?r.parseSlice(pG(n),t.parseOptions).content:r.parse(pG(n),t.parseOptions)}return RE("",e,t)}function CZe(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const MZe=n=>n.toString().startsWith("<"),TZe=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=RE(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((MZe(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&CZe(r,r.steps.length-1,-1)}return!0},_Ze=()=>({state:n,dispatch:e})=>Yt(n,e),AZe=()=>({state:n,dispatch:e})=>Xt(n,e),IZe=()=>({state:n,dispatch:e})=>Wt(n,e),RZe=()=>({state:n,dispatch:e})=>Jt(n,e),OZe=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},PZe=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},DZe=()=>({state:n,dispatch:e})=>Cn(n,e),NZe=()=>({state:n,dispatch:e})=>Mn(n,e);function Dfe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function FZe(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))lB()||Dfe()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const LZe=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=FZe(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function cB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Dr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>IE(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const zZe=(n,e={})=>({state:t,dispatch:r})=>{const i=Dr(n,t.schema);return cB(t,i,e)?Zt(t,r):!1},BZe=()=>({state:n,dispatch:e})=>rn(n,e),jZe=n=>({state:e,dispatch:t})=>{const r=Dr(n,e.schema);return un(r)(e,t)},VZe=()=>({state:n,dispatch:e})=>en(n,e);function Nfe(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function mG(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const qZe=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Nfe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Dr(n,r.schema)),a==="mark"&&(o=Ud(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,mG(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(mG(d.attrs,e)))})})}),!0):!1},KZe=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),UZe=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),HZe=()=>({state:n,dispatch:e})=>Gt(n,e),WZe=()=>({state:n,dispatch:e})=>Qt(n,e),GZe=()=>({state:n,dispatch:e})=>sn(n,e),JZe=()=>({state:n,dispatch:e})=>an(n,e),QZe=()=>({state:n,dispatch:e})=>on(n,e);function YZe(n,e,t={}){return RE(n,e,{slice:!1,parseOptions:t})}const XZe=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=YZe(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function ZZe(n,e){const t=Ud(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function eet(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function tet(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function uB(n){return e=>tet(e.$from,n)}function Kw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function net(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Ud(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>IE(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>IE(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function gG(n,e){const{nodeExtensions:t}=tZe(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ha(Ts(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function ret(n,e,t){var r;const{selection:i}=e;let s=null;if(Ofe(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const iet=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Ud(n,r.schema);if(i)if(o){const c=ZZe(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return ret(r,t,l)},set=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),oet=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Dr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},aet=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Gf(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},cet=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=Gf(i,o,a),c=Gf(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},uet=n=>({state:e,dispatch:t})=>{const r=Dr(n,e.schema);return dn(r)(e,t)};function yG(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const det=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Kw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&yG(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:eet(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&yG(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},fet=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Dr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ca.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ca.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Kw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ca.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new TE(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Kw(d,u.type.name,u.attrs),p=Kw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},wR=(n,e)=>{const t=uB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},$R=(n,e)=>{const t=uB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},het=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Dr(n,o.schema),p=Dr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=uB(x=>gG(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(gG(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>wR(s,h)).command(()=>$R(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>wR(s,h)).command(()=>$R(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>wR(s,h)).command(()=>$R(s,h)).run()},pet=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Ud(n,r.schema);return net(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},met=(n,e,t={})=>({state:r,commands:i})=>{const s=Dr(n,r.schema),o=Dr(e,r.schema);return cB(r,s,t)?i.setNode(o):i.setNode(s,t)},get=(n,e={})=>({state:t,commands:r})=>{const i=Dr(n,t.schema);return cB(t,i,e)?r.lift(i):r.wrapIn(i,e)},yet=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},vet=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},bet=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Ud(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Rfe(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},ket=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Nfe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Dr(n,r.schema)),a==="mark"&&(o=Ud(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},xet=(n,e={})=>({state:t,dispatch:r})=>{const i=Dr(n,t.schema);return ln(i,e)(t,r)},wet=(n,e={})=>({state:t,dispatch:r})=>{const i=Dr(n,t.schema);return cn(i,e)(t,r)};var $et=Object.freeze({__proto__:null,blur:aZe,clearContent:lZe,clearNodes:cZe,command:uZe,createParagraphNear:dZe,cut:fZe,deleteCurrentNode:hZe,deleteNode:pZe,deleteRange:mZe,deleteSelection:gZe,enter:yZe,exitCode:vZe,extendMarkRange:kZe,first:xZe,focus:wZe,forEach:$Ze,insertContent:EZe,insertContentAt:TZe,joinUp:_Ze,joinDown:AZe,joinBackward:IZe,joinForward:RZe,joinItemBackward:OZe,joinItemForward:PZe,joinTextblockBackward:DZe,joinTextblockForward:NZe,keyboardShortcut:LZe,lift:zZe,liftEmptyBlock:BZe,liftListItem:jZe,newlineInCode:VZe,resetAttributes:qZe,scrollIntoView:KZe,selectAll:UZe,selectNodeBackward:HZe,selectNodeForward:WZe,selectParentNode:GZe,selectTextblockEnd:JZe,selectTextblockStart:QZe,setContent:XZe,setMark:iet,setMeta:set,setNode:oet,setNodeSelection:aet,setTextSelection:cet,sinkListItem:uet,splitBlock:det,splitListItem:fet,toggleList:het,toggleMark:pet,toggleNode:met,toggleWrap:get,undoInputRule:yet,unsetAllMarks:vet,unsetMark:bet,updateAttributes:ket,wrapIn:xet,wrapInList:wet});O0.create({name:"commands",addCommands(){return{...$et}}});O0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});O0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});O0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return lB()||Dfe()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Ife({state:t,transaction:d}),{commands:h}=new eZe({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});O0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});let Eet=class nF{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ha(Ts(this,"addOptions",{name:this.name}))),this.storage=ha(Ts(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new nF(e)}configure(e={}){const t=this.extend();return t.options=aB(this.options,e),t.storage=ha(Ts(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new nF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ha(Ts(t,"addOptions",{name:t.name})),t.storage=ha(Ts(t,"addStorage",{name:t.name,options:t.options})),t}};const dB=Eet.create({name:"doc",topNode:!0,content:"block+"});function Ffe(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Ffe(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Lfe(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Lfe(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let ct=class ci{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ci(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ci(r,i)}cutByIndex(e,t){return e==t?ci.empty:e==0&&t==this.content.length?this:new ci(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ci(i,s)}addToStart(e){return new ci([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ci(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Ffe(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Lfe(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Jx(0,e);if(e==this.size)return Jx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Jx(r+1,o):Jx(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ci.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ci(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ci.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ci(t||e,r)}static from(e){if(!e)return ci.empty;if(e instanceof ci)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ci([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};ct.empty=new ct([],0);const ER={index:0,offset:0};function Jx(n,e){return ER.index=n,ER.offset=e,ER}function OE(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!OE(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!OE(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Tt=class rF{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&OE(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return rF.none;if(e instanceof rF)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Tt.none=[];let iF=class extends Error{},hs=class vm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Bfe(this.content,e+this.openStart,t);return r&&new vm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new vm(zfe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return vm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new vm(ct.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new vm(e,r,i)}};hs.empty=new hs(ct.empty,0,0);function zfe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(zfe(s.content,e-i-1,t-i-1)))}function Bfe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Bfe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function Cet(n,e,t){if(t.openStart>n.depth)throw new iF("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new iF("Inconsistent open depths");return jfe(n,e,t,0)}function jfe(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=jfe(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Mh(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Met(t,n);return Mh(s,qfe(n,o,a,e,r))}else return Mh(s,PE(n,e,r))}function Vfe(n,e){if(!e.type.compatibleContent(n.type))throw new iF("Cannot join "+e.type.name+" onto "+n.type.name)}function sF(n,e,t){let r=n.node(t);return Vfe(r,e.node(t)),r}function Ch(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function qv(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Ch(n.nodeAfter,r),s++));for(let a=s;a<o;a++)Ch(i.child(a),r);e&&e.depth==t&&e.textOffset&&Ch(e.nodeBefore,r)}function Mh(n,e){return n.type.checkContent(e),n.copy(e)}function qfe(n,e,t,r,i){let s=n.depth>i&&sF(n,e,i+1),o=r.depth>i&&sF(t,r,i+1),a=[];return qv(null,n,i,a),s&&o&&e.index(i)==t.index(i)?(Vfe(s,o),Ch(Mh(s,qfe(n,e,t,r,i+1)),a)):(s&&Ch(Mh(s,PE(n,e,i+1)),a),qv(e,t,i,a),o&&Ch(Mh(o,PE(t,r,i+1)),a)),qv(r,null,i,a),new ct(a)}function PE(n,e,t){let r=[];if(qv(null,n,t,r),n.depth>t){let i=sF(n,e,t+1);Ch(Mh(i,PE(n,e,t+1)),r)}return qv(e,null,t,r),new ct(r)}function Met(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(ct.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}let vG=class oF{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Tt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new _et(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new oF(t,r,s)}static resolveCached(e,t){for(let i=0;i<CR.length;i++){let s=CR[i];if(s.pos==t&&s.doc==e)return s}let r=CR[MR]=oF.resolve(e,t);return MR=(MR+1)%Tet,r}},CR=[],MR=0,Tet=12,_et=class{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}};const Aet=Object.create(null);let Ig=class aF{constructor(e,t,r,i=Tt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||ct.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&OE(this.attrs,t||e.defaultAttrs||Aet)&&Tt.sameSet(this.marks,r||Tt.none)}copy(e=null){return e==this.content?this:new aF(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new aF(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return hs.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new hs(c,i.depth-o,s.depth-o)}replace(e,t,r){return Cet(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return vG.resolveCached(this,e)}resolveNoCache(e){return vG.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Kfe(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ct.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Tt.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!Tt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=ct.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}};Ig.prototype.text=void 0;let Iet=class lF extends Ig{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Kfe(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new lF(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new lF(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function Kfe(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}let pk=class Ufe{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new Ret(e,t);if(r.next==null)return Ufe.empty;let i=Hfe(r);r.next&&r.err("Unexpected trailing text");let s=zet(Let(i));return Bet(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return ct.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}};pk.empty=new pk(!0);let Ret=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function Hfe(n){let e=[];do e.push(Oet(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Oet(n){let e=[];do e.push(Pet(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Pet(n){let e=Fet(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Det(n,e);else break;return e}function bG(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Det(n,e){let t=bG(n),r=t;return n.eat(",")&&(n.next!="}"?r=bG(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Net(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function Fet(n){if(n.eat("(")){let e=Hfe(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Net(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Let(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=t())}else if(o.type=="star"){let l=t();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Wfe(n,e){return e-n}function kG(n,e){let t=[];return r(e),t.sort(Wfe);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&r(l)}}}function zet(n){let e=Object.create(null);return t(kG(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);kG(n,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new pk(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Wfe);s.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return s}}function Bet(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Gfe(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Jfe(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function Qfe(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new jet(n[t]);return e}let xG=class Yfe{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Qfe(r.attrs),this.defaultAttrs=Gfe(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==pk.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Jfe(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ig(this,this.computeAttrs(e),ct.from(t),Tt.setFrom(r))}createChecked(e=null,t,r){return t=ct.from(t),this.checkContent(t),new Ig(this,this.computeAttrs(e),t,Tt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ct.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(ct.empty,!0);return s?new Ig(this,e,t.append(s),Tt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Tt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new Yfe(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}},jet=class{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}},Vet=class Xfe{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Qfe(i.attrs),this.excluded=null;let s=Gfe(this.attrs);this.instance=s?new Tt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Tt(this,Jfe(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Xfe(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}},qet=class{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Nn.from(e.nodes),t.marks=Nn.from(e.marks||{}),this.nodes=xG.compile(this.spec.nodes,this),this.marks=Vet.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=pk.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?SG(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:SG(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof xG){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Iet(r,r.defaultAttrs,e,Tt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Ig.fromJSON(this,e)}markFromJSON(e){return Tt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}};function SG(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}let fB=class cF{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new $G(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new $G(this,t,!0);return r.addAll(e,t.from,t.to),hs.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Het(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=EG(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=EG(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new cF(e,cF.schemaRules(e)))}};const Zfe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ket={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ehe={ol:!0,ul:!0},DE=1,NE=2,Kv=4;function wG(n,e,t){return e!=null?(e?DE:0)|(e==="full"?NE:0):n&&n.whitespace=="pre"?DE|NE:t&~Kv}let Qx=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Tt.none,this.stashMarks=[],this.match=o||(a&Kv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ct.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&DE)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=ct.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ct.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Get(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Zfe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},$G=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=wG(null,t.preserveWhitespace,0)|(r?Kv:0);i?s=new Qx(i.type,i.attrs,Tt.none,Tt.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new Qx(null,null,Tt.none,Tt.none,!0,null,o):s=new Qx(e.schema.topNodeType,null,Tt.none,Tt.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(Wet(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&NE||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&DE)r.options&NE?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;ehe.hasOwnProperty(r)&&this.parser.normalizeLists&&Uet(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Ket.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Zfe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Tt.none,r=Tt.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=wG(e,i,s.options);s.options&Kv&&s.content.length==0&&(o|=Kv),this.nodes.push(new Qx(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Jet(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function Uet(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ehe.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Het(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Wet(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function EG(n){let e={};for(let t in n)e[t]=n[t];return e}function Get(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function Jet(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}let d1=class cv{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=TR(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=cv.renderSpec(TR(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&cv.renderSpec(TR(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<t.length;u++){let d=t[u];if(d===0){if(u<t.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=cv.renderSpec(e,d,r);if(a.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new cv(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=CG(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return CG(e.marks)}};function CG(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function TR(n){return n.document||window.document}const Li=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},mk=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let MG=null;const Tc=function(n,e,t){let r=MG||(MG=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Zh=function(n,e,t,r){return t&&(TG(n,e,t,r,-1)||TG(n,e,t,r,1))},Qet=/^(img|br|input|textarea|hr)$/i;function TG(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:ql(n))){let s=n.parentNode;if(!s||s.nodeType!=1||hB(n)||Qet.test(n.nodeName)||n.contentEditable=="false")return!1;e=Li(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?ql(n):0}else return!1}}function ql(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Yet(n,e,t){for(let r=e==0,i=e==ql(n);r||i;){if(n==t)return!0;let s=Li(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==ql(n)}}function hB(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const cA=function(n){return n.focusNode&&Zh(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Df(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Xet(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Zet(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:r.startOffset}}}const lc=typeof navigator<"u"?navigator:null,_G=typeof document<"u"?document:null,Hd=lc&&lc.userAgent||"",uF=/Edge\/(\d+)/.exec(Hd),the=/MSIE \d/.exec(Hd),dF=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hd),ps=!!(the||dF||uF),gd=the?document.documentMode:dF?+dF[1]:uF?+uF[1]:0,Xa=!ps&&/gecko\/(\d+)/i.test(Hd);Xa&&+(/Firefox\/(\d+)/.exec(Hd)||[0,0])[1];const fF=!ps&&/Chrome\/(\d+)/.exec(Hd),Cr=!!fF,ett=fF?+fF[1]:0,ji=!ps&&!!lc&&/Apple Computer/.test(lc.vendor),s0=ji&&(/Mobile\/\w+/.test(Hd)||!!lc&&lc.maxTouchPoints>2),xo=s0||(lc?/Mac/.test(lc.platform):!1),ttt=lc?/Win/.test(lc.platform):!1,da=/Android \d/.test(Hd),f1=!!_G&&"webkitFontSmoothing"in _G.documentElement.style,ntt=f1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function rtt(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function wc(n,e){return typeof n=="number"?n:n[e]}function itt(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function AG(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;o=mk(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?rtt(s):itt(a),u=0,d=0;if(e.top<c.top+wc(r,"top")?d=-(c.top-e.top+wc(i,"top")):e.bottom>c.bottom-wc(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+wc(i,"top")-c.top:e.bottom-c.bottom+wc(i,"bottom")),e.left<c.left+wc(r,"left")?u=-(c.left-e.left+wc(i,"left")):e.right>c.right-wc(r,"right")&&(u=e.right-c.right+wc(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function stt(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:nhe(n.dom)}}function nhe(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=mk(r));return e}function ott({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;rhe(t,r==0?0:r-e)}function rhe(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Hp=null;function att(n){if(n.setActive)return n.setActive();if(Hp)return n.focus(Hp);let e=nhe(n);n.focus(Hp==null?{get preventScroll(){return Hp={preventScroll:!0},!0}}:void 0),Hp||(Hp=!1,rhe(e,0))}function ihe(n,e){let t,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Tc(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){t=u,r=m,i=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!t&&l&&(t=l,i=c,r=0),t&&t.nodeType==3?ltt(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:ihe(t,i)}function ltt(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=wu(r,1);if(s.top!=s.bottom&&pB(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function pB(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function ctt(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function utt(n,e,t){let{node:r,offset:i}=ihe(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function dtt(n,e,t,r){let i=-1;for(let s=e,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function she(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(pB(e,c))return she(o,e,c)}}if((s=(s+1)%r)==i)break}return n}function ftt(n,e){let t=n.dom.ownerDocument,r,i=0,s=Zet(t,e.left,e.top);s&&({node:r,offset:i}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!pB(e,c)||(o=she(n.dom,e,c),!o))return null}if(ji)for(let c=o;r&&c;c=mk(c))c.draggable&&(r=void 0);if(o=ctt(o,e),r){if(Xa&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;f1&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=dtt(n,r,i,e))}a==null&&(a=utt(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function IG(n){return n.top<n.bottom||n.left<n.right}function wu(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(IG(r))return r}return Array.prototype.find.call(t,IG)||n.getBoundingClientRect()}const htt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ohe(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=f1||Xa;if(r.nodeType==3)if(o&&(htt.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=wu(Tc(r,i,i),t);if(Xa&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=wu(Tc(r,i-1,i-1),-1);if(c.top==l.top){let u=wu(Tc(r,i,i+1),-1);if(u.top!=l.top)return Ky(u,u.left<c.left)}}return l}else{let l=i,c=i,u=t<0?1:-1;return t<0&&!i?(c++,u=-1):t>=0&&i==r.nodeValue.length?(l--,u=1):t<0?l--:c++,Ky(wu(Tc(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==ql(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return _R(l.getBoundingClientRect(),!1)}if(s==null&&i<ql(r)){let l=r.childNodes[i];if(l.nodeType==1)return _R(l.getBoundingClientRect(),!0)}return _R(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==ql(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Tc(l,ql(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ky(wu(c,1),!1)}if(s==null&&i<ql(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Tc(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Ky(wu(c,-1),!0)}return Ky(wu(r.nodeType==3?Tc(r):r,-t),t>=0)}function Ky(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function _R(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function ahe(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function ptt(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return ahe(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=ohe(n,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Tc(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const mtt=/[\u0590-\u08ac]/;function gtt(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=n.domSelection();return!mtt.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:ahe(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),g})}let RG=null,OG=null,PG=!1;function ytt(n,e,t){return RG==e&&OG==t?PG:(RG=e,OG=t,PG=t=="up"||t=="down"?ptt(n,e,t):gtt(n,e,t))}const No=0,DG=1,Jf=2,cc=3;class h1{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=No,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Li(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof che){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof lhe&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Li(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Li(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Li(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Li(d.dom);break}t+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],m=h+p.size;if(s>h&&o<m)return p.setSelection(e-h-p.border,t-h-p.border,r,i);h=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.getSelection(),u=!1;if((Xa||ji)&&e==t){let{node:f,offset:h}=a;if(f.nodeType==3){if(u=!!(h&&f.nodeValue[h-1]==`
`),u&&h==f.nodeValue.length)for(let p=f,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:Li(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=f.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(Xa&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||u&&ji)&&Zh(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Zh(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?Jf:DG,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=cc:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Jf:cc}r=o}this.dirty=Jf}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Jf:DG;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class lhe extends h1{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==No&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class vtt extends h1{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ep extends h1{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=d1.renderSpec(document,t.type.spec.toDOM(t,r))),new ep(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&cc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=cc&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=No){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=No}}slice(e,t,r){let i=ep.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=mF(s,t,o,r)),e>0&&(s=mF(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class yd extends h1{constructor(e,t,r,i,s,o,a,l,c){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,t,r,i,s,o){let a=s.nodeViews[t.type.name],l,c=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=d1.renderSpec(document,t.type.spec.toDOM(t)));!d&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let f=u;return u=fhe(u,r,t),c?l=new btt(e,t,r,i,u,d||null,f,c,s,o+1):t.isText?new uA(e,t,r,i,u,f,s):new yd(e,t,r,i,u,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ct.empty)}return e}matchesNode(e,t,r){return this.dirty==No&&e.eq(this.node)&&pF(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new xtt(this,o&&o.node,e);$tt(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Tt.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Jf)&&(o&&this.protectLocalComposition(e,o),uhe(this.contentDOM,this.children,e),s0&&Ett(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof D)||r<t||i>t+this.node.content.size)return null;let s=e.domSelectionRange(),o=Ctt(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=Mtt(this.node.content,a,r-t,i-t);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new vtt(this,s,t,i);e.input.compositionNodes.push(o),this.children=mF(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==cc||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=No}updateOuterDeco(e){if(pF(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=dhe(this.dom,this.nodeDOM,hF(this.outerDeco,this.node,t),hF(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function NG(n,e,t,r,i){fhe(r,e,n);let s=new yd(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class uA extends yd{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==cc||this.dirty!=No&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=No||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=No,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new uA(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=cc)}get domAtom(){return!1}}class che extends h1{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==No&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class btt extends yd{constructor(e,t,r,i,s,o,a,l,c,u){super(e,t,r,i,s,o,a,c,u),this.spec=l}update(e,t,r,i){if(this.dirty==cc)return!1;if(this.spec.update){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function uhe(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=FG(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(o instanceof ep){let l=r?r.previousSibling:n.lastChild;uhe(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=FG(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Uv=function(n){n&&(this.nodeName=n)};Uv.prototype=Object.create(null);const Qf=[new Uv];function hF(n,e,t){if(n.length==0)return Qf;let r=t?Qf[0]:new Uv,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&i.push(r=new Uv(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&i.length==1&&i.push(r=new Uv(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function dhe(n,e,t,r){if(t==Qf&&r==Qf)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Qf[0]),i=l}ktt(i,a||Qf[0],o)}return i}function ktt(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function fhe(n,e,t){return dhe(n,n,Qf,hF(e,t,n.nodeType!=1))}function pF(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function FG(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class xtt{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Stt(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=No,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ep.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==cc&&o.dom==o.contentDOM&&(o.dirty=Jf),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof yd){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=cc&&pF(t,l.outerDeco));if(!f&&l.update(e,t,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,t,r,i,o)))return this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Jf,d.updateChildren(i,o+1),d.dirty=No),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let a=yd.create(this.top,t,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,i,s){let o=yd.create(this.top,e,t,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new lhe(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ep;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof uA)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ji||Cr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new che(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Stt(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof ep)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function wtt(n,e){return n.type.side-e.type.side}function $tt(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(d||(d=[u])).push(g):u=g)}if(u)if(d){d.sort(wtt);for(let g=0;g<d.length;g++)t(d[g],c,!!l)}else t(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<n.childCount)h=c,f=n.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=f.cut(g-s),f=f.cut(0,g-s),p=g,h=-1)}let m=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();r(f,m,e.forChild(s,f),h),s=p}}function Ett(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Ctt(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=ql(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function Mtt(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<n.childCount;){let c=n.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=t){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function mF(n,e,t,r,i){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>t&&s.push(l.slice(t-c,l.size,r)))}return s}function mB(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(cA(t)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&G.isSelectable(u)&&i.parent&&!(u.isInline&&Yet(t.focusNode,t.focusOffset,i.dom))){let d=i.posBefore;c=new G(o==d?a:r.resolve(d))}}else{let u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=gB(n,l,a,u)}return c}function hhe(n){return n.editable?n.hasFocus():mhe(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Bc(n,e=!1){let t=n.state.selection;if(phe(n,t),!!hhe(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Cr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Zh(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)_tt(n);else{let{anchor:r,head:i}=t,s,o;LG&&!(t instanceof D)&&(t.$from.parent.inlineContent||(s=zG(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=zG(n,t.to))),n.docView.setSelection(r,i,n.root,e),LG&&(s&&BG(s),o&&BG(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Ttt(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const LG=ji||Cr&&ett<63;function zG(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(ji&&i&&i.contentEditable=="false")return AR(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return AR(i);if(s)return AR(s)}}function AR(n){return n.contentEditable="true",ji&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function BG(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Ttt(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!hhe(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function _tt(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,Li(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&ps&&gd<=11&&(r.disabled=!0,r.disabled=!1)}function phe(n,e){if(e instanceof G){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(jG(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else jG(n)}function jG(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function gB(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||D.between(e,t,r)}function VG(n){return n.editable&&!n.hasFocus()?!1:mhe(n)}function mhe(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Att(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Zh(e.node,e.offset,t.anchorNode,t.anchorOffset)}function gF(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&V.findFrom(s,e)}function Ru(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function qG(n,e,t){let r=n.state.selection;if(r instanceof D)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Ru(n,new D(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=gF(n.state,e);return i&&i instanceof G?Ru(n,i):!1}else if(!(xo&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?G.isSelectable(s)?Ru(n,new G(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):f1?Ru(n,new D(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof G&&r.node.isInline)return Ru(n,new D(e>0?r.$to:r.$from));{let i=gF(n.state,e);return i?Ru(n,i):!1}}}function FE(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Hv(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Wp(n,e){return e<0?Itt(n):Rtt(n)}function Itt(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(Xa&&t.nodeType==1&&r<FE(t)&&Hv(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Hv(a,-1))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(ghe(t))break;{let a=t.previousSibling;for(;a&&Hv(a,-1);)i=t.parentNode,s=Li(a),a=a.previousSibling;if(a)t=a,r=FE(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?yF(n,t,r):i&&yF(n,i,s)}function Rtt(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=FE(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Hv(a,1))s=t,o=++r;else break}else{if(ghe(t))break;{let a=t.nextSibling;for(;a&&Hv(a,1);)s=a.parentNode,o=Li(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=FE(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&yF(n,s,o)}function ghe(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ott(n,e){for(;n&&e==n.childNodes.length&&!hB(n);)e=Li(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function Ptt(n,e){for(;n&&!e&&!hB(n);)e=Li(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function yF(n,e,t){if(e.nodeType!=3){let s,o;(o=Ott(e,t))?(e=o,t=0):(s=Ptt(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(cA(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Bc(n)},50)}function KG(n,e){let t=n.state.doc.resolve(e);if(!(Cr||ttt)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function UG(n,e,t){let r=n.state.selection;if(r instanceof D&&!r.empty||t.indexOf("s")>-1||xo&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=gF(n.state,e);if(o&&o instanceof G)return Ru(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Xs?V.near(o,e):V.findFrom(o,e);return a?Ru(n,a):!1}return!1}function HG(n,e){if(!(n.state.selection instanceof D))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function WG(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Dtt(n){if(!ji||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;WG(n,r,"true"),setTimeout(()=>WG(n,r,"false"),20)}return!1}function Ntt(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Ftt(n,e){let t=e.keyCode,r=Ntt(e);if(t==8||xo&&t==72&&r=="c")return HG(n,-1)||Wp(n,-1);if(t==46&&!e.shiftKey||xo&&t==68&&r=="c")return HG(n,1)||Wp(n,1);if(t==13||t==27)return!0;if(t==37||xo&&t==66&&r=="c"){let i=t==37?KG(n,n.state.selection.from)=="ltr"?-1:1:-1;return qG(n,i,r)||Wp(n,i)}else if(t==39||xo&&t==70&&r=="c"){let i=t==39?KG(n,n.state.selection.from)=="ltr"?1:-1:1;return qG(n,i,r)||Wp(n,i)}else{if(t==38||xo&&t==80&&r=="c")return UG(n,-1,r)||Wp(n,-1);if(t==40||xo&&t==78&&r=="c")return Dtt(n)||UG(n,1,r)||Wp(n,1);if(r==(xo?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function yhe(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=n.someProp("clipboardSerializer")||d1.fromSchema(n.state.schema),a=whe(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=She[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function vhe(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",f=>{e=f(e,s||r,n)}),s)return e?new hs(ct.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):hs.empty;let d=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(d)a=d;else{let f=i.marks(),{schema:h}=n.state,p=d1.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,f)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),o=Btt(t),f1&&jtt(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||fB.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Ltt.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Vtt(GG(a,+u[1],+u[2]),u[4]);else if(a=hs.maxOpen(ztt(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=GG(a,d,f)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}const Ltt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function ztt(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&khe(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=xhe(o[o.length-1],s.length));let u=bhe(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return ct.from(o)}return n}function bhe(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ct.from(n));return n}function khe(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=khe(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(ct.from(bhe(t,n,i+1))))}}function xhe(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,xhe(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ct.empty,!0);return n.copy(t.append(r))}function vF(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),i<r-1&&(a=vF(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(ct.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function GG(n,e,t){return e<n.openStart&&(n=new hs(vF(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new hs(vF(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const She={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let JG=null;function whe(){return JG||(JG=document.implementation.createHTMLDocument("title"))}function Btt(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=whe().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&She[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function jtt(n){let e=n.querySelectorAll(Cr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Vtt(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=ct.from(l.create(r[a+1],i)),s++,o++}return new hs(i,s,o)}const Vi={},qi={},qtt={touchstart:!0,touchmove:!0};class Ktt{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Utt(n){for(let e in Vi){let t=Vi[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{Wtt(n,r)&&!yB(n,r)&&(n.editable||!(r.type in qi))&&t(n,r)},qtt[e]?{passive:!0}:void 0)}ji&&n.dom.addEventListener("input",()=>null),bF(n)}function td(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Htt(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function bF(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>yB(n,r))})}function yB(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function Wtt(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Gtt(n,e){!yB(n,e)&&Vi[e.type]&&(n.editable||!(e.type in qi))&&Vi[e.type](n,e)}qi.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Ehe(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(da&&Cr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),s0&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Df(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Ftt(n,t)?t.preventDefault():td(n,"key")};qi.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};qi.keypress=(n,e)=>{let t=e;if(Ehe(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||xo&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof D)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function dA(n){return{left:n.clientX,top:n.clientY}}function Jtt(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function vB(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function Rg(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function Qtt(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&G.isSelectable(r)?(Rg(n,new G(t),"pointer"),!0):!1}function Ytt(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof G&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(G.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(Rg(n,G.create(n.state.doc,i),"pointer"),!0):!1}function Xtt(n,e,t,r,i){return vB(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?Ytt(n,t):Qtt(n,t))}function Ztt(n,e,t,r){return vB(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function ent(n,e,t,r){return vB(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||tnt(n,t,r)}function tnt(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Rg(n,D.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Rg(n,D.create(r,a+1,a+1+o.content.size),"pointer");else if(G.isSelectable(o))Rg(n,G.create(r,a),"pointer");else continue;return!0}}function bB(n){return LE(n)}const $he=xo?"metaKey":"ctrlKey";Vi.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=bB(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&Jtt(t,n.input.lastClick)&&!t[$he]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(dA(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new nnt(n,o,t,!!r)):(s=="doubleClick"?Ztt:ent)(n,o.pos,o.inside,t)?t.preventDefault():td(n,"pointer"))};let nnt=class{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[$he],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof G&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),td(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Bc(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(dA(e))),this.updateAllowDefault(e),this.allowDefault||!t?td(this.view,"pointer"):Xtt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ji&&this.mightDrag&&!this.mightDrag.node.isAtom||Cr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Rg(this.view,V.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):td(this.view,"pointer")}move(e){this.updateAllowDefault(e),td(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};Vi.touchstart=n=>{n.input.lastTouch=Date.now(),bB(n),td(n,"pointer")};Vi.touchmove=n=>{n.input.lastTouch=Date.now(),td(n,"pointer")};Vi.contextmenu=n=>bB(n);function Ehe(n,e){return n.composing?!0:ji&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const rnt=da?5e3:-1;qi.compositionstart=qi.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),LE(n,!0),n.markCursor=null;else if(LE(n),Xa&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}Che(n,rnt)};qi.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Che(n,20))};function Che(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>LE(n),e))}function Mhe(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=int());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function int(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function LE(n,e=!1){if(!(da&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Mhe(n),e||n.docView&&n.docView.dirty){let t=mB(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function snt(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const o0=ps&&gd<15||s0&&ntt<604;Vi.copy=qi.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=o0?null:t.clipboardData,o=r.content(),{dom:a,text:l}=yhe(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):snt(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ont(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function ant(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?gk(n,r.value,null,i,e):gk(n,r.textContent,r.innerHTML,i,e)},50)}function gk(n,e,t,r,i){let s=vhe(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,s||hs.empty)))return!0;if(!s)return!1;let o=ont(s),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}qi.paste=(n,e)=>{let t=e;if(n.composing&&!da)return;let r=o0?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&gk(n,r.getData("text/plain"),r.getData("text/html"),i,t)?t.preventDefault():ant(n,t)};let lnt=class{constructor(e,t){this.slice=e,this.move=t}};const The=xo?"altKey":"ctrlKey";Vi.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(dA(t));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof G?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(G.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let c=n.docView.nearestDesc(t.target,!0);c&&c.node.type.spec.draggable&&c!=n.docView&&n.dispatch(n.state.tr.setSelection(G.create(n.state.doc,c.posBefore)))}}let o=n.state.selection.content(),{dom:a,text:l}=yhe(n,o);t.dataTransfer.clearData(),t.dataTransfer.setData(o0?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",o0||t.dataTransfer.setData("text/plain",l),n.dragging=new lnt(o,!t[The])};Vi.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};qi.dragover=qi.dragenter=(n,e)=>e.preventDefault();qi.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(dA(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=vhe(n,t.dataTransfer.getData(o0?"Text":"text/plain"),o0?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!t[The]);if(n.someProp("handleDrop",p=>p(n,t,o||hs.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?oA(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&G.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new G(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,k)=>p=k),c.setSelection(gB(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Vi.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Bc(n)},20))};Vi.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Vi.beforeinput=(n,e)=>{if(Cr&&da&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Df(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in qi)Vi[n]=qi[n];function yk(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}let QG=class _he{constructor(e,t){this.toDOM=e,this.spec=t||Th,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new P0(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof _he&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&yk(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},Wv=class kF{constructor(e,t){this.attrs=e,this.spec=t||Th}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new P0(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof kF&&yk(this.attrs,e.attrs)&&yk(this.spec,e.spec)}static is(e){return e.type instanceof kF}destroy(){}},cnt=class Ahe{constructor(e,t){this.attrs=e,this.spec=t||Th}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new P0(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Ahe&&yk(this.attrs,e.attrs)&&yk(this.spec,e.spec)}destroy(){}},P0=class uv{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new uv(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new uv(e,e,new QG(t,r))}static inline(e,t,r,i){return new uv(e,t,new Wv(r,i))}static node(e,t,r,i){return new uv(e,t,new cnt(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Wv}get widget(){return this.type instanceof QG}};const bm=[],Th={};let rc=class $u{constructor(e,t){this.local=e.length?e:bm,this.children=t.length?t:bm}static create(e,t){return t.length?zE(t,e,0,Th):wr}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==wr||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Th)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?unt(this.children,o||[],e,t,r,i,s):o?new $u(o.sort(_h),bm):wr}add(e,t){return t.length?this==wr?$u.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=Ohe(t,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,zE(u,a,c+1,Th)),s+=3}});let o=Rhe(s?Phe(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new $u(o.length?this.local.concat(o).sort(_h):this.local,i||this.children)}remove(e){return e.length==0||this==wr?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=wr?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new $u(i,r):wr}forChild(e,t){if(this==wr)return this;if(t.isLeaf)return $u.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Wv){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new $u(i.sort(_h),bm);return r?new Ihe([a,r]):a}return r||wr}eq(e){if(this==e)return!0;if(!(e instanceof $u)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return kB(this.localsInner(e))}localsInner(e){if(this==wr)return bm;if(e.inlineContent||!this.local.some(Wv.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Wv||t.push(this.local[r]);return t}};rc.empty=new rc([],[]);rc.removeOverlap=kB;const wr=rc.empty;let Ihe=class km{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Th));return km.from(r)}forChild(e,t){if(t.isLeaf)return rc.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=wr&&(s instanceof km?r=r.concat(s.members):r.push(s))}return km.from(r)}eq(e){if(!(e instanceof km)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?kB(r?t:t.sort(_h)):bm}static from(e){switch(e.length){case 0:return wr;case 1:return e[0];default:return new km(e.every(t=>t instanceof rc)?e:e.reduce((t,r)=>t.concat(r instanceof rc?r:r.members),[]))}}};function unt(n,e,t,r,i,s,o){let a=n.slice();for(let c=0,u=s;c<t.maps.length;c++){let d=0;t.maps[c].forEach((f,h,p,m)=>{let g=m-p-(h-f);for(let y=0;y<a.length;y+=3){let k=a[y+1];if(k<0||f>k+u-d)continue;let b=a[y]+u-d;h>=b?a[y+1]=f<=b?-2:-1:p>=i&&g&&(a[y]+=g,a[y+1]+=g)}d+=g}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=t.map(n[c+1]+s,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),g=r.maybeChild(p);if(g&&m==d&&m+g.nodeSize==h){let y=a[c+2].mapInner(t,g,u+1,n[c]+s+1,o);y!=wr?(a[c]=d,a[c+1]=h,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=dnt(a,n,e,t,i,s,o),u=zE(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new rc(e.sort(_h),a)}function Rhe(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new P0(i.from+e,i.to+e,i.type))}return t}function dnt(n,e,t,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?t.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function Ohe(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function Phe(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function zE(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let c=Ohe(n,a,l+t);if(c){s=!0;let u=zE(c,a,t+l+1,r);u!=wr&&i.push(l,l+a.nodeSize,u)}});let o=Rhe(s?Phe(n):n,-t).sort(_h);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new rc(o,i):wr}function _h(n,e){return n.from-e.from||n.to-e.to}function kB(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),YG(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),YG(e,i,r.copy(s.from,r.to)));break}}}return e}function YG(n,e,t){for(;e<n.length&&_h(t,n[e])>0;)e++;n.splice(e,0,t)}function IR(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=wr&&e.push(r)}),n.cursorWrapper&&e.push(rc.create(n.state.doc,[n.cursorWrapper.deco])),Ihe.from(e)}const fnt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},hnt=ps&&gd<=11;class pnt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class mnt{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pnt,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ps&&gd<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),hnt&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fnt)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(VG(this.view)){if(this.suppressingSelectionUpdates)return Bc(this.view);if(ps&&gd<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Zh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=mk(s))t.add(s);for(let s=e.anchorNode;s;s=mk(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&VG(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let d=this.registerMutation(t[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Xa&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],f=u[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&cA(r)&&(c=mB(e))&&c.eq(V.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Bc(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),gnt(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Bc(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ps&&gd<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Li(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Li(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let XG=new WeakMap,ZG=!1;function gnt(n){if(!XG.has(n)&&(XG.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Xa,ZG)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ZG=!0}}function ynt(n){let e;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Zh(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}function vnt(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],cA(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Cr&&n.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],k=y.pmViewDesc;if(y.nodeName=="BR"&&!k){s=g;break}if(!k||k.size)break}let d=n.state.doc,f=n.someProp("domParser")||fB.fromSchema(n.state.schema),h=d.resolve(o),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:bnt,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function bnt(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(ji&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||ji&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const knt=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function xnt(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let C=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,M=mB(n,C);if(M&&!n.state.selection.eq(M)){if(Cr&&da&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",I=>I(n,Df(13,"Enter"))))return;let P=n.state.tr.setSelection(M);C=="pointer"?P.setMeta("pointer",!0):C=="key"&&P.scrollIntoView(),s&&P.setMeta("composition",s),n.dispatch(P)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=vnt(n,e,t),u=n.state.doc,d=u.slice(c.from,c.to),f,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,h="end"):(f=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=$nt(d.content,c.doc.content,c.from,f,h);if((s0&&n.input.lastIOSEnter>Date.now()-225||da)&&i.some(C=>C.nodeType==1&&!knt.test(C.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",C=>C(n,Df(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof D&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let C=eJ(n,n.state.doc,c.sel);if(C&&!C.eq(n.state.selection)){let M=n.state.tr.setSelection(C);s&&M.setMeta("composition",s),n.dispatch(M)}}return}if(Cr&&n.cursorWrapper&&c.sel&&c.sel.anchor==n.cursorWrapper.deco.from&&c.sel.head==c.sel.anchor){let C=p.endB-p.start;c.sel={anchor:c.sel.anchor+C,head:c.sel.anchor+C}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof D&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),ps&&gd<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),k=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,b;if((s0&&n.input.lastIOSEnter>Date.now()-225&&(!k||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!k&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(b=V.findFrom(c.doc.resolve(m.pos+1),1,!0))&&b.head==g.pos)&&n.someProp("handleKeyDown",C=>C(n,Df(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&wnt(u,p.start,p.endA,m,g)&&n.someProp("handleKeyDown",C=>C(n,Df(8,"Backspace")))){da&&Cr&&n.domObserver.suppressSelectionUpdates();return}Cr&&da&&p.endB==p.start&&(n.input.lastAndroidDelete=Date.now()),da&&!k&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(C){return C(n,Df(13,"Enter"))})},20));let S=p.start,w=p.endA,x,$,E;if(k){if(m.pos==g.pos)ps&&gd<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Bc(n),20)),x=n.state.tr.delete(S,w),$=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(E=Snt(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))x=n.state.tr,E.type=="add"?x.addMark(S,w,E.mark):x.removeMark(S,w,E.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let C=m.parent.textBetween(m.parentOffset,g.parentOffset);if(n.someProp("handleTextInput",M=>M(n,S,w,C)))return;x=n.state.tr.insertText(C,S,w)}}if(x||(x=n.state.tr.replace(S,w,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let C=eJ(n,x.doc,c.sel);C&&!(Cr&&da&&n.composing&&C.empty&&(p.start!=p.endB||n.input.lastAndroidDelete<Date.now()-100)&&(C.head==S||C.head==x.mapping.map(w)-1)||ps&&C.empty&&C.head==S)&&x.setSelection(C)}$&&x.ensureMarks($),s&&x.setMeta("composition",s),n.dispatch(x.scrollIntoView())}function eJ(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:gB(n,e.resolve(t.anchor),e.resolve(t.head))}function Snt(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(ct.from(c).eq(n))return{mark:a,type:o}}function wnt(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||RR(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(RR(s,!0,!0));return!o.parent.isTextblock||o.pos>t||RR(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function RR(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function $nt(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&n.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}class Ent{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ktt,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(sJ),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=rJ(this),nJ(this),this.nodeViews=iJ(this),this.docView=NG(this.state.doc,tJ(this),IR(this),this.dom,this),this.domObserver=new mnt(this,(r,i,s,o)=>xnt(this,r,i,s,o)),this.domObserver.start(),Utt(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&bF(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(sJ),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let r=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(Mhe(this),s=!0),this.state=e;let o=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let f=iJ(this);Mnt(f,this.nodeViews)&&(this.nodeViews=f,i=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&bF(this),this.editable=rJ(this),nJ(this);let a=IR(this),l=tJ(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,l,a);(u||!e.selection.eq(r.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&stt(this);if(s){this.domObserver.stop();let f=u&&(ps||Cr)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Cnt(r.selection,e.selection);if(u){let h=Cr?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=NG(e.doc,l,a,this.dom,this)),h&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Att(this))?Bc(this,f):(phe(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&ott(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof G){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&AG(this,t.getBoundingClientRect(),e)}else AG(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=t?t(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(ps){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&att(this.dom),Bc(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return ftt(this,e)}coordsAtPos(e,t=1){return ohe(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return ytt(this,t||this.state,e)}pasteHTML(e,t){return gk(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return gk(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(Htt(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],IR(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Gtt(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return ji&&this.root.nodeType===11&&Xet(this.dom.ownerDocument)==this.dom?ynt(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function tJ(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[P0.node(0,n.state.doc.content.size,e)]}function nJ(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:P0.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function rJ(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Cnt(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function iJ(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Mnt(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function sJ(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function fA(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let hA=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:fA({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};class Tnt{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Ee(n,e,t){return n.config[e]===void 0&&n.parent?Ee(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ee(n.parent,e,t):null}):n.config[e]}function pA(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Dhe(n){const e=[],{nodeExtensions:t,markExtensions:r}=pA(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Ee(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...s,...h}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Ee(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function ir(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function _nt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function xF(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>_nt(t,r),{})}function Nhe(n){return typeof n=="function"}function ht(n,e=void 0,...t){return Nhe(n)?e?n.bind(e)(...t):n(...t):n}function Ant(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Int(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function oJ(n,e){return n.style?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):Int(t.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function aJ(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Ant(t)?!1:t!=null))}function Rnt(n,e){var t;const r=Dhe(n),{nodeExtensions:i,markExtensions:s}=pA(n),o=(t=i.find(c=>Ee(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((y,k)=>{const b=Ee(k,"extendNodeSchema",d);return{...y,...b?b(c):{}}},{}),h=aJ({...f,content:ht(Ee(c,"content",d)),marks:ht(Ee(c,"marks",d)),group:ht(Ee(c,"group",d)),inline:ht(Ee(c,"inline",d)),atom:ht(Ee(c,"atom",d)),selectable:ht(Ee(c,"selectable",d)),draggable:ht(Ee(c,"draggable",d)),code:ht(Ee(c,"code",d)),defining:ht(Ee(c,"defining",d)),isolating:ht(Ee(c,"isolating",d)),attrs:Object.fromEntries(u.map(y=>{var k;return[y.name,{default:(k=y==null?void 0:y.attribute)===null||k===void 0?void 0:k.default}]}))}),p=ht(Ee(c,"parseHTML",d));p&&(h.parseDOM=p.map(y=>oJ(y,u)));const m=Ee(c,"renderHTML",d);m&&(h.toDOM=y=>m({node:y,HTMLAttributes:xF(y,u)}));const g=Ee(c,"renderText",d);return g&&(h.toText=g),[c.name,h]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((g,y)=>{const k=Ee(y,"extendMarkSchema",d);return{...g,...k?k(c):{}}},{}),h=aJ({...f,inclusive:ht(Ee(c,"inclusive",d)),excludes:ht(Ee(c,"excludes",d)),group:ht(Ee(c,"group",d)),spanning:ht(Ee(c,"spanning",d)),code:ht(Ee(c,"code",d)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=ht(Ee(c,"parseHTML",d));p&&(h.parseDOM=p.map(g=>oJ(g,u)));const m=Ee(c,"renderHTML",d);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:xF(g,u)})),[c.name,h]}));return new qet({topNode:o,nodes:a,marks:l})}function OR(n,e){return e.nodes[n]||e.marks[n]||null}function lJ(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const Ont=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";t+=u.slice(0,Math.max(0,r-s))}),t};function xB(n){return Object.prototype.toString.call(n)==="[object RegExp]"}const Pnt=(n,e)=>{if(xB(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function PR(n){var e;const{editor:t,from:r,to:i,text:s,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=Ont(c)+s;return o.forEach(f=>{if(u)return;const h=Pnt(d,f.find);if(!h)return;const p=l.state.tr,m=fA({state:l.state,transaction:p}),g={from:r-(h[0].length-s.length),to:i},{commands:y,chain:k,can:b}=new hA({editor:t,state:m});f.handler({state:m,range:g,match:h,commands:y,chain:k,can:b})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function Dnt(n){const{editor:e,rules:t}=n,r=new Q({state:{init(){return null},apply(i,s){const o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,a){return PR({editor:e,from:s,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&PR({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?PR({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function Nnt(n){return typeof n=="number"}const Fnt=(n,e,t)=>{if(xB(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Lnt(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:c,can:u}=new hA({editor:e,state:t}),d=[];return t.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+h.content.size),y=h.textBetween(m-p,g-p,void 0,"");Fnt(y,s.find,o).forEach(b=>{if(b.index===void 0)return;const S=m+b.index+1,w=S+b[0].length,x={from:t.tr.mapping.map(S),to:t.tr.mapping.map(w)},$=s.handler({state:t,range:x,match:b,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push($)})}),d.every(h=>h!==null)}function znt(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;return t.map(c=>new Q({view(u){const d=f=>{var h;r=!((h=u.dom.parentElement)===null||h===void 0)&&h.contains(f.target)?u.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(u,d)=>(s=r===u.dom.parentElement,a=d,!1),paste:(u,d)=>{var f;const h=(f=d.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=d,i=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(u,d,f)=>{const h=u[0],p=h.getMeta("uiEvent")==="paste"&&!i,m=h.getMeta("uiEvent")==="drop"&&!s;if(!p&&!m)return;const g=d.doc.content.findDiffStart(f.doc.content),y=d.doc.content.findDiffEnd(f.doc.content);if(!Nnt(g)||!y||g===y.b)return;const k=f.tr,b=fA({state:f,transaction:k});if(!(!Lnt({editor:e,state:b,from:Math.max(g-1,0),to:y.b-1,rule:c,pasteEvent:o,dropEvent:a})||!k.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}}))}function Bnt(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class yg{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=yg.resolve(e),this.schema=Rnt(this.extensions,t),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:OR(r.name,this.schema)};r.type==="mark"&&(!((i=ht(Ee(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=Ee(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=Ee(r,"onCreate",s);a&&this.editor.on("create",a);const l=Ee(r,"onUpdate",s);l&&this.editor.on("update",l);const c=Ee(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=Ee(r,"onTransaction",s);u&&this.editor.on("transaction",u);const d=Ee(r,"onFocus",s);d&&this.editor.on("focus",d);const f=Ee(r,"onBlur",s);f&&this.editor.on("blur",f);const h=Ee(r,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(e){const t=yg.sort(yg.flatten(e)),r=Bnt(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=Ee(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=Ee(r,"priority")||100,o=Ee(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:OR(t.name,this.schema)},i=Ee(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=yg.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:OR(o.name,this.schema)},l=[],c=Ee(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>git.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));u={...u,...m}}const d=xYe(u);l.push(d);const f=Ee(o,"addInputRules",a);lJ(o,e.options.enableInputRules)&&f&&r.push(...f());const h=Ee(o,"addPasteRules",a);lJ(o,e.options.enablePasteRules)&&h&&i.push(...h());const p=Ee(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[Dnt({editor:e,rules:r}),...znt({editor:e,rules:i}),...s]}get attributes(){return Dhe(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=pA(this.extensions);return Object.fromEntries(t.filter(r=>!!Ee(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:ir(r.name,this.schema)},o=Ee(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d)=>{const f=xF(l,i);return o()({editor:e,node:l,getPos:u,decorations:d,HTMLAttributes:f,extension:r})};return[r.name,a]}))}}function jnt(n){return Object.prototype.toString.call(n).slice(8,-1)}function DR(n){return jnt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function SB(n,e){const t={...n};return DR(n)&&DR(e)&&Object.keys(e).forEach(r=>{DR(e[r])?r in n?t[r]=SB(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let D0=class SF{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ht(Ee(this,"addOptions",{name:this.name}))),this.storage=ht(Ee(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new SF(e)}configure(e={}){const t=this.extend();return t.options=SB(this.options,e),t.storage=ht(Ee(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new SF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ht(Ee(t,"addOptions",{name:t.name})),t.storage=ht(Ee(t,"addStorage",{name:t.name,options:t.options})),t}};function Fhe(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function Lhe(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Vnt=D0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=Lhe(t);return Fhe(r,{from:o,to:a},{textSerializers:l})}}})]}}),qnt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Knt=(n=!1)=>({commands:e})=>e.setContent("",n),Unt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Hnt=n=>e=>n(e),Wnt=()=>({state:n,dispatch:e})=>nn(n,e),Gnt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},Jnt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},Qnt=n=>({tr:e,state:t,dispatch:r})=>{const i=ir(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Ynt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},Xnt=()=>({state:n,dispatch:e})=>Ht(n,e),Znt=()=>({commands:n})=>n.keyboardShortcut("Enter"),ert=()=>({state:n,dispatch:e})=>tn(n,e);function BE(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:xB(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function wF(n,e,t={}){return n.find(r=>r.type===e&&BE(r.attrs,t))}function trt(n,e,t={}){return!!wF(n,e,t)}function zhe(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=wF([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(wF([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&trt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Wd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const nrt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Wd(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=zhe(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},rrt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Bhe(n){return n instanceof D}function Yf(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function jhe(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,Yf(0,i,s),Yf(n.content.size,i,s)):D.create(n,Yf(e,i,s),Yf(e,i,s))}function wB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const irt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{wB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Bhe(t.state.selection))return o(),!0;const a=jhe(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},srt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),ort=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Vhe=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Vhe(r)}return n};function cJ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Vhe(t)}function jE(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?ct.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),jE("",e,t)}if(typeof n=="string"){const r=fB.fromSchema(e);return t.slice?r.parseSlice(cJ(n),t.parseOptions).content:r.parse(cJ(n),t.parseOptions)}return jE("",e,t)}function art(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const lrt=n=>n.toString().startsWith("<"),crt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=jE(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((lrt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&art(r,r.steps.length-1,-1)}return!0},urt=()=>({state:n,dispatch:e})=>Yt(n,e),drt=()=>({state:n,dispatch:e})=>Xt(n,e),frt=()=>({state:n,dispatch:e})=>Wt(n,e),hrt=()=>({state:n,dispatch:e})=>Jt(n,e),prt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},mrt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},grt=()=>({state:n,dispatch:e})=>Cn(n,e),yrt=()=>({state:n,dispatch:e})=>Mn(n,e);function qhe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function vrt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))wB()||qhe()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const brt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=vrt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function vk(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?ir(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>BE(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const krt=(n,e={})=>({state:t,dispatch:r})=>{const i=ir(n,t.schema);return vk(t,i,e)?Zt(t,r):!1},xrt=()=>({state:n,dispatch:e})=>rn(n,e),Srt=n=>({state:e,dispatch:t})=>{const r=ir(n,e.schema);return un(r)(e,t)},wrt=()=>({state:n,dispatch:e})=>en(n,e);function mA(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function uJ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const $rt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=mA(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=ir(n,r.schema)),a==="mark"&&(o=Wd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,uJ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(uJ(d.attrs,e)))})})}),!0):!1},Ert=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Crt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Mrt=()=>({state:n,dispatch:e})=>Gt(n,e),Trt=()=>({state:n,dispatch:e})=>Qt(n,e),_rt=()=>({state:n,dispatch:e})=>sn(n,e),Art=()=>({state:n,dispatch:e})=>an(n,e),Irt=()=>({state:n,dispatch:e})=>on(n,e);function Khe(n,e,t={}){return jE(n,e,{slice:!1,parseOptions:t})}const Rrt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Khe(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Uhe(n,e){const t=Wd(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Ort(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Prt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function $B(n){return e=>Prt(e.$from,n)}function Drt(n,e){const t=d1.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function Nrt(n,e){const t={from:0,to:n.content.size};return Fhe(n,t,e)}function Frt(n,e){const t=ir(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function Lrt(n,e){const t=mA(typeof e=="string"?e:e.name,n.schema);return t==="node"?Frt(n,e):t==="mark"?Uhe(n,e):{}}function Uw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function $F(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Wd(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>BE(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>BE(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function zrt(n,e,t={}){if(!e)return vk(n,null,t)||$F(n,null,t);const r=mA(e,n.schema);return r==="node"?vk(n,e,t):r==="mark"?$F(n,e,t):!1}function dJ(n,e){const{nodeExtensions:t}=pA(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ht(Ee(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Brt(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}function jrt(n,e,t){var r;const{selection:i}=e;let s=null;if(Bhe(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Vrt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Wd(n,r.schema);if(i)if(o){const c=Uhe(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return jrt(r,t,l)},qrt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Krt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=ir(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Urt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Yf(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},Hrt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=Yf(i,o,a),c=Yf(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},Wrt=n=>({state:e,dispatch:t})=>{const r=ir(n,e.schema);return dn(r)(e,t)};function fJ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Grt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Uw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&fJ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Ort(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&fJ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Jrt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=ir(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=ct.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=ct.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Uw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(ct.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new hs(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Uw(d,u.type.name,u.attrs),p=Uw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},NR=(n,e)=>{const t=$B(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},FR=(n,e)=>{const t=$B(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},Qrt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=ir(n,o.schema),p=ir(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=$B(x=>dJ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(dJ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>NR(s,h)).command(()=>FR(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>NR(s,h)).command(()=>FR(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>NR(s,h)).command(()=>FR(s,h)).run()},Yrt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Wd(n,r.schema);return $F(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Xrt=(n,e,t={})=>({state:r,commands:i})=>{const s=ir(n,r.schema),o=ir(e,r.schema);return vk(r,s,t)?i.setNode(o):i.setNode(s,t)},Zrt=(n,e={})=>({state:t,commands:r})=>{const i=ir(n,t.schema);return vk(t,i,e)?r.lift(i):r.wrapIn(i,e)},eit=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},tit=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},nit=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Wd(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=zhe(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},rit=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=mA(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=ir(n,r.schema)),a==="mark"&&(o=Wd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},iit=(n,e={})=>({state:t,dispatch:r})=>{const i=ir(n,t.schema);return ln(i,e)(t,r)},sit=(n,e={})=>({state:t,dispatch:r})=>{const i=ir(n,t.schema);return cn(i,e)(t,r)};var oit=Object.freeze({__proto__:null,blur:qnt,clearContent:Knt,clearNodes:Unt,command:Hnt,createParagraphNear:Wnt,cut:Gnt,deleteCurrentNode:Jnt,deleteNode:Qnt,deleteRange:Ynt,deleteSelection:Xnt,enter:Znt,exitCode:ert,extendMarkRange:nrt,first:rrt,focus:irt,forEach:srt,insertContent:ort,insertContentAt:crt,joinUp:urt,joinDown:drt,joinBackward:frt,joinForward:hrt,joinItemBackward:prt,joinItemForward:mrt,joinTextblockBackward:grt,joinTextblockForward:yrt,keyboardShortcut:brt,lift:krt,liftEmptyBlock:xrt,liftListItem:Srt,newlineInCode:wrt,resetAttributes:$rt,scrollIntoView:Ert,selectAll:Crt,selectNodeBackward:Mrt,selectNodeForward:Trt,selectParentNode:_rt,selectTextblockEnd:Art,selectTextblockStart:Irt,setContent:Rrt,setMark:Vrt,setMeta:qrt,setNode:Krt,setNodeSelection:Urt,setTextSelection:Hrt,sinkListItem:Wrt,splitBlock:Grt,splitListItem:Jrt,toggleList:Qrt,toggleMark:Yrt,toggleNode:Xrt,toggleWrap:Zrt,undoInputRule:eit,unsetAllMarks:tit,unsetMark:nit,updateAttributes:rit,wrapIn:iit,wrapInList:sit});const ait=D0.create({name:"commands",addCommands(){return{...oit}}}),lit=D0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}}),cit=D0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),uit=D0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return wB()||qhe()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=fA({state:t,transaction:d}),{commands:h}=new hA({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),dit=D0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var fit=Object.freeze({__proto__:null,ClipboardTextSerializer:Vnt,Commands:ait,Editable:lit,FocusEvents:cit,Keymap:uit,Tabindex:dit});class Nf{constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Nf(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Nf(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Nf(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=this.pos+r+(i?0:1),o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new Nf(o,this.editor,i,i?t:null);i&&(a.actualDepth=this.depth+1),e.push(new Nf(o,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==t[l])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];return this.isBlock||!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(t).length>0){const o=s.node.attrs,a=Object.keys(t);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==t[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const t=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(t.from).run()}}const hit=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function pit(n,e,t){const r=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}let mit=class extends Tnt{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=pit(hit,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Nhe(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(fit):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new yg(t,this)}createCommandManager(){this.commandManager=new hA({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Khe(this.options.content,this.schema,this.options.parseOptions),t=jhe(e,this.options.autofocus);this.view=new Ent(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:gg.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Lrt(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return zrt(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Drt(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return Nrt(this.state.doc,{blockSeparator:t,textSerializers:{...Lhe(this.schema),...r}})}get isEmpty(){return Brt(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Nf(t,this)}get $doc(){return this.$pos(0)}},git=class EF{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ht(Ee(this,"addOptions",{name:this.name}))),this.storage=ht(Ee(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new EF(e)}configure(e={}){const t=this.extend();return t.options=SB(this.options,e),t.storage=ht(Ee(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new EF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ht(Ee(t,"addOptions",{name:t.name})),t.storage=ht(Ee(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}};const yit=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},vit=({renderers:n})=>ee.createElement(ee.Fragment,null,Object.entries(n).map(([e,t])=>Vk.createPortal(t.reactElement,t.element,e)));class bit extends ee.Component{constructor(e){super(e),this.editorContentRef=ee.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?Za.flushSync(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:t}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:t})=>{const r={...t};return delete r[e],{renderers:r}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return ee.createElement(ee.Fragment,null,ee.createElement("div",{ref:yit(t,this.editorContentRef),...r}),ee.createElement(vit,{renderers:this.state.renderers}))}}const kit=v.forwardRef((n,e)=>{const t=ee.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return ee.createElement(bit,{key:t,innerRef:e,...n})}),p1=ee.memo(kit);class Hhe extends mit{constructor(){super(...arguments),this.contentComponent=null}}const m1=(n={},e=[])=>{const t=v.useRef(null),[,r]=v.useState({}),{onBeforeCreate:i,onBlur:s,onCreate:o,onDestroy:a,onFocus:l,onSelectionUpdate:c,onTransaction:u,onUpdate:d}=n,f=v.useRef(i),h=v.useRef(s),p=v.useRef(o),m=v.useRef(a),g=v.useRef(l),y=v.useRef(c),k=v.useRef(u),b=v.useRef(d);return v.useEffect(()=>{t.current&&(i&&(t.current.off("beforeCreate",f.current),t.current.on("beforeCreate",i),f.current=i),s&&(t.current.off("blur",h.current),t.current.on("blur",s),h.current=s),o&&(t.current.off("create",p.current),t.current.on("create",o),p.current=o),a&&(t.current.off("destroy",m.current),t.current.on("destroy",a),m.current=a),l&&(t.current.off("focus",g.current),t.current.on("focus",l),g.current=l),c&&(t.current.off("selectionUpdate",y.current),t.current.on("selectionUpdate",c),y.current=c),u&&(t.current.off("transaction",k.current),t.current.on("transaction",u),k.current=u),d&&(t.current.off("update",b.current),t.current.on("update",d),b.current=d))},[i,s,o,a,l,c,u,d,t.current]),v.useEffect(()=>{let S=!0;return t.current=new Hhe(n),t.current.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{S&&r({})})})}),()=>{S=!1}},e),v.useEffect(()=>()=>{var S;return(S=t.current)===null||S===void 0?void 0:S.destroy()},[]),t.current},xit=v.createContext({editor:null});xit.Consumer;const Sit=v.createContext({onDragStart:void 0}),wit=()=>v.useContext(Sit);ee.forwardRef((n,e)=>{const{onDragStart:t}=wit(),r=n.as||"div";return ee.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});function Whe(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Whe(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Ghe(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Ghe(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ma=class ui{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ui(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ui(r,i)}cutByIndex(e,t){return e==t?ui.empty:e==0&&t==this.content.length?this:new ui(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ui(i,s)}addToStart(e){return new ui([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ui(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Whe(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Ghe(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Yx(0,e);if(e==this.size)return Yx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Yx(r+1,o):Yx(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ui.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ui(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ui.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ui(t||e,r)}static from(e){if(!e)return ui.empty;if(e instanceof ui)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ui([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ma.empty=new Ma([],0);const LR={index:0,offset:0};function Yx(n,e){return LR.index=n,LR.offset=e,LR}function CF(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!CF(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!CF(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let gl=class MF{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&CF(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return MF.none;if(e instanceof MF)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};gl.none=[];let VE=class xm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Qhe(this.content,e+this.openStart,t);return r&&new xm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new xm(Jhe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return xm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new xm(Ma.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new xm(e,r,i)}};VE.empty=new VE(Ma.empty,0,0);function Jhe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Jhe(s.content,e-i-1,t-i-1)))}function Qhe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Qhe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let $it=class TF{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new pJ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new pJ(this,t,!0);return r.addAll(e,t.from,t.to),VE.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Mit(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=mJ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=mJ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new TF(e,TF.schemaRules(e)))}};const Yhe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Eit={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Xhe={ol:!0,ul:!0},qE=1,KE=2,Gv=4;function hJ(n,e,t){return e!=null?(e?qE:0)|(e==="full"?KE:0):n&&n.whitespace=="pre"?qE|KE:t&~Gv}let Xx=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=gl.none,this.stashMarks=[],this.match=o||(a&Gv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ma.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&qE)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ma.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ma.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):_it(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Yhe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},pJ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=hJ(null,t.preserveWhitespace,0)|(r?Gv:0);i?s=new Xx(i.type,i.attrs,gl.none,gl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new Xx(null,null,gl.none,gl.none,!0,null,o):s=new Xx(e.schema.topNodeType,null,gl.none,gl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(Tit(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&KE||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&qE)r.options&KE?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Xhe.hasOwnProperty(r)&&this.parser.normalizeLists&&Cit(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Eit.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Yhe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=gl.none,r=gl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=hJ(e,i,s.options);s.options&Gv&&s.content.length==0&&(o|=Gv),this.nodes.push(new Xx(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Ait(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function Cit(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Xhe.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Mit(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Tit(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function mJ(n){let e={};for(let t in n)e[t]=n[t];return e}function _it(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function Ait(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Zhe(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let Iit=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Zhe({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function _s(n,e,t){return n.config[e]===void 0&&n.parent?_s(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?_s(n.parent,e,t):null}):n.config[e]}function Rit(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Nr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Oit(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Pit(n){return typeof n=="function"}function Co(n,e=void 0,...t){return Pit(n)?e?n.bind(e)(...t):n(...t):n}function Dit(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let Nit=class{constructor(e){this.find=e.find,this.handler=e.handler}};function Fit(n){return Object.prototype.toString.call(n).slice(8,-1)}function zR(n){return Fit(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function EB(n,e){const t={...n};return zR(n)&&zR(e)&&Object.keys(e).forEach(r=>{zR(e[r])?r in n?t[r]=EB(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let N0=class _F{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Co(_s(this,"addOptions",{name:this.name}))),this.storage=Co(_s(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new _F(e)}configure(e={}){const t=this.extend();return t.options=EB(this.options,e),t.storage=Co(_s(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new _F({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Co(_s(t,"addOptions",{name:t.name})),t.storage=Co(_s(t,"addStorage",{name:t.name,options:t.options})),t}};function Lit(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function zit(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}N0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=zit(t);return Lit(r,{from:o,to:a},{textSerializers:l})}}})]}});const Bit=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),jit=(n=!1)=>({commands:e})=>e.setContent("",n),Vit=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},qit=n=>e=>n(e),Kit=()=>({state:n,dispatch:e})=>nn(n,e),Uit=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},Hit=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},Wit=n=>({tr:e,state:t,dispatch:r})=>{const i=Nr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Git=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},Jit=()=>({state:n,dispatch:e})=>Ht(n,e),Qit=()=>({commands:n})=>n.keyboardShortcut("Enter"),Yit=()=>({state:n,dispatch:e})=>tn(n,e);function UE(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Dit(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function AF(n,e,t={}){return n.find(r=>r.type===e&&UE(r.attrs,t))}function Xit(n,e,t={}){return!!AF(n,e,t)}function epe(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=AF([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(AF([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&Xit([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Gd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Zit=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Gd(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=epe(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},est=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function tpe(n){return n instanceof D}function Xf(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function tst(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,Xf(0,i,s),Xf(n.content.size,i,s)):D.create(n,Xf(e,i,s),Xf(e,i,s))}function CB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const nst=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{CB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!tpe(t.state.selection))return o(),!0;const a=tst(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},rst=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),ist=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),npe=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&npe(r)}return n};function gJ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return npe(t)}function HE(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ma.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),HE("",e,t)}if(typeof n=="string"){const r=$it.fromSchema(e);return t.slice?r.parseSlice(gJ(n),t.parseOptions).content:r.parse(gJ(n),t.parseOptions)}return HE("",e,t)}function sst(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const ost=n=>n.toString().startsWith("<"),ast=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=HE(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((ost(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&sst(r,r.steps.length-1,-1)}return!0},lst=()=>({state:n,dispatch:e})=>Yt(n,e),cst=()=>({state:n,dispatch:e})=>Xt(n,e),ust=()=>({state:n,dispatch:e})=>Wt(n,e),dst=()=>({state:n,dispatch:e})=>Jt(n,e),fst=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},hst=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},pst=()=>({state:n,dispatch:e})=>Cn(n,e),mst=()=>({state:n,dispatch:e})=>Mn(n,e);function rpe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function gst(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))CB()||rpe()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const yst=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=gst(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function MB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Nr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>UE(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const vst=(n,e={})=>({state:t,dispatch:r})=>{const i=Nr(n,t.schema);return MB(t,i,e)?Zt(t,r):!1},bst=()=>({state:n,dispatch:e})=>rn(n,e),kst=n=>({state:e,dispatch:t})=>{const r=Nr(n,e.schema);return un(r)(e,t)},xst=()=>({state:n,dispatch:e})=>en(n,e);function ipe(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function yJ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Sst=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=ipe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Nr(n,r.schema)),a==="mark"&&(o=Gd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,yJ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(yJ(d.attrs,e)))})})}),!0):!1},wst=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),$st=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Est=()=>({state:n,dispatch:e})=>Gt(n,e),Cst=()=>({state:n,dispatch:e})=>Qt(n,e),Mst=()=>({state:n,dispatch:e})=>sn(n,e),Tst=()=>({state:n,dispatch:e})=>an(n,e),_st=()=>({state:n,dispatch:e})=>on(n,e);function Ast(n,e,t={}){return HE(n,e,{slice:!1,parseOptions:t})}const Ist=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Ast(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Rst(n,e){const t=Gd(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Ost(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Pst(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function TB(n){return e=>Pst(e.$from,n)}function Hw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Dst(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Gd(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>UE(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>UE(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function vJ(n,e){const{nodeExtensions:t}=Rit(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Co(_s(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Nst(n,e,t){var r;const{selection:i}=e;let s=null;if(tpe(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Fst=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Gd(n,r.schema);if(i)if(o){const c=Rst(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return Nst(r,t,l)},Lst=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),zst=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Nr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Bst=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Xf(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},jst=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=Xf(i,o,a),c=Xf(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},Vst=n=>({state:e,dispatch:t})=>{const r=Nr(n,e.schema);return dn(r)(e,t)};function bJ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const qst=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Hw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&bJ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Ost(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&bJ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Kst=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Nr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ma.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ma.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Hw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ma.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new VE(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Hw(d,u.type.name,u.attrs),p=Hw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},BR=(n,e)=>{const t=TB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},jR=(n,e)=>{const t=TB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},Ust=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Nr(n,o.schema),p=Nr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=TB(x=>vJ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(vJ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>BR(s,h)).command(()=>jR(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>BR(s,h)).command(()=>jR(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>BR(s,h)).command(()=>jR(s,h)).run()},Hst=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Gd(n,r.schema);return Dst(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Wst=(n,e,t={})=>({state:r,commands:i})=>{const s=Nr(n,r.schema),o=Nr(e,r.schema);return MB(r,s,t)?i.setNode(o):i.setNode(s,t)},Gst=(n,e={})=>({state:t,commands:r})=>{const i=Nr(n,t.schema);return MB(t,i,e)?r.lift(i):r.wrapIn(i,e)},Jst=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Qst=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Yst=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Gd(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=epe(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},Xst=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=ipe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Nr(n,r.schema)),a==="mark"&&(o=Gd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Zst=(n,e={})=>({state:t,dispatch:r})=>{const i=Nr(n,t.schema);return ln(i,e)(t,r)},eot=(n,e={})=>({state:t,dispatch:r})=>{const i=Nr(n,t.schema);return cn(i,e)(t,r)};var tot=Object.freeze({__proto__:null,blur:Bit,clearContent:jit,clearNodes:Vit,command:qit,createParagraphNear:Kit,cut:Uit,deleteCurrentNode:Hit,deleteNode:Wit,deleteRange:Git,deleteSelection:Jit,enter:Qit,exitCode:Yit,extendMarkRange:Zit,first:est,focus:nst,forEach:rst,insertContent:ist,insertContentAt:ast,joinUp:lst,joinDown:cst,joinBackward:ust,joinForward:dst,joinItemBackward:fst,joinItemForward:hst,joinTextblockBackward:pst,joinTextblockForward:mst,keyboardShortcut:yst,lift:vst,liftEmptyBlock:bst,liftListItem:kst,newlineInCode:xst,resetAttributes:Sst,scrollIntoView:wst,selectAll:$st,selectNodeBackward:Est,selectNodeForward:Cst,selectParentNode:Mst,selectTextblockEnd:Tst,selectTextblockStart:_st,setContent:Ist,setMark:Fst,setMeta:Lst,setNode:zst,setNodeSelection:Bst,setTextSelection:jst,sinkListItem:Vst,splitBlock:qst,splitListItem:Kst,toggleList:Ust,toggleMark:Hst,toggleNode:Wst,toggleWrap:Gst,undoInputRule:Jst,unsetAllMarks:Qst,unsetMark:Yst,updateAttributes:Xst,wrapIn:Zst,wrapInList:eot});N0.create({name:"commands",addCommands(){return{...tot}}});N0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});N0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});N0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return CB()||rpe()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Zhe({state:t,transaction:d}),{commands:h}=new Iit({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});N0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function not(n){return new Nit({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=Co(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&u1(l,n.type,s);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=n.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Me(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&o.join(t.from-1)}})}let rot=class IF{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Co(_s(this,"addOptions",{name:this.name}))),this.storage=Co(_s(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new IF(e)}configure(e={}){const t=this.extend();return t.options=EB(this.options,e),t.storage=Co(_s(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new IF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Co(_s(t,"addOptions",{name:t.name})),t.storage=Co(_s(t,"addStorage",{name:t.name,options:t.options})),t}};const iot=/^\s*>\s$/,spe=rot.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Oit(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[not({find:iot,type:this.type})]}});function ope(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=ope(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function ape(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=ape(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ta=class di{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new di(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new di(r,i)}cutByIndex(e,t){return e==t?di.empty:e==0&&t==this.content.length?this:new di(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new di(i,s)}addToStart(e){return new di([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new di(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return ope(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return ape(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Zx(0,e);if(e==this.size)return Zx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Zx(r+1,o):Zx(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return di.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new di(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return di.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new di(t||e,r)}static from(e){if(!e)return di.empty;if(e instanceof di)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new di([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ta.empty=new Ta([],0);const VR={index:0,offset:0};function Zx(n,e){return VR.index=n,VR.offset=e,VR}function RF(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!RF(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!RF(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let yl=class OF{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&RF(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return OF.none;if(e instanceof OF)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};yl.none=[];let WE=class Sm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=cpe(this.content,e+this.openStart,t);return r&&new Sm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Sm(lpe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Sm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Sm(Ta.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Sm(e,r,i)}};WE.empty=new WE(Ta.empty,0,0);function lpe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(lpe(s.content,e-i-1,t-i-1)))}function cpe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=cpe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let sot=class PF{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new xJ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new xJ(this,t,!0);return r.addAll(e,t.from,t.to),WE.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(lot(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=SJ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=SJ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new PF(e,PF.schemaRules(e)))}};const upe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},oot={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},dpe={ol:!0,ul:!0},GE=1,JE=2,Jv=4;function kJ(n,e,t){return e!=null?(e?GE:0)|(e==="full"?JE:0):n&&n.whitespace=="pre"?GE|JE:t&~Jv}let eS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=yl.none,this.stashMarks=[],this.match=o||(a&Jv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ta.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&GE)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ta.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ta.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):uot(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!upe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},xJ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=kJ(null,t.preserveWhitespace,0)|(r?Jv:0);i?s=new eS(i.type,i.attrs,yl.none,yl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new eS(null,null,yl.none,yl.none,!0,null,o):s=new eS(e.schema.topNodeType,null,yl.none,yl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(cot(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&JE||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&GE)r.options&JE?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;dpe.hasOwnProperty(r)&&this.parser.normalizeLists&&aot(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:oot.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(upe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=yl.none,r=yl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=kJ(e,i,s.options);s.options&Jv&&s.content.length==0&&(o|=Jv),this.nodes.push(new eS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=dot(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function aot(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&dpe.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function lot(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function cot(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function SJ(n){let e={};for(let t in n)e[t]=n[t];return e}function uot(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function dot(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function fpe(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let fot=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:fpe({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Yn(n,e,t){return n.config[e]===void 0&&n.parent?Yn(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Yn(n.parent,e,t):null}):n.config[e]}function hot(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Fr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function _B(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function pot(n){return typeof n=="function"}function fr(n,e=void 0,...t){return pot(n)?e?n.bind(e)(...t):n(...t):n}function mot(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let got=class{constructor(e){this.find=e.find,this.handler=e.handler}};function yot(n){return Object.prototype.toString.call(n).slice(8,-1)}function qR(n){return yot(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function gA(n,e){const t={...n};return qR(n)&&qR(e)&&Object.keys(e).forEach(r=>{qR(e[r])?r in n?t[r]=gA(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let F0=class DF{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=fr(Yn(this,"addOptions",{name:this.name}))),this.storage=fr(Yn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new DF(e)}configure(e={}){const t=this.extend();return t.options=gA(this.options,e),t.storage=fr(Yn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new DF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=fr(Yn(t,"addOptions",{name:t.name})),t.storage=fr(Yn(t,"addStorage",{name:t.name,options:t.options})),t}};function vot(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function bot(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}F0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=bot(t);return vot(r,{from:o,to:a},{textSerializers:l})}}})]}});const kot=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),xot=(n=!1)=>({commands:e})=>e.setContent("",n),Sot=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},wot=n=>e=>n(e),$ot=()=>({state:n,dispatch:e})=>nn(n,e),Eot=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},Cot=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},Mot=n=>({tr:e,state:t,dispatch:r})=>{const i=Fr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Tot=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},_ot=()=>({state:n,dispatch:e})=>Ht(n,e),Aot=()=>({commands:n})=>n.keyboardShortcut("Enter"),Iot=()=>({state:n,dispatch:e})=>tn(n,e);function QE(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:mot(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function NF(n,e,t={}){return n.find(r=>r.type===e&&QE(r.attrs,t))}function Rot(n,e,t={}){return!!NF(n,e,t)}function hpe(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=NF([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(NF([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&Rot([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Jd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Oot=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Jd(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=hpe(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},Pot=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function ppe(n){return n instanceof D}function Zf(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Dot(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,Zf(0,i,s),Zf(n.content.size,i,s)):D.create(n,Zf(e,i,s),Zf(e,i,s))}function AB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Not=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{AB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!ppe(t.state.selection))return o(),!0;const a=Dot(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Fot=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Lot=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),mpe=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&mpe(r)}return n};function wJ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return mpe(t)}function YE(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ta.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),YE("",e,t)}if(typeof n=="string"){const r=sot.fromSchema(e);return t.slice?r.parseSlice(wJ(n),t.parseOptions).content:r.parse(wJ(n),t.parseOptions)}return YE("",e,t)}function zot(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const Bot=n=>n.toString().startsWith("<"),jot=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=YE(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((Bot(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&zot(r,r.steps.length-1,-1)}return!0},Vot=()=>({state:n,dispatch:e})=>Yt(n,e),qot=()=>({state:n,dispatch:e})=>Xt(n,e),Kot=()=>({state:n,dispatch:e})=>Wt(n,e),Uot=()=>({state:n,dispatch:e})=>Jt(n,e),Hot=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Wot=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Got=()=>({state:n,dispatch:e})=>Cn(n,e),Jot=()=>({state:n,dispatch:e})=>Mn(n,e);function gpe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Qot(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))AB()||gpe()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const Yot=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Qot(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function IB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Fr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>QE(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Xot=(n,e={})=>({state:t,dispatch:r})=>{const i=Fr(n,t.schema);return IB(t,i,e)?Zt(t,r):!1},Zot=()=>({state:n,dispatch:e})=>rn(n,e),eat=n=>({state:e,dispatch:t})=>{const r=Fr(n,e.schema);return un(r)(e,t)},tat=()=>({state:n,dispatch:e})=>en(n,e);function ype(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function $J(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const nat=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=ype(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Fr(n,r.schema)),a==="mark"&&(o=Jd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,$J(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create($J(d.attrs,e)))})})}),!0):!1},rat=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),iat=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),sat=()=>({state:n,dispatch:e})=>Gt(n,e),oat=()=>({state:n,dispatch:e})=>Qt(n,e),aat=()=>({state:n,dispatch:e})=>sn(n,e),lat=()=>({state:n,dispatch:e})=>an(n,e),cat=()=>({state:n,dispatch:e})=>on(n,e);function uat(n,e,t={}){return YE(n,e,{slice:!1,parseOptions:t})}const dat=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=uat(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function vpe(n,e){const t=Jd(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function fat(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function hat(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function RB(n){return e=>hat(e.$from,n)}function Ww(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function pat(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Jd(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>QE(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>QE(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function EJ(n,e){const{nodeExtensions:t}=hot(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=fr(Yn(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function mat(n,e,t){var r;const{selection:i}=e;let s=null;if(ppe(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const gat=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Jd(n,r.schema);if(i)if(o){const c=vpe(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return mat(r,t,l)},yat=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),vat=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Fr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},bat=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Zf(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},kat=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=Zf(i,o,a),c=Zf(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},xat=n=>({state:e,dispatch:t})=>{const r=Fr(n,e.schema);return dn(r)(e,t)};function CJ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Sat=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Ww(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&CJ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:fat(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&CJ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},wat=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Fr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ta.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ta.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Ww(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ta.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new WE(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Ww(d,u.type.name,u.attrs),p=Ww(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},KR=(n,e)=>{const t=RB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},UR=(n,e)=>{const t=RB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},$at=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Fr(n,o.schema),p=Fr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=RB(x=>EJ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(EJ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>KR(s,h)).command(()=>UR(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>KR(s,h)).command(()=>UR(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>KR(s,h)).command(()=>UR(s,h)).run()},Eat=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Jd(n,r.schema);return pat(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Cat=(n,e,t={})=>({state:r,commands:i})=>{const s=Fr(n,r.schema),o=Fr(e,r.schema);return IB(r,s,t)?i.setNode(o):i.setNode(s,t)},Mat=(n,e={})=>({state:t,commands:r})=>{const i=Fr(n,t.schema);return IB(t,i,e)?r.lift(i):r.wrapIn(i,e)},Tat=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},_at=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Aat=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Jd(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=hpe(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},Iat=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=ype(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Fr(n,r.schema)),a==="mark"&&(o=Jd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Rat=(n,e={})=>({state:t,dispatch:r})=>{const i=Fr(n,t.schema);return ln(i,e)(t,r)},Oat=(n,e={})=>({state:t,dispatch:r})=>{const i=Fr(n,t.schema);return cn(i,e)(t,r)};var Pat=Object.freeze({__proto__:null,blur:kot,clearContent:xot,clearNodes:Sot,command:wot,createParagraphNear:$ot,cut:Eot,deleteCurrentNode:Cot,deleteNode:Mot,deleteRange:Tot,deleteSelection:_ot,enter:Aot,exitCode:Iot,extendMarkRange:Oot,first:Pot,focus:Not,forEach:Fot,insertContent:Lot,insertContentAt:jot,joinUp:Vot,joinDown:qot,joinBackward:Kot,joinForward:Uot,joinItemBackward:Hot,joinItemForward:Wot,joinTextblockBackward:Got,joinTextblockForward:Jot,keyboardShortcut:Yot,lift:Xot,liftEmptyBlock:Zot,liftListItem:eat,newlineInCode:tat,resetAttributes:nat,scrollIntoView:rat,selectAll:iat,selectNodeBackward:sat,selectNodeForward:oat,selectParentNode:aat,selectTextblockEnd:lat,selectTextblockStart:cat,setContent:dat,setMark:gat,setMeta:yat,setNode:vat,setNodeSelection:bat,setTextSelection:kat,sinkListItem:xat,splitBlock:Sat,splitListItem:wat,toggleList:$at,toggleMark:Eat,toggleNode:Cat,toggleWrap:Mat,undoInputRule:Tat,unsetAllMarks:_at,unsetMark:Aat,updateAttributes:Iat,wrapIn:Rat,wrapInList:Oat});F0.create({name:"commands",addCommands(){return{...Pat}}});F0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});F0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});F0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return AB()||gpe()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=fpe({state:t,transaction:d}),{commands:h}=new fot({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});F0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function MJ(n){return new got({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=fr(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&u1(l,n.type,s);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=n.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Me(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&o.join(t.from-1)}})}let Dat=class FF{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=fr(Yn(this,"addOptions",{name:this.name}))),this.storage=fr(Yn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new FF(e)}configure(e={}){const t=this.extend();return t.options=gA(this.options,e),t.storage=fr(Yn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new FF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=fr(Yn(t,"addOptions",{name:t.name})),t.storage=fr(Yn(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}},bpe=class LF{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=fr(Yn(this,"addOptions",{name:this.name}))),this.storage=fr(Yn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new LF(e)}configure(e={}){const t=this.extend();return t.options=gA(this.options,e),t.storage=fr(Yn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new LF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=fr(Yn(t,"addOptions",{name:t.name})),t.storage=fr(Yn(t,"addStorage",{name:t.name,options:t.options})),t}};const Nat=bpe.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",_B(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TJ=Dat.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",_B(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=vpe(n,this.type);return Object.entries(t).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),_J=/^\s*([-+*])\s$/,kpe=bpe.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",_B(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Nat.name,this.editor.getAttributes(TJ.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=MJ({find:_J,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=MJ({find:_J,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TJ.name),editor:this.editor})),[n]}});function xpe(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=xpe(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Spe(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Spe(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let _a=class fi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new fi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new fi(r,i)}cutByIndex(e,t){return e==t?fi.empty:e==0&&t==this.content.length?this:new fi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new fi(i,s)}addToStart(e){return new fi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new fi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return xpe(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Spe(this,e,t,r)}findIndex(e,t=-1){if(e==0)return tS(0,e);if(e==this.size)return tS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?tS(r+1,o):tS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return fi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new fi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return fi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new fi(t||e,r)}static from(e){if(!e)return fi.empty;if(e instanceof fi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new fi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};_a.empty=new _a([],0);const HR={index:0,offset:0};function tS(n,e){return HR.index=n,HR.offset=e,HR}function zF(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!zF(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!zF(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let vl=class BF{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&zF(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return BF.none;if(e instanceof BF)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};vl.none=[];let XE=class wm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=$pe(this.content,e+this.openStart,t);return r&&new wm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new wm(wpe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return wm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new wm(_a.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new wm(e,r,i)}};XE.empty=new XE(_a.empty,0,0);function wpe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(wpe(s.content,e-i-1,t-i-1)))}function $pe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=$pe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let Fat=class jF{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new IJ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new IJ(this,t,!0);return r.addAll(e,t.from,t.to),XE.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Bat(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=RJ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=RJ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new jF(e,jF.schemaRules(e)))}};const Epe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Lat={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Cpe={ol:!0,ul:!0},ZE=1,eC=2,Qv=4;function AJ(n,e,t){return e!=null?(e?ZE:0)|(e==="full"?eC:0):n&&n.whitespace=="pre"?ZE|eC:t&~Qv}let nS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=vl.none,this.stashMarks=[],this.match=o||(a&Qv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(_a.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ZE)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=_a.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(_a.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Vat(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Epe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},IJ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=AJ(null,t.preserveWhitespace,0)|(r?Qv:0);i?s=new nS(i.type,i.attrs,vl.none,vl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new nS(null,null,vl.none,vl.none,!0,null,o):s=new nS(e.schema.topNodeType,null,vl.none,vl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(jat(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&eC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&ZE)r.options&eC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Cpe.hasOwnProperty(r)&&this.parser.normalizeLists&&zat(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Lat.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Epe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=vl.none,r=vl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=AJ(e,i,s.options);s.options&Qv&&s.content.length==0&&(o|=Qv),this.nodes.push(new nS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=qat(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function zat(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Cpe.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Bat(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function jat(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function RJ(n){let e={};for(let t in n)e[t]=n[t];return e}function Vat(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function qat(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Mpe(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let Kat=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Mpe({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function As(n,e,t){return n.config[e]===void 0&&n.parent?As(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?As(n.parent,e,t):null}):n.config[e]}function Uat(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Lr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Hat(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Wat(n){return typeof n=="function"}function Mo(n,e=void 0,...t){return Wat(n)?e?n.bind(e)(...t):n(...t):n}function Gat(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let Jat=class{constructor(e){this.find=e.find,this.handler=e.handler}};function Qat(n){return Object.prototype.toString.call(n).slice(8,-1)}function WR(n){return Qat(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function OB(n,e){const t={...n};return WR(n)&&WR(e)&&Object.keys(e).forEach(r=>{WR(e[r])?r in n?t[r]=OB(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let L0=class VF{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Mo(As(this,"addOptions",{name:this.name}))),this.storage=Mo(As(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new VF(e)}configure(e={}){const t=this.extend();return t.options=OB(this.options,e),t.storage=Mo(As(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new VF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Mo(As(t,"addOptions",{name:t.name})),t.storage=Mo(As(t,"addStorage",{name:t.name,options:t.options})),t}};function Yat(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function Xat(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}L0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=Xat(t);return Yat(r,{from:o,to:a},{textSerializers:l})}}})]}});const Zat=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),elt=(n=!1)=>({commands:e})=>e.setContent("",n),tlt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},nlt=n=>e=>n(e),rlt=()=>({state:n,dispatch:e})=>nn(n,e),ilt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},slt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},olt=n=>({tr:e,state:t,dispatch:r})=>{const i=Lr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},alt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},llt=()=>({state:n,dispatch:e})=>Ht(n,e),clt=()=>({commands:n})=>n.keyboardShortcut("Enter"),ult=()=>({state:n,dispatch:e})=>tn(n,e);function tC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Gat(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function qF(n,e,t={}){return n.find(r=>r.type===e&&tC(r.attrs,t))}function dlt(n,e,t={}){return!!qF(n,e,t)}function Tpe(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=qF([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(qF([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&dlt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Qd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const flt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Qd(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Tpe(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},hlt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function _pe(n){return n instanceof D}function eh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function plt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,eh(0,i,s),eh(n.content.size,i,s)):D.create(n,eh(e,i,s),eh(e,i,s))}function PB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const mlt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{PB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!_pe(t.state.selection))return o(),!0;const a=plt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},glt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),ylt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Ape=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Ape(r)}return n};function OJ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Ape(t)}function nC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?_a.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),nC("",e,t)}if(typeof n=="string"){const r=Fat.fromSchema(e);return t.slice?r.parseSlice(OJ(n),t.parseOptions).content:r.parse(OJ(n),t.parseOptions)}return nC("",e,t)}function vlt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const blt=n=>n.toString().startsWith("<"),klt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=nC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((blt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&vlt(r,r.steps.length-1,-1)}return!0},xlt=()=>({state:n,dispatch:e})=>Yt(n,e),Slt=()=>({state:n,dispatch:e})=>Xt(n,e),wlt=()=>({state:n,dispatch:e})=>Wt(n,e),$lt=()=>({state:n,dispatch:e})=>Jt(n,e),Elt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Clt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Mlt=()=>({state:n,dispatch:e})=>Cn(n,e),Tlt=()=>({state:n,dispatch:e})=>Mn(n,e);function Ipe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function _lt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))PB()||Ipe()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const Alt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=_lt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function DB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Lr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>tC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Ilt=(n,e={})=>({state:t,dispatch:r})=>{const i=Lr(n,t.schema);return DB(t,i,e)?Zt(t,r):!1},Rlt=()=>({state:n,dispatch:e})=>rn(n,e),Olt=n=>({state:e,dispatch:t})=>{const r=Lr(n,e.schema);return un(r)(e,t)},Plt=()=>({state:n,dispatch:e})=>en(n,e);function Rpe(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function PJ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Dlt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Rpe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Lr(n,r.schema)),a==="mark"&&(o=Qd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,PJ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(PJ(d.attrs,e)))})})}),!0):!1},Nlt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Flt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Llt=()=>({state:n,dispatch:e})=>Gt(n,e),zlt=()=>({state:n,dispatch:e})=>Qt(n,e),Blt=()=>({state:n,dispatch:e})=>sn(n,e),jlt=()=>({state:n,dispatch:e})=>an(n,e),Vlt=()=>({state:n,dispatch:e})=>on(n,e);function qlt(n,e,t={}){return nC(n,e,{slice:!1,parseOptions:t})}const Klt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=qlt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Ult(n,e){const t=Qd(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Hlt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Wlt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function NB(n){return e=>Wlt(e.$from,n)}function Gw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Glt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Qd(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>tC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>tC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function DJ(n,e){const{nodeExtensions:t}=Uat(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Mo(As(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Jlt(n,e,t){var r;const{selection:i}=e;let s=null;if(_pe(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Qlt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Qd(n,r.schema);if(i)if(o){const c=Ult(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return Jlt(r,t,l)},Ylt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Xlt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Lr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Zlt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=eh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},ect=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=eh(i,o,a),c=eh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},tct=n=>({state:e,dispatch:t})=>{const r=Lr(n,e.schema);return dn(r)(e,t)};function NJ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const nct=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Gw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&NJ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Hlt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&NJ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},rct=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Lr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=_a.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=_a.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Gw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(_a.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new XE(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Gw(d,u.type.name,u.attrs),p=Gw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},GR=(n,e)=>{const t=NB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},JR=(n,e)=>{const t=NB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},ict=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Lr(n,o.schema),p=Lr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=NB(x=>DJ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(DJ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>GR(s,h)).command(()=>JR(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>GR(s,h)).command(()=>JR(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>GR(s,h)).command(()=>JR(s,h)).run()},sct=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Qd(n,r.schema);return Glt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},oct=(n,e,t={})=>({state:r,commands:i})=>{const s=Lr(n,r.schema),o=Lr(e,r.schema);return DB(r,s,t)?i.setNode(o):i.setNode(s,t)},act=(n,e={})=>({state:t,commands:r})=>{const i=Lr(n,t.schema);return DB(t,i,e)?r.lift(i):r.wrapIn(i,e)},lct=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},cct=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},uct=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Qd(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Tpe(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},dct=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Rpe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Lr(n,r.schema)),a==="mark"&&(o=Qd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},fct=(n,e={})=>({state:t,dispatch:r})=>{const i=Lr(n,t.schema);return ln(i,e)(t,r)},hct=(n,e={})=>({state:t,dispatch:r})=>{const i=Lr(n,t.schema);return cn(i,e)(t,r)};var pct=Object.freeze({__proto__:null,blur:Zat,clearContent:elt,clearNodes:tlt,command:nlt,createParagraphNear:rlt,cut:ilt,deleteCurrentNode:slt,deleteNode:olt,deleteRange:alt,deleteSelection:llt,enter:clt,exitCode:ult,extendMarkRange:flt,first:hlt,focus:mlt,forEach:glt,insertContent:ylt,insertContentAt:klt,joinUp:xlt,joinDown:Slt,joinBackward:wlt,joinForward:$lt,joinItemBackward:Elt,joinItemForward:Clt,joinTextblockBackward:Mlt,joinTextblockForward:Tlt,keyboardShortcut:Alt,lift:Ilt,liftEmptyBlock:Rlt,liftListItem:Olt,newlineInCode:Plt,resetAttributes:Dlt,scrollIntoView:Nlt,selectAll:Flt,selectNodeBackward:Llt,selectNodeForward:zlt,selectParentNode:Blt,selectTextblockEnd:jlt,selectTextblockStart:Vlt,setContent:Klt,setMark:Qlt,setMeta:Ylt,setNode:Xlt,setNodeSelection:Zlt,setTextSelection:ect,sinkListItem:tct,splitBlock:nct,splitListItem:rct,toggleList:ict,toggleMark:sct,toggleNode:oct,toggleWrap:act,undoInputRule:lct,unsetAllMarks:cct,unsetMark:uct,updateAttributes:dct,wrapIn:fct,wrapInList:hct});L0.create({name:"commands",addCommands(){return{...pct}}});L0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});L0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});L0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return PB()||Ipe()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Mpe({state:t,transaction:d}),{commands:h}=new Kat({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});L0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function FJ(n){return new Jat({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=Mo(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}let mct=class KF{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Mo(As(this,"addOptions",{name:this.name}))),this.storage=Mo(As(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new KF(e)}configure(e={}){const t=this.extend();return t.options=OB(this.options,e),t.storage=Mo(As(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new KF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Mo(As(t,"addOptions",{name:t.name})),t.storage=Mo(As(t,"addStorage",{name:t.name,options:t.options})),t}};const gct=/^```([a-z]+)?[\s\n]$/,yct=/^~~~([a-z]+)?[\s\n]$/,QR=mct.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Hat(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:n.commands.exitCode()}}},addInputRules(){return[FJ({find:gct,type:this.type,getAttributes:n=>({language:n[1]})}),FJ({find:yct,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Q({key:new Y("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:o}=n.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(D.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(t.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}});function Ope(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Ope(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Ppe(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Ppe(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Aa=class hi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new hi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new hi(r,i)}cutByIndex(e,t){return e==t?hi.empty:e==0&&t==this.content.length?this:new hi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new hi(i,s)}addToStart(e){return new hi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new hi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Ope(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Ppe(this,e,t,r)}findIndex(e,t=-1){if(e==0)return rS(0,e);if(e==this.size)return rS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?rS(r+1,o):rS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return hi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new hi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return hi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new hi(t||e,r)}static from(e){if(!e)return hi.empty;if(e instanceof hi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new hi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Aa.empty=new Aa([],0);const YR={index:0,offset:0};function rS(n,e){return YR.index=n,YR.offset=e,YR}function UF(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!UF(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!UF(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let bl=class HF{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&UF(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return HF.none;if(e instanceof HF)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};bl.none=[];let rC=class $m{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Npe(this.content,e+this.openStart,t);return r&&new $m(r,this.openStart,this.openEnd)}removeBetween(e,t){return new $m(Dpe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return $m.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new $m(Aa.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new $m(e,r,i)}};rC.empty=new rC(Aa.empty,0,0);function Dpe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Dpe(s.content,e-i-1,t-i-1)))}function Npe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Npe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let vct=class WF{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new zJ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new zJ(this,t,!0);return r.addAll(e,t.from,t.to),rC.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(xct(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=BJ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=BJ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new WF(e,WF.schemaRules(e)))}};const Fpe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},bct={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Lpe={ol:!0,ul:!0},iC=1,sC=2,Yv=4;function LJ(n,e,t){return e!=null?(e?iC:0)|(e==="full"?sC:0):n&&n.whitespace=="pre"?iC|sC:t&~Yv}let iS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=bl.none,this.stashMarks=[],this.match=o||(a&Yv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Aa.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&iC)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Aa.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Aa.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):wct(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Fpe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},zJ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=LJ(null,t.preserveWhitespace,0)|(r?Yv:0);i?s=new iS(i.type,i.attrs,bl.none,bl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new iS(null,null,bl.none,bl.none,!0,null,o):s=new iS(e.schema.topNodeType,null,bl.none,bl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(Sct(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&sC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&iC)r.options&sC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Lpe.hasOwnProperty(r)&&this.parser.normalizeLists&&kct(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:bct.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Fpe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=bl.none,r=bl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=LJ(e,i,s.options);s.options&Yv&&s.content.length==0&&(o|=Yv),this.nodes.push(new iS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=$ct(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function kct(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Lpe.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function xct(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Sct(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function BJ(n){let e={};for(let t in n)e[t]=n[t];return e}function wct(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function $ct(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function zpe(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let Ect=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:zpe({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Is(n,e,t){return n.config[e]===void 0&&n.parent?Is(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Is(n.parent,e,t):null}):n.config[e]}function Cct(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function zr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Mct(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Tct(n){return typeof n=="function"}function pa(n,e=void 0,...t){return Tct(n)?e?n.bind(e)(...t):n(...t):n}function _ct(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Act(n){return Object.prototype.toString.call(n).slice(8,-1)}function XR(n){return Act(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function FB(n,e){const t={...n};return XR(n)&&XR(e)&&Object.keys(e).forEach(r=>{XR(e[r])?r in n?t[r]=FB(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let z0=class GF{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pa(Is(this,"addOptions",{name:this.name}))),this.storage=pa(Is(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new GF(e)}configure(e={}){const t=this.extend();return t.options=FB(this.options,e),t.storage=pa(Is(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new GF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=pa(Is(t,"addOptions",{name:t.name})),t.storage=pa(Is(t,"addStorage",{name:t.name,options:t.options})),t}};function Ict(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function Rct(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}z0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=Rct(t);return Ict(r,{from:o,to:a},{textSerializers:l})}}})]}});const Oct=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Pct=(n=!1)=>({commands:e})=>e.setContent("",n),Dct=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Nct=n=>e=>n(e),Fct=()=>({state:n,dispatch:e})=>nn(n,e),Lct=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},zct=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},Bct=n=>({tr:e,state:t,dispatch:r})=>{const i=zr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},jct=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},Vct=()=>({state:n,dispatch:e})=>Ht(n,e),qct=()=>({commands:n})=>n.keyboardShortcut("Enter"),Kct=()=>({state:n,dispatch:e})=>tn(n,e);function oC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:_ct(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function JF(n,e,t={}){return n.find(r=>r.type===e&&oC(r.attrs,t))}function Uct(n,e,t={}){return!!JF(n,e,t)}function Bpe(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=JF([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(JF([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&Uct([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Yd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Hct=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Yd(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Bpe(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},Wct=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function jpe(n){return n instanceof D}function th(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Gct(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,th(0,i,s),th(n.content.size,i,s)):D.create(n,th(e,i,s),th(e,i,s))}function LB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Jct=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{LB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!jpe(t.state.selection))return o(),!0;const a=Gct(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Qct=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Yct=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Vpe=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Vpe(r)}return n};function jJ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Vpe(t)}function aC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Aa.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),aC("",e,t)}if(typeof n=="string"){const r=vct.fromSchema(e);return t.slice?r.parseSlice(jJ(n),t.parseOptions).content:r.parse(jJ(n),t.parseOptions)}return aC("",e,t)}function Xct(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const Zct=n=>n.toString().startsWith("<"),eut=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=aC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((Zct(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&Xct(r,r.steps.length-1,-1)}return!0},tut=()=>({state:n,dispatch:e})=>Yt(n,e),nut=()=>({state:n,dispatch:e})=>Xt(n,e),rut=()=>({state:n,dispatch:e})=>Wt(n,e),iut=()=>({state:n,dispatch:e})=>Jt(n,e),sut=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},out=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},aut=()=>({state:n,dispatch:e})=>Cn(n,e),lut=()=>({state:n,dispatch:e})=>Mn(n,e);function qpe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function cut(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))LB()||qpe()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const uut=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=cut(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function zB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?zr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>oC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const dut=(n,e={})=>({state:t,dispatch:r})=>{const i=zr(n,t.schema);return zB(t,i,e)?Zt(t,r):!1},fut=()=>({state:n,dispatch:e})=>rn(n,e),hut=n=>({state:e,dispatch:t})=>{const r=zr(n,e.schema);return un(r)(e,t)},put=()=>({state:n,dispatch:e})=>en(n,e);function Kpe(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function VJ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const mut=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Kpe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=zr(n,r.schema)),a==="mark"&&(o=Yd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,VJ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(VJ(d.attrs,e)))})})}),!0):!1},gut=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),yut=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),vut=()=>({state:n,dispatch:e})=>Gt(n,e),but=()=>({state:n,dispatch:e})=>Qt(n,e),kut=()=>({state:n,dispatch:e})=>sn(n,e),xut=()=>({state:n,dispatch:e})=>an(n,e),Sut=()=>({state:n,dispatch:e})=>on(n,e);function wut(n,e,t={}){return aC(n,e,{slice:!1,parseOptions:t})}const $ut=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=wut(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Eut(n,e){const t=Yd(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Cut(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Mut(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function BB(n){return e=>Mut(e.$from,n)}function Jw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Tut(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Yd(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>oC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>oC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function qJ(n,e){const{nodeExtensions:t}=Cct(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=pa(Is(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function _ut(n,e,t){var r;const{selection:i}=e;let s=null;if(jpe(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Aut=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Yd(n,r.schema);if(i)if(o){const c=Eut(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return _ut(r,t,l)},Iut=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Rut=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=zr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Out=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=th(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},Put=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=th(i,o,a),c=th(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},Dut=n=>({state:e,dispatch:t})=>{const r=zr(n,e.schema);return dn(r)(e,t)};function KJ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Nut=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Jw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&KJ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Cut(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&KJ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Fut=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=zr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Aa.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Aa.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Jw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Aa.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new rC(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Jw(d,u.type.name,u.attrs),p=Jw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},ZR=(n,e)=>{const t=BB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},eO=(n,e)=>{const t=BB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},Lut=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=zr(n,o.schema),p=zr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=BB(x=>qJ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(qJ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>ZR(s,h)).command(()=>eO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>ZR(s,h)).command(()=>eO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>ZR(s,h)).command(()=>eO(s,h)).run()},zut=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Yd(n,r.schema);return Tut(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},But=(n,e,t={})=>({state:r,commands:i})=>{const s=zr(n,r.schema),o=zr(e,r.schema);return zB(r,s,t)?i.setNode(o):i.setNode(s,t)},jut=(n,e={})=>({state:t,commands:r})=>{const i=zr(n,t.schema);return zB(t,i,e)?r.lift(i):r.wrapIn(i,e)},Vut=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},qut=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Kut=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Yd(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Bpe(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},Uut=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Kpe(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=zr(n,r.schema)),a==="mark"&&(o=Yd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Hut=(n,e={})=>({state:t,dispatch:r})=>{const i=zr(n,t.schema);return ln(i,e)(t,r)},Wut=(n,e={})=>({state:t,dispatch:r})=>{const i=zr(n,t.schema);return cn(i,e)(t,r)};var Gut=Object.freeze({__proto__:null,blur:Oct,clearContent:Pct,clearNodes:Dct,command:Nct,createParagraphNear:Fct,cut:Lct,deleteCurrentNode:zct,deleteNode:Bct,deleteRange:jct,deleteSelection:Vct,enter:qct,exitCode:Kct,extendMarkRange:Hct,first:Wct,focus:Jct,forEach:Qct,insertContent:Yct,insertContentAt:eut,joinUp:tut,joinDown:nut,joinBackward:rut,joinForward:iut,joinItemBackward:sut,joinItemForward:out,joinTextblockBackward:aut,joinTextblockForward:lut,keyboardShortcut:uut,lift:dut,liftEmptyBlock:fut,liftListItem:hut,newlineInCode:put,resetAttributes:mut,scrollIntoView:gut,selectAll:yut,selectNodeBackward:vut,selectNodeForward:but,selectParentNode:kut,selectTextblockEnd:xut,selectTextblockStart:Sut,setContent:$ut,setMark:Aut,setMeta:Iut,setNode:Rut,setNodeSelection:Out,setTextSelection:Put,sinkListItem:Dut,splitBlock:Nut,splitListItem:Fut,toggleList:Lut,toggleMark:zut,toggleNode:But,toggleWrap:jut,undoInputRule:Vut,unsetAllMarks:qut,unsetMark:Kut,updateAttributes:Uut,wrapIn:Hut,wrapInList:Wut});z0.create({name:"commands",addCommands(){return{...Gut}}});z0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});z0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});z0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return LB()||qpe()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=zpe({state:t,transaction:d}),{commands:h}=new Ect({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});z0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});let Jut=class QF{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pa(Is(this,"addOptions",{name:this.name}))),this.storage=pa(Is(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new QF(e)}configure(e={}){const t=this.extend();return t.options=FB(this.options,e),t.storage=pa(Is(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new QF({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=pa(Is(t,"addOptions",{name:t.name})),t.storage=pa(Is(t,"addStorage",{name:t.name,options:t.options})),t}};const Upe=Jut.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Mct(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});function Hpe(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Hpe(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Wpe(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Wpe(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ia=class pi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new pi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new pi(r,i)}cutByIndex(e,t){return e==t?pi.empty:e==0&&t==this.content.length?this:new pi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new pi(i,s)}addToStart(e){return new pi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new pi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Hpe(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Wpe(this,e,t,r)}findIndex(e,t=-1){if(e==0)return sS(0,e);if(e==this.size)return sS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?sS(r+1,o):sS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return pi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new pi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return pi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new pi(t||e,r)}static from(e){if(!e)return pi.empty;if(e instanceof pi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new pi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ia.empty=new Ia([],0);const tO={index:0,offset:0};function sS(n,e){return tO.index=n,tO.offset=e,tO}function YF(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!YF(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!YF(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let kl=class XF{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&YF(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return XF.none;if(e instanceof XF)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};kl.none=[];let lC=class Em{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Jpe(this.content,e+this.openStart,t);return r&&new Em(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Em(Gpe(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Em.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Em(Ia.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Em(e,r,i)}};lC.empty=new lC(Ia.empty,0,0);function Gpe(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Gpe(s.content,e-i-1,t-i-1)))}function Jpe(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Jpe(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let Qut=class ZF{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new HJ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new HJ(this,t,!0);return r.addAll(e,t.from,t.to),lC.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Zut(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=WJ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=WJ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ZF(e,ZF.schemaRules(e)))}};const Qpe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Yut={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ype={ol:!0,ul:!0},cC=1,uC=2,Xv=4;function UJ(n,e,t){return e!=null?(e?cC:0)|(e==="full"?uC:0):n&&n.whitespace=="pre"?cC|uC:t&~Xv}let oS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=kl.none,this.stashMarks=[],this.match=o||(a&Xv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ia.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&cC)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ia.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ia.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):tdt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Qpe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},HJ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=UJ(null,t.preserveWhitespace,0)|(r?Xv:0);i?s=new oS(i.type,i.attrs,kl.none,kl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new oS(null,null,kl.none,kl.none,!0,null,o):s=new oS(e.schema.topNodeType,null,kl.none,kl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(edt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&uC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&cC)r.options&uC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Ype.hasOwnProperty(r)&&this.parser.normalizeLists&&Xut(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Yut.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Qpe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=kl.none,r=kl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=UJ(e,i,s.options);s.options&Xv&&s.content.length==0&&(o|=Xv),this.nodes.push(new oS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=ndt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function Xut(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Ype.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Zut(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function edt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function WJ(n){let e={};for(let t in n)e[t]=n[t];return e}function tdt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function ndt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Xpe(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let rdt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Xpe({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Rs(n,e,t){return n.config[e]===void 0&&n.parent?Rs(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Rs(n.parent,e,t):null}):n.config[e]}function idt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Br(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function sdt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function odt(n){return typeof n=="function"}function To(n,e=void 0,...t){return odt(n)?e?n.bind(e)(...t):n(...t):n}function adt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let ldt=class{constructor(e){this.find=e.find,this.handler=e.handler}};function cdt(n){return Object.prototype.toString.call(n).slice(8,-1)}function nO(n){return cdt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function jB(n,e){const t={...n};return nO(n)&&nO(e)&&Object.keys(e).forEach(r=>{nO(e[r])?r in n?t[r]=jB(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let B0=class e5{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=To(Rs(this,"addOptions",{name:this.name}))),this.storage=To(Rs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new e5(e)}configure(e={}){const t=this.extend();return t.options=jB(this.options,e),t.storage=To(Rs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new e5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=To(Rs(t,"addOptions",{name:t.name})),t.storage=To(Rs(t,"addStorage",{name:t.name,options:t.options})),t}};function udt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function ddt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}B0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=ddt(t);return udt(r,{from:o,to:a},{textSerializers:l})}}})]}});const fdt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),hdt=(n=!1)=>({commands:e})=>e.setContent("",n),pdt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},mdt=n=>e=>n(e),gdt=()=>({state:n,dispatch:e})=>nn(n,e),ydt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},vdt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},bdt=n=>({tr:e,state:t,dispatch:r})=>{const i=Br(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},kdt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},xdt=()=>({state:n,dispatch:e})=>Ht(n,e),Sdt=()=>({commands:n})=>n.keyboardShortcut("Enter"),wdt=()=>({state:n,dispatch:e})=>tn(n,e);function dC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:adt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function t5(n,e,t={}){return n.find(r=>r.type===e&&dC(r.attrs,t))}function $dt(n,e,t={}){return!!t5(n,e,t)}function Zpe(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=t5([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(t5([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&$dt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Xd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Edt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Xd(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Zpe(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},Cdt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function eme(n){return n instanceof D}function nh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Mdt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,nh(0,i,s),nh(n.content.size,i,s)):D.create(n,nh(e,i,s),nh(e,i,s))}function VB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Tdt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{VB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!eme(t.state.selection))return o(),!0;const a=Mdt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},_dt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Adt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),tme=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&tme(r)}return n};function GJ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return tme(t)}function fC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ia.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),fC("",e,t)}if(typeof n=="string"){const r=Qut.fromSchema(e);return t.slice?r.parseSlice(GJ(n),t.parseOptions).content:r.parse(GJ(n),t.parseOptions)}return fC("",e,t)}function Idt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const Rdt=n=>n.toString().startsWith("<"),Odt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=fC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((Rdt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&Idt(r,r.steps.length-1,-1)}return!0},Pdt=()=>({state:n,dispatch:e})=>Yt(n,e),Ddt=()=>({state:n,dispatch:e})=>Xt(n,e),Ndt=()=>({state:n,dispatch:e})=>Wt(n,e),Fdt=()=>({state:n,dispatch:e})=>Jt(n,e),Ldt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},zdt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Bdt=()=>({state:n,dispatch:e})=>Cn(n,e),jdt=()=>({state:n,dispatch:e})=>Mn(n,e);function nme(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Vdt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))VB()||nme()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const qdt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Vdt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function qB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Br(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>dC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Kdt=(n,e={})=>({state:t,dispatch:r})=>{const i=Br(n,t.schema);return qB(t,i,e)?Zt(t,r):!1},Udt=()=>({state:n,dispatch:e})=>rn(n,e),Hdt=n=>({state:e,dispatch:t})=>{const r=Br(n,e.schema);return un(r)(e,t)},Wdt=()=>({state:n,dispatch:e})=>en(n,e);function rme(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function JJ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Gdt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=rme(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Br(n,r.schema)),a==="mark"&&(o=Xd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,JJ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(JJ(d.attrs,e)))})})}),!0):!1},Jdt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Qdt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Ydt=()=>({state:n,dispatch:e})=>Gt(n,e),Xdt=()=>({state:n,dispatch:e})=>Qt(n,e),Zdt=()=>({state:n,dispatch:e})=>sn(n,e),eft=()=>({state:n,dispatch:e})=>an(n,e),tft=()=>({state:n,dispatch:e})=>on(n,e);function nft(n,e,t={}){return fC(n,e,{slice:!1,parseOptions:t})}const rft=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=nft(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function ift(n,e){const t=Xd(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function sft(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function oft(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function KB(n){return e=>oft(e.$from,n)}function Qw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function aft(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Xd(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>dC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>dC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function QJ(n,e){const{nodeExtensions:t}=idt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=To(Rs(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function lft(n,e,t){var r;const{selection:i}=e;let s=null;if(eme(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const cft=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Xd(n,r.schema);if(i)if(o){const c=ift(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return lft(r,t,l)},uft=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),dft=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Br(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},fft=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=nh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},hft=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=nh(i,o,a),c=nh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},pft=n=>({state:e,dispatch:t})=>{const r=Br(n,e.schema);return dn(r)(e,t)};function YJ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const mft=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Qw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&YJ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:sft(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&YJ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},gft=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Br(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ia.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ia.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Qw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ia.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new lC(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Qw(d,u.type.name,u.attrs),p=Qw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},rO=(n,e)=>{const t=KB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},iO=(n,e)=>{const t=KB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},yft=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Br(n,o.schema),p=Br(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=KB(x=>QJ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(QJ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>rO(s,h)).command(()=>iO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>rO(s,h)).command(()=>iO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>rO(s,h)).command(()=>iO(s,h)).run()},vft=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Xd(n,r.schema);return aft(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},bft=(n,e,t={})=>({state:r,commands:i})=>{const s=Br(n,r.schema),o=Br(e,r.schema);return qB(r,s,t)?i.setNode(o):i.setNode(s,t)},kft=(n,e={})=>({state:t,commands:r})=>{const i=Br(n,t.schema);return qB(t,i,e)?r.lift(i):r.wrapIn(i,e)},xft=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Sft=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},wft=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Xd(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Zpe(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},$ft=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=rme(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Br(n,r.schema)),a==="mark"&&(o=Xd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Eft=(n,e={})=>({state:t,dispatch:r})=>{const i=Br(n,t.schema);return ln(i,e)(t,r)},Cft=(n,e={})=>({state:t,dispatch:r})=>{const i=Br(n,t.schema);return cn(i,e)(t,r)};var Mft=Object.freeze({__proto__:null,blur:fdt,clearContent:hdt,clearNodes:pdt,command:mdt,createParagraphNear:gdt,cut:ydt,deleteCurrentNode:vdt,deleteNode:bdt,deleteRange:kdt,deleteSelection:xdt,enter:Sdt,exitCode:wdt,extendMarkRange:Edt,first:Cdt,focus:Tdt,forEach:_dt,insertContent:Adt,insertContentAt:Odt,joinUp:Pdt,joinDown:Ddt,joinBackward:Ndt,joinForward:Fdt,joinItemBackward:Ldt,joinItemForward:zdt,joinTextblockBackward:Bdt,joinTextblockForward:jdt,keyboardShortcut:qdt,lift:Kdt,liftEmptyBlock:Udt,liftListItem:Hdt,newlineInCode:Wdt,resetAttributes:Gdt,scrollIntoView:Jdt,selectAll:Qdt,selectNodeBackward:Ydt,selectNodeForward:Xdt,selectParentNode:Zdt,selectTextblockEnd:eft,selectTextblockStart:tft,setContent:rft,setMark:cft,setMeta:uft,setNode:dft,setNodeSelection:fft,setTextSelection:hft,sinkListItem:pft,splitBlock:mft,splitListItem:gft,toggleList:yft,toggleMark:vft,toggleNode:bft,toggleWrap:kft,undoInputRule:xft,unsetAllMarks:Sft,unsetMark:wft,updateAttributes:$ft,wrapIn:Eft,wrapInList:Cft});B0.create({name:"commands",addCommands(){return{...Mft}}});B0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});B0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});B0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return VB()||nme()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Xpe({state:t,transaction:d}),{commands:h}=new rdt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});B0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Tft(n){return new ldt({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=To(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}let _ft=class n5{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=To(Rs(this,"addOptions",{name:this.name}))),this.storage=To(Rs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new n5(e)}configure(e={}){const t=this.extend();return t.options=jB(this.options,e),t.storage=To(Rs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new n5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=To(Rs(t,"addOptions",{name:t.name})),t.storage=To(Rs(t,"addStorage",{name:t.name,options:t.options})),t}};const ime=_ft.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,sdt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Tft({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});function sme(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=sme(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function ome(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=ome(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ra=class mi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new mi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new mi(r,i)}cutByIndex(e,t){return e==t?mi.empty:e==0&&t==this.content.length?this:new mi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new mi(i,s)}addToStart(e){return new mi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new mi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return sme(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return ome(this,e,t,r)}findIndex(e,t=-1){if(e==0)return aS(0,e);if(e==this.size)return aS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?aS(r+1,o):aS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return mi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new mi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return mi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new mi(t||e,r)}static from(e){if(!e)return mi.empty;if(e instanceof mi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new mi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ra.empty=new Ra([],0);const sO={index:0,offset:0};function aS(n,e){return sO.index=n,sO.offset=e,sO}function r5(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!r5(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!r5(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let xl=class i5{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&r5(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return i5.none;if(e instanceof i5)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};xl.none=[];let hC=class Cm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=lme(this.content,e+this.openStart,t);return r&&new Cm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Cm(ame(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Cm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Cm(Ra.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Cm(e,r,i)}};hC.empty=new hC(Ra.empty,0,0);function ame(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(ame(s.content,e-i-1,t-i-1)))}function lme(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=lme(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let Aft=class s5{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new ZJ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ZJ(this,t,!0);return r.addAll(e,t.from,t.to),hC.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Oft(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=eQ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=eQ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new s5(e,s5.schemaRules(e)))}};const cme={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ift={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ume={ol:!0,ul:!0},pC=1,mC=2,Zv=4;function XJ(n,e,t){return e!=null?(e?pC:0)|(e==="full"?mC:0):n&&n.whitespace=="pre"?pC|mC:t&~Zv}let lS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=xl.none,this.stashMarks=[],this.match=o||(a&Zv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ra.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&pC)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ra.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ra.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Dft(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!cme.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},ZJ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=XJ(null,t.preserveWhitespace,0)|(r?Zv:0);i?s=new lS(i.type,i.attrs,xl.none,xl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new lS(null,null,xl.none,xl.none,!0,null,o):s=new lS(e.schema.topNodeType,null,xl.none,xl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(Pft(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&mC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&pC)r.options&mC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;ume.hasOwnProperty(r)&&this.parser.normalizeLists&&Rft(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Ift.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(cme.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=xl.none,r=xl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=XJ(e,i,s.options);s.options&Zv&&s.content.length==0&&(o|=Zv),this.nodes.push(new lS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Nft(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function Rft(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ume.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Oft(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Pft(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function eQ(n){let e={};for(let t in n)e[t]=n[t];return e}function Dft(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function Nft(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function dme(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let Fft=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:dme({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Os(n,e,t){return n.config[e]===void 0&&n.parent?Os(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Os(n.parent,e,t):null}):n.config[e]}function Lft(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function jr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function zft(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Bft(n){return typeof n=="function"}function _o(n,e=void 0,...t){return Bft(n)?e?n.bind(e)(...t):n(...t):n}function jft(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let Vft=class{constructor(e){this.find=e.find,this.handler=e.handler}};function qft(n){return Object.prototype.toString.call(n).slice(8,-1)}function oO(n){return qft(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function UB(n,e){const t={...n};return oO(n)&&oO(e)&&Object.keys(e).forEach(r=>{oO(e[r])?r in n?t[r]=UB(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let j0=class o5{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=_o(Os(this,"addOptions",{name:this.name}))),this.storage=_o(Os(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new o5(e)}configure(e={}){const t=this.extend();return t.options=UB(this.options,e),t.storage=_o(Os(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new o5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=_o(Os(t,"addOptions",{name:t.name})),t.storage=_o(Os(t,"addStorage",{name:t.name,options:t.options})),t}};function Kft(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function Uft(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}j0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=Uft(t);return Kft(r,{from:o,to:a},{textSerializers:l})}}})]}});const Hft=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Wft=(n=!1)=>({commands:e})=>e.setContent("",n),Gft=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Jft=n=>e=>n(e),Qft=()=>({state:n,dispatch:e})=>nn(n,e),Yft=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},Xft=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},Zft=n=>({tr:e,state:t,dispatch:r})=>{const i=jr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},eht=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},tht=()=>({state:n,dispatch:e})=>Ht(n,e),nht=()=>({commands:n})=>n.keyboardShortcut("Enter"),rht=()=>({state:n,dispatch:e})=>tn(n,e);function gC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:jft(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function a5(n,e,t={}){return n.find(r=>r.type===e&&gC(r.attrs,t))}function iht(n,e,t={}){return!!a5(n,e,t)}function fme(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=a5([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(a5([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&iht([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Zd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const sht=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Zd(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=fme(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},oht=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function hme(n){return n instanceof D}function rh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function aht(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,rh(0,i,s),rh(n.content.size,i,s)):D.create(n,rh(e,i,s),rh(e,i,s))}function HB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const lht=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{HB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!hme(t.state.selection))return o(),!0;const a=aht(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},cht=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),uht=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),pme=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&pme(r)}return n};function tQ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return pme(t)}function yC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ra.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),yC("",e,t)}if(typeof n=="string"){const r=Aft.fromSchema(e);return t.slice?r.parseSlice(tQ(n),t.parseOptions).content:r.parse(tQ(n),t.parseOptions)}return yC("",e,t)}function dht(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const fht=n=>n.toString().startsWith("<"),hht=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=yC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((fht(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&dht(r,r.steps.length-1,-1)}return!0},pht=()=>({state:n,dispatch:e})=>Yt(n,e),mht=()=>({state:n,dispatch:e})=>Xt(n,e),ght=()=>({state:n,dispatch:e})=>Wt(n,e),yht=()=>({state:n,dispatch:e})=>Jt(n,e),vht=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},bht=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},kht=()=>({state:n,dispatch:e})=>Cn(n,e),xht=()=>({state:n,dispatch:e})=>Mn(n,e);function mme(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Sht(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))HB()||mme()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const wht=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Sht(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function WB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?jr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>gC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const $ht=(n,e={})=>({state:t,dispatch:r})=>{const i=jr(n,t.schema);return WB(t,i,e)?Zt(t,r):!1},Eht=()=>({state:n,dispatch:e})=>rn(n,e),Cht=n=>({state:e,dispatch:t})=>{const r=jr(n,e.schema);return un(r)(e,t)},Mht=()=>({state:n,dispatch:e})=>en(n,e);function gme(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function nQ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Tht=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=gme(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=jr(n,r.schema)),a==="mark"&&(o=Zd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,nQ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(nQ(d.attrs,e)))})})}),!0):!1},_ht=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Aht=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Iht=()=>({state:n,dispatch:e})=>Gt(n,e),Rht=()=>({state:n,dispatch:e})=>Qt(n,e),Oht=()=>({state:n,dispatch:e})=>sn(n,e),Pht=()=>({state:n,dispatch:e})=>an(n,e),Dht=()=>({state:n,dispatch:e})=>on(n,e);function Nht(n,e,t={}){return yC(n,e,{slice:!1,parseOptions:t})}const Fht=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Nht(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Lht(n,e){const t=Zd(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function zht(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Bht(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function GB(n){return e=>Bht(e.$from,n)}function Yw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function jht(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Zd(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>gC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>gC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function rQ(n,e){const{nodeExtensions:t}=Lft(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=_o(Os(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Vht(n,e,t){var r;const{selection:i}=e;let s=null;if(hme(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const qht=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Zd(n,r.schema);if(i)if(o){const c=Lht(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return Vht(r,t,l)},Kht=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Uht=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=jr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Hht=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=rh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},Wht=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=rh(i,o,a),c=rh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},Ght=n=>({state:e,dispatch:t})=>{const r=jr(n,e.schema);return dn(r)(e,t)};function iQ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Jht=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Yw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&iQ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:zht(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&iQ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Qht=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=jr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ra.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ra.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Yw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ra.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new hC(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Yw(d,u.type.name,u.attrs),p=Yw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},aO=(n,e)=>{const t=GB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},lO=(n,e)=>{const t=GB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},Yht=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=jr(n,o.schema),p=jr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=GB(x=>rQ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(rQ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>aO(s,h)).command(()=>lO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>aO(s,h)).command(()=>lO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>aO(s,h)).command(()=>lO(s,h)).run()},Xht=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Zd(n,r.schema);return jht(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Zht=(n,e,t={})=>({state:r,commands:i})=>{const s=jr(n,r.schema),o=jr(e,r.schema);return WB(r,s,t)?i.setNode(o):i.setNode(s,t)},ept=(n,e={})=>({state:t,commands:r})=>{const i=jr(n,t.schema);return WB(t,i,e)?r.lift(i):r.wrapIn(i,e)},tpt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},npt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},rpt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Zd(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=fme(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},ipt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=gme(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=jr(n,r.schema)),a==="mark"&&(o=Zd(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},spt=(n,e={})=>({state:t,dispatch:r})=>{const i=jr(n,t.schema);return ln(i,e)(t,r)},opt=(n,e={})=>({state:t,dispatch:r})=>{const i=jr(n,t.schema);return cn(i,e)(t,r)};var apt=Object.freeze({__proto__:null,blur:Hft,clearContent:Wft,clearNodes:Gft,command:Jft,createParagraphNear:Qft,cut:Yft,deleteCurrentNode:Xft,deleteNode:Zft,deleteRange:eht,deleteSelection:tht,enter:nht,exitCode:rht,extendMarkRange:sht,first:oht,focus:lht,forEach:cht,insertContent:uht,insertContentAt:hht,joinUp:pht,joinDown:mht,joinBackward:ght,joinForward:yht,joinItemBackward:vht,joinItemForward:bht,joinTextblockBackward:kht,joinTextblockForward:xht,keyboardShortcut:wht,lift:$ht,liftEmptyBlock:Eht,liftListItem:Cht,newlineInCode:Mht,resetAttributes:Tht,scrollIntoView:_ht,selectAll:Aht,selectNodeBackward:Iht,selectNodeForward:Rht,selectParentNode:Oht,selectTextblockEnd:Pht,selectTextblockStart:Dht,setContent:Fht,setMark:qht,setMeta:Kht,setNode:Uht,setNodeSelection:Hht,setTextSelection:Wht,sinkListItem:Ght,splitBlock:Jht,splitListItem:Qht,toggleList:Yht,toggleMark:Xht,toggleNode:Zht,toggleWrap:ept,undoInputRule:tpt,unsetAllMarks:npt,unsetMark:rpt,updateAttributes:ipt,wrapIn:spt,wrapInList:opt});j0.create({name:"commands",addCommands(){return{...apt}}});j0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});j0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});j0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return HB()||mme()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=dme({state:t,transaction:d}),{commands:h}=new Fft({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});j0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function lpt(n){return new Vft({find:n.find,handler:({state:e,range:t,match:r})=>{const i=_o(n.getAttributes,void 0,r)||{},{tr:s}=e,o=t.from;let a=t.to;const l=n.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else r[0]&&s.insert(o-1,n.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}let cpt=class l5{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=_o(Os(this,"addOptions",{name:this.name}))),this.storage=_o(Os(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new l5(e)}configure(e={}){const t=this.extend();return t.options=UB(this.options,e),t.storage=_o(Os(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new l5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=_o(Os(t,"addOptions",{name:t.name})),t.storage=_o(Os(t,"addStorage",{name:t.name,options:t.options})),t}};const yme=cpt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",zft(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{$to:t}=e.selection,r=n();return t.parentOffset===0?r.insertContentAt(Math.max(t.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(D.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(G.create(i.doc,a.pos)):i.setSelection(D.create(i.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(l,c),i.setSelection(D.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[lpt({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}});function vme(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=vme(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function bme(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=bme(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Oa=class gi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new gi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new gi(r,i)}cutByIndex(e,t){return e==t?gi.empty:e==0&&t==this.content.length?this:new gi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new gi(i,s)}addToStart(e){return new gi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new gi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return vme(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return bme(this,e,t,r)}findIndex(e,t=-1){if(e==0)return cS(0,e);if(e==this.size)return cS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?cS(r+1,o):cS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return gi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new gi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return gi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new gi(t||e,r)}static from(e){if(!e)return gi.empty;if(e instanceof gi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new gi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Oa.empty=new Oa([],0);const cO={index:0,offset:0};function cS(n,e){return cO.index=n,cO.offset=e,cO}function c5(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!c5(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!c5(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Sl=class u5{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&c5(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return u5.none;if(e instanceof u5)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Sl.none=[];let vC=class Mm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=xme(this.content,e+this.openStart,t);return r&&new Mm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Mm(kme(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Mm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Mm(Oa.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Mm(e,r,i)}};vC.empty=new vC(Oa.empty,0,0);function kme(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(kme(s.content,e-i-1,t-i-1)))}function xme(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=xme(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let upt=class d5{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new oQ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new oQ(this,t,!0);return r.addAll(e,t.from,t.to),vC.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(hpt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=aQ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=aQ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new d5(e,d5.schemaRules(e)))}};const Sme={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},dpt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},wme={ol:!0,ul:!0},bC=1,kC=2,eb=4;function sQ(n,e,t){return e!=null?(e?bC:0)|(e==="full"?kC:0):n&&n.whitespace=="pre"?bC|kC:t&~eb}let uS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Sl.none,this.stashMarks=[],this.match=o||(a&eb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Oa.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&bC)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Oa.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Oa.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):mpt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Sme.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},oQ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=sQ(null,t.preserveWhitespace,0)|(r?eb:0);i?s=new uS(i.type,i.attrs,Sl.none,Sl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new uS(null,null,Sl.none,Sl.none,!0,null,o):s=new uS(e.schema.topNodeType,null,Sl.none,Sl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(ppt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&kC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&bC)r.options&kC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;wme.hasOwnProperty(r)&&this.parser.normalizeLists&&fpt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:dpt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Sme.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Sl.none,r=Sl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=sQ(e,i,s.options);s.options&eb&&s.content.length==0&&(o|=eb),this.nodes.push(new uS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=gpt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function fpt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&wme.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function hpt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function ppt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function aQ(n){let e={};for(let t in n)e[t]=n[t];return e}function mpt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function gpt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function $me(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let ypt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:$me({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Ps(n,e,t){return n.config[e]===void 0&&n.parent?Ps(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ps(n.parent,e,t):null}):n.config[e]}function vpt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Vr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function bpt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function kpt(n){return typeof n=="function"}function ma(n,e=void 0,...t){return kpt(n)?e?n.bind(e)(...t):n(...t):n}function xpt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Spt(n){return Object.prototype.toString.call(n).slice(8,-1)}function uO(n){return Spt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function JB(n,e){const t={...n};return uO(n)&&uO(e)&&Object.keys(e).forEach(r=>{uO(e[r])?r in n?t[r]=JB(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let V0=class f5{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ma(Ps(this,"addOptions",{name:this.name}))),this.storage=ma(Ps(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new f5(e)}configure(e={}){const t=this.extend();return t.options=JB(this.options,e),t.storage=ma(Ps(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new f5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ma(Ps(t,"addOptions",{name:t.name})),t.storage=ma(Ps(t,"addStorage",{name:t.name,options:t.options})),t}};function wpt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function $pt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}V0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=$pt(t);return wpt(r,{from:o,to:a},{textSerializers:l})}}})]}});const Ept=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Cpt=(n=!1)=>({commands:e})=>e.setContent("",n),Mpt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Tpt=n=>e=>n(e),_pt=()=>({state:n,dispatch:e})=>nn(n,e),Apt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},Ipt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},Rpt=n=>({tr:e,state:t,dispatch:r})=>{const i=Vr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Opt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},Ppt=()=>({state:n,dispatch:e})=>Ht(n,e),Dpt=()=>({commands:n})=>n.keyboardShortcut("Enter"),Npt=()=>({state:n,dispatch:e})=>tn(n,e);function xC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:xpt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function h5(n,e,t={}){return n.find(r=>r.type===e&&xC(r.attrs,t))}function Fpt(n,e,t={}){return!!h5(n,e,t)}function Eme(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=h5([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(h5([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&Fpt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function ef(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Lpt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=ef(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Eme(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},zpt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Cme(n){return n instanceof D}function ih(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Bpt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,ih(0,i,s),ih(n.content.size,i,s)):D.create(n,ih(e,i,s),ih(e,i,s))}function QB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const jpt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{QB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Cme(t.state.selection))return o(),!0;const a=Bpt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Vpt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),qpt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Mme=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Mme(r)}return n};function lQ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Mme(t)}function SC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Oa.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),SC("",e,t)}if(typeof n=="string"){const r=upt.fromSchema(e);return t.slice?r.parseSlice(lQ(n),t.parseOptions).content:r.parse(lQ(n),t.parseOptions)}return SC("",e,t)}function Kpt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const Upt=n=>n.toString().startsWith("<"),Hpt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=SC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((Upt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&Kpt(r,r.steps.length-1,-1)}return!0},Wpt=()=>({state:n,dispatch:e})=>Yt(n,e),Gpt=()=>({state:n,dispatch:e})=>Xt(n,e),Jpt=()=>({state:n,dispatch:e})=>Wt(n,e),Qpt=()=>({state:n,dispatch:e})=>Jt(n,e),Ypt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Xpt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Zpt=()=>({state:n,dispatch:e})=>Cn(n,e),emt=()=>({state:n,dispatch:e})=>Mn(n,e);function Tme(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function tmt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))QB()||Tme()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const nmt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=tmt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function YB(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Vr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>xC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const rmt=(n,e={})=>({state:t,dispatch:r})=>{const i=Vr(n,t.schema);return YB(t,i,e)?Zt(t,r):!1},imt=()=>({state:n,dispatch:e})=>rn(n,e),smt=n=>({state:e,dispatch:t})=>{const r=Vr(n,e.schema);return un(r)(e,t)},omt=()=>({state:n,dispatch:e})=>en(n,e);function _me(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function cQ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const amt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=_me(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Vr(n,r.schema)),a==="mark"&&(o=ef(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,cQ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(cQ(d.attrs,e)))})})}),!0):!1},lmt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),cmt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),umt=()=>({state:n,dispatch:e})=>Gt(n,e),dmt=()=>({state:n,dispatch:e})=>Qt(n,e),fmt=()=>({state:n,dispatch:e})=>sn(n,e),hmt=()=>({state:n,dispatch:e})=>an(n,e),pmt=()=>({state:n,dispatch:e})=>on(n,e);function mmt(n,e,t={}){return SC(n,e,{slice:!1,parseOptions:t})}const gmt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=mmt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function ymt(n,e){const t=ef(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function vmt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function bmt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function XB(n){return e=>bmt(e.$from,n)}function Xw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function kmt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?ef(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>xC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>xC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function uQ(n,e){const{nodeExtensions:t}=vpt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ma(Ps(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function xmt(n,e,t){var r;const{selection:i}=e;let s=null;if(Cme(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Smt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=ef(n,r.schema);if(i)if(o){const c=ymt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return xmt(r,t,l)},wmt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),$mt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Vr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Emt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=ih(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},Cmt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=ih(i,o,a),c=ih(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},Mmt=n=>({state:e,dispatch:t})=>{const r=Vr(n,e.schema);return dn(r)(e,t)};function dQ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Tmt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Xw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&dQ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:vmt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&dQ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},_mt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Vr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Oa.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Oa.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Xw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Oa.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new vC(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Xw(d,u.type.name,u.attrs),p=Xw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},dO=(n,e)=>{const t=XB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},fO=(n,e)=>{const t=XB(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},Amt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Vr(n,o.schema),p=Vr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=XB(x=>uQ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(uQ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>dO(s,h)).command(()=>fO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>dO(s,h)).command(()=>fO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>dO(s,h)).command(()=>fO(s,h)).run()},Imt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=ef(n,r.schema);return kmt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Rmt=(n,e,t={})=>({state:r,commands:i})=>{const s=Vr(n,r.schema),o=Vr(e,r.schema);return YB(r,s,t)?i.setNode(o):i.setNode(s,t)},Omt=(n,e={})=>({state:t,commands:r})=>{const i=Vr(n,t.schema);return YB(t,i,e)?r.lift(i):r.wrapIn(i,e)},Pmt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Dmt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Nmt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=ef(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Eme(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},Fmt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=_me(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Vr(n,r.schema)),a==="mark"&&(o=ef(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Lmt=(n,e={})=>({state:t,dispatch:r})=>{const i=Vr(n,t.schema);return ln(i,e)(t,r)},zmt=(n,e={})=>({state:t,dispatch:r})=>{const i=Vr(n,t.schema);return cn(i,e)(t,r)};var Bmt=Object.freeze({__proto__:null,blur:Ept,clearContent:Cpt,clearNodes:Mpt,command:Tpt,createParagraphNear:_pt,cut:Apt,deleteCurrentNode:Ipt,deleteNode:Rpt,deleteRange:Opt,deleteSelection:Ppt,enter:Dpt,exitCode:Npt,extendMarkRange:Lpt,first:zpt,focus:jpt,forEach:Vpt,insertContent:qpt,insertContentAt:Hpt,joinUp:Wpt,joinDown:Gpt,joinBackward:Jpt,joinForward:Qpt,joinItemBackward:Ypt,joinItemForward:Xpt,joinTextblockBackward:Zpt,joinTextblockForward:emt,keyboardShortcut:nmt,lift:rmt,liftEmptyBlock:imt,liftListItem:smt,newlineInCode:omt,resetAttributes:amt,scrollIntoView:lmt,selectAll:cmt,selectNodeBackward:umt,selectNodeForward:dmt,selectParentNode:fmt,selectTextblockEnd:hmt,selectTextblockStart:pmt,setContent:gmt,setMark:Smt,setMeta:wmt,setNode:$mt,setNodeSelection:Emt,setTextSelection:Cmt,sinkListItem:Mmt,splitBlock:Tmt,splitListItem:_mt,toggleList:Amt,toggleMark:Imt,toggleNode:Rmt,toggleWrap:Omt,undoInputRule:Pmt,unsetAllMarks:Dmt,unsetMark:Nmt,updateAttributes:Fmt,wrapIn:Lmt,wrapInList:zmt});V0.create({name:"commands",addCommands(){return{...Bmt}}});V0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});V0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});V0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return QB()||Tme()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=$me({state:t,transaction:d}),{commands:h}=new ypt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});V0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});let jmt=class p5{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ma(Ps(this,"addOptions",{name:this.name}))),this.storage=ma(Ps(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new p5(e)}configure(e={}){const t=this.extend();return t.options=JB(this.options,e),t.storage=ma(Ps(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new p5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ma(Ps(t,"addOptions",{name:t.name})),t.storage=ma(Ps(t,"addStorage",{name:t.name,options:t.options})),t}};const Ame=jmt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",bpt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});function Ime(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Ime(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Rme(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Rme(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Pa=class yi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new yi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new yi(r,i)}cutByIndex(e,t){return e==t?yi.empty:e==0&&t==this.content.length?this:new yi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new yi(i,s)}addToStart(e){return new yi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new yi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Ime(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Rme(this,e,t,r)}findIndex(e,t=-1){if(e==0)return dS(0,e);if(e==this.size)return dS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?dS(r+1,o):dS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return yi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new yi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return yi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new yi(t||e,r)}static from(e){if(!e)return yi.empty;if(e instanceof yi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new yi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Pa.empty=new Pa([],0);const hO={index:0,offset:0};function dS(n,e){return hO.index=n,hO.offset=e,hO}function m5(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!m5(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!m5(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let wl=class g5{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&m5(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return g5.none;if(e instanceof g5)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};wl.none=[];let wC=class Tm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Pme(this.content,e+this.openStart,t);return r&&new Tm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Tm(Ome(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Tm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Tm(Pa.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Tm(e,r,i)}};wC.empty=new wC(Pa.empty,0,0);function Ome(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Ome(s.content,e-i-1,t-i-1)))}function Pme(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Pme(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let Vmt=class y5{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new hQ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new hQ(this,t,!0);return r.addAll(e,t.from,t.to),wC.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Umt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=pQ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=pQ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new y5(e,y5.schemaRules(e)))}};const Dme={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},qmt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Nme={ol:!0,ul:!0},$C=1,EC=2,tb=4;function fQ(n,e,t){return e!=null?(e?$C:0)|(e==="full"?EC:0):n&&n.whitespace=="pre"?$C|EC:t&~tb}let fS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=wl.none,this.stashMarks=[],this.match=o||(a&tb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Pa.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&$C)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Pa.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Pa.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Wmt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Dme.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},hQ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=fQ(null,t.preserveWhitespace,0)|(r?tb:0);i?s=new fS(i.type,i.attrs,wl.none,wl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new fS(null,null,wl.none,wl.none,!0,null,o):s=new fS(e.schema.topNodeType,null,wl.none,wl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(Hmt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&EC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&$C)r.options&EC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Nme.hasOwnProperty(r)&&this.parser.normalizeLists&&Kmt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:qmt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Dme.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=wl.none,r=wl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=fQ(e,i,s.options);s.options&tb&&s.content.length==0&&(o|=tb),this.nodes.push(new fS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Gmt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function Kmt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Nme.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Umt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Hmt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function pQ(n){let e={};for(let t in n)e[t]=n[t];return e}function Wmt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function Gmt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Fme(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let Jmt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Fme({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Xn(n,e,t){return n.config[e]===void 0&&n.parent?Xn(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Xn(n.parent,e,t):null}):n.config[e]}function Qmt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function qr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function CC(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Ymt(n){return typeof n=="function"}function hr(n,e=void 0,...t){return Ymt(n)?e?n.bind(e)(...t):n(...t):n}function Xmt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let Zmt=class{constructor(e){this.find=e.find,this.handler=e.handler}};function egt(n){return Object.prototype.toString.call(n).slice(8,-1)}function pO(n){return egt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function yA(n,e){const t={...n};return pO(n)&&pO(e)&&Object.keys(e).forEach(r=>{pO(e[r])?r in n?t[r]=yA(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let q0=class v5{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=hr(Xn(this,"addOptions",{name:this.name}))),this.storage=hr(Xn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new v5(e)}configure(e={}){const t=this.extend();return t.options=yA(this.options,e),t.storage=hr(Xn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new v5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=hr(Xn(t,"addOptions",{name:t.name})),t.storage=hr(Xn(t,"addStorage",{name:t.name,options:t.options})),t}};function tgt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function ngt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}q0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=ngt(t);return tgt(r,{from:o,to:a},{textSerializers:l})}}})]}});const rgt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),igt=(n=!1)=>({commands:e})=>e.setContent("",n),sgt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},ogt=n=>e=>n(e),agt=()=>({state:n,dispatch:e})=>nn(n,e),lgt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},cgt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},ugt=n=>({tr:e,state:t,dispatch:r})=>{const i=qr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},dgt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},fgt=()=>({state:n,dispatch:e})=>Ht(n,e),hgt=()=>({commands:n})=>n.keyboardShortcut("Enter"),pgt=()=>({state:n,dispatch:e})=>tn(n,e);function MC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Xmt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function b5(n,e,t={}){return n.find(r=>r.type===e&&MC(r.attrs,t))}function mgt(n,e,t={}){return!!b5(n,e,t)}function Lme(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=b5([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(b5([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&mgt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function tf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const ggt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=tf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Lme(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},ygt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function zme(n){return n instanceof D}function sh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function vgt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,sh(0,i,s),sh(n.content.size,i,s)):D.create(n,sh(e,i,s),sh(e,i,s))}function ZB(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const bgt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{ZB()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!zme(t.state.selection))return o(),!0;const a=vgt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},kgt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),xgt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Bme=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Bme(r)}return n};function mQ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Bme(t)}function TC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Pa.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),TC("",e,t)}if(typeof n=="string"){const r=Vmt.fromSchema(e);return t.slice?r.parseSlice(mQ(n),t.parseOptions).content:r.parse(mQ(n),t.parseOptions)}return TC("",e,t)}function Sgt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const wgt=n=>n.toString().startsWith("<"),$gt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=TC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((wgt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&Sgt(r,r.steps.length-1,-1)}return!0},Egt=()=>({state:n,dispatch:e})=>Yt(n,e),Cgt=()=>({state:n,dispatch:e})=>Xt(n,e),Mgt=()=>({state:n,dispatch:e})=>Wt(n,e),Tgt=()=>({state:n,dispatch:e})=>Jt(n,e),_gt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Agt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Igt=()=>({state:n,dispatch:e})=>Cn(n,e),Rgt=()=>({state:n,dispatch:e})=>Mn(n,e);function jme(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Ogt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))ZB()||jme()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const Pgt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Ogt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function e7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?qr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>MC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Dgt=(n,e={})=>({state:t,dispatch:r})=>{const i=qr(n,t.schema);return e7(t,i,e)?Zt(t,r):!1},Ngt=()=>({state:n,dispatch:e})=>rn(n,e),Fgt=n=>({state:e,dispatch:t})=>{const r=qr(n,e.schema);return un(r)(e,t)},Lgt=()=>({state:n,dispatch:e})=>en(n,e);function Vme(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function gQ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const zgt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Vme(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=qr(n,r.schema)),a==="mark"&&(o=tf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,gQ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(gQ(d.attrs,e)))})})}),!0):!1},Bgt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),jgt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Vgt=()=>({state:n,dispatch:e})=>Gt(n,e),qgt=()=>({state:n,dispatch:e})=>Qt(n,e),Kgt=()=>({state:n,dispatch:e})=>sn(n,e),Ugt=()=>({state:n,dispatch:e})=>an(n,e),Hgt=()=>({state:n,dispatch:e})=>on(n,e);function Wgt(n,e,t={}){return TC(n,e,{slice:!1,parseOptions:t})}const Ggt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Wgt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function qme(n,e){const t=tf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Jgt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Qgt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function t7(n){return e=>Qgt(e.$from,n)}function Zw(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Ygt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?tf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>MC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>MC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function yQ(n,e){const{nodeExtensions:t}=Qmt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=hr(Xn(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Xgt(n,e,t){var r;const{selection:i}=e;let s=null;if(zme(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Zgt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=tf(n,r.schema);if(i)if(o){const c=qme(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return Xgt(r,t,l)},e0t=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),t0t=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=qr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},n0t=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=sh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},r0t=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=sh(i,o,a),c=sh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},i0t=n=>({state:e,dispatch:t})=>{const r=qr(n,e.schema);return dn(r)(e,t)};function vQ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const s0t=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Zw(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&vQ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Jgt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&vQ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},o0t=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=qr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Pa.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Pa.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=Zw(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Pa.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new wC(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Zw(d,u.type.name,u.attrs),p=Zw(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},mO=(n,e)=>{const t=t7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},gO=(n,e)=>{const t=t7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},a0t=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=qr(n,o.schema),p=qr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=t7(x=>yQ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(yQ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>mO(s,h)).command(()=>gO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>mO(s,h)).command(()=>gO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>mO(s,h)).command(()=>gO(s,h)).run()},l0t=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=tf(n,r.schema);return Ygt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},c0t=(n,e,t={})=>({state:r,commands:i})=>{const s=qr(n,r.schema),o=qr(e,r.schema);return e7(r,s,t)?i.setNode(o):i.setNode(s,t)},u0t=(n,e={})=>({state:t,commands:r})=>{const i=qr(n,t.schema);return e7(t,i,e)?r.lift(i):r.wrapIn(i,e)},d0t=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},f0t=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},h0t=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=tf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Lme(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},p0t=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Vme(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=qr(n,r.schema)),a==="mark"&&(o=tf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},m0t=(n,e={})=>({state:t,dispatch:r})=>{const i=qr(n,t.schema);return ln(i,e)(t,r)},g0t=(n,e={})=>({state:t,dispatch:r})=>{const i=qr(n,t.schema);return cn(i,e)(t,r)};var y0t=Object.freeze({__proto__:null,blur:rgt,clearContent:igt,clearNodes:sgt,command:ogt,createParagraphNear:agt,cut:lgt,deleteCurrentNode:cgt,deleteNode:ugt,deleteRange:dgt,deleteSelection:fgt,enter:hgt,exitCode:pgt,extendMarkRange:ggt,first:ygt,focus:bgt,forEach:kgt,insertContent:xgt,insertContentAt:$gt,joinUp:Egt,joinDown:Cgt,joinBackward:Mgt,joinForward:Tgt,joinItemBackward:_gt,joinItemForward:Agt,joinTextblockBackward:Igt,joinTextblockForward:Rgt,keyboardShortcut:Pgt,lift:Dgt,liftEmptyBlock:Ngt,liftListItem:Fgt,newlineInCode:Lgt,resetAttributes:zgt,scrollIntoView:Bgt,selectAll:jgt,selectNodeBackward:Vgt,selectNodeForward:qgt,selectParentNode:Kgt,selectTextblockEnd:Ugt,selectTextblockStart:Hgt,setContent:Ggt,setMark:Zgt,setMeta:e0t,setNode:t0t,setNodeSelection:n0t,setTextSelection:r0t,sinkListItem:i0t,splitBlock:s0t,splitListItem:o0t,toggleList:a0t,toggleMark:l0t,toggleNode:c0t,toggleWrap:u0t,undoInputRule:d0t,unsetAllMarks:f0t,unsetMark:h0t,updateAttributes:p0t,wrapIn:m0t,wrapInList:g0t});q0.create({name:"commands",addCommands(){return{...y0t}}});q0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});q0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});q0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ZB()||jme()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Fme({state:t,transaction:d}),{commands:h}=new Jmt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});q0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function bQ(n){return new Zmt({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=hr(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&u1(l,n.type,s);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=n.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Me(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&o.join(t.from-1)}})}let v0t=class k5{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=hr(Xn(this,"addOptions",{name:this.name}))),this.storage=hr(Xn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new k5(e)}configure(e={}){const t=this.extend();return t.options=yA(this.options,e),t.storage=hr(Xn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new k5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=hr(Xn(t,"addOptions",{name:t.name})),t.storage=hr(Xn(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}},Kme=class x5{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=hr(Xn(this,"addOptions",{name:this.name}))),this.storage=hr(Xn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new x5(e)}configure(e={}){const t=this.extend();return t.options=yA(this.options,e),t.storage=hr(Xn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new x5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=hr(Xn(t,"addOptions",{name:t.name})),t.storage=hr(Xn(t,"addStorage",{name:t.name,options:t.options})),t}};const b0t=Kme.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",CC(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),kQ=v0t.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",CC(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=qme(n,this.type);return Object.entries(t).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),xQ=/^(\d+)\.\s$/,Ume=Kme.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",CC(this.options.HTMLAttributes,t),0]:["ol",CC(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(b0t.name,this.editor.getAttributes(kQ.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=bQ({find:xQ,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=bQ({find:xQ,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(kQ.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}});function Hme(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Hme(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Wme(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Wme(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Da=class vi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new vi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new vi(r,i)}cutByIndex(e,t){return e==t?vi.empty:e==0&&t==this.content.length?this:new vi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new vi(i,s)}addToStart(e){return new vi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new vi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Hme(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Wme(this,e,t,r)}findIndex(e,t=-1){if(e==0)return hS(0,e);if(e==this.size)return hS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?hS(r+1,o):hS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return vi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new vi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return vi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new vi(t||e,r)}static from(e){if(!e)return vi.empty;if(e instanceof vi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new vi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Da.empty=new Da([],0);const yO={index:0,offset:0};function hS(n,e){return yO.index=n,yO.offset=e,yO}function S5(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!S5(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!S5(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let $l=class w5{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&S5(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return w5.none;if(e instanceof w5)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};$l.none=[];let _C=class _m{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Jme(this.content,e+this.openStart,t);return r&&new _m(r,this.openStart,this.openEnd)}removeBetween(e,t){return new _m(Gme(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return _m.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new _m(Da.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new _m(e,r,i)}};_C.empty=new _C(Da.empty,0,0);function Gme(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Gme(s.content,e-i-1,t-i-1)))}function Jme(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Jme(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let k0t=class $5{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new wQ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new wQ(this,t,!0);return r.addAll(e,t.from,t.to),_C.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(w0t(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=$Q(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=$Q(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new $5(e,$5.schemaRules(e)))}};const Qme={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},x0t={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Yme={ol:!0,ul:!0},AC=1,IC=2,nb=4;function SQ(n,e,t){return e!=null?(e?AC:0)|(e==="full"?IC:0):n&&n.whitespace=="pre"?AC|IC:t&~nb}let pS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=$l.none,this.stashMarks=[],this.match=o||(a&nb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Da.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&AC)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Da.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Da.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):E0t(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Qme.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},wQ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=SQ(null,t.preserveWhitespace,0)|(r?nb:0);i?s=new pS(i.type,i.attrs,$l.none,$l.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new pS(null,null,$l.none,$l.none,!0,null,o):s=new pS(e.schema.topNodeType,null,$l.none,$l.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles($0t(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&IC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&AC)r.options&IC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Yme.hasOwnProperty(r)&&this.parser.normalizeLists&&S0t(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:x0t.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Qme.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=$l.none,r=$l.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=SQ(e,i,s.options);s.options&nb&&s.content.length==0&&(o|=nb),this.nodes.push(new pS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=C0t(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function S0t(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Yme.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function w0t(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function $0t(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function $Q(n){let e={};for(let t in n)e[t]=n[t];return e}function E0t(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function C0t(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Xme(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let M0t=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Xme({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Ds(n,e,t){return n.config[e]===void 0&&n.parent?Ds(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ds(n.parent,e,t):null}):n.config[e]}function T0t(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Kr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function _0t(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function A0t(n){return typeof n=="function"}function ga(n,e=void 0,...t){return A0t(n)?e?n.bind(e)(...t):n(...t):n}function I0t(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function R0t(n){return Object.prototype.toString.call(n).slice(8,-1)}function vO(n){return R0t(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function n7(n,e){const t={...n};return vO(n)&&vO(e)&&Object.keys(e).forEach(r=>{vO(e[r])?r in n?t[r]=n7(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let K0=class E5{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ga(Ds(this,"addOptions",{name:this.name}))),this.storage=ga(Ds(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new E5(e)}configure(e={}){const t=this.extend();return t.options=n7(this.options,e),t.storage=ga(Ds(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new E5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ga(Ds(t,"addOptions",{name:t.name})),t.storage=ga(Ds(t,"addStorage",{name:t.name,options:t.options})),t}};function O0t(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function P0t(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}K0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=P0t(t);return O0t(r,{from:o,to:a},{textSerializers:l})}}})]}});const D0t=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),N0t=(n=!1)=>({commands:e})=>e.setContent("",n),F0t=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},L0t=n=>e=>n(e),z0t=()=>({state:n,dispatch:e})=>nn(n,e),B0t=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},j0t=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},V0t=n=>({tr:e,state:t,dispatch:r})=>{const i=Kr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},q0t=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},K0t=()=>({state:n,dispatch:e})=>Ht(n,e),U0t=()=>({commands:n})=>n.keyboardShortcut("Enter"),H0t=()=>({state:n,dispatch:e})=>tn(n,e);function RC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:I0t(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function C5(n,e,t={}){return n.find(r=>r.type===e&&RC(r.attrs,t))}function W0t(n,e,t={}){return!!C5(n,e,t)}function Zme(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=C5([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(C5([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&W0t([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function nf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const G0t=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=nf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Zme(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},J0t=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function ege(n){return n instanceof D}function oh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Q0t(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,oh(0,i,s),oh(n.content.size,i,s)):D.create(n,oh(e,i,s),oh(e,i,s))}function r7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Y0t=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{r7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!ege(t.state.selection))return o(),!0;const a=Q0t(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},X0t=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Z0t=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),tge=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&tge(r)}return n};function EQ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return tge(t)}function OC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Da.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),OC("",e,t)}if(typeof n=="string"){const r=k0t.fromSchema(e);return t.slice?r.parseSlice(EQ(n),t.parseOptions).content:r.parse(EQ(n),t.parseOptions)}return OC("",e,t)}function eyt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const tyt=n=>n.toString().startsWith("<"),nyt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=OC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((tyt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&eyt(r,r.steps.length-1,-1)}return!0},ryt=()=>({state:n,dispatch:e})=>Yt(n,e),iyt=()=>({state:n,dispatch:e})=>Xt(n,e),syt=()=>({state:n,dispatch:e})=>Wt(n,e),oyt=()=>({state:n,dispatch:e})=>Jt(n,e),ayt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},lyt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},cyt=()=>({state:n,dispatch:e})=>Cn(n,e),uyt=()=>({state:n,dispatch:e})=>Mn(n,e);function nge(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dyt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))r7()||nge()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const fyt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=dyt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function i7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Kr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>RC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const hyt=(n,e={})=>({state:t,dispatch:r})=>{const i=Kr(n,t.schema);return i7(t,i,e)?Zt(t,r):!1},pyt=()=>({state:n,dispatch:e})=>rn(n,e),myt=n=>({state:e,dispatch:t})=>{const r=Kr(n,e.schema);return un(r)(e,t)},gyt=()=>({state:n,dispatch:e})=>en(n,e);function rge(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function CQ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const yyt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=rge(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Kr(n,r.schema)),a==="mark"&&(o=nf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,CQ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(CQ(d.attrs,e)))})})}),!0):!1},vyt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),byt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),kyt=()=>({state:n,dispatch:e})=>Gt(n,e),xyt=()=>({state:n,dispatch:e})=>Qt(n,e),Syt=()=>({state:n,dispatch:e})=>sn(n,e),wyt=()=>({state:n,dispatch:e})=>an(n,e),$yt=()=>({state:n,dispatch:e})=>on(n,e);function Eyt(n,e,t={}){return OC(n,e,{slice:!1,parseOptions:t})}const Cyt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Eyt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Myt(n,e){const t=nf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Tyt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function _yt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function s7(n){return e=>_yt(e.$from,n)}function e$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Ayt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?nf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>RC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>RC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function MQ(n,e){const{nodeExtensions:t}=T0t(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ga(Ds(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Iyt(n,e,t){var r;const{selection:i}=e;let s=null;if(ege(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Ryt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=nf(n,r.schema);if(i)if(o){const c=Myt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return Iyt(r,t,l)},Oyt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Pyt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Kr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Dyt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=oh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},Nyt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=oh(i,o,a),c=oh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},Fyt=n=>({state:e,dispatch:t})=>{const r=Kr(n,e.schema);return dn(r)(e,t)};function TQ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Lyt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=e$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&TQ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Tyt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&TQ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},zyt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Kr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Da.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Da.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=e$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Da.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new _C(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=e$(d,u.type.name,u.attrs),p=e$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},bO=(n,e)=>{const t=s7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},kO=(n,e)=>{const t=s7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},Byt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Kr(n,o.schema),p=Kr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=s7(x=>MQ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(MQ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>bO(s,h)).command(()=>kO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>bO(s,h)).command(()=>kO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>bO(s,h)).command(()=>kO(s,h)).run()},jyt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=nf(n,r.schema);return Ayt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Vyt=(n,e,t={})=>({state:r,commands:i})=>{const s=Kr(n,r.schema),o=Kr(e,r.schema);return i7(r,s,t)?i.setNode(o):i.setNode(s,t)},qyt=(n,e={})=>({state:t,commands:r})=>{const i=Kr(n,t.schema);return i7(t,i,e)?r.lift(i):r.wrapIn(i,e)},Kyt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Uyt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Hyt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=nf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Zme(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},Wyt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=rge(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Kr(n,r.schema)),a==="mark"&&(o=nf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Gyt=(n,e={})=>({state:t,dispatch:r})=>{const i=Kr(n,t.schema);return ln(i,e)(t,r)},Jyt=(n,e={})=>({state:t,dispatch:r})=>{const i=Kr(n,t.schema);return cn(i,e)(t,r)};var Qyt=Object.freeze({__proto__:null,blur:D0t,clearContent:N0t,clearNodes:F0t,command:L0t,createParagraphNear:z0t,cut:B0t,deleteCurrentNode:j0t,deleteNode:V0t,deleteRange:q0t,deleteSelection:K0t,enter:U0t,exitCode:H0t,extendMarkRange:G0t,first:J0t,focus:Y0t,forEach:X0t,insertContent:Z0t,insertContentAt:nyt,joinUp:ryt,joinDown:iyt,joinBackward:syt,joinForward:oyt,joinItemBackward:ayt,joinItemForward:lyt,joinTextblockBackward:cyt,joinTextblockForward:uyt,keyboardShortcut:fyt,lift:hyt,liftEmptyBlock:pyt,liftListItem:myt,newlineInCode:gyt,resetAttributes:yyt,scrollIntoView:vyt,selectAll:byt,selectNodeBackward:kyt,selectNodeForward:xyt,selectParentNode:Syt,selectTextblockEnd:wyt,selectTextblockStart:$yt,setContent:Cyt,setMark:Ryt,setMeta:Oyt,setNode:Pyt,setNodeSelection:Dyt,setTextSelection:Nyt,sinkListItem:Fyt,splitBlock:Lyt,splitListItem:zyt,toggleList:Byt,toggleMark:jyt,toggleNode:Vyt,toggleWrap:qyt,undoInputRule:Kyt,unsetAllMarks:Uyt,unsetMark:Hyt,updateAttributes:Wyt,wrapIn:Gyt,wrapInList:Jyt});K0.create({name:"commands",addCommands(){return{...Qyt}}});K0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});K0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});K0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return r7()||nge()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Xme({state:t,transaction:d}),{commands:h}=new M0t({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});K0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});let Yyt=class M5{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ga(Ds(this,"addOptions",{name:this.name}))),this.storage=ga(Ds(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new M5(e)}configure(e={}){const t=this.extend();return t.options=n7(this.options,e),t.storage=ga(Ds(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new M5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ga(Ds(t,"addOptions",{name:t.name})),t.storage=ga(Ds(t,"addStorage",{name:t.name,options:t.options})),t}};const o7=Yyt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",_0t(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});function ige(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=ige(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function sge(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=sge(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Na=class bi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new bi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new bi(r,i)}cutByIndex(e,t){return e==t?bi.empty:e==0&&t==this.content.length?this:new bi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new bi(i,s)}addToStart(e){return new bi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new bi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return ige(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return sge(this,e,t,r)}findIndex(e,t=-1){if(e==0)return mS(0,e);if(e==this.size)return mS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?mS(r+1,o):mS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return bi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new bi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return bi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new bi(t||e,r)}static from(e){if(!e)return bi.empty;if(e instanceof bi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new bi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Na.empty=new Na([],0);const xO={index:0,offset:0};function mS(n,e){return xO.index=n,xO.offset=e,xO}function T5(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!T5(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!T5(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let El=class _5{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&T5(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return _5.none;if(e instanceof _5)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};El.none=[];let PC=class Am{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=age(this.content,e+this.openStart,t);return r&&new Am(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Am(oge(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Am.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Am(Na.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Am(e,r,i)}};PC.empty=new PC(Na.empty,0,0);function oge(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(oge(s.content,e-i-1,t-i-1)))}function age(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=age(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let Xyt=class A5{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new AQ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new AQ(this,t,!0);return r.addAll(e,t.from,t.to),PC.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(tvt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=IQ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=IQ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new A5(e,A5.schemaRules(e)))}};const lge={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Zyt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},cge={ol:!0,ul:!0},DC=1,NC=2,rb=4;function _Q(n,e,t){return e!=null?(e?DC:0)|(e==="full"?NC:0):n&&n.whitespace=="pre"?DC|NC:t&~rb}let gS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=El.none,this.stashMarks=[],this.match=o||(a&rb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Na.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&DC)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Na.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Na.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):rvt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!lge.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},AQ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=_Q(null,t.preserveWhitespace,0)|(r?rb:0);i?s=new gS(i.type,i.attrs,El.none,El.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new gS(null,null,El.none,El.none,!0,null,o):s=new gS(e.schema.topNodeType,null,El.none,El.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(nvt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&NC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&DC)r.options&NC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;cge.hasOwnProperty(r)&&this.parser.normalizeLists&&evt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Zyt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(lge.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=El.none,r=El.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=_Q(e,i,s.options);s.options&rb&&s.content.length==0&&(o|=rb),this.nodes.push(new gS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=ivt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function evt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&cge.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function tvt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function nvt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function IQ(n){let e={};for(let t in n)e[t]=n[t];return e}function rvt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function ivt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function uge(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let svt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:uge({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Ns(n,e,t){return n.config[e]===void 0&&n.parent?Ns(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ns(n.parent,e,t):null}):n.config[e]}function ovt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Ur(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function avt(n){return typeof n=="function"}function ya(n,e=void 0,...t){return avt(n)?e?n.bind(e)(...t):n(...t):n}function lvt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function cvt(n){return Object.prototype.toString.call(n).slice(8,-1)}function SO(n){return cvt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function a7(n,e){const t={...n};return SO(n)&&SO(e)&&Object.keys(e).forEach(r=>{SO(e[r])?r in n?t[r]=a7(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let U0=class I5{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ya(Ns(this,"addOptions",{name:this.name}))),this.storage=ya(Ns(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new I5(e)}configure(e={}){const t=this.extend();return t.options=a7(this.options,e),t.storage=ya(Ns(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new I5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ya(Ns(t,"addOptions",{name:t.name})),t.storage=ya(Ns(t,"addStorage",{name:t.name,options:t.options})),t}};function uvt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function dvt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}U0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=dvt(t);return uvt(r,{from:o,to:a},{textSerializers:l})}}})]}});const fvt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),hvt=(n=!1)=>({commands:e})=>e.setContent("",n),pvt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},mvt=n=>e=>n(e),gvt=()=>({state:n,dispatch:e})=>nn(n,e),yvt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},vvt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},bvt=n=>({tr:e,state:t,dispatch:r})=>{const i=Ur(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},kvt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},xvt=()=>({state:n,dispatch:e})=>Ht(n,e),Svt=()=>({commands:n})=>n.keyboardShortcut("Enter"),wvt=()=>({state:n,dispatch:e})=>tn(n,e);function FC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:lvt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function R5(n,e,t={}){return n.find(r=>r.type===e&&FC(r.attrs,t))}function $vt(n,e,t={}){return!!R5(n,e,t)}function dge(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=R5([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(R5([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&$vt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function rf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Evt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=rf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=dge(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},Cvt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function fge(n){return n instanceof D}function ah(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Mvt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,ah(0,i,s),ah(n.content.size,i,s)):D.create(n,ah(e,i,s),ah(e,i,s))}function l7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Tvt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{l7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!fge(t.state.selection))return o(),!0;const a=Mvt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},_vt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Avt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),hge=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&hge(r)}return n};function RQ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return hge(t)}function LC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Na.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),LC("",e,t)}if(typeof n=="string"){const r=Xyt.fromSchema(e);return t.slice?r.parseSlice(RQ(n),t.parseOptions).content:r.parse(RQ(n),t.parseOptions)}return LC("",e,t)}function Ivt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const Rvt=n=>n.toString().startsWith("<"),Ovt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=LC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((Rvt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&Ivt(r,r.steps.length-1,-1)}return!0},Pvt=()=>({state:n,dispatch:e})=>Yt(n,e),Dvt=()=>({state:n,dispatch:e})=>Xt(n,e),Nvt=()=>({state:n,dispatch:e})=>Wt(n,e),Fvt=()=>({state:n,dispatch:e})=>Jt(n,e),Lvt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},zvt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Bvt=()=>({state:n,dispatch:e})=>Cn(n,e),jvt=()=>({state:n,dispatch:e})=>Mn(n,e);function pge(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Vvt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))l7()||pge()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const qvt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Vvt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function c7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Ur(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>FC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Kvt=(n,e={})=>({state:t,dispatch:r})=>{const i=Ur(n,t.schema);return c7(t,i,e)?Zt(t,r):!1},Uvt=()=>({state:n,dispatch:e})=>rn(n,e),Hvt=n=>({state:e,dispatch:t})=>{const r=Ur(n,e.schema);return un(r)(e,t)},Wvt=()=>({state:n,dispatch:e})=>en(n,e);function mge(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function OQ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Gvt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=mge(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Ur(n,r.schema)),a==="mark"&&(o=rf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,OQ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(OQ(d.attrs,e)))})})}),!0):!1},Jvt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Qvt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Yvt=()=>({state:n,dispatch:e})=>Gt(n,e),Xvt=()=>({state:n,dispatch:e})=>Qt(n,e),Zvt=()=>({state:n,dispatch:e})=>sn(n,e),ebt=()=>({state:n,dispatch:e})=>an(n,e),tbt=()=>({state:n,dispatch:e})=>on(n,e);function nbt(n,e,t={}){return LC(n,e,{slice:!1,parseOptions:t})}const rbt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=nbt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function ibt(n,e){const t=rf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function sbt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function obt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function u7(n){return e=>obt(e.$from,n)}function t$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function abt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?rf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>FC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>FC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function PQ(n,e){const{nodeExtensions:t}=ovt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ya(Ns(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function lbt(n,e,t){var r;const{selection:i}=e;let s=null;if(fge(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const cbt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=rf(n,r.schema);if(i)if(o){const c=ibt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return lbt(r,t,l)},ubt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),dbt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Ur(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},fbt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=ah(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},hbt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=ah(i,o,a),c=ah(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},pbt=n=>({state:e,dispatch:t})=>{const r=Ur(n,e.schema);return dn(r)(e,t)};function DQ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const mbt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=t$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&DQ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:sbt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&DQ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},gbt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Ur(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Na.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Na.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=t$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Na.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new PC(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=t$(d,u.type.name,u.attrs),p=t$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},wO=(n,e)=>{const t=u7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},$O=(n,e)=>{const t=u7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},ybt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Ur(n,o.schema),p=Ur(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=u7(x=>PQ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(PQ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>wO(s,h)).command(()=>$O(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>wO(s,h)).command(()=>$O(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>wO(s,h)).command(()=>$O(s,h)).run()},vbt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=rf(n,r.schema);return abt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},bbt=(n,e,t={})=>({state:r,commands:i})=>{const s=Ur(n,r.schema),o=Ur(e,r.schema);return c7(r,s,t)?i.setNode(o):i.setNode(s,t)},kbt=(n,e={})=>({state:t,commands:r})=>{const i=Ur(n,t.schema);return c7(t,i,e)?r.lift(i):r.wrapIn(i,e)},xbt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Sbt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},wbt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=rf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=dge(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},$bt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=mge(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Ur(n,r.schema)),a==="mark"&&(o=rf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Ebt=(n,e={})=>({state:t,dispatch:r})=>{const i=Ur(n,t.schema);return ln(i,e)(t,r)},Cbt=(n,e={})=>({state:t,dispatch:r})=>{const i=Ur(n,t.schema);return cn(i,e)(t,r)};var Mbt=Object.freeze({__proto__:null,blur:fvt,clearContent:hvt,clearNodes:pvt,command:mvt,createParagraphNear:gvt,cut:yvt,deleteCurrentNode:vvt,deleteNode:bvt,deleteRange:kvt,deleteSelection:xvt,enter:Svt,exitCode:wvt,extendMarkRange:Evt,first:Cvt,focus:Tvt,forEach:_vt,insertContent:Avt,insertContentAt:Ovt,joinUp:Pvt,joinDown:Dvt,joinBackward:Nvt,joinForward:Fvt,joinItemBackward:Lvt,joinItemForward:zvt,joinTextblockBackward:Bvt,joinTextblockForward:jvt,keyboardShortcut:qvt,lift:Kvt,liftEmptyBlock:Uvt,liftListItem:Hvt,newlineInCode:Wvt,resetAttributes:Gvt,scrollIntoView:Jvt,selectAll:Qvt,selectNodeBackward:Yvt,selectNodeForward:Xvt,selectParentNode:Zvt,selectTextblockEnd:ebt,selectTextblockStart:tbt,setContent:rbt,setMark:cbt,setMeta:ubt,setNode:dbt,setNodeSelection:fbt,setTextSelection:hbt,sinkListItem:pbt,splitBlock:mbt,splitListItem:gbt,toggleList:ybt,toggleMark:vbt,toggleNode:bbt,toggleWrap:kbt,undoInputRule:xbt,unsetAllMarks:Sbt,unsetMark:wbt,updateAttributes:$bt,wrapIn:Ebt,wrapInList:Cbt});U0.create({name:"commands",addCommands(){return{...Mbt}}});U0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});U0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});U0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return l7()||pge()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=uge({state:t,transaction:d}),{commands:h}=new svt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});U0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});let Tbt=class O5{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ya(Ns(this,"addOptions",{name:this.name}))),this.storage=ya(Ns(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new O5(e)}configure(e={}){const t=this.extend();return t.options=a7(this.options,e),t.storage=ya(Ns(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new O5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ya(Ns(t,"addOptions",{name:t.name})),t.storage=ya(Ns(t,"addStorage",{name:t.name,options:t.options})),t}};const d7=Tbt.create({name:"text",group:"inline"});function gge(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=gge(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function yge(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=yge(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Fa=class ki{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ki(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ki(r,i)}cutByIndex(e,t){return e==t?ki.empty:e==0&&t==this.content.length?this:new ki(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ki(i,s)}addToStart(e){return new ki([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ki(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return gge(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return yge(this,e,t,r)}findIndex(e,t=-1){if(e==0)return yS(0,e);if(e==this.size)return yS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?yS(r+1,o):yS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ki.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ki(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ki.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ki(t||e,r)}static from(e){if(!e)return ki.empty;if(e instanceof ki)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ki([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Fa.empty=new Fa([],0);const EO={index:0,offset:0};function yS(n,e){return EO.index=n,EO.offset=e,EO}function P5(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!P5(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!P5(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Cl=class D5{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&P5(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return D5.none;if(e instanceof D5)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Cl.none=[];let zC=class Im{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=bge(this.content,e+this.openStart,t);return r&&new Im(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Im(vge(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Im.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Im(Fa.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Im(e,r,i)}};zC.empty=new zC(Fa.empty,0,0);function vge(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(vge(s.content,e-i-1,t-i-1)))}function bge(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=bge(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let _bt=class N5{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new FQ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new FQ(this,t,!0);return r.addAll(e,t.from,t.to),zC.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Rbt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=LQ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=LQ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new N5(e,N5.schemaRules(e)))}};const kge={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Abt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},xge={ol:!0,ul:!0},BC=1,jC=2,ib=4;function NQ(n,e,t){return e!=null?(e?BC:0)|(e==="full"?jC:0):n&&n.whitespace=="pre"?BC|jC:t&~ib}let vS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Cl.none,this.stashMarks=[],this.match=o||(a&ib?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Fa.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&BC)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Fa.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Fa.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Pbt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!kge.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},FQ=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=NQ(null,t.preserveWhitespace,0)|(r?ib:0);i?s=new vS(i.type,i.attrs,Cl.none,Cl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new vS(null,null,Cl.none,Cl.none,!0,null,o):s=new vS(e.schema.topNodeType,null,Cl.none,Cl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(Obt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&jC||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&BC)r.options&jC?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;xge.hasOwnProperty(r)&&this.parser.normalizeLists&&Ibt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Abt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(kge.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Cl.none,r=Cl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=NQ(e,i,s.options);s.options&ib&&s.content.length==0&&(o|=ib),this.nodes.push(new vS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Dbt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function Ibt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&xge.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Rbt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Obt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function LQ(n){let e={};for(let t in n)e[t]=n[t];return e}function Pbt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function Dbt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Sge(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let Nbt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Sge({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Fs(n,e,t){return n.config[e]===void 0&&n.parent?Fs(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Fs(n.parent,e,t):null}):n.config[e]}function Fbt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function yr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function zQ(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Lbt(n){return typeof n=="function"}function Ao(n,e=void 0,...t){return Lbt(n)?e?n.bind(e)(...t):n(...t):n}function zbt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let Bbt=class{constructor(e){this.find=e.find,this.handler=e.handler}};function jbt(n){return Object.prototype.toString.call(n).slice(8,-1)}function CO(n){return jbt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function f7(n,e){const t={...n};return CO(n)&&CO(e)&&Object.keys(e).forEach(r=>{CO(e[r])?r in n?t[r]=f7(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let H0=class F5{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ao(Fs(this,"addOptions",{name:this.name}))),this.storage=Ao(Fs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new F5(e)}configure(e={}){const t=this.extend();return t.options=f7(this.options,e),t.storage=Ao(Fs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new F5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ao(Fs(t,"addOptions",{name:t.name})),t.storage=Ao(Fs(t,"addStorage",{name:t.name,options:t.options})),t}};function Vbt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function qbt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}H0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=qbt(t);return Vbt(r,{from:o,to:a},{textSerializers:l})}}})]}});const Kbt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Ubt=(n=!1)=>({commands:e})=>e.setContent("",n),Hbt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},Wbt=n=>e=>n(e),Gbt=()=>({state:n,dispatch:e})=>nn(n,e),Jbt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},Qbt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},Ybt=n=>({tr:e,state:t,dispatch:r})=>{const i=yr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Xbt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},Zbt=()=>({state:n,dispatch:e})=>Ht(n,e),ekt=()=>({commands:n})=>n.keyboardShortcut("Enter"),tkt=()=>({state:n,dispatch:e})=>tn(n,e);function VC(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:zbt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function L5(n,e,t={}){return n.find(r=>r.type===e&&VC(r.attrs,t))}function nkt(n,e,t={}){return!!L5(n,e,t)}function h7(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=L5([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(L5([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&nkt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function sf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const rkt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=sf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=h7(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},ikt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function wge(n){return n instanceof D}function lh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function skt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,lh(0,i,s),lh(n.content.size,i,s)):D.create(n,lh(e,i,s),lh(e,i,s))}function p7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const okt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{p7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!wge(t.state.selection))return o(),!0;const a=skt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},akt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),lkt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),$ge=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&$ge(r)}return n};function BQ(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return $ge(t)}function qC(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Fa.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),qC("",e,t)}if(typeof n=="string"){const r=_bt.fromSchema(e);return t.slice?r.parseSlice(BQ(n),t.parseOptions).content:r.parse(BQ(n),t.parseOptions)}return qC("",e,t)}function ckt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const ukt=n=>n.toString().startsWith("<"),dkt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=qC(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((ukt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&ckt(r,r.steps.length-1,-1)}return!0},fkt=()=>({state:n,dispatch:e})=>Yt(n,e),hkt=()=>({state:n,dispatch:e})=>Xt(n,e),pkt=()=>({state:n,dispatch:e})=>Wt(n,e),mkt=()=>({state:n,dispatch:e})=>Jt(n,e),gkt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},ykt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},vkt=()=>({state:n,dispatch:e})=>Cn(n,e),bkt=()=>({state:n,dispatch:e})=>Mn(n,e);function Ege(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function kkt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))p7()||Ege()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const xkt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=kkt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function m7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?yr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>VC(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Skt=(n,e={})=>({state:t,dispatch:r})=>{const i=yr(n,t.schema);return m7(t,i,e)?Zt(t,r):!1},wkt=()=>({state:n,dispatch:e})=>rn(n,e),$kt=n=>({state:e,dispatch:t})=>{const r=yr(n,e.schema);return un(r)(e,t)},Ekt=()=>({state:n,dispatch:e})=>en(n,e);function g7(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function jQ(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Ckt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=g7(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=yr(n,r.schema)),a==="mark"&&(o=sf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,jQ(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(jQ(d.attrs,e)))})})}),!0):!1},Mkt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Tkt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),_kt=()=>({state:n,dispatch:e})=>Gt(n,e),Akt=()=>({state:n,dispatch:e})=>Qt(n,e),Ikt=()=>({state:n,dispatch:e})=>sn(n,e),Rkt=()=>({state:n,dispatch:e})=>an(n,e),Okt=()=>({state:n,dispatch:e})=>on(n,e);function Pkt(n,e,t={}){return qC(n,e,{slice:!1,parseOptions:t})}const Dkt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Pkt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Cge(n,e){const t=sf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Nkt(n,e){const t=new Jde(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function Fkt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Lkt(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function zkt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function y7(n){return e=>zkt(e.$from,n)}function Bkt(n,e){const t=yr(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function jkt(n,e){const t=g7(typeof e=="string"?e:e.name,n.schema);return t==="node"?Bkt(n,e):t==="mark"?Cge(n,e):{}}function Vkt(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function qkt(n){const e=Vkt(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,o)=>o!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function Kkt(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),qkt(r)}function Mge(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n-1),o=h7(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function n$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Ukt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?sf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>VC(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>VC(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function VQ(n,e){const{nodeExtensions:t}=Fbt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Ao(Fs(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Hkt(n,e,t){var r;const{selection:i}=e;let s=null;if(wge(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Wkt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=sf(n,r.schema);if(i)if(o){const c=Cge(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return Hkt(r,t,l)},Gkt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Jkt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=yr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Qkt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=lh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},Ykt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=lh(i,o,a),c=lh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},Xkt=n=>({state:e,dispatch:t})=>{const r=yr(n,e.schema);return dn(r)(e,t)};function qQ(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Zkt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=n$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&qQ(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Fkt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&qQ(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},e1t=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=yr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Fa.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Fa.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=n$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Fa.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new zC(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=n$(d,u.type.name,u.attrs),p=n$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},MO=(n,e)=>{const t=y7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},TO=(n,e)=>{const t=y7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},t1t=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=yr(n,o.schema),p=yr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=y7(x=>VQ(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(VQ(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>MO(s,h)).command(()=>TO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>MO(s,h)).command(()=>TO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>MO(s,h)).command(()=>TO(s,h)).run()},n1t=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=sf(n,r.schema);return Ukt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},r1t=(n,e,t={})=>({state:r,commands:i})=>{const s=yr(n,r.schema),o=yr(e,r.schema);return m7(r,s,t)?i.setNode(o):i.setNode(s,t)},i1t=(n,e={})=>({state:t,commands:r})=>{const i=yr(n,t.schema);return m7(t,i,e)?r.lift(i):r.wrapIn(i,e)},s1t=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},o1t=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},a1t=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=sf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=h7(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},l1t=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=g7(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=yr(n,r.schema)),a==="mark"&&(o=sf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},c1t=(n,e={})=>({state:t,dispatch:r})=>{const i=yr(n,t.schema);return ln(i,e)(t,r)},u1t=(n,e={})=>({state:t,dispatch:r})=>{const i=yr(n,t.schema);return cn(i,e)(t,r)};var d1t=Object.freeze({__proto__:null,blur:Kbt,clearContent:Ubt,clearNodes:Hbt,command:Wbt,createParagraphNear:Gbt,cut:Jbt,deleteCurrentNode:Qbt,deleteNode:Ybt,deleteRange:Xbt,deleteSelection:Zbt,enter:ekt,exitCode:tkt,extendMarkRange:rkt,first:ikt,focus:okt,forEach:akt,insertContent:lkt,insertContentAt:dkt,joinUp:fkt,joinDown:hkt,joinBackward:pkt,joinForward:mkt,joinItemBackward:gkt,joinItemForward:ykt,joinTextblockBackward:vkt,joinTextblockForward:bkt,keyboardShortcut:xkt,lift:Skt,liftEmptyBlock:wkt,liftListItem:$kt,newlineInCode:Ekt,resetAttributes:Ckt,scrollIntoView:Mkt,selectAll:Tkt,selectNodeBackward:_kt,selectNodeForward:Akt,selectParentNode:Ikt,selectTextblockEnd:Rkt,selectTextblockStart:Okt,setContent:Dkt,setMark:Wkt,setMeta:Gkt,setNode:Jkt,setNodeSelection:Qkt,setTextSelection:Ykt,sinkListItem:Xkt,splitBlock:Zkt,splitListItem:e1t,toggleList:t1t,toggleMark:n1t,toggleNode:r1t,toggleWrap:i1t,undoInputRule:s1t,unsetAllMarks:o1t,unsetMark:a1t,updateAttributes:l1t,wrapIn:c1t,wrapInList:u1t});H0.create({name:"commands",addCommands(){return{...d1t}}});H0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});H0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});H0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return p7()||Ege()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Sge({state:t,transaction:d}),{commands:h}=new Nbt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});H0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});let f1t=class z5{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ao(Fs(this,"addOptions",{name:this.name}))),this.storage=Ao(Fs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new z5(e)}configure(e={}){const t=this.extend();return t.options=f7(this.options,e),t.storage=Ao(Fs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new z5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ao(Fs(t,"addOptions",{name:t.name})),t.storage=Ao(Fs(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}};function h1t(n){return new Bbt({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=Ao(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),f=d+a.length;if(Mge(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>d).length)return null;f<t.to&&o.delete(f,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}const p1t="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",m1t="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",a0=(n,e)=>{for(const t in e)n[t]=e[t];return n},B5="numeric",j5="ascii",V5="alpha",r$="asciinumeric",bS="alphanumeric",q5="domain",Tge="emoji",g1t="scheme",y1t="slashscheme",KQ="whitespace";function v1t(n,e){return n in e||(e[n]=[]),e[n]}function ch(n,e,t){e[B5]&&(e[r$]=!0,e[bS]=!0),e[j5]&&(e[r$]=!0,e[V5]=!0),e[r$]&&(e[bS]=!0),e[V5]&&(e[bS]=!0),e[bS]&&(e[q5]=!0),e[Tge]&&(e[q5]=!0);for(const r in e){const i=v1t(r,t);i.indexOf(n)<0&&i.push(n)}}function b1t(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function as(n){n===void 0&&(n=null),this.j={},this.jr=[],this.jd=null,this.t=n}as.groups={};as.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e){return e===void 0&&(e=!1),e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||as.groups;let i;return e&&e.j?i=e:(i=new as(e),t&&r&&ch(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(n[o]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||as.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let o,a=i.go(n);if(a?(o=new as,a0(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new as,s){if(r)if(o.t&&typeof o.t=="string"){const l=a0(b1t(o.t,r),t);ch(s,l,r)}else t&&ch(s,t,r);o.t=s}return i.j[n]=o,o}};const Be=(n,e,t,r,i)=>n.ta(e,t,r,i),mo=(n,e,t,r,i)=>n.tr(e,t,r,i),UQ=(n,e,t,r,i)=>n.ts(e,t,r,i),ce=(n,e,t,r,i)=>n.tt(e,t,r,i),Ec="WORD",K5="UWORD",bk="LOCALHOST",U5="TLD",H5="UTLD",i$="SCHEME",Rm="SLASH_SCHEME",v7="NUM",_ge="WS",b7="NL",sb="OPENBRACE",ob="CLOSEBRACE",KC="OPENBRACKET",UC="CLOSEBRACKET",HC="OPENPAREN",WC="CLOSEPAREN",GC="OPENANGLEBRACKET",JC="CLOSEANGLEBRACKET",QC="FULLWIDTHLEFTPAREN",YC="FULLWIDTHRIGHTPAREN",XC="LEFTCORNERBRACKET",ZC="RIGHTCORNERBRACKET",eM="LEFTWHITECORNERBRACKET",tM="RIGHTWHITECORNERBRACKET",nM="FULLWIDTHLESSTHAN",rM="FULLWIDTHGREATERTHAN",iM="AMPERSAND",sM="APOSTROPHE",oM="ASTERISK",Ou="AT",aM="BACKSLASH",lM="BACKTICK",cM="CARET",Uu="COLON",k7="COMMA",uM="DOLLAR",Ml="DOT",dM="EQUALS",x7="EXCLAMATION",Tl="HYPHEN",fM="PERCENT",hM="PIPE",pM="PLUS",mM="POUND",gM="QUERY",S7="QUOTE",w7="SEMI",_l="SLASH",ab="TILDE",yM="UNDERSCORE",Age="EMOJI",vM="SYM";var Ige=Object.freeze({__proto__:null,WORD:Ec,UWORD:K5,LOCALHOST:bk,TLD:U5,UTLD:H5,SCHEME:i$,SLASH_SCHEME:Rm,NUM:v7,WS:_ge,NL:b7,OPENBRACE:sb,CLOSEBRACE:ob,OPENBRACKET:KC,CLOSEBRACKET:UC,OPENPAREN:HC,CLOSEPAREN:WC,OPENANGLEBRACKET:GC,CLOSEANGLEBRACKET:JC,FULLWIDTHLEFTPAREN:QC,FULLWIDTHRIGHTPAREN:YC,LEFTCORNERBRACKET:XC,RIGHTCORNERBRACKET:ZC,LEFTWHITECORNERBRACKET:eM,RIGHTWHITECORNERBRACKET:tM,FULLWIDTHLESSTHAN:nM,FULLWIDTHGREATERTHAN:rM,AMPERSAND:iM,APOSTROPHE:sM,ASTERISK:oM,AT:Ou,BACKSLASH:aM,BACKTICK:lM,CARET:cM,COLON:Uu,COMMA:k7,DOLLAR:uM,DOT:Ml,EQUALS:dM,EXCLAMATION:x7,HYPHEN:Tl,PERCENT:fM,PIPE:hM,PLUS:pM,POUND:mM,QUERY:gM,QUOTE:S7,SEMI:w7,SLASH:_l,TILDE:ab,UNDERSCORE:yM,EMOJI:Age,SYM:vM});const Gp=/[a-z]/,_O=/\p{L}/u,AO=/\p{Emoji}/u,IO=/\d/,HQ=/\s/,WQ=`
`,k1t="",x1t="";let kS=null,xS=null;function S1t(n){n===void 0&&(n=[]);const e={};as.groups=e;const t=new as;kS==null&&(kS=GQ(p1t)),xS==null&&(xS=GQ(m1t)),ce(t,"'",sM),ce(t,"{",sb),ce(t,"}",ob),ce(t,"[",KC),ce(t,"]",UC),ce(t,"(",HC),ce(t,")",WC),ce(t,"<",GC),ce(t,">",JC),ce(t,"",QC),ce(t,"",YC),ce(t,"",XC),ce(t,"",ZC),ce(t,"",eM),ce(t,"",tM),ce(t,"",nM),ce(t,"",rM),ce(t,"&",iM),ce(t,"*",oM),ce(t,"@",Ou),ce(t,"`",lM),ce(t,"^",cM),ce(t,":",Uu),ce(t,",",k7),ce(t,"$",uM),ce(t,".",Ml),ce(t,"=",dM),ce(t,"!",x7),ce(t,"-",Tl),ce(t,"%",fM),ce(t,"|",hM),ce(t,"+",pM),ce(t,"#",mM),ce(t,"?",gM),ce(t,'"',S7),ce(t,"/",_l),ce(t,";",w7),ce(t,"~",ab),ce(t,"_",yM),ce(t,"\\",aM);const r=mo(t,IO,v7,{[B5]:!0});mo(r,IO,r);const i=mo(t,Gp,Ec,{[j5]:!0});mo(i,Gp,i);const s=mo(t,_O,K5,{[V5]:!0});mo(s,Gp),mo(s,_O,s);const o=mo(t,HQ,_ge,{[KQ]:!0});ce(t,WQ,b7,{[KQ]:!0}),ce(o,WQ),mo(o,HQ,o);const a=mo(t,AO,Age,{[Tge]:!0});mo(a,AO,a),ce(a,k1t,a);const l=ce(a,x1t);mo(l,AO,a);const c=[[Gp,i]],u=[[Gp,null],[_O,s]];for(let d=0;d<kS.length;d++)vu(t,kS[d],U5,Ec,c);for(let d=0;d<xS.length;d++)vu(t,xS[d],H5,K5,u);ch(U5,{tld:!0,ascii:!0},e),ch(H5,{utld:!0,alpha:!0},e),vu(t,"file",i$,Ec,c),vu(t,"mailto",i$,Ec,c),vu(t,"http",Rm,Ec,c),vu(t,"https",Rm,Ec,c),vu(t,"ftp",Rm,Ec,c),vu(t,"ftps",Rm,Ec,c),ch(i$,{scheme:!0,ascii:!0},e),ch(Rm,{slashscheme:!0,ascii:!0},e),n=n.sort((d,f)=>d[0]>f[0]?1:-1);for(let d=0;d<n.length;d++){const f=n[d][0],p=n[d][1]?{[g1t]:!0}:{[y1t]:!0};f.indexOf("-")>=0?p[q5]=!0:Gp.test(f)?IO.test(f)?p[r$]=!0:p[j5]=!0:p[B5]=!0,UQ(t,f,f,p)}return UQ(t,"localhost",bk,{ascii:!0}),t.jd=new as(vM),{start:t,tokens:a0({groups:e},Ige)}}function w1t(n,e){const t=$1t(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=t.length,i=[];let s=0,o=0;for(;o<r;){let a=n,l=null,c=0,u=null,d=-1,f=-1;for(;o<r&&(l=a.go(t[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=t[o].length,f++),c+=t[o].length,s+=t[o].length,o++;s-=d,o-=f,c-=d,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function $1t(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,o=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(o),r+=o.length}return e}function vu(n,e,t,r,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];n.j[l]?s=n.j[l]:(s=new as(r),s.jr=i.slice(),n.j[l]=s),n=s}return s=new as(t),s.jr=i.slice(),n.j[e[o-1]]=s,s}function GQ(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let o=parseInt(n.substring(r,r+s),10);o>0;o--)t.pop();r+=s}else t.push(n[r]),r++}return e}const kk={defaultProtocol:"http",events:null,format:JQ,formatHref:JQ,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $7(n,e){e===void 0&&(e=null);let t=a0({},kk);n&&(t=a0(t,n instanceof $7?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}$7.prototype={o:kk,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:kk[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function JQ(n){return n}function Rge(n,e){this.t="token",this.v=n,this.tk=e}Rge.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n){return n===void 0&&(n=kk.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),o={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),d=n.getObj("events",t,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&a0(o,u),{tagName:i,attributes:o,content:s,eventListeners:d}}};function vA(n,e){class t extends Rge{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const QQ=vA("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),YQ=vA("text"),E1t=vA("nl"),SS=vA("url",{isLink:!0,toHref(n){return n===void 0&&(n=kk.defaultProtocol),this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==bk&&n[1].t===Uu}}),go=n=>new as(n);function C1t(n){let{groups:e}=n;const t=e.domain.concat([iM,oM,Ou,aM,lM,cM,uM,dM,Tl,v7,fM,hM,pM,mM,_l,vM,ab,yM]),r=[sM,Uu,k7,Ml,x7,gM,S7,w7,GC,JC,sb,ob,UC,KC,HC,WC,QC,YC,XC,ZC,eM,tM,nM,rM],i=[iM,sM,oM,aM,lM,cM,uM,dM,Tl,sb,ob,fM,hM,pM,mM,gM,_l,vM,ab,yM],s=go(),o=ce(s,ab);Be(o,i,o),Be(o,e.domain,o);const a=go(),l=go(),c=go();Be(s,e.domain,a),Be(s,e.scheme,l),Be(s,e.slashscheme,c),Be(a,i,o),Be(a,e.domain,a);const u=ce(a,Ou);ce(o,Ou,u),ce(l,Ou,u),ce(c,Ou,u);const d=ce(o,Ml);Be(d,i,o),Be(d,e.domain,o);const f=go();Be(u,e.domain,f),Be(f,e.domain,f);const h=ce(f,Ml);Be(h,e.domain,f);const p=go(QQ);Be(h,e.tld,p),Be(h,e.utld,p),ce(u,bk,p);const m=ce(f,Tl);Be(m,e.domain,f),Be(p,e.domain,f),ce(p,Ml,h),ce(p,Tl,m);const g=ce(p,Uu);Be(g,e.numeric,QQ);const y=ce(a,Tl),k=ce(a,Ml);Be(y,e.domain,a),Be(k,i,o),Be(k,e.domain,a);const b=go(SS);Be(k,e.tld,b),Be(k,e.utld,b),Be(b,e.domain,a),Be(b,i,o),ce(b,Ml,k),ce(b,Tl,y),ce(b,Ou,u);const S=ce(b,Uu),w=go(SS);Be(S,e.numeric,w);const x=go(SS),$=go();Be(x,t,x),Be(x,r,$),Be($,t,x),Be($,r,$),ce(b,_l,x),ce(w,_l,x);const E=ce(l,Uu),C=ce(c,Uu),M=ce(C,_l),P=ce(M,_l);Be(l,e.domain,a),ce(l,Ml,k),ce(l,Tl,y),Be(c,e.domain,a),ce(c,Ml,k),ce(c,Tl,y),Be(E,e.domain,x),ce(E,_l,x),Be(P,e.domain,x),Be(P,t,x),ce(P,_l,x);const I=[[sb,ob],[KC,UC],[HC,WC],[GC,JC],[QC,YC],[XC,ZC],[eM,tM],[nM,rM]];for(let N=0;N<I.length;N++){const[T,R]=I[N],A=ce(x,T);ce($,T,A),ce(A,R,x);const L=go(SS);Be(A,t,L);const F=go();Be(A,r),Be(L,t,L),Be(L,r,F),Be(F,t,L),Be(F,r,F),ce(L,R,x),ce(F,R,x)}return ce(s,bk,b),ce(s,b7,E1t),{start:s,tokens:Ige}}function M1t(n,e,t){let r=t.length,i=0,s=[],o=[];for(;i<r;){let a=n,l=null,c=null,u=0,d=null,f=-1;for(;i<r&&!(l=a.go(t[i].t));)o.push(t[i++]);for(;i<r&&(c=l||a.go(t[i].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,i++,u++;if(f<0)i-=u,i<r&&(o.push(t[i]),i++);else{o.length>0&&(s.push(RO(YQ,e,o)),o=[]),i-=f,u-=f;const h=d.t,p=t.slice(i-u,i);s.push(RO(h,e,p))}}return o.length>0&&s.push(RO(YQ,e,o)),s}function RO(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const T1t=typeof console<"u"&&console&&console.warn||(()=>{}),_1t="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",zt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function A1t(){as.groups={},zt.scanner=null,zt.parser=null,zt.tokenQueue=[],zt.pluginQueue=[],zt.customSchemes=[],zt.initialized=!1}function XQ(n,e){if(e===void 0&&(e=!1),zt.initialized&&T1t(`linkifyjs: already initialized - will not register custom scheme "${n}" ${_1t}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);zt.customSchemes.push([n,e])}function I1t(){zt.scanner=S1t(zt.customSchemes);for(let n=0;n<zt.tokenQueue.length;n++)zt.tokenQueue[n][1]({scanner:zt.scanner});zt.parser=C1t(zt.scanner.tokens);for(let n=0;n<zt.pluginQueue.length;n++)zt.pluginQueue[n][1]({scanner:zt.scanner,parser:zt.parser});zt.initialized=!0}function R1t(n){return zt.initialized||I1t(),M1t(zt.parser.start,n,w1t(zt.scanner.start,n))}function E7(n,e,t){if(e===void 0&&(e=null),t===void 0&&(t=null),e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new $7(t),i=R1t(n),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}function O1t(n){return new Q({key:new Y("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(c=>c.docChanged)&&!t.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=Nkt(t.doc,[...e]);if(Kkt(a).forEach(({newRange:c})=>{const u=Lkt(r.doc,c,h=>h.isTextblock);let d,f;if(u.length>1?(d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")),d&&f){const h=f.split(" ").filter(g=>g!=="");if(h.length<=0)return!1;const p=h[h.length-1],m=d.pos+f.lastIndexOf(p);if(!p)return!1;E7(p).filter(g=>g.isLink).map(g=>({...g,from:m+g.start+1,to:m+g.end+1})).filter(g=>r.schema.marks.code?!r.doc.rangeHasMark(g.from,g.to,r.schema.marks.code):!0).filter(g=>n.validate?n.validate(g.value):!0).forEach(g=>{Mge(g.from,g.to,r.doc).some(y=>y.mark.type===n.type)||o.addMark(g.from,g.to,n.type.create({href:g.href}))})}}),!!o.steps.length)return o}})}function P1t(n){return new Q({key:new Y("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0)return!1;let o=r.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(f=>f.nodeName==="A"))return!1;const l=jkt(e.state,n.type.name),c=r.target,u=(i=c==null?void 0:c.href)!==null&&i!==void 0?i:l.href,d=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function D1t(n){return new Q({key:new Y("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=E7(a).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(n.editor.commands.setMark(n.type,{href:l.href}),!0)}}})}const OO=f1t.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(n=>{if(typeof n=="string"){XQ(n);return}XQ(n.scheme,n.optionalSlashes)})},onDestroy(){A1t()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){var e;return!((e=n.href)===null||e===void 0)&&e.startsWith("javascript:")?["a",zQ(this.options.HTMLAttributes,{...n,href:""}),0]:["a",zQ(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[h1t({find:n=>{const e=[];if(n){const t=E7(n).filter(r=>r.isLink);t.length&&t.forEach(r=>e.push({text:r.value,data:{href:r.href},index:r.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(O1t({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push(P1t({type:this.type})),this.options.linkOnPaste&&n.push(D1t({editor:this.editor,type:this.type})),n}});function Oge(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Oge(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Pge(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Pge(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let La=class xi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new xi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new xi(r,i)}cutByIndex(e,t){return e==t?xi.empty:e==0&&t==this.content.length?this:new xi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new xi(i,s)}addToStart(e){return new xi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new xi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Oge(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Pge(this,e,t,r)}findIndex(e,t=-1){if(e==0)return wS(0,e);if(e==this.size)return wS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?wS(r+1,o):wS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return xi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new xi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return xi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new xi(t||e,r)}static from(e){if(!e)return xi.empty;if(e instanceof xi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new xi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};La.empty=new La([],0);const PO={index:0,offset:0};function wS(n,e){return PO.index=n,PO.offset=e,PO}function W5(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!W5(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!W5(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Al=class G5{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&W5(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return G5.none;if(e instanceof G5)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Al.none=[];let bM=class Om{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Nge(this.content,e+this.openStart,t);return r&&new Om(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Om(Dge(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Om.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Om(La.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Om(e,r,i)}};bM.empty=new bM(La.empty,0,0);function Dge(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Dge(s.content,e-i-1,t-i-1)))}function Nge(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Nge(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let N1t=class J5{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new eY(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new eY(this,t,!0);return r.addAll(e,t.from,t.to),bM.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(z1t(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=tY(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=tY(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new J5(e,J5.schemaRules(e)))}};const Fge={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},F1t={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Lge={ol:!0,ul:!0},kM=1,xM=2,lb=4;function ZQ(n,e,t){return e!=null?(e?kM:0)|(e==="full"?xM:0):n&&n.whitespace=="pre"?kM|xM:t&~lb}let $S=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Al.none,this.stashMarks=[],this.match=o||(a&lb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(La.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&kM)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=La.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(La.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):j1t(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Fge.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},eY=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=ZQ(null,t.preserveWhitespace,0)|(r?lb:0);i?s=new $S(i.type,i.attrs,Al.none,Al.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new $S(null,null,Al.none,Al.none,!0,null,o):s=new $S(e.schema.topNodeType,null,Al.none,Al.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(B1t(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&xM||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&kM)r.options&xM?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Lge.hasOwnProperty(r)&&this.parser.normalizeLists&&L1t(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:F1t.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Fge.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Al.none,r=Al.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=ZQ(e,i,s.options);s.options&lb&&s.content.length==0&&(o|=lb),this.nodes.push(new $S(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=V1t(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function L1t(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Lge.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function z1t(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function B1t(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function tY(n){let e={};for(let t in n)e[t]=n[t];return e}function j1t(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function V1t(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function zge(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let q1t=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:zge({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Ls(n,e,t){return n.config[e]===void 0&&n.parent?Ls(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ls(n.parent,e,t):null}):n.config[e]}function K1t(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Hr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function U1t(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function H1t(n){return typeof n=="function"}function zs(n,e=void 0,...t){return H1t(n)?e?n.bind(e)(...t):n(...t):n}function W1t(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let G1t=class{constructor(e){this.find=e.find,this.handler=e.handler}},J1t=class{constructor(e){this.find=e.find,this.handler=e.handler}};function Q1t(n){return Object.prototype.toString.call(n).slice(8,-1)}function DO(n){return Q1t(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function C7(n,e){const t={...n};return DO(n)&&DO(e)&&Object.keys(e).forEach(r=>{DO(e[r])?r in n?t[r]=C7(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let W0=class Q5{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=zs(Ls(this,"addOptions",{name:this.name}))),this.storage=zs(Ls(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Q5(e)}configure(e={}){const t=this.extend();return t.options=C7(this.options,e),t.storage=zs(Ls(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Q5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=zs(Ls(t,"addOptions",{name:t.name})),t.storage=zs(Ls(t,"addStorage",{name:t.name,options:t.options})),t}};function Y1t(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function X1t(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}W0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=X1t(t);return Y1t(r,{from:o,to:a},{textSerializers:l})}}})]}});const Z1t=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),ext=(n=!1)=>({commands:e})=>e.setContent("",n),txt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},nxt=n=>e=>n(e),rxt=()=>({state:n,dispatch:e})=>nn(n,e),ixt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},sxt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},oxt=n=>({tr:e,state:t,dispatch:r})=>{const i=Hr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},axt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},lxt=()=>({state:n,dispatch:e})=>Ht(n,e),cxt=()=>({commands:n})=>n.keyboardShortcut("Enter"),uxt=()=>({state:n,dispatch:e})=>tn(n,e);function SM(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:W1t(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Y5(n,e,t={}){return n.find(r=>r.type===e&&SM(r.attrs,t))}function dxt(n,e,t={}){return!!Y5(n,e,t)}function M7(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=Y5([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(Y5([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&dxt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function of(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const fxt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=of(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=M7(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},hxt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Bge(n){return n instanceof D}function uh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function pxt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,uh(0,i,s),uh(n.content.size,i,s)):D.create(n,uh(e,i,s),uh(e,i,s))}function T7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const mxt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{T7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Bge(t.state.selection))return o(),!0;const a=pxt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},gxt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),yxt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),jge=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&jge(r)}return n};function nY(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return jge(t)}function wM(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?La.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),wM("",e,t)}if(typeof n=="string"){const r=N1t.fromSchema(e);return t.slice?r.parseSlice(nY(n),t.parseOptions).content:r.parse(nY(n),t.parseOptions)}return wM("",e,t)}function vxt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const bxt=n=>n.toString().startsWith("<"),kxt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=wM(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((bxt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&vxt(r,r.steps.length-1,-1)}return!0},xxt=()=>({state:n,dispatch:e})=>Yt(n,e),Sxt=()=>({state:n,dispatch:e})=>Xt(n,e),wxt=()=>({state:n,dispatch:e})=>Wt(n,e),$xt=()=>({state:n,dispatch:e})=>Jt(n,e),Ext=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Cxt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Mxt=()=>({state:n,dispatch:e})=>Cn(n,e),Txt=()=>({state:n,dispatch:e})=>Mn(n,e);function Vge(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function _xt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))T7()||Vge()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const Axt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=_xt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function _7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Hr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>SM(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Ixt=(n,e={})=>({state:t,dispatch:r})=>{const i=Hr(n,t.schema);return _7(t,i,e)?Zt(t,r):!1},Rxt=()=>({state:n,dispatch:e})=>rn(n,e),Oxt=n=>({state:e,dispatch:t})=>{const r=Hr(n,e.schema);return un(r)(e,t)},Pxt=()=>({state:n,dispatch:e})=>en(n,e);function qge(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function rY(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Dxt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=qge(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Hr(n,r.schema)),a==="mark"&&(o=of(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,rY(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(rY(d.attrs,e)))})})}),!0):!1},Nxt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Fxt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Lxt=()=>({state:n,dispatch:e})=>Gt(n,e),zxt=()=>({state:n,dispatch:e})=>Qt(n,e),Bxt=()=>({state:n,dispatch:e})=>sn(n,e),jxt=()=>({state:n,dispatch:e})=>an(n,e),Vxt=()=>({state:n,dispatch:e})=>on(n,e);function qxt(n,e,t={}){return wM(n,e,{slice:!1,parseOptions:t})}const Kxt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=qxt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Uxt(n,e){const t=of(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Hxt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Wxt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function A7(n){return e=>Wxt(e.$from,n)}function Kge(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n-1),o=M7(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function s$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Gxt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?of(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>SM(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>SM(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function iY(n,e){const{nodeExtensions:t}=K1t(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=zs(Ls(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Jxt(n,e,t){var r;const{selection:i}=e;let s=null;if(Bge(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Qxt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=of(n,r.schema);if(i)if(o){const c=Uxt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return Jxt(r,t,l)},Yxt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Xxt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Hr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Zxt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=uh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},eSt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=uh(i,o,a),c=uh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},tSt=n=>({state:e,dispatch:t})=>{const r=Hr(n,e.schema);return dn(r)(e,t)};function sY(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const nSt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=s$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&sY(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Hxt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&sY(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},rSt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Hr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=La.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=La.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=s$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(La.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new bM(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=s$(d,u.type.name,u.attrs),p=s$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},NO=(n,e)=>{const t=A7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},FO=(n,e)=>{const t=A7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},iSt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Hr(n,o.schema),p=Hr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=A7(x=>iY(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(iY(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>NO(s,h)).command(()=>FO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>NO(s,h)).command(()=>FO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>NO(s,h)).command(()=>FO(s,h)).run()},sSt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=of(n,r.schema);return Gxt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},oSt=(n,e,t={})=>({state:r,commands:i})=>{const s=Hr(n,r.schema),o=Hr(e,r.schema);return _7(r,s,t)?i.setNode(o):i.setNode(s,t)},aSt=(n,e={})=>({state:t,commands:r})=>{const i=Hr(n,t.schema);return _7(t,i,e)?r.lift(i):r.wrapIn(i,e)},lSt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},cSt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},uSt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=of(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=M7(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},dSt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=qge(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Hr(n,r.schema)),a==="mark"&&(o=of(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},fSt=(n,e={})=>({state:t,dispatch:r})=>{const i=Hr(n,t.schema);return ln(i,e)(t,r)},hSt=(n,e={})=>({state:t,dispatch:r})=>{const i=Hr(n,t.schema);return cn(i,e)(t,r)};var pSt=Object.freeze({__proto__:null,blur:Z1t,clearContent:ext,clearNodes:txt,command:nxt,createParagraphNear:rxt,cut:ixt,deleteCurrentNode:sxt,deleteNode:oxt,deleteRange:axt,deleteSelection:lxt,enter:cxt,exitCode:uxt,extendMarkRange:fxt,first:hxt,focus:mxt,forEach:gxt,insertContent:yxt,insertContentAt:kxt,joinUp:xxt,joinDown:Sxt,joinBackward:wxt,joinForward:$xt,joinItemBackward:Ext,joinItemForward:Cxt,joinTextblockBackward:Mxt,joinTextblockForward:Txt,keyboardShortcut:Axt,lift:Ixt,liftEmptyBlock:Rxt,liftListItem:Oxt,newlineInCode:Pxt,resetAttributes:Dxt,scrollIntoView:Nxt,selectAll:Fxt,selectNodeBackward:Lxt,selectNodeForward:zxt,selectParentNode:Bxt,selectTextblockEnd:jxt,selectTextblockStart:Vxt,setContent:Kxt,setMark:Qxt,setMeta:Yxt,setNode:Xxt,setNodeSelection:Zxt,setTextSelection:eSt,sinkListItem:tSt,splitBlock:nSt,splitListItem:rSt,toggleList:iSt,toggleMark:sSt,toggleNode:oSt,toggleWrap:aSt,undoInputRule:lSt,unsetAllMarks:cSt,unsetMark:uSt,updateAttributes:dSt,wrapIn:fSt,wrapInList:hSt});W0.create({name:"commands",addCommands(){return{...pSt}}});W0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});W0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});W0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return T7()||Vge()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=zge({state:t,transaction:d}),{commands:h}=new q1t({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});W0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function oY(n){return new G1t({find:n.find,handler:({state:e,range:t,match:r})=>{const i=zs(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(Kge(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<t.to&&s.delete(u,t.to),c>t.from&&s.delete(t.from+l,c);const f=t.from+l+o.length;s.addMark(t.from+l,f,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}let mSt=class X5{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=zs(Ls(this,"addOptions",{name:this.name}))),this.storage=zs(Ls(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new X5(e)}configure(e={}){const t=this.extend();return t.options=C7(this.options,e),t.storage=zs(Ls(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new X5({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=zs(Ls(t,"addOptions",{name:t.name})),t.storage=zs(Ls(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}};function aY(n){return new J1t({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=zs(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),f=d+a.length;if(Kge(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>d).length)return null;f<t.to&&o.delete(f,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}const gSt=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,ySt=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,vSt=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,bSt=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,I7=mSt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",U1t(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[oY({find:gSt,type:this.type}),oY({find:vSt,type:this.type})]},addPasteRules(){return[aY({find:ySt,type:this.type}),aY({find:bSt,type:this.type})]}});function Uge(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Uge(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Hge(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Hge(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let za=class Si{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Si(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Si(r,i)}cutByIndex(e,t){return e==t?Si.empty:e==0&&t==this.content.length?this:new Si(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Si(i,s)}addToStart(e){return new Si([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Si(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Uge(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Hge(this,e,t,r)}findIndex(e,t=-1){if(e==0)return ES(0,e);if(e==this.size)return ES(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?ES(r+1,o):ES(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Si.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Si(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Si.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Si(t||e,r)}static from(e){if(!e)return Si.empty;if(e instanceof Si)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Si([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};za.empty=new za([],0);const LO={index:0,offset:0};function ES(n,e){return LO.index=n,LO.offset=e,LO}function Z5(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Z5(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Z5(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Il=class e6{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Z5(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return e6.none;if(e instanceof e6)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Il.none=[];let $M=class Pm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Gge(this.content,e+this.openStart,t);return r&&new Pm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Pm(Wge(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Pm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Pm(za.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Pm(e,r,i)}};$M.empty=new $M(za.empty,0,0);function Wge(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Wge(s.content,e-i-1,t-i-1)))}function Gge(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Gge(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let kSt=class t6{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new cY(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new cY(this,t,!0);return r.addAll(e,t.from,t.to),$M.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(wSt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=uY(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=uY(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new t6(e,t6.schemaRules(e)))}};const Jge={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},xSt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Qge={ol:!0,ul:!0},EM=1,CM=2,cb=4;function lY(n,e,t){return e!=null?(e?EM:0)|(e==="full"?CM:0):n&&n.whitespace=="pre"?EM|CM:t&~cb}let CS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Il.none,this.stashMarks=[],this.match=o||(a&cb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(za.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&EM)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=za.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(za.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):ESt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Jge.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},cY=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=lY(null,t.preserveWhitespace,0)|(r?cb:0);i?s=new CS(i.type,i.attrs,Il.none,Il.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new CS(null,null,Il.none,Il.none,!0,null,o):s=new CS(e.schema.topNodeType,null,Il.none,Il.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles($St(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&CM||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&EM)r.options&CM?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Qge.hasOwnProperty(r)&&this.parser.normalizeLists&&SSt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:xSt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Jge.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Il.none,r=Il.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=lY(e,i,s.options);s.options&cb&&s.content.length==0&&(o|=cb),this.nodes.push(new CS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=CSt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function SSt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Qge.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function wSt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function $St(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function uY(n){let e={};for(let t in n)e[t]=n[t];return e}function ESt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function CSt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Yge(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let MSt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Yge({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Bs(n,e,t){return n.config[e]===void 0&&n.parent?Bs(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Bs(n.parent,e,t):null}):n.config[e]}function TSt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Wr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function _St(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function ASt(n){return typeof n=="function"}function js(n,e=void 0,...t){return ASt(n)?e?n.bind(e)(...t):n(...t):n}function ISt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let RSt=class{constructor(e){this.find=e.find,this.handler=e.handler}},OSt=class{constructor(e){this.find=e.find,this.handler=e.handler}};function PSt(n){return Object.prototype.toString.call(n).slice(8,-1)}function zO(n){return PSt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function R7(n,e){const t={...n};return zO(n)&&zO(e)&&Object.keys(e).forEach(r=>{zO(e[r])?r in n?t[r]=R7(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let G0=class n6{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=js(Bs(this,"addOptions",{name:this.name}))),this.storage=js(Bs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new n6(e)}configure(e={}){const t=this.extend();return t.options=R7(this.options,e),t.storage=js(Bs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new n6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=js(Bs(t,"addOptions",{name:t.name})),t.storage=js(Bs(t,"addStorage",{name:t.name,options:t.options})),t}};function DSt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function NSt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}G0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=NSt(t);return DSt(r,{from:o,to:a},{textSerializers:l})}}})]}});const FSt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),LSt=(n=!1)=>({commands:e})=>e.setContent("",n),zSt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},BSt=n=>e=>n(e),jSt=()=>({state:n,dispatch:e})=>nn(n,e),VSt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},qSt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},KSt=n=>({tr:e,state:t,dispatch:r})=>{const i=Wr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},USt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},HSt=()=>({state:n,dispatch:e})=>Ht(n,e),WSt=()=>({commands:n})=>n.keyboardShortcut("Enter"),GSt=()=>({state:n,dispatch:e})=>tn(n,e);function MM(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:ISt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function r6(n,e,t={}){return n.find(r=>r.type===e&&MM(r.attrs,t))}function JSt(n,e,t={}){return!!r6(n,e,t)}function O7(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=r6([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(r6([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&JSt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function af(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const QSt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=af(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=O7(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},YSt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Xge(n){return n instanceof D}function dh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function XSt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,dh(0,i,s),dh(n.content.size,i,s)):D.create(n,dh(e,i,s),dh(e,i,s))}function P7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ZSt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{P7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Xge(t.state.selection))return o(),!0;const a=XSt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},ewt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),twt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Zge=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Zge(r)}return n};function dY(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Zge(t)}function TM(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?za.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),TM("",e,t)}if(typeof n=="string"){const r=kSt.fromSchema(e);return t.slice?r.parseSlice(dY(n),t.parseOptions).content:r.parse(dY(n),t.parseOptions)}return TM("",e,t)}function nwt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const rwt=n=>n.toString().startsWith("<"),iwt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=TM(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((rwt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&nwt(r,r.steps.length-1,-1)}return!0},swt=()=>({state:n,dispatch:e})=>Yt(n,e),owt=()=>({state:n,dispatch:e})=>Xt(n,e),awt=()=>({state:n,dispatch:e})=>Wt(n,e),lwt=()=>({state:n,dispatch:e})=>Jt(n,e),cwt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},uwt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},dwt=()=>({state:n,dispatch:e})=>Cn(n,e),fwt=()=>({state:n,dispatch:e})=>Mn(n,e);function e0e(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function hwt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))P7()||e0e()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const pwt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=hwt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function D7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Wr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>MM(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const mwt=(n,e={})=>({state:t,dispatch:r})=>{const i=Wr(n,t.schema);return D7(t,i,e)?Zt(t,r):!1},gwt=()=>({state:n,dispatch:e})=>rn(n,e),ywt=n=>({state:e,dispatch:t})=>{const r=Wr(n,e.schema);return un(r)(e,t)},vwt=()=>({state:n,dispatch:e})=>en(n,e);function t0e(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function fY(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const bwt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=t0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Wr(n,r.schema)),a==="mark"&&(o=af(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,fY(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(fY(d.attrs,e)))})})}),!0):!1},kwt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),xwt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Swt=()=>({state:n,dispatch:e})=>Gt(n,e),wwt=()=>({state:n,dispatch:e})=>Qt(n,e),$wt=()=>({state:n,dispatch:e})=>sn(n,e),Ewt=()=>({state:n,dispatch:e})=>an(n,e),Cwt=()=>({state:n,dispatch:e})=>on(n,e);function Mwt(n,e,t={}){return TM(n,e,{slice:!1,parseOptions:t})}const Twt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=Mwt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function _wt(n,e){const t=af(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function Awt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Iwt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function N7(n){return e=>Iwt(e.$from,n)}function n0e(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n-1),o=O7(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function o$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Rwt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?af(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>MM(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>MM(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function hY(n,e){const{nodeExtensions:t}=TSt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=js(Bs(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Owt(n,e,t){var r;const{selection:i}=e;let s=null;if(Xge(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const Pwt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=af(n,r.schema);if(i)if(o){const c=_wt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return Owt(r,t,l)},Dwt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Nwt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Wr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Fwt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=dh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},Lwt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=dh(i,o,a),c=dh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},zwt=n=>({state:e,dispatch:t})=>{const r=Wr(n,e.schema);return dn(r)(e,t)};function pY(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Bwt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=o$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&pY(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:Awt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&pY(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},jwt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Wr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=za.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=za.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=o$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(za.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new $M(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=o$(d,u.type.name,u.attrs),p=o$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},BO=(n,e)=>{const t=N7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},jO=(n,e)=>{const t=N7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},Vwt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Wr(n,o.schema),p=Wr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=N7(x=>hY(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(hY(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>BO(s,h)).command(()=>jO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>BO(s,h)).command(()=>jO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>BO(s,h)).command(()=>jO(s,h)).run()},qwt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=af(n,r.schema);return Rwt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Kwt=(n,e,t={})=>({state:r,commands:i})=>{const s=Wr(n,r.schema),o=Wr(e,r.schema);return D7(r,s,t)?i.setNode(o):i.setNode(s,t)},Uwt=(n,e={})=>({state:t,commands:r})=>{const i=Wr(n,t.schema);return D7(t,i,e)?r.lift(i):r.wrapIn(i,e)},Hwt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Wwt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Gwt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=af(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=O7(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},Jwt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=t0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Wr(n,r.schema)),a==="mark"&&(o=af(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Qwt=(n,e={})=>({state:t,dispatch:r})=>{const i=Wr(n,t.schema);return ln(i,e)(t,r)},Ywt=(n,e={})=>({state:t,dispatch:r})=>{const i=Wr(n,t.schema);return cn(i,e)(t,r)};var Xwt=Object.freeze({__proto__:null,blur:FSt,clearContent:LSt,clearNodes:zSt,command:BSt,createParagraphNear:jSt,cut:VSt,deleteCurrentNode:qSt,deleteNode:KSt,deleteRange:USt,deleteSelection:HSt,enter:WSt,exitCode:GSt,extendMarkRange:QSt,first:YSt,focus:ZSt,forEach:ewt,insertContent:twt,insertContentAt:iwt,joinUp:swt,joinDown:owt,joinBackward:awt,joinForward:lwt,joinItemBackward:cwt,joinItemForward:uwt,joinTextblockBackward:dwt,joinTextblockForward:fwt,keyboardShortcut:pwt,lift:mwt,liftEmptyBlock:gwt,liftListItem:ywt,newlineInCode:vwt,resetAttributes:bwt,scrollIntoView:kwt,selectAll:xwt,selectNodeBackward:Swt,selectNodeForward:wwt,selectParentNode:$wt,selectTextblockEnd:Ewt,selectTextblockStart:Cwt,setContent:Twt,setMark:Pwt,setMeta:Dwt,setNode:Nwt,setNodeSelection:Fwt,setTextSelection:Lwt,sinkListItem:zwt,splitBlock:Bwt,splitListItem:jwt,toggleList:Vwt,toggleMark:qwt,toggleNode:Kwt,toggleWrap:Uwt,undoInputRule:Hwt,unsetAllMarks:Wwt,unsetMark:Gwt,updateAttributes:Jwt,wrapIn:Qwt,wrapInList:Ywt});G0.create({name:"commands",addCommands(){return{...Xwt}}});G0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});G0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});G0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return P7()||e0e()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Yge({state:t,transaction:d}),{commands:h}=new MSt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});G0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Zwt(n){return new RSt({find:n.find,handler:({state:e,range:t,match:r})=>{const i=js(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(n0e(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<t.to&&s.delete(u,t.to),c>t.from&&s.delete(t.from+l,c);const f=t.from+l+o.length;s.addMark(t.from+l,f,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}let e$t=class i6{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=js(Bs(this,"addOptions",{name:this.name}))),this.storage=js(Bs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new i6(e)}configure(e={}){const t=this.extend();return t.options=R7(this.options,e),t.storage=js(Bs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new i6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=js(Bs(t,"addOptions",{name:t.name})),t.storage=js(Bs(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}};function t$t(n){return new OSt({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=js(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),f=d+a.length;if(n0e(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>d).length)return null;f<t.to&&o.delete(f,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}const n$t=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,r$t=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,VO=e$t.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",_St(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Zwt({find:n$t,type:this.type})]},addPasteRules(){return[t$t({find:r$t,type:this.type})]}});function r0e(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=r0e(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function i0e(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=i0e(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ba=class wi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new wi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new wi(r,i)}cutByIndex(e,t){return e==t?wi.empty:e==0&&t==this.content.length?this:new wi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new wi(i,s)}addToStart(e){return new wi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new wi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return r0e(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return i0e(this,e,t,r)}findIndex(e,t=-1){if(e==0)return MS(0,e);if(e==this.size)return MS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?MS(r+1,o):MS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return wi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new wi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return wi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new wi(t||e,r)}static from(e){if(!e)return wi.empty;if(e instanceof wi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new wi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ba.empty=new Ba([],0);const qO={index:0,offset:0};function MS(n,e){return qO.index=n,qO.offset=e,qO}function s6(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!s6(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!s6(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Rl=class o6{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&s6(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return o6.none;if(e instanceof o6)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Rl.none=[];let _M=class Dm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=o0e(this.content,e+this.openStart,t);return r&&new Dm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Dm(s0e(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Dm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Dm(Ba.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Dm(e,r,i)}};_M.empty=new _M(Ba.empty,0,0);function s0e(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(s0e(s.content,e-i-1,t-i-1)))}function o0e(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=o0e(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let i$t=class a6{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new gY(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new gY(this,t,!0);return r.addAll(e,t.from,t.to),_M.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(a$t(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=yY(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=yY(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new a6(e,a6.schemaRules(e)))}};const a0e={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},s$t={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},l0e={ol:!0,ul:!0},AM=1,IM=2,ub=4;function mY(n,e,t){return e!=null?(e?AM:0)|(e==="full"?IM:0):n&&n.whitespace=="pre"?AM|IM:t&~ub}let TS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Rl.none,this.stashMarks=[],this.match=o||(a&ub?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ba.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&AM)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ba.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ba.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):c$t(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!a0e.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},gY=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=mY(null,t.preserveWhitespace,0)|(r?ub:0);i?s=new TS(i.type,i.attrs,Rl.none,Rl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new TS(null,null,Rl.none,Rl.none,!0,null,o):s=new TS(e.schema.topNodeType,null,Rl.none,Rl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(l$t(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&IM||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&AM)r.options&IM?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;l0e.hasOwnProperty(r)&&this.parser.normalizeLists&&o$t(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:s$t.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(a0e.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Rl.none,r=Rl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=mY(e,i,s.options);s.options&ub&&s.content.length==0&&(o|=ub),this.nodes.push(new TS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=u$t(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function o$t(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&l0e.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function a$t(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function l$t(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function yY(n){let e={};for(let t in n)e[t]=n[t];return e}function c$t(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function u$t(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function c0e(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let d$t=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:c0e({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Vs(n,e,t){return n.config[e]===void 0&&n.parent?Vs(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Vs(n.parent,e,t):null}):n.config[e]}function f$t(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Gr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function h$t(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function p$t(n){return typeof n=="function"}function qs(n,e=void 0,...t){return p$t(n)?e?n.bind(e)(...t):n(...t):n}function m$t(n){return Object.prototype.toString.call(n)==="[object RegExp]"}let g$t=class{constructor(e){this.find=e.find,this.handler=e.handler}},y$t=class{constructor(e){this.find=e.find,this.handler=e.handler}};function v$t(n){return Object.prototype.toString.call(n).slice(8,-1)}function KO(n){return v$t(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function F7(n,e){const t={...n};return KO(n)&&KO(e)&&Object.keys(e).forEach(r=>{KO(e[r])?r in n?t[r]=F7(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let J0=class l6{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=qs(Vs(this,"addOptions",{name:this.name}))),this.storage=qs(Vs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new l6(e)}configure(e={}){const t=this.extend();return t.options=F7(this.options,e),t.storage=qs(Vs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new l6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=qs(Vs(t,"addOptions",{name:t.name})),t.storage=qs(Vs(t,"addStorage",{name:t.name,options:t.options})),t}};function b$t(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function k$t(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}J0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=k$t(t);return b$t(r,{from:o,to:a},{textSerializers:l})}}})]}});const x$t=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),S$t=(n=!1)=>({commands:e})=>e.setContent("",n),w$t=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},$$t=n=>e=>n(e),E$t=()=>({state:n,dispatch:e})=>nn(n,e),C$t=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},M$t=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},T$t=n=>({tr:e,state:t,dispatch:r})=>{const i=Gr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},_$t=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},A$t=()=>({state:n,dispatch:e})=>Ht(n,e),I$t=()=>({commands:n})=>n.keyboardShortcut("Enter"),R$t=()=>({state:n,dispatch:e})=>tn(n,e);function RM(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:m$t(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function c6(n,e,t={}){return n.find(r=>r.type===e&&RM(r.attrs,t))}function O$t(n,e,t={}){return!!c6(n,e,t)}function L7(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=c6([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(c6([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&O$t([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function lf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const P$t=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=lf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=L7(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},D$t=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function u0e(n){return n instanceof D}function fh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function N$t(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,fh(0,i,s),fh(n.content.size,i,s)):D.create(n,fh(e,i,s),fh(e,i,s))}function z7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const F$t=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{z7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!u0e(t.state.selection))return o(),!0;const a=N$t(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},L$t=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),z$t=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),d0e=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&d0e(r)}return n};function vY(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return d0e(t)}function OM(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ba.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),OM("",e,t)}if(typeof n=="string"){const r=i$t.fromSchema(e);return t.slice?r.parseSlice(vY(n),t.parseOptions).content:r.parse(vY(n),t.parseOptions)}return OM("",e,t)}function B$t(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const j$t=n=>n.toString().startsWith("<"),V$t=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=OM(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((j$t(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&B$t(r,r.steps.length-1,-1)}return!0},q$t=()=>({state:n,dispatch:e})=>Yt(n,e),K$t=()=>({state:n,dispatch:e})=>Xt(n,e),U$t=()=>({state:n,dispatch:e})=>Wt(n,e),H$t=()=>({state:n,dispatch:e})=>Jt(n,e),W$t=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},G$t=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},J$t=()=>({state:n,dispatch:e})=>Cn(n,e),Q$t=()=>({state:n,dispatch:e})=>Mn(n,e);function f0e(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Y$t(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))z7()||f0e()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const X$t=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Y$t(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function B7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Gr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>RM(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Z$t=(n,e={})=>({state:t,dispatch:r})=>{const i=Gr(n,t.schema);return B7(t,i,e)?Zt(t,r):!1},eEt=()=>({state:n,dispatch:e})=>rn(n,e),tEt=n=>({state:e,dispatch:t})=>{const r=Gr(n,e.schema);return un(r)(e,t)},nEt=()=>({state:n,dispatch:e})=>en(n,e);function h0e(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function bY(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const rEt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=h0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Gr(n,r.schema)),a==="mark"&&(o=lf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,bY(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(bY(d.attrs,e)))})})}),!0):!1},iEt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),sEt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),oEt=()=>({state:n,dispatch:e})=>Gt(n,e),aEt=()=>({state:n,dispatch:e})=>Qt(n,e),lEt=()=>({state:n,dispatch:e})=>sn(n,e),cEt=()=>({state:n,dispatch:e})=>an(n,e),uEt=()=>({state:n,dispatch:e})=>on(n,e);function dEt(n,e,t={}){return OM(n,e,{slice:!1,parseOptions:t})}const fEt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=dEt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function hEt(n,e){const t=lf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function pEt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function mEt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function j7(n){return e=>mEt(e.$from,n)}function p0e(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n-1),o=L7(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function a$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function gEt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?lf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>RM(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>RM(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function kY(n,e){const{nodeExtensions:t}=f$t(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=qs(Vs(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function yEt(n,e,t){var r;const{selection:i}=e;let s=null;if(u0e(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const vEt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=lf(n,r.schema);if(i)if(o){const c=hEt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return yEt(r,t,l)},bEt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),kEt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Gr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},xEt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=fh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},SEt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=fh(i,o,a),c=fh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},wEt=n=>({state:e,dispatch:t})=>{const r=Gr(n,e.schema);return dn(r)(e,t)};function xY(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const $Et=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=a$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&xY(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:pEt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&xY(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},EEt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Gr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ba.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ba.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=a$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ba.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new _M(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=a$(d,u.type.name,u.attrs),p=a$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},UO=(n,e)=>{const t=j7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},HO=(n,e)=>{const t=j7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},CEt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Gr(n,o.schema),p=Gr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=j7(x=>kY(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(kY(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>UO(s,h)).command(()=>HO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>UO(s,h)).command(()=>HO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>UO(s,h)).command(()=>HO(s,h)).run()},MEt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=lf(n,r.schema);return gEt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},TEt=(n,e,t={})=>({state:r,commands:i})=>{const s=Gr(n,r.schema),o=Gr(e,r.schema);return B7(r,s,t)?i.setNode(o):i.setNode(s,t)},_Et=(n,e={})=>({state:t,commands:r})=>{const i=Gr(n,t.schema);return B7(t,i,e)?r.lift(i):r.wrapIn(i,e)},AEt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},IEt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},REt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=lf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=L7(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},OEt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=h0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Gr(n,r.schema)),a==="mark"&&(o=lf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},PEt=(n,e={})=>({state:t,dispatch:r})=>{const i=Gr(n,t.schema);return ln(i,e)(t,r)},DEt=(n,e={})=>({state:t,dispatch:r})=>{const i=Gr(n,t.schema);return cn(i,e)(t,r)};var NEt=Object.freeze({__proto__:null,blur:x$t,clearContent:S$t,clearNodes:w$t,command:$$t,createParagraphNear:E$t,cut:C$t,deleteCurrentNode:M$t,deleteNode:T$t,deleteRange:_$t,deleteSelection:A$t,enter:I$t,exitCode:R$t,extendMarkRange:P$t,first:D$t,focus:F$t,forEach:L$t,insertContent:z$t,insertContentAt:V$t,joinUp:q$t,joinDown:K$t,joinBackward:U$t,joinForward:H$t,joinItemBackward:W$t,joinItemForward:G$t,joinTextblockBackward:J$t,joinTextblockForward:Q$t,keyboardShortcut:X$t,lift:Z$t,liftEmptyBlock:eEt,liftListItem:tEt,newlineInCode:nEt,resetAttributes:rEt,scrollIntoView:iEt,selectAll:sEt,selectNodeBackward:oEt,selectNodeForward:aEt,selectParentNode:lEt,selectTextblockEnd:cEt,selectTextblockStart:uEt,setContent:fEt,setMark:vEt,setMeta:bEt,setNode:kEt,setNodeSelection:xEt,setTextSelection:SEt,sinkListItem:wEt,splitBlock:$Et,splitListItem:EEt,toggleList:CEt,toggleMark:MEt,toggleNode:TEt,toggleWrap:_Et,undoInputRule:AEt,unsetAllMarks:IEt,unsetMark:REt,updateAttributes:OEt,wrapIn:PEt,wrapInList:DEt});J0.create({name:"commands",addCommands(){return{...NEt}}});J0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});J0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});J0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return z7()||f0e()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=c0e({state:t,transaction:d}),{commands:h}=new d$t({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});J0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function SY(n){return new g$t({find:n.find,handler:({state:e,range:t,match:r})=>{const i=qs(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(p0e(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<t.to&&s.delete(u,t.to),c>t.from&&s.delete(t.from+l,c);const f=t.from+l+o.length;s.addMark(t.from+l,f,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}let FEt=class u6{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=qs(Vs(this,"addOptions",{name:this.name}))),this.storage=qs(Vs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new u6(e)}configure(e={}){const t=this.extend();return t.options=F7(this.options,e),t.storage=qs(Vs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new u6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=qs(Vs(t,"addOptions",{name:t.name})),t.storage=qs(Vs(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}};function wY(n){return new y$t({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=qs(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),f=d+a.length;if(p0e(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>d).length)return null;f<t.to&&o.delete(f,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}const LEt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,zEt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,BEt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,jEt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,V7=FEt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",h$t(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[SY({find:LEt,type:this.type}),SY({find:BEt,type:this.type})]},addPasteRules(){return[wY({find:zEt,type:this.type}),wY({find:jEt,type:this.type})]}});function m0e(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=m0e(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function g0e(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=g0e(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let ja=class $i{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new $i(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new $i(r,i)}cutByIndex(e,t){return e==t?$i.empty:e==0&&t==this.content.length?this:new $i(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new $i(i,s)}addToStart(e){return new $i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new $i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return m0e(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return g0e(this,e,t,r)}findIndex(e,t=-1){if(e==0)return _S(0,e);if(e==this.size)return _S(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?_S(r+1,o):_S(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return $i.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new $i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return $i.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new $i(t||e,r)}static from(e){if(!e)return $i.empty;if(e instanceof $i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new $i([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};ja.empty=new ja([],0);const WO={index:0,offset:0};function _S(n,e){return WO.index=n,WO.offset=e,WO}function d6(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!d6(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!d6(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Ol=class f6{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&d6(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return f6.none;if(e instanceof f6)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Ol.none=[];let PM=class Nm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=v0e(this.content,e+this.openStart,t);return r&&new Nm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Nm(y0e(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Nm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Nm(ja.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Nm(e,r,i)}};PM.empty=new PM(ja.empty,0,0);function y0e(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(y0e(s.content,e-i-1,t-i-1)))}function v0e(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=v0e(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let VEt=class h6{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new EY(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new EY(this,t,!0);return r.addAll(e,t.from,t.to),PM.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(UEt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=CY(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=CY(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new h6(e,h6.schemaRules(e)))}};const b0e={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},qEt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},k0e={ol:!0,ul:!0},DM=1,NM=2,db=4;function $Y(n,e,t){return e!=null?(e?DM:0)|(e==="full"?NM:0):n&&n.whitespace=="pre"?DM|NM:t&~db}let AS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Ol.none,this.stashMarks=[],this.match=o||(a&db?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ja.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&DM)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=ja.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ja.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):WEt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!b0e.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},EY=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=$Y(null,t.preserveWhitespace,0)|(r?db:0);i?s=new AS(i.type,i.attrs,Ol.none,Ol.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new AS(null,null,Ol.none,Ol.none,!0,null,o):s=new AS(e.schema.topNodeType,null,Ol.none,Ol.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(HEt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&NM||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&DM)r.options&NM?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;k0e.hasOwnProperty(r)&&this.parser.normalizeLists&&KEt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:qEt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(b0e.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Ol.none,r=Ol.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=$Y(e,i,s.options);s.options&db&&s.content.length==0&&(o|=db),this.nodes.push(new AS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=GEt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function KEt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&k0e.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function UEt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function HEt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function CY(n){let e={};for(let t in n)e[t]=n[t];return e}function WEt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function GEt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function x0e(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let JEt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:x0e({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Ks(n,e,t){return n.config[e]===void 0&&n.parent?Ks(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ks(n.parent,e,t):null}):n.config[e]}function QEt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Jr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function YEt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function XEt(n){return typeof n=="function"}function Us(n,e=void 0,...t){return XEt(n)?e?n.bind(e)(...t):n(...t):n}function ZEt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class eCt{constructor(e){this.find=e.find,this.handler=e.handler}}class tCt{constructor(e){this.find=e.find,this.handler=e.handler}}function nCt(n){return Object.prototype.toString.call(n).slice(8,-1)}function GO(n){return nCt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function q7(n,e){const t={...n};return GO(n)&&GO(e)&&Object.keys(e).forEach(r=>{GO(e[r])?r in n?t[r]=q7(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let Q0=class p6{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Us(Ks(this,"addOptions",{name:this.name}))),this.storage=Us(Ks(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new p6(e)}configure(e={}){const t=this.extend();return t.options=q7(this.options,e),t.storage=Us(Ks(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new p6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Us(Ks(t,"addOptions",{name:t.name})),t.storage=Us(Ks(t,"addStorage",{name:t.name,options:t.options})),t}};function rCt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function iCt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}Q0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=iCt(t);return rCt(r,{from:o,to:a},{textSerializers:l})}}})]}});const sCt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),oCt=(n=!1)=>({commands:e})=>e.setContent("",n),aCt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},lCt=n=>e=>n(e),cCt=()=>({state:n,dispatch:e})=>nn(n,e),uCt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},dCt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},fCt=n=>({tr:e,state:t,dispatch:r})=>{const i=Jr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},hCt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},pCt=()=>({state:n,dispatch:e})=>Ht(n,e),mCt=()=>({commands:n})=>n.keyboardShortcut("Enter"),gCt=()=>({state:n,dispatch:e})=>tn(n,e);function FM(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:ZEt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function m6(n,e,t={}){return n.find(r=>r.type===e&&FM(r.attrs,t))}function yCt(n,e,t={}){return!!m6(n,e,t)}function K7(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=m6([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(m6([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&yCt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function cf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const vCt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=cf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=K7(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},bCt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function S0e(n){return n instanceof D}function hh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function kCt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,hh(0,i,s),hh(n.content.size,i,s)):D.create(n,hh(e,i,s),hh(e,i,s))}function U7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const xCt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{U7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!S0e(t.state.selection))return o(),!0;const a=kCt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},SCt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),wCt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),w0e=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&w0e(r)}return n};function MY(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return w0e(t)}function LM(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?ja.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),LM("",e,t)}if(typeof n=="string"){const r=VEt.fromSchema(e);return t.slice?r.parseSlice(MY(n),t.parseOptions).content:r.parse(MY(n),t.parseOptions)}return LM("",e,t)}function $Ct(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const ECt=n=>n.toString().startsWith("<"),CCt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=LM(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((ECt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&$Ct(r,r.steps.length-1,-1)}return!0},MCt=()=>({state:n,dispatch:e})=>Yt(n,e),TCt=()=>({state:n,dispatch:e})=>Xt(n,e),_Ct=()=>({state:n,dispatch:e})=>Wt(n,e),ACt=()=>({state:n,dispatch:e})=>Jt(n,e),ICt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},RCt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},OCt=()=>({state:n,dispatch:e})=>Cn(n,e),PCt=()=>({state:n,dispatch:e})=>Mn(n,e);function H7(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function DCt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))U7()||H7()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const NCt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=DCt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function W7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Jr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>FM(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const FCt=(n,e={})=>({state:t,dispatch:r})=>{const i=Jr(n,t.schema);return W7(t,i,e)?Zt(t,r):!1},LCt=()=>({state:n,dispatch:e})=>rn(n,e),zCt=n=>({state:e,dispatch:t})=>{const r=Jr(n,e.schema);return un(r)(e,t)},BCt=()=>({state:n,dispatch:e})=>en(n,e);function $0e(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function TY(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const jCt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=$0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Jr(n,r.schema)),a==="mark"&&(o=cf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,TY(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(TY(d.attrs,e)))})})}),!0):!1},VCt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),qCt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),KCt=()=>({state:n,dispatch:e})=>Gt(n,e),UCt=()=>({state:n,dispatch:e})=>Qt(n,e),HCt=()=>({state:n,dispatch:e})=>sn(n,e),WCt=()=>({state:n,dispatch:e})=>an(n,e),GCt=()=>({state:n,dispatch:e})=>on(n,e);function JCt(n,e,t={}){return LM(n,e,{slice:!1,parseOptions:t})}const QCt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=JCt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function YCt(n,e){const t=cf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function XCt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function ZCt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function G7(n){return e=>ZCt(e.$from,n)}function E0e(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n-1),o=K7(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function l$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function eMt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?cf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>FM(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>FM(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function _Y(n,e){const{nodeExtensions:t}=QEt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Us(Ks(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function tMt(n,e,t){var r;const{selection:i}=e;let s=null;if(S0e(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const nMt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=cf(n,r.schema);if(i)if(o){const c=YCt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return tMt(r,t,l)},rMt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),iMt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Jr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},sMt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=hh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},oMt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=hh(i,o,a),c=hh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},aMt=n=>({state:e,dispatch:t})=>{const r=Jr(n,e.schema);return dn(r)(e,t)};function AY(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const lMt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=l$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&AY(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:XCt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&AY(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},cMt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Jr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=ja.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=ja.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=l$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(ja.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new PM(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=l$(d,u.type.name,u.attrs),p=l$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},JO=(n,e)=>{const t=G7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},QO=(n,e)=>{const t=G7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},uMt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Jr(n,o.schema),p=Jr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=G7(x=>_Y(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(_Y(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>JO(s,h)).command(()=>QO(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>JO(s,h)).command(()=>QO(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>JO(s,h)).command(()=>QO(s,h)).run()},dMt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=cf(n,r.schema);return eMt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},fMt=(n,e,t={})=>({state:r,commands:i})=>{const s=Jr(n,r.schema),o=Jr(e,r.schema);return W7(r,s,t)?i.setNode(o):i.setNode(s,t)},hMt=(n,e={})=>({state:t,commands:r})=>{const i=Jr(n,t.schema);return W7(t,i,e)?r.lift(i):r.wrapIn(i,e)},pMt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},mMt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},gMt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=cf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=K7(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},yMt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=$0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Jr(n,r.schema)),a==="mark"&&(o=cf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},vMt=(n,e={})=>({state:t,dispatch:r})=>{const i=Jr(n,t.schema);return ln(i,e)(t,r)},bMt=(n,e={})=>({state:t,dispatch:r})=>{const i=Jr(n,t.schema);return cn(i,e)(t,r)};var kMt=Object.freeze({__proto__:null,blur:sCt,clearContent:oCt,clearNodes:aCt,command:lCt,createParagraphNear:cCt,cut:uCt,deleteCurrentNode:dCt,deleteNode:fCt,deleteRange:hCt,deleteSelection:pCt,enter:mCt,exitCode:gCt,extendMarkRange:vCt,first:bCt,focus:xCt,forEach:SCt,insertContent:wCt,insertContentAt:CCt,joinUp:MCt,joinDown:TCt,joinBackward:_Ct,joinForward:ACt,joinItemBackward:ICt,joinItemForward:RCt,joinTextblockBackward:OCt,joinTextblockForward:PCt,keyboardShortcut:NCt,lift:FCt,liftEmptyBlock:LCt,liftListItem:zCt,newlineInCode:BCt,resetAttributes:jCt,scrollIntoView:VCt,selectAll:qCt,selectNodeBackward:KCt,selectNodeForward:UCt,selectParentNode:HCt,selectTextblockEnd:WCt,selectTextblockStart:GCt,setContent:QCt,setMark:nMt,setMeta:rMt,setNode:iMt,setNodeSelection:sMt,setTextSelection:oMt,sinkListItem:aMt,splitBlock:lMt,splitListItem:cMt,toggleList:uMt,toggleMark:dMt,toggleNode:fMt,toggleWrap:hMt,undoInputRule:pMt,unsetAllMarks:mMt,unsetMark:gMt,updateAttributes:yMt,wrapIn:vMt,wrapInList:bMt});Q0.create({name:"commands",addCommands(){return{...kMt}}});Q0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});Q0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});Q0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return U7()||H7()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=x0e({state:t,transaction:d}),{commands:h}=new JEt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});Q0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function xMt(n){return new eCt({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Us(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(E0e(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<t.to&&s.delete(u,t.to),c>t.from&&s.delete(t.from+l,c);const f=t.from+l+o.length;s.addMark(t.from+l,f,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}let SMt=class g6{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Us(Ks(this,"addOptions",{name:this.name}))),this.storage=Us(Ks(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new g6(e)}configure(e={}){const t=this.extend();return t.options=q7(this.options,e),t.storage=Us(Ks(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new g6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Us(Ks(t,"addOptions",{name:t.name})),t.storage=Us(Ks(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}};function wMt(n){return new tCt({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=Us(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),f=d+a.length;if(E0e(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>d).length)return null;f<t.to&&o.delete(f,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}const $Mt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,EMt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,J7=SMt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",YEt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){const n={};return H7()?n["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():n["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),n},addInputRules(){return[xMt({find:$Mt,type:this.type})]},addPasteRules(){return[wMt({find:EMt,type:this.type})]}});function C0e(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=C0e(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function M0e(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=M0e(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Va=class Ei{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ei(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ei(r,i)}cutByIndex(e,t){return e==t?Ei.empty:e==0&&t==this.content.length?this:new Ei(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Ei(i,s)}addToStart(e){return new Ei([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ei(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return C0e(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return M0e(this,e,t,r)}findIndex(e,t=-1){if(e==0)return IS(0,e);if(e==this.size)return IS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?IS(r+1,o):IS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Ei.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ei(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ei.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Ei(t||e,r)}static from(e){if(!e)return Ei.empty;if(e instanceof Ei)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ei([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Va.empty=new Va([],0);const YO={index:0,offset:0};function IS(n,e){return YO.index=n,YO.offset=e,YO}function y6(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!y6(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!y6(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Pl=class v6{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&y6(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return v6.none;if(e instanceof v6)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Pl.none=[];let zM=class Fm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=_0e(this.content,e+this.openStart,t);return r&&new Fm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Fm(T0e(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Fm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Fm(Va.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Fm(e,r,i)}};zM.empty=new zM(Va.empty,0,0);function T0e(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(T0e(s.content,e-i-1,t-i-1)))}function _0e(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=_0e(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let CMt=class b6{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new RY(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new RY(this,t,!0);return r.addAll(e,t.from,t.to),zM.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(_Mt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=OY(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=OY(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new b6(e,b6.schemaRules(e)))}};const A0e={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},MMt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},I0e={ol:!0,ul:!0},BM=1,jM=2,fb=4;function IY(n,e,t){return e!=null?(e?BM:0)|(e==="full"?jM:0):n&&n.whitespace=="pre"?BM|jM:t&~fb}let RS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Pl.none,this.stashMarks=[],this.match=o||(a&fb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Va.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&BM)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Va.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Va.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):IMt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!A0e.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},RY=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=IY(null,t.preserveWhitespace,0)|(r?fb:0);i?s=new RS(i.type,i.attrs,Pl.none,Pl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new RS(null,null,Pl.none,Pl.none,!0,null,o):s=new RS(e.schema.topNodeType,null,Pl.none,Pl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(AMt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&jM||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&BM)r.options&jM?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;I0e.hasOwnProperty(r)&&this.parser.normalizeLists&&TMt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:MMt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(A0e.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Pl.none,r=Pl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=IY(e,i,s.options);s.options&fb&&s.content.length==0&&(o|=fb),this.nodes.push(new RS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=RMt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function TMt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&I0e.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function _Mt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function AMt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function OY(n){let e={};for(let t in n)e[t]=n[t];return e}function IMt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function RMt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function R0e(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let OMt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:R0e({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Hu(n,e,t){return n.config[e]===void 0&&n.parent?Hu(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Hu(n.parent,e,t):null}):n.config[e]}function PMt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Qr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function DMt(n){return typeof n=="function"}function Lm(n,e=void 0,...t){return DMt(n)?e?n.bind(e)(...t):n(...t):n}function NMt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function FMt(n){return Object.prototype.toString.call(n).slice(8,-1)}function XO(n){return FMt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function O0e(n,e){const t={...n};return XO(n)&&XO(e)&&Object.keys(e).forEach(r=>{XO(e[r])?r in n?t[r]=O0e(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let vp=class k6{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Lm(Hu(this,"addOptions",{name:this.name}))),this.storage=Lm(Hu(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new k6(e)}configure(e={}){const t=this.extend();return t.options=O0e(this.options,e),t.storage=Lm(Hu(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new k6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Lm(Hu(t,"addOptions",{name:t.name})),t.storage=Lm(Hu(t,"addStorage",{name:t.name,options:t.options})),t}};function LMt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function zMt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}vp.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=zMt(t);return LMt(r,{from:o,to:a},{textSerializers:l})}}})]}});const BMt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),jMt=(n=!1)=>({commands:e})=>e.setContent("",n),VMt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},qMt=n=>e=>n(e),KMt=()=>({state:n,dispatch:e})=>nn(n,e),UMt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},HMt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},WMt=n=>({tr:e,state:t,dispatch:r})=>{const i=Qr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},GMt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},JMt=()=>({state:n,dispatch:e})=>Ht(n,e),QMt=()=>({commands:n})=>n.keyboardShortcut("Enter"),YMt=()=>({state:n,dispatch:e})=>tn(n,e);function VM(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:NMt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function x6(n,e,t={}){return n.find(r=>r.type===e&&VM(r.attrs,t))}function XMt(n,e,t={}){return!!x6(n,e,t)}function P0e(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=x6([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(x6([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&XMt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function uf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const ZMt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=uf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=P0e(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},eTt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function D0e(n){return n instanceof D}function ph(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function tTt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,ph(0,i,s),ph(n.content.size,i,s)):D.create(n,ph(e,i,s),ph(e,i,s))}function Q7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const nTt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{Q7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!D0e(t.state.selection))return o(),!0;const a=tTt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},rTt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),iTt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),N0e=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&N0e(r)}return n};function PY(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return N0e(t)}function qM(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Va.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),qM("",e,t)}if(typeof n=="string"){const r=CMt.fromSchema(e);return t.slice?r.parseSlice(PY(n),t.parseOptions).content:r.parse(PY(n),t.parseOptions)}return qM("",e,t)}function sTt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const oTt=n=>n.toString().startsWith("<"),aTt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=qM(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((oTt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&sTt(r,r.steps.length-1,-1)}return!0},lTt=()=>({state:n,dispatch:e})=>Yt(n,e),cTt=()=>({state:n,dispatch:e})=>Xt(n,e),uTt=()=>({state:n,dispatch:e})=>Wt(n,e),dTt=()=>({state:n,dispatch:e})=>Jt(n,e),fTt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},hTt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},pTt=()=>({state:n,dispatch:e})=>Cn(n,e),mTt=()=>({state:n,dispatch:e})=>Mn(n,e);function F0e(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function gTt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Q7()||F0e()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const yTt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=gTt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Y7(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Qr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>VM(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const vTt=(n,e={})=>({state:t,dispatch:r})=>{const i=Qr(n,t.schema);return Y7(t,i,e)?Zt(t,r):!1},bTt=()=>({state:n,dispatch:e})=>rn(n,e),kTt=n=>({state:e,dispatch:t})=>{const r=Qr(n,e.schema);return un(r)(e,t)},xTt=()=>({state:n,dispatch:e})=>en(n,e);function L0e(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function DY(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const STt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=L0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Qr(n,r.schema)),a==="mark"&&(o=uf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,DY(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(DY(d.attrs,e)))})})}),!0):!1},wTt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),$Tt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),ETt=()=>({state:n,dispatch:e})=>Gt(n,e),CTt=()=>({state:n,dispatch:e})=>Qt(n,e),MTt=()=>({state:n,dispatch:e})=>sn(n,e),TTt=()=>({state:n,dispatch:e})=>an(n,e),_Tt=()=>({state:n,dispatch:e})=>on(n,e);function ATt(n,e,t={}){return qM(n,e,{slice:!1,parseOptions:t})}const ITt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=ATt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function RTt(n,e){const t=uf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function OTt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function PTt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function X7(n){return e=>PTt(e.$from,n)}function c$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function DTt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?uf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>VM(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>VM(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function NY(n,e){const{nodeExtensions:t}=PMt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Lm(Hu(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function NTt(n,e,t){var r;const{selection:i}=e;let s=null;if(D0e(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const FTt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=uf(n,r.schema);if(i)if(o){const c=RTt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return NTt(r,t,l)},LTt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),zTt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Qr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},BTt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=ph(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},jTt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=ph(i,o,a),c=ph(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},VTt=n=>({state:e,dispatch:t})=>{const r=Qr(n,e.schema);return dn(r)(e,t)};function FY(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const qTt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=c$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&FY(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:OTt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&FY(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},KTt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Qr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Va.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Va.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=c$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Va.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new zM(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=c$(d,u.type.name,u.attrs),p=c$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},ZO=(n,e)=>{const t=X7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},eP=(n,e)=>{const t=X7(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},UTt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Qr(n,o.schema),p=Qr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=X7(x=>NY(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(NY(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>ZO(s,h)).command(()=>eP(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>ZO(s,h)).command(()=>eP(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>ZO(s,h)).command(()=>eP(s,h)).run()},HTt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=uf(n,r.schema);return DTt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},WTt=(n,e,t={})=>({state:r,commands:i})=>{const s=Qr(n,r.schema),o=Qr(e,r.schema);return Y7(r,s,t)?i.setNode(o):i.setNode(s,t)},GTt=(n,e={})=>({state:t,commands:r})=>{const i=Qr(n,t.schema);return Y7(t,i,e)?r.lift(i):r.wrapIn(i,e)},JTt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},QTt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},YTt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=uf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=P0e(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},XTt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=L0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Qr(n,r.schema)),a==="mark"&&(o=uf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},ZTt=(n,e={})=>({state:t,dispatch:r})=>{const i=Qr(n,t.schema);return ln(i,e)(t,r)},e_t=(n,e={})=>({state:t,dispatch:r})=>{const i=Qr(n,t.schema);return cn(i,e)(t,r)};var t_t=Object.freeze({__proto__:null,blur:BMt,clearContent:jMt,clearNodes:VMt,command:qMt,createParagraphNear:KMt,cut:UMt,deleteCurrentNode:HMt,deleteNode:WMt,deleteRange:GMt,deleteSelection:JMt,enter:QMt,exitCode:YMt,extendMarkRange:ZMt,first:eTt,focus:nTt,forEach:rTt,insertContent:iTt,insertContentAt:aTt,joinUp:lTt,joinDown:cTt,joinBackward:uTt,joinForward:dTt,joinItemBackward:fTt,joinItemForward:hTt,joinTextblockBackward:pTt,joinTextblockForward:mTt,keyboardShortcut:yTt,lift:vTt,liftEmptyBlock:bTt,liftListItem:kTt,newlineInCode:xTt,resetAttributes:STt,scrollIntoView:wTt,selectAll:$Tt,selectNodeBackward:ETt,selectNodeForward:CTt,selectParentNode:MTt,selectTextblockEnd:TTt,selectTextblockStart:_Tt,setContent:ITt,setMark:FTt,setMeta:LTt,setNode:zTt,setNodeSelection:BTt,setTextSelection:jTt,sinkListItem:VTt,splitBlock:qTt,splitListItem:KTt,toggleList:UTt,toggleMark:HTt,toggleNode:WTt,toggleWrap:GTt,undoInputRule:JTt,unsetAllMarks:QTt,unsetMark:YTt,updateAttributes:XTt,wrapIn:ZTt,wrapInList:e_t});vp.create({name:"commands",addCommands(){return{...t_t}}});vp.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});vp.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});vp.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Q7()||F0e()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=R0e({state:t,transaction:d}),{commands:h}=new OMt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});vp.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function n_t(n={}){return new Q({view(e){return new r_t(e,n)}})}class r_t{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=oA(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const z0e=vp.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[n_t(this.options)]}});function B0e(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=B0e(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function j0e(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=j0e(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let qa=class Ci{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ci(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ci(r,i)}cutByIndex(e,t){return e==t?Ci.empty:e==0&&t==this.content.length?this:new Ci(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Ci(i,s)}addToStart(e){return new Ci([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ci(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return B0e(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return j0e(this,e,t,r)}findIndex(e,t=-1){if(e==0)return OS(0,e);if(e==this.size)return OS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?OS(r+1,o):OS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Ci.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ci(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ci.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Ci(t||e,r)}static from(e){if(!e)return Ci.empty;if(e instanceof Ci)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ci([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};qa.empty=new qa([],0);const tP={index:0,offset:0};function OS(n,e){return tP.index=n,tP.offset=e,tP}function S6(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!S6(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!S6(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Dl=class w6{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&S6(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return w6.none;if(e instanceof w6)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Dl.none=[];let KM=class zm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=q0e(this.content,e+this.openStart,t);return r&&new zm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new zm(V0e(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return zm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new zm(qa.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new zm(e,r,i)}};KM.empty=new KM(qa.empty,0,0);function V0e(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(V0e(s.content,e-i-1,t-i-1)))}function q0e(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=q0e(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let i_t=class $6{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new zY(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new zY(this,t,!0);return r.addAll(e,t.from,t.to),KM.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(a_t(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=BY(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=BY(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new $6(e,$6.schemaRules(e)))}};const K0e={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},s_t={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},U0e={ol:!0,ul:!0},UM=1,HM=2,hb=4;function LY(n,e,t){return e!=null?(e?UM:0)|(e==="full"?HM:0):n&&n.whitespace=="pre"?UM|HM:t&~hb}let PS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Dl.none,this.stashMarks=[],this.match=o||(a&hb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(qa.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&UM)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=qa.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(qa.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):c_t(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!K0e.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},zY=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=LY(null,t.preserveWhitespace,0)|(r?hb:0);i?s=new PS(i.type,i.attrs,Dl.none,Dl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new PS(null,null,Dl.none,Dl.none,!0,null,o):s=new PS(e.schema.topNodeType,null,Dl.none,Dl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(l_t(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&HM||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&UM)r.options&HM?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;U0e.hasOwnProperty(r)&&this.parser.normalizeLists&&o_t(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:s_t.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(K0e.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Dl.none,r=Dl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=LY(e,i,s.options);s.options&hb&&s.content.length==0&&(o|=hb),this.nodes.push(new PS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=u_t(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function o_t(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&U0e.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function a_t(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function l_t(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function BY(n){let e={};for(let t in n)e[t]=n[t];return e}function c_t(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function u_t(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function H0e(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let d_t=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:H0e({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Oc(n,e,t){return n.config[e]===void 0&&n.parent?Oc(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Oc(n.parent,e,t):null}):n.config[e]}function f_t(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Yr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function h_t(n){return typeof n=="function"}function Ff(n,e=void 0,...t){return h_t(n)?e?n.bind(e)(...t):n(...t):n}function p_t(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function m_t(n){return Object.prototype.toString.call(n).slice(8,-1)}function nP(n){return m_t(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function W0e(n,e){const t={...n};return nP(n)&&nP(e)&&Object.keys(e).forEach(r=>{nP(e[r])?r in n?t[r]=W0e(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let bp=class E6{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ff(Oc(this,"addOptions",{name:this.name}))),this.storage=Ff(Oc(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new E6(e)}configure(e={}){const t=this.extend();return t.options=W0e(this.options,e),t.storage=Ff(Oc(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new E6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ff(Oc(t,"addOptions",{name:t.name})),t.storage=Ff(Oc(t,"addStorage",{name:t.name,options:t.options})),t}};function g_t(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function y_t(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}bp.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=y_t(t);return g_t(r,{from:o,to:a},{textSerializers:l})}}})]}});const v_t=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),b_t=(n=!1)=>({commands:e})=>e.setContent("",n),k_t=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},x_t=n=>e=>n(e),S_t=()=>({state:n,dispatch:e})=>nn(n,e),w_t=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},$_t=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},E_t=n=>({tr:e,state:t,dispatch:r})=>{const i=Yr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},C_t=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},M_t=()=>({state:n,dispatch:e})=>Ht(n,e),T_t=()=>({commands:n})=>n.keyboardShortcut("Enter"),__t=()=>({state:n,dispatch:e})=>tn(n,e);function WM(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:p_t(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function C6(n,e,t={}){return n.find(r=>r.type===e&&WM(r.attrs,t))}function A_t(n,e,t={}){return!!C6(n,e,t)}function G0e(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=C6([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(C6([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&A_t([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function df(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const I_t=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=df(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=G0e(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},R_t=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function J0e(n){return n instanceof D}function mh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function O_t(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,mh(0,i,s),mh(n.content.size,i,s)):D.create(n,mh(e,i,s),mh(e,i,s))}function Z7(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const P_t=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{Z7()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!J0e(t.state.selection))return o(),!0;const a=O_t(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},D_t=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),N_t=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Q0e=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Q0e(r)}return n};function jY(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Q0e(t)}function GM(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?qa.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),GM("",e,t)}if(typeof n=="string"){const r=i_t.fromSchema(e);return t.slice?r.parseSlice(jY(n),t.parseOptions).content:r.parse(jY(n),t.parseOptions)}return GM("",e,t)}function F_t(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const L_t=n=>n.toString().startsWith("<"),z_t=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=GM(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((L_t(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&F_t(r,r.steps.length-1,-1)}return!0},B_t=()=>({state:n,dispatch:e})=>Yt(n,e),j_t=()=>({state:n,dispatch:e})=>Xt(n,e),V_t=()=>({state:n,dispatch:e})=>Wt(n,e),q_t=()=>({state:n,dispatch:e})=>Jt(n,e),K_t=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},U_t=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},H_t=()=>({state:n,dispatch:e})=>Cn(n,e),W_t=()=>({state:n,dispatch:e})=>Mn(n,e);function Y0e(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function G_t(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Z7()||Y0e()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const J_t=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=G_t(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function e9(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Yr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>WM(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Q_t=(n,e={})=>({state:t,dispatch:r})=>{const i=Yr(n,t.schema);return e9(t,i,e)?Zt(t,r):!1},Y_t=()=>({state:n,dispatch:e})=>rn(n,e),X_t=n=>({state:e,dispatch:t})=>{const r=Yr(n,e.schema);return un(r)(e,t)},Z_t=()=>({state:n,dispatch:e})=>en(n,e);function X0e(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function VY(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const eAt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=X0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Yr(n,r.schema)),a==="mark"&&(o=df(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,VY(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(VY(d.attrs,e)))})})}),!0):!1},tAt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),nAt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),rAt=()=>({state:n,dispatch:e})=>Gt(n,e),iAt=()=>({state:n,dispatch:e})=>Qt(n,e),sAt=()=>({state:n,dispatch:e})=>sn(n,e),oAt=()=>({state:n,dispatch:e})=>an(n,e),aAt=()=>({state:n,dispatch:e})=>on(n,e);function lAt(n,e,t={}){return GM(n,e,{slice:!1,parseOptions:t})}const cAt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=lAt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function uAt(n,e){const t=df(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function dAt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function fAt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function t9(n){return e=>fAt(e.$from,n)}function u$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function hAt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?df(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>WM(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>WM(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function qY(n,e){const{nodeExtensions:t}=f_t(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Ff(Oc(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function pAt(n,e,t){var r;const{selection:i}=e;let s=null;if(J0e(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const mAt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=df(n,r.schema);if(i)if(o){const c=uAt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return pAt(r,t,l)},gAt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),yAt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Yr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},vAt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=mh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},bAt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=mh(i,o,a),c=mh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},kAt=n=>({state:e,dispatch:t})=>{const r=Yr(n,e.schema);return dn(r)(e,t)};function KY(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const xAt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=u$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&KY(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:dAt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&KY(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},SAt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Yr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=qa.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=qa.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=u$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(qa.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new KM(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=u$(d,u.type.name,u.attrs),p=u$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},rP=(n,e)=>{const t=t9(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},iP=(n,e)=>{const t=t9(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},wAt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Yr(n,o.schema),p=Yr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=t9(x=>qY(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(qY(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>rP(s,h)).command(()=>iP(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>rP(s,h)).command(()=>iP(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>rP(s,h)).command(()=>iP(s,h)).run()},$At=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=df(n,r.schema);return hAt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},EAt=(n,e,t={})=>({state:r,commands:i})=>{const s=Yr(n,r.schema),o=Yr(e,r.schema);return e9(r,s,t)?i.setNode(o):i.setNode(s,t)},CAt=(n,e={})=>({state:t,commands:r})=>{const i=Yr(n,t.schema);return e9(t,i,e)?r.lift(i):r.wrapIn(i,e)},MAt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},TAt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},_At=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=df(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=G0e(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},AAt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=X0e(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Yr(n,r.schema)),a==="mark"&&(o=df(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},IAt=(n,e={})=>({state:t,dispatch:r})=>{const i=Yr(n,t.schema);return ln(i,e)(t,r)},RAt=(n,e={})=>({state:t,dispatch:r})=>{const i=Yr(n,t.schema);return cn(i,e)(t,r)};var OAt=Object.freeze({__proto__:null,blur:v_t,clearContent:b_t,clearNodes:k_t,command:x_t,createParagraphNear:S_t,cut:w_t,deleteCurrentNode:$_t,deleteNode:E_t,deleteRange:C_t,deleteSelection:M_t,enter:T_t,exitCode:__t,extendMarkRange:I_t,first:R_t,focus:P_t,forEach:D_t,insertContent:N_t,insertContentAt:z_t,joinUp:B_t,joinDown:j_t,joinBackward:V_t,joinForward:q_t,joinItemBackward:K_t,joinItemForward:U_t,joinTextblockBackward:H_t,joinTextblockForward:W_t,keyboardShortcut:J_t,lift:Q_t,liftEmptyBlock:Y_t,liftListItem:X_t,newlineInCode:Z_t,resetAttributes:eAt,scrollIntoView:tAt,selectAll:nAt,selectNodeBackward:rAt,selectNodeForward:iAt,selectParentNode:sAt,selectTextblockEnd:oAt,selectTextblockStart:aAt,setContent:cAt,setMark:mAt,setMeta:gAt,setNode:yAt,setNodeSelection:vAt,setTextSelection:bAt,sinkListItem:kAt,splitBlock:xAt,splitListItem:SAt,toggleList:wAt,toggleMark:$At,toggleNode:EAt,toggleWrap:CAt,undoInputRule:MAt,unsetAllMarks:TAt,unsetMark:_At,updateAttributes:AAt,wrapIn:IAt,wrapInList:RAt});bp.create({name:"commands",addCommands(){return{...OAt}}});bp.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});bp.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});bp.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Z7()||Y0e()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=H0e({state:t,transaction:d}),{commands:h}=new d_t({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});bp.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Z0e(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Z0e(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function eye(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=eye(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ir=class Mi{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Mi(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Mi(r,i)}cutByIndex(e,t){return e==t?Mi.empty:e==0&&t==this.content.length?this:new Mi(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Mi(i,s)}addToStart(e){return new Mi([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Mi(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Z0e(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return eye(this,e,t,r)}findIndex(e,t=-1){if(e==0)return DS(0,e);if(e==this.size)return DS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?DS(r+1,o):DS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Mi.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Mi(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Mi.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Mi(t||e,r)}static from(e){if(!e)return Mi.empty;if(e instanceof Mi)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Mi([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ir.empty=new Ir([],0);const sP={index:0,offset:0};function DS(n,e){return sP.index=n,sP.offset=e,sP}function M6(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!M6(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!M6(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Nl=class T6{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&M6(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return T6.none;if(e instanceof T6)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Nl.none=[];let Zs=class Bm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=nye(this.content,e+this.openStart,t);return r&&new Bm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Bm(tye(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Bm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Bm(Ir.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Bm(e,r,i)}};Zs.empty=new Zs(Ir.empty,0,0);function tye(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(tye(s.content,e-i-1,t-i-1)))}function nye(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=nye(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let PAt=class _6{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new HY(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new HY(this,t,!0);return r.addAll(e,t.from,t.to),Zs.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(FAt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=WY(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=WY(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new _6(e,_6.schemaRules(e)))}};const rye={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},DAt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},iye={ol:!0,ul:!0},JM=1,QM=2,pb=4;function UY(n,e,t){return e!=null?(e?JM:0)|(e==="full"?QM:0):n&&n.whitespace=="pre"?JM|QM:t&~pb}let NS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Nl.none,this.stashMarks=[],this.match=o||(a&pb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ir.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&JM)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ir.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ir.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):zAt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!rye.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},HY=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=UY(null,t.preserveWhitespace,0)|(r?pb:0);i?s=new NS(i.type,i.attrs,Nl.none,Nl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new NS(null,null,Nl.none,Nl.none,!0,null,o):s=new NS(e.schema.topNodeType,null,Nl.none,Nl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(LAt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&QM||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&JM)r.options&QM?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;iye.hasOwnProperty(r)&&this.parser.normalizeLists&&NAt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:DAt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(rye.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Nl.none,r=Nl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=UY(e,i,s.options);s.options&pb&&s.content.length==0&&(o|=pb),this.nodes.push(new NS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=BAt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function NAt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&iye.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function FAt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function LAt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function WY(n){let e={};for(let t in n)e[t]=n[t];return e}function zAt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function BAt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}let sye=class dv{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=oP(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=dv.renderSpec(oP(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&dv.renderSpec(oP(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<t.length;u++){let d=t[u];if(d===0){if(u<t.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=dv.renderSpec(e,d,r);if(a.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new dv(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=GY(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return GY(e.marks)}};function GY(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function oP(n){return n.document||window.document}const kp=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},oye=function(n,e,t,r){return t&&(JY(n,e,t,r,-1)||JY(n,e,t,r,1))},jAt=/^(img|br|input|textarea|hr)$/i;function JY(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:YM(n))){let s=n.parentNode;if(!s||s.nodeType!=1||n9(n)||jAt.test(n.nodeName)||n.contentEditable=="false")return!1;e=kp(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?YM(n):0}else return!1}}function YM(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function VAt(n,e,t){for(let r=e==0,i=e==YM(n);r||i;){if(n==t)return!0;let s=kp(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==YM(n)}}function n9(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const aye=function(n){return n.focusNode&&oye(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function lye(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}const uc=typeof navigator<"u"?navigator:null,QY=typeof document<"u"?document:null,ff=uc&&uc.userAgent||"",A6=/Edge\/(\d+)/.exec(ff),cye=/MSIE \d/.exec(ff),I6=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ff),g1=!!(cye||I6||A6),uye=cye?document.documentMode:I6?+I6[1]:A6?+A6[1]:0,bA=!g1&&/gecko\/(\d+)/i.test(ff);bA&&+(/Firefox\/(\d+)/.exec(ff)||[0,0])[1];const R6=!g1&&/Chrome\/(\d+)/.exec(ff),xp=!!R6,qAt=R6?+R6[1]:0,Sp=!g1&&!!uc&&/Apple Computer/.test(uc.vendor),r9=Sp&&(/Mobile\/\w+/.test(ff)||!!uc&&uc.maxTouchPoints>2),So=r9||(uc?/Mac/.test(uc.platform):!1),KAt=uc?/Win/.test(uc.platform):!1,y1=/Android \d/.test(ff),i9=!!QY&&"webkitFontSmoothing"in QY.documentElement.style,UAt=i9?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function HAt(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(aye(t)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&G.isSelectable(u)&&i.parent&&!(u.isInline&&VAt(t.focusNode,t.focusOffset,i.dom))){let d=i.posBefore;c=new G(o==d?a:r.resolve(d))}}else{let u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=fye(n,l,a,u)}return c}function dye(n){return n.editable?n.hasFocus():QAt(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function s9(n,e=!1){let t=n.state.selection;if(JAt(n,t),!!dye(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&xp){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&oye(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)GAt(n);else{let{anchor:r,head:i}=t,s,o;YY&&!(t instanceof D)&&(t.$from.parent.inlineContent||(s=XY(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=XY(n,t.to))),n.docView.setSelection(r,i,n.root,e),YY&&(s&&ZY(s),o&&ZY(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&WAt(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const YY=Sp||xp&&qAt<63;function XY(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(Sp&&i&&i.contentEditable=="false")return aP(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return aP(i);if(s)return aP(s)}}function aP(n){return n.contentEditable="true",Sp&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function ZY(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function WAt(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!dye(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function GAt(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,kp(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&g1&&uye<=11&&(r.disabled=!0,r.disabled=!1)}function JAt(n,e){if(e instanceof G){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(eX(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else eX(n)}function eX(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function fye(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||D.between(e,t,r)}function QAt(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function O6(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&V.findFrom(s,e)}function Pu(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function tX(n,e,t){let r=n.state.selection;if(r instanceof D)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Pu(n,new D(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=O6(n.state,e);return i&&i instanceof G?Pu(n,i):!1}else if(!(So&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?G.isSelectable(s)?Pu(n,new G(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):i9?Pu(n,new D(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof G&&r.node.isInline)return Pu(n,new D(e>0?r.$to:r.$from));{let i=O6(n.state,e);return i?Pu(n,i):!1}}}function XM(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function mb(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Jp(n,e){return e<0?YAt(n):XAt(n)}function YAt(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(bA&&t.nodeType==1&&r<XM(t)&&mb(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(mb(a,-1))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(hye(t))break;{let a=t.previousSibling;for(;a&&mb(a,-1);)i=t.parentNode,s=kp(a),a=a.previousSibling;if(a)t=a,r=XM(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?P6(n,t,r):i&&P6(n,i,s)}function XAt(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=XM(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(mb(a,1))s=t,o=++r;else break}else{if(hye(t))break;{let a=t.nextSibling;for(;a&&mb(a,1);)s=a.parentNode,o=kp(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=XM(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&P6(n,s,o)}function hye(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function ZAt(n,e){for(;n&&e==n.childNodes.length&&!n9(n);)e=kp(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function e2t(n,e){for(;n&&!e&&!n9(n);)e=kp(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function P6(n,e,t){if(e.nodeType!=3){let s,o;(o=ZAt(e,t))?(e=o,t=0):(s=e2t(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(aye(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&s9(n)},50)}function nX(n,e){let t=n.state.doc.resolve(e);if(!(xp||KAt)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function rX(n,e,t){let r=n.state.selection;if(r instanceof D&&!r.empty||t.indexOf("s")>-1||So&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=O6(n.state,e);if(o&&o instanceof G)return Pu(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Xs?V.near(o,e):V.findFrom(o,e);return a?Pu(n,a):!1}return!1}function iX(n,e){if(!(n.state.selection instanceof D))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function sX(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function t2t(n){if(!Sp||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;sX(n,r,"true"),setTimeout(()=>sX(n,r,"false"),20)}return!1}function n2t(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function r2t(n,e){let t=e.keyCode,r=n2t(e);if(t==8||So&&t==72&&r=="c")return iX(n,-1)||Jp(n,-1);if(t==46&&!e.shiftKey||So&&t==68&&r=="c")return iX(n,1)||Jp(n,1);if(t==13||t==27)return!0;if(t==37||So&&t==66&&r=="c"){let i=t==37?nX(n,n.state.selection.from)=="ltr"?-1:1:-1;return tX(n,i,r)||Jp(n,i)}else if(t==39||So&&t==70&&r=="c"){let i=t==39?nX(n,n.state.selection.from)=="ltr"?1:-1:1;return tX(n,i,r)||Jp(n,i)}else{if(t==38||So&&t==80&&r=="c")return rX(n,-1,r)||Jp(n,-1);if(t==40||So&&t==78&&r=="c")return t2t(n)||rX(n,1,r)||Jp(n,1);if(r==(So?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function pye(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=n.someProp("clipboardSerializer")||sye.fromSchema(n.state.schema),a=kye(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=bye[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function mye(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",f=>{e=f(e,s||r,n)}),s)return e?new Zs(Ir.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Zs.empty;let d=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(d)a=d;else{let f=i.marks(),{schema:h}=n.state,p=sye.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,f)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),o=o2t(t),i9&&a2t(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||PAt.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!i2t.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=l2t(oX(a,+u[1],+u[2]),u[4]);else if(a=Zs.maxOpen(s2t(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=oX(a,d,f)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}const i2t=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function s2t(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&yye(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=vye(o[o.length-1],s.length));let u=gye(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return Ir.from(o)}return n}function gye(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,Ir.from(n));return n}function yye(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=yye(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(Ir.from(gye(t,n,i+1))))}}function vye(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,vye(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(Ir.empty,!0);return n.copy(t.append(r))}function D6(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),i<r-1&&(a=D6(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ir.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function oX(n,e,t){return e<n.openStart&&(n=new Zs(D6(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Zs(D6(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const bye={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let aX=null;function kye(){return aX||(aX=document.implementation.createHTMLDocument("title"))}function o2t(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=kye().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&bye[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function a2t(n){let e=n.querySelectorAll(xp?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function l2t(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Ir.from(l.create(r[a+1],i)),s++,o++}return new Zs(i,s,o)}const sl={},no={};function nd(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}no.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Sye(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(y1&&xp&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),r9&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,lye(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||r2t(n,t)?t.preventDefault():nd(n,"key")};no.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};no.keypress=(n,e)=>{let t=e;if(Sye(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||So&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof D)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function kA(n){return{left:n.clientX,top:n.clientY}}function c2t(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function o9(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function Og(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function u2t(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&G.isSelectable(r)?(Og(n,new G(t),"pointer"),!0):!1}function d2t(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof G&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(G.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(Og(n,G.create(n.state.doc,i),"pointer"),!0):!1}function f2t(n,e,t,r,i){return o9(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?d2t(n,t):u2t(n,t))}function h2t(n,e,t,r){return o9(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function p2t(n,e,t,r){return o9(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||m2t(n,t,r)}function m2t(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Og(n,D.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Og(n,D.create(r,a+1,a+1+o.content.size),"pointer");else if(G.isSelectable(o))Og(n,G.create(r,a),"pointer");else continue;return!0}}function a9(n){return ZM(n)}const xye=So?"metaKey":"ctrlKey";sl.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=a9(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&c2t(t,n.input.lastClick)&&!t[xye]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(kA(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new g2t(n,o,t,!!r)):(s=="doubleClick"?h2t:p2t)(n,o.pos,o.inside,t)?t.preventDefault():nd(n,"pointer"))};let g2t=class{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[xye],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof G&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&bA&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),nd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>s9(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(kA(e))),this.updateAllowDefault(e),this.allowDefault||!t?nd(this.view,"pointer"):f2t(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Sp&&this.mightDrag&&!this.mightDrag.node.isAtom||xp&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Og(this.view,V.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):nd(this.view,"pointer")}move(e){this.updateAllowDefault(e),nd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};sl.touchstart=n=>{n.input.lastTouch=Date.now(),a9(n),nd(n,"pointer")};sl.touchmove=n=>{n.input.lastTouch=Date.now(),nd(n,"pointer")};sl.contextmenu=n=>a9(n);function Sye(n,e){return n.composing?!0:Sp&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const y2t=y1?5e3:-1;no.compositionstart=no.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),ZM(n,!0),n.markCursor=null;else if(ZM(n),bA&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}wye(n,y2t)};no.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,wye(n,20))};function wye(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>ZM(n),e))}function v2t(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=b2t());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function b2t(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function ZM(n,e=!1){if(!(y1&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),v2t(n),e||n.docView&&n.docView.dirty){let t=HAt(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function k2t(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const l0=g1&&uye<15||r9&&UAt<604;sl.copy=no.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=l0?null:t.clipboardData,o=r.content(),{dom:a,text:l}=pye(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):k2t(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function x2t(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function S2t(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?N6(n,r.value,null,i,e):N6(n,r.textContent,r.innerHTML,i,e)},50)}function N6(n,e,t,r,i){let s=mye(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,s||Zs.empty)))return!0;if(!s)return!1;let o=x2t(s),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}no.paste=(n,e)=>{let t=e;if(n.composing&&!y1)return;let r=l0?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&N6(n,r.getData("text/plain"),r.getData("text/html"),i,t)?t.preventDefault():S2t(n,t)};let w2t=class{constructor(e,t){this.slice=e,this.move=t}};const $ye=So?"altKey":"ctrlKey";sl.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(kA(t));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof G?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(G.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let c=n.docView.nearestDesc(t.target,!0);c&&c.node.type.spec.draggable&&c!=n.docView&&n.dispatch(n.state.tr.setSelection(G.create(n.state.doc,c.posBefore)))}}let o=n.state.selection.content(),{dom:a,text:l}=pye(n,o);t.dataTransfer.clearData(),t.dataTransfer.setData(l0?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",l0||t.dataTransfer.setData("text/plain",l),n.dragging=new w2t(o,!t[$ye])};sl.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};no.dragover=no.dragenter=(n,e)=>e.preventDefault();no.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(kA(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=mye(n,t.dataTransfer.getData(l0?"Text":"text/plain"),l0?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!t[$ye]);if(n.someProp("handleDrop",p=>p(n,t,o||Zs.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?oA(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&G.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new G(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,k)=>p=k),c.setSelection(fye(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};sl.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&s9(n)},20))};sl.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};sl.beforeinput=(n,e)=>{if(xp&&y1&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,lye(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in no)sl[n]=no[n];function xk(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}let lX=class Eye{constructor(e,t){this.toDOM=e,this.spec=t||Ah,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new v1(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Eye&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&xk(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},gb=class F6{constructor(e,t){this.attrs=e,this.spec=t||Ah}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new v1(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof F6&&xk(this.attrs,e.attrs)&&xk(this.spec,e.spec)}static is(e){return e.type instanceof F6}destroy(){}},$2t=class Cye{constructor(e,t){this.attrs=e,this.spec=t||Ah}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new v1(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Cye&&xk(this.attrs,e.attrs)&&xk(this.spec,e.spec)}destroy(){}},v1=class fv{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new fv(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new fv(e,e,new lX(t,r))}static inline(e,t,r,i){return new fv(e,t,new gb(r,i))}static node(e,t,r,i){return new fv(e,t,new $2t(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof gb}get widget(){return this.type instanceof lX}};const jm=[],Ah={};let ic=class Eu{constructor(e,t){this.local=e.length?e:jm,this.children=t.length?t:jm}static create(e,t){return t.length?eT(t,e,0,Ah):Oi}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==Oi||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Ah)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?C2t(this.children,o||[],e,t,r,i,s):o?new Eu(o.sort(Ih),jm):Oi}add(e,t){return t.length?this==Oi?Eu.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=Tye(t,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,eT(u,a,c+1,Ah)),s+=3}});let o=Mye(s?_ye(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Eu(o.length?this.local.concat(o).sort(Ih):this.local,i||this.children)}remove(e){return e.length==0||this==Oi?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Oi?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Eu(i,r):Oi}forChild(e,t){if(this==Oi)return this;if(t.isLeaf)return Eu.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof gb){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Eu(i.sort(Ih),jm);return r?new E2t([a,r]):a}return r||Oi}eq(e){if(this==e)return!0;if(!(e instanceof Eu)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return l9(this.localsInner(e))}localsInner(e){if(this==Oi)return jm;if(e.inlineContent||!this.local.some(gb.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof gb||t.push(this.local[r]);return t}};ic.empty=new ic([],[]);ic.removeOverlap=l9;const Oi=ic.empty;let E2t=class Vm{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Ah));return Vm.from(r)}forChild(e,t){if(t.isLeaf)return ic.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Oi&&(s instanceof Vm?r=r.concat(s.members):r.push(s))}return Vm.from(r)}eq(e){if(!(e instanceof Vm)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?l9(r?t:t.sort(Ih)):jm}static from(e){switch(e.length){case 0:return Oi;case 1:return e[0];default:return new Vm(e.every(t=>t instanceof ic)?e:e.reduce((t,r)=>t.concat(r instanceof ic?r:r.members),[]))}}};function C2t(n,e,t,r,i,s,o){let a=n.slice();for(let c=0,u=s;c<t.maps.length;c++){let d=0;t.maps[c].forEach((f,h,p,m)=>{let g=m-p-(h-f);for(let y=0;y<a.length;y+=3){let k=a[y+1];if(k<0||f>k+u-d)continue;let b=a[y]+u-d;h>=b?a[y+1]=f<=b?-2:-1:p>=i&&g&&(a[y]+=g,a[y+1]+=g)}d+=g}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=t.map(n[c+1]+s,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),g=r.maybeChild(p);if(g&&m==d&&m+g.nodeSize==h){let y=a[c+2].mapInner(t,g,u+1,n[c]+s+1,o);y!=Oi?(a[c]=d,a[c+1]=h,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=M2t(a,n,e,t,i,s,o),u=eT(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ic(e.sort(Ih),a)}function Mye(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new v1(i.from+e,i.to+e,i.type))}return t}function M2t(n,e,t,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?t.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function Tye(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function _ye(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function eT(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let c=Tye(n,a,l+t);if(c){s=!0;let u=eT(c,a,t+l+1,r);u!=Oi&&i.push(l,l+a.nodeSize,u)}});let o=Mye(s?_ye(n):n,-t).sort(Ih);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new ic(o,i):Oi}function Ih(n,e){return n.from-e.from||n.to-e.to}function l9(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),cX(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),cX(e,i,r.copy(s.from,r.to)));break}}}return e}function cX(n,e,t){for(;e<n.length&&Ih(t,n[e])>0;)e++;n.splice(e,0,t)}class bn extends V{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return bn.valid(r)?new bn(r):V.near(r)}content(){return Zs.empty}eq(e){return e instanceof bn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new bn(e.resolve(t.pos))}getBookmark(){return new c9(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!T2t(e)||!_2t(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&bn.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let l=e.doc.resolve(i);if(bn.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!G.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let a=e.doc.resolve(i);if(bn.valid(a))return a}return null}}}bn.prototype.visible=!1;bn.findFrom=bn.findGapCursorFrom;V.jsonID("gapcursor",bn);class c9{constructor(e){this.pos=e}map(e){return new c9(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return bn.valid(t)?new bn(t):V.near(t)}}function T2t(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function _2t(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function A2t(){return new Q({props:{decorations:P2t,createSelectionBetween(n,e,t){return e.pos==t.pos&&bn.valid(t)?new bn(t):null},handleClick:R2t,handleKeyDown:I2t,handleDOMEvents:{beforeinput:O2t}}})}const I2t=ife({ArrowLeft:FS("horiz",-1),ArrowRight:FS("horiz",1),ArrowUp:FS("vert",-1),ArrowDown:FS("vert",1)});function FS(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof D){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=bn.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new bn(c))),!0):!1}}function R2t(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!bn.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&G.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new bn(r))),!0)}function O2t(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof bn))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=Ir.empty;for(let o=r.length-1;o>=0;o--)i=Ir.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new Zs(i,0,0));return s.setSelection(D.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function P2t(n){if(!(n.selection instanceof bn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ic.create(n.doc,[v1.widget(n.selection.head,e,{key:"gapcursor"})])}const Aye=bp.create({name:"gapCursor",addProseMirrorPlugins(){return[A2t()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Ff(Oc(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}});function Iye(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Iye(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Rye(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Rye(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ka=class Ti{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ti(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ti(r,i)}cutByIndex(e,t){return e==t?Ti.empty:e==0&&t==this.content.length?this:new Ti(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Ti(i,s)}addToStart(e){return new Ti([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ti(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Iye(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Rye(this,e,t,r)}findIndex(e,t=-1){if(e==0)return LS(0,e);if(e==this.size)return LS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?LS(r+1,o):LS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Ti.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ti(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ti.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Ti(t||e,r)}static from(e){if(!e)return Ti.empty;if(e instanceof Ti)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ti([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ka.empty=new Ka([],0);const lP={index:0,offset:0};function LS(n,e){return lP.index=n,lP.offset=e,lP}function L6(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!L6(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!L6(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Fl=class z6{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&L6(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return z6.none;if(e instanceof z6)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Fl.none=[];let tT=class qm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Pye(this.content,e+this.openStart,t);return r&&new qm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new qm(Oye(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return qm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new qm(Ka.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new qm(e,r,i)}};tT.empty=new tT(Ka.empty,0,0);function Oye(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Oye(s.content,e-i-1,t-i-1)))}function Pye(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Pye(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let D2t=class B6{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new dX(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new dX(this,t,!0);return r.addAll(e,t.from,t.to),tT.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(L2t(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=fX(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=fX(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new B6(e,B6.schemaRules(e)))}};const Dye={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},N2t={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Nye={ol:!0,ul:!0},nT=1,rT=2,yb=4;function uX(n,e,t){return e!=null?(e?nT:0)|(e==="full"?rT:0):n&&n.whitespace=="pre"?nT|rT:t&~yb}let zS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Fl.none,this.stashMarks=[],this.match=o||(a&yb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ka.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&nT)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ka.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ka.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):B2t(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Dye.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},dX=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=uX(null,t.preserveWhitespace,0)|(r?yb:0);i?s=new zS(i.type,i.attrs,Fl.none,Fl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new zS(null,null,Fl.none,Fl.none,!0,null,o):s=new zS(e.schema.topNodeType,null,Fl.none,Fl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(z2t(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&rT||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&nT)r.options&rT?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Nye.hasOwnProperty(r)&&this.parser.normalizeLists&&F2t(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:N2t.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Dye.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Fl.none,r=Fl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=uX(e,i,s.options);s.options&yb&&s.content.length==0&&(o|=yb),this.nodes.push(new zS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=j2t(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function F2t(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Nye.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function L2t(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function z2t(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function fX(n){let e={};for(let t in n)e[t]=n[t];return e}function B2t(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function j2t(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}function Fye(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let V2t=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Fye({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Wu(n,e,t){return n.config[e]===void 0&&n.parent?Wu(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Wu(n.parent,e,t):null}):n.config[e]}function q2t(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Xr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function K2t(n){return typeof n=="function"}function Km(n,e=void 0,...t){return K2t(n)?e?n.bind(e)(...t):n(...t):n}function U2t(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function H2t(n){return Object.prototype.toString.call(n).slice(8,-1)}function cP(n){return H2t(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Lye(n,e){const t={...n};return cP(n)&&cP(e)&&Object.keys(e).forEach(r=>{cP(e[r])?r in n?t[r]=Lye(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let wp=class j6{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Km(Wu(this,"addOptions",{name:this.name}))),this.storage=Km(Wu(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new j6(e)}configure(e={}){const t=this.extend();return t.options=Lye(this.options,e),t.storage=Km(Wu(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new j6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Km(Wu(t,"addOptions",{name:t.name})),t.storage=Km(Wu(t,"addStorage",{name:t.name,options:t.options})),t}};function W2t(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function G2t(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}wp.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=G2t(t);return W2t(r,{from:o,to:a},{textSerializers:l})}}})]}});const J2t=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Q2t=(n=!1)=>({commands:e})=>e.setContent("",n),Y2t=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},X2t=n=>e=>n(e),Z2t=()=>({state:n,dispatch:e})=>nn(n,e),eIt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},tIt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},nIt=n=>({tr:e,state:t,dispatch:r})=>{const i=Xr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},rIt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},iIt=()=>({state:n,dispatch:e})=>Ht(n,e),sIt=()=>({commands:n})=>n.keyboardShortcut("Enter"),oIt=()=>({state:n,dispatch:e})=>tn(n,e);function iT(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:U2t(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function V6(n,e,t={}){return n.find(r=>r.type===e&&iT(r.attrs,t))}function aIt(n,e,t={}){return!!V6(n,e,t)}function zye(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=V6([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(V6([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&aIt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function hf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const lIt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=hf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=zye(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},cIt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Bye(n){return n instanceof D}function gh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function uIt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,gh(0,i,s),gh(n.content.size,i,s)):D.create(n,gh(e,i,s),gh(e,i,s))}function u9(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const dIt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{u9()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Bye(t.state.selection))return o(),!0;const a=uIt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},fIt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),hIt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),jye=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&jye(r)}return n};function hX(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return jye(t)}function sT(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ka.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),sT("",e,t)}if(typeof n=="string"){const r=D2t.fromSchema(e);return t.slice?r.parseSlice(hX(n),t.parseOptions).content:r.parse(hX(n),t.parseOptions)}return sT("",e,t)}function pIt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const mIt=n=>n.toString().startsWith("<"),gIt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=sT(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((mIt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&pIt(r,r.steps.length-1,-1)}return!0},yIt=()=>({state:n,dispatch:e})=>Yt(n,e),vIt=()=>({state:n,dispatch:e})=>Xt(n,e),bIt=()=>({state:n,dispatch:e})=>Wt(n,e),kIt=()=>({state:n,dispatch:e})=>Jt(n,e),xIt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},SIt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},wIt=()=>({state:n,dispatch:e})=>Cn(n,e),$It=()=>({state:n,dispatch:e})=>Mn(n,e);function Vye(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function EIt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))u9()||Vye()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const CIt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=EIt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function d9(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Xr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>iT(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const MIt=(n,e={})=>({state:t,dispatch:r})=>{const i=Xr(n,t.schema);return d9(t,i,e)?Zt(t,r):!1},TIt=()=>({state:n,dispatch:e})=>rn(n,e),_It=n=>({state:e,dispatch:t})=>{const r=Xr(n,e.schema);return un(r)(e,t)},AIt=()=>({state:n,dispatch:e})=>en(n,e);function qye(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function pX(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const IIt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=qye(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Xr(n,r.schema)),a==="mark"&&(o=hf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,pX(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(pX(d.attrs,e)))})})}),!0):!1},RIt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),OIt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),PIt=()=>({state:n,dispatch:e})=>Gt(n,e),DIt=()=>({state:n,dispatch:e})=>Qt(n,e),NIt=()=>({state:n,dispatch:e})=>sn(n,e),FIt=()=>({state:n,dispatch:e})=>an(n,e),LIt=()=>({state:n,dispatch:e})=>on(n,e);function zIt(n,e,t={}){return sT(n,e,{slice:!1,parseOptions:t})}const BIt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=zIt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function jIt(n,e){const t=hf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function VIt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function qIt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function f9(n){return e=>qIt(e.$from,n)}function d$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function KIt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?hf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>iT(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>iT(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function mX(n,e){const{nodeExtensions:t}=q2t(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Km(Wu(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function UIt(n,e,t){var r;const{selection:i}=e;let s=null;if(Bye(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const HIt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=hf(n,r.schema);if(i)if(o){const c=jIt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return UIt(r,t,l)},WIt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),GIt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Xr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},JIt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=gh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},QIt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=gh(i,o,a),c=gh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},YIt=n=>({state:e,dispatch:t})=>{const r=Xr(n,e.schema);return dn(r)(e,t)};function gX(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const XIt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=d$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&gX(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:VIt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&gX(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},ZIt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Xr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ka.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ka.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=d$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ka.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new tT(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=d$(d,u.type.name,u.attrs),p=d$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},uP=(n,e)=>{const t=f9(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},dP=(n,e)=>{const t=f9(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},eRt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Xr(n,o.schema),p=Xr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=f9(x=>mX(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(mX(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>uP(s,h)).command(()=>dP(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>uP(s,h)).command(()=>dP(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>uP(s,h)).command(()=>dP(s,h)).run()},tRt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=hf(n,r.schema);return KIt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},nRt=(n,e,t={})=>({state:r,commands:i})=>{const s=Xr(n,r.schema),o=Xr(e,r.schema);return d9(r,s,t)?i.setNode(o):i.setNode(s,t)},rRt=(n,e={})=>({state:t,commands:r})=>{const i=Xr(n,t.schema);return d9(t,i,e)?r.lift(i):r.wrapIn(i,e)},iRt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},sRt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},oRt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=hf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=zye(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},aRt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=qye(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Xr(n,r.schema)),a==="mark"&&(o=hf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},lRt=(n,e={})=>({state:t,dispatch:r})=>{const i=Xr(n,t.schema);return ln(i,e)(t,r)},cRt=(n,e={})=>({state:t,dispatch:r})=>{const i=Xr(n,t.schema);return cn(i,e)(t,r)};var uRt=Object.freeze({__proto__:null,blur:J2t,clearContent:Q2t,clearNodes:Y2t,command:X2t,createParagraphNear:Z2t,cut:eIt,deleteCurrentNode:tIt,deleteNode:nIt,deleteRange:rIt,deleteSelection:iIt,enter:sIt,exitCode:oIt,extendMarkRange:lIt,first:cIt,focus:dIt,forEach:fIt,insertContent:hIt,insertContentAt:gIt,joinUp:yIt,joinDown:vIt,joinBackward:bIt,joinForward:kIt,joinItemBackward:xIt,joinItemForward:SIt,joinTextblockBackward:wIt,joinTextblockForward:$It,keyboardShortcut:CIt,lift:MIt,liftEmptyBlock:TIt,liftListItem:_It,newlineInCode:AIt,resetAttributes:IIt,scrollIntoView:RIt,selectAll:OIt,selectNodeBackward:PIt,selectNodeForward:DIt,selectParentNode:NIt,selectTextblockEnd:FIt,selectTextblockStart:LIt,setContent:BIt,setMark:HIt,setMeta:WIt,setNode:GIt,setNodeSelection:JIt,setTextSelection:QIt,sinkListItem:YIt,splitBlock:XIt,splitListItem:ZIt,toggleList:eRt,toggleMark:tRt,toggleNode:nRt,toggleWrap:rRt,undoInputRule:iRt,unsetAllMarks:sRt,unsetMark:oRt,updateAttributes:aRt,wrapIn:lRt,wrapInList:cRt});wp.create({name:"commands",addCommands(){return{...uRt}}});wp.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});wp.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});wp.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return u9()||Vye()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Fye({state:t,transaction:d}),{commands:h}=new V2t({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});wp.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var oT=200,nr=function(){};nr.prototype.append=function(e){return e.length?(e=nr.from(e),!this.length&&e||e.length<oT&&this.leafAppend(e)||this.length<oT&&e.leafPrepend(this)||this.appendInner(e)):this};nr.prototype.prepend=function(e){return e.length?nr.from(e).append(this):this};nr.prototype.appendInner=function(e){return new dRt(this,e)};nr.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?nr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};nr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};nr.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};nr.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};nr.from=function(e){return e instanceof nr?e:e&&e.length?new Kye(e):nr.empty};var Kye=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=oT)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=oT)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(nr);nr.empty=new Kye([]);var dRt=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(nr);const fRt=500;class va{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Ll(d.map));let h=d.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ll(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new va(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Ll(e.mapping.maps[u],d,t),h;(h=l&&l.merge(f))&&(f=h,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),t&&(o++,t=void 0),i||(l=f)}let c=o-r.depth;return c>pRt&&(a=hRt(a,c),o-=c),new va(a.append(s),o)}remapping(e,t){let r=new _g;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new va(this.items.append(e.map(t=>new Ll(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=t;this.items.forEach(f=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),g=f.selection&&f.selection.map(s.slice(l+1,h));g&&a++,r.push(new Ll(p,m,g))}else r.push(new Ll(p))},i);let c=[];for(let f=t;f<o;f++)c.push(new Ll(s.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new va(u,a);return d.emptyItemCount()>fRt&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=o.selection&&o.selection.map(t.slice(r));u&&s++;let d=new Ll(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new va(nr.from(i.reverse()),s)}}va.empty=new va(nr.empty,0);function hRt(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Ll{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ll(t.getMap().invert(),t,this.selection)}}}class Du{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const pRt=20;function mRt(n,e,t,r){let i=t.getMeta(vd),s;if(i)return i.historyState;t.getMeta(yRt)&&(n=new Du(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(vd))return o.getMeta(vd).redo?new Du(n.done.addTransform(t,void 0,r,f$(e)),n.undone,yX(t.mapping.maps[t.steps.length-1]),n.prevTime,n.prevComposition):new Du(n.done,n.undone.addTransform(t,void 0,r,f$(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!gRt(t,n.prevRanges)),c=o?fP(n.prevRanges,t.mapping):yX(t.mapping.maps[t.steps.length-1]);return new Du(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,f$(e)),va.empty,c,t.time,a??n.prevComposition)}else return(s=t.getMeta("rebased"))?new Du(n.done.rebased(t,s),n.undone.rebased(t,s),fP(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Du(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),fP(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function gRt(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function yX(n){let e=[];return n.forEach((t,r,i,s)=>e.push(i,s)),e}function fP(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function Uye(n,e,t,r){let i=f$(e),s=vd.get(e).spec.config,o=(r?n.undone:n.done).popEvent(e,i);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(r?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,i),c=new Du(r?l:o.remaining,r?o.remaining:l,null,0,-1);t(o.transform.setSelection(a).setMeta(vd,{redo:r,historyState:c}).scrollIntoView())}let hP=!1,vX=null;function f$(n){let e=n.plugins;if(vX!=e){hP=!1,vX=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){hP=!0;break}}return hP}const vd=new Y("history"),yRt=new Y("closeHistory");function vRt(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Q({key:vd,state:{init(){return new Du(va.empty,va.empty,null,0,-1)},apply(e,t,r){return mRt(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?Hye:r=="historyRedo"?Wye:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const Hye=(n,e)=>{let t=vd.getState(n);return!t||t.done.eventCount==0?!1:(e&&Uye(t,n,e,!1),!0)},Wye=(n,e)=>{let t=vd.getState(n);return!t||t.undone.eventCount==0?!1:(e&&Uye(t,n,e,!0),!0)},h9=wp.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Hye(n,e),redo:()=>({state:n,dispatch:e})=>Wye(n,e)}},addProseMirrorPlugins(){return[vRt(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}});function Gye(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Gye(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Jye(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Jye(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let rr=class _i{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new _i(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new _i(r,i)}cutByIndex(e,t){return e==t?_i.empty:e==0&&t==this.content.length?this:new _i(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new _i(i,s)}addToStart(e){return new _i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Gye(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Jye(this,e,t,r)}findIndex(e,t=-1){if(e==0)return BS(0,e);if(e==this.size)return BS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?BS(r+1,o):BS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return _i.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new _i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _i.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new _i(t||e,r)}static from(e){if(!e)return _i.empty;if(e instanceof _i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _i([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};rr.empty=new rr([],0);const pP={index:0,offset:0};function BS(n,e){return pP.index=n,pP.offset=e,pP}function q6(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!q6(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!q6(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let zl=class K6{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&q6(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return K6.none;if(e instanceof K6)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};zl.none=[];let Fo=class Um{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Yye(this.content,e+this.openStart,t);return r&&new Um(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Um(Qye(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Um.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Um(rr.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Um(e,r,i)}};Fo.empty=new Fo(rr.empty,0,0);function Qye(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Qye(s.content,e-i-1,t-i-1)))}function Yye(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Yye(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let Xye=class U6{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new kX(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new kX(this,t,!0);return r.addAll(e,t.from,t.to),Fo.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(xRt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=xX(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=xX(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new U6(e,U6.schemaRules(e)))}};const Zye={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},bRt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},eve={ol:!0,ul:!0},aT=1,lT=2,vb=4;function bX(n,e,t){return e!=null?(e?aT:0)|(e==="full"?lT:0):n&&n.whitespace=="pre"?aT|lT:t&~vb}let jS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=zl.none,this.stashMarks=[],this.match=o||(a&vb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(rr.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&aT)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=rr.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(rr.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):wRt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Zye.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},kX=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=bX(null,t.preserveWhitespace,0)|(r?vb:0);i?s=new jS(i.type,i.attrs,zl.none,zl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new jS(null,null,zl.none,zl.none,!0,null,o):s=new jS(e.schema.topNodeType,null,zl.none,zl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(SRt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&lT||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&aT)r.options&lT?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;eve.hasOwnProperty(r)&&this.parser.normalizeLists&&kRt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:bRt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Zye.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=zl.none,r=zl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=bX(e,i,s.options);s.options&vb&&s.content.length==0&&(o|=vb),this.nodes.push(new jS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=$Rt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function kRt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&eve.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function xRt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function SRt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function xX(n){let e={};for(let t in n)e[t]=n[t];return e}function wRt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function $Rt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}let tve=class hv{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=mP(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=hv.renderSpec(mP(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&hv.renderSpec(mP(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<t.length;u++){let d=t[u];if(d===0){if(u<t.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=hv.renderSpec(e,d,r);if(a.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new hv(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=SX(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return SX(e.marks)}};function SX(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function mP(n){return n.document||window.document}const $p=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},nve=function(n,e,t,r){return t&&(wX(n,e,t,r,-1)||wX(n,e,t,r,1))},ERt=/^(img|br|input|textarea|hr)$/i;function wX(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:cT(n))){let s=n.parentNode;if(!s||s.nodeType!=1||p9(n)||ERt.test(n.nodeName)||n.contentEditable=="false")return!1;e=$p(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?cT(n):0}else return!1}}function cT(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function CRt(n,e,t){for(let r=e==0,i=e==cT(n);r||i;){if(n==t)return!0;let s=$p(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==cT(n)}}function p9(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const rve=function(n){return n.focusNode&&nve(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function ive(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}const dc=typeof navigator<"u"?navigator:null,$X=typeof document<"u"?document:null,pf=dc&&dc.userAgent||"",H6=/Edge\/(\d+)/.exec(pf),sve=/MSIE \d/.exec(pf),W6=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pf),b1=!!(sve||W6||H6),ove=sve?document.documentMode:W6?+W6[1]:H6?+H6[1]:0,xA=!b1&&/gecko\/(\d+)/i.test(pf);xA&&+(/Firefox\/(\d+)/.exec(pf)||[0,0])[1];const G6=!b1&&/Chrome\/(\d+)/.exec(pf),Ep=!!G6,MRt=G6?+G6[1]:0,Cp=!b1&&!!dc&&/Apple Computer/.test(dc.vendor),m9=Cp&&(/Mobile\/\w+/.test(pf)||!!dc&&dc.maxTouchPoints>2),wo=m9||(dc?/Mac/.test(dc.platform):!1),TRt=dc?/Win/.test(dc.platform):!1,k1=/Android \d/.test(pf),g9=!!$X&&"webkitFontSmoothing"in $X.documentElement.style,_Rt=g9?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ARt(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(rve(t)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&G.isSelectable(u)&&i.parent&&!(u.isInline&&CRt(t.focusNode,t.focusOffset,i.dom))){let d=i.posBefore;c=new G(o==d?a:r.resolve(d))}}else{let u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=lve(n,l,a,u)}return c}function ave(n){return n.editable?n.hasFocus():PRt(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function y9(n,e=!1){let t=n.state.selection;if(ORt(n,t),!!ave(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Ep){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&nve(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)RRt(n);else{let{anchor:r,head:i}=t,s,o;EX&&!(t instanceof D)&&(t.$from.parent.inlineContent||(s=CX(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=CX(n,t.to))),n.docView.setSelection(r,i,n.root,e),EX&&(s&&MX(s),o&&MX(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&IRt(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const EX=Cp||Ep&&MRt<63;function CX(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(Cp&&i&&i.contentEditable=="false")return gP(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return gP(i);if(s)return gP(s)}}function gP(n){return n.contentEditable="true",Cp&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function MX(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function IRt(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!ave(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function RRt(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,$p(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&b1&&ove<=11&&(r.disabled=!0,r.disabled=!1)}function ORt(n,e){if(e instanceof G){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(TX(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else TX(n)}function TX(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function lve(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||D.between(e,t,r)}function PRt(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function J6(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&V.findFrom(s,e)}function Nu(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function _X(n,e,t){let r=n.state.selection;if(r instanceof D)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Nu(n,new D(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=J6(n.state,e);return i&&i instanceof G?Nu(n,i):!1}else if(!(wo&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?G.isSelectable(s)?Nu(n,new G(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):g9?Nu(n,new D(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof G&&r.node.isInline)return Nu(n,new D(e>0?r.$to:r.$from));{let i=J6(n.state,e);return i?Nu(n,i):!1}}}function uT(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function bb(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Qp(n,e){return e<0?DRt(n):NRt(n)}function DRt(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(xA&&t.nodeType==1&&r<uT(t)&&bb(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(bb(a,-1))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(cve(t))break;{let a=t.previousSibling;for(;a&&bb(a,-1);)i=t.parentNode,s=$p(a),a=a.previousSibling;if(a)t=a,r=uT(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?Q6(n,t,r):i&&Q6(n,i,s)}function NRt(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=uT(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(bb(a,1))s=t,o=++r;else break}else{if(cve(t))break;{let a=t.nextSibling;for(;a&&bb(a,1);)s=a.parentNode,o=$p(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=uT(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&Q6(n,s,o)}function cve(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function FRt(n,e){for(;n&&e==n.childNodes.length&&!p9(n);)e=$p(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function LRt(n,e){for(;n&&!e&&!p9(n);)e=$p(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Q6(n,e,t){if(e.nodeType!=3){let s,o;(o=FRt(e,t))?(e=o,t=0):(s=LRt(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(rve(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&y9(n)},50)}function AX(n,e){let t=n.state.doc.resolve(e);if(!(Ep||TRt)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function IX(n,e,t){let r=n.state.selection;if(r instanceof D&&!r.empty||t.indexOf("s")>-1||wo&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=J6(n.state,e);if(o&&o instanceof G)return Nu(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Xs?V.near(o,e):V.findFrom(o,e);return a?Nu(n,a):!1}return!1}function RX(n,e){if(!(n.state.selection instanceof D))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function OX(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function zRt(n){if(!Cp||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;OX(n,r,"true"),setTimeout(()=>OX(n,r,"false"),20)}return!1}function BRt(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function jRt(n,e){let t=e.keyCode,r=BRt(e);if(t==8||wo&&t==72&&r=="c")return RX(n,-1)||Qp(n,-1);if(t==46&&!e.shiftKey||wo&&t==68&&r=="c")return RX(n,1)||Qp(n,1);if(t==13||t==27)return!0;if(t==37||wo&&t==66&&r=="c"){let i=t==37?AX(n,n.state.selection.from)=="ltr"?-1:1:-1;return _X(n,i,r)||Qp(n,i)}else if(t==39||wo&&t==70&&r=="c"){let i=t==39?AX(n,n.state.selection.from)=="ltr"?1:-1:1;return _X(n,i,r)||Qp(n,i)}else{if(t==38||wo&&t==80&&r=="c")return IX(n,-1,r)||Qp(n,-1);if(t==40||wo&&t==78&&r=="c")return zRt(n)||IX(n,1,r)||Qp(n,1);if(r==(wo?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function uve(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=n.someProp("clipboardSerializer")||tve.fromSchema(n.state.schema),a=gve(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=mve[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function dve(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",f=>{e=f(e,s||r,n)}),s)return e?new Fo(rr.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Fo.empty;let d=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(d)a=d;else{let f=i.marks(),{schema:h}=n.state,p=tve.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,f)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),o=KRt(t),g9&&URt(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Xye.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!VRt.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=HRt(PX(a,+u[1],+u[2]),u[4]);else if(a=Fo.maxOpen(qRt(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=PX(a,d,f)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}const VRt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function qRt(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&hve(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=pve(o[o.length-1],s.length));let u=fve(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return rr.from(o)}return n}function fve(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,rr.from(n));return n}function hve(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=hve(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(rr.from(fve(t,n,i+1))))}}function pve(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,pve(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(rr.empty,!0);return n.copy(t.append(r))}function Y6(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),i<r-1&&(a=Y6(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(rr.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function PX(n,e,t){return e<n.openStart&&(n=new Fo(Y6(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Fo(Y6(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const mve={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let DX=null;function gve(){return DX||(DX=document.implementation.createHTMLDocument("title"))}function KRt(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=gve().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&mve[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function URt(n){let e=n.querySelectorAll(Ep?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function HRt(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=rr.from(l.create(r[a+1],i)),s++,o++}return new Fo(i,s,o)}const ol={},ro={};function rd(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}ro.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!vve(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(k1&&Ep&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),m9&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,ive(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||jRt(n,t)?t.preventDefault():rd(n,"key")};ro.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};ro.keypress=(n,e)=>{let t=e;if(vve(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||wo&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof D)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function SA(n){return{left:n.clientX,top:n.clientY}}function WRt(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function v9(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function Pg(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function GRt(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&G.isSelectable(r)?(Pg(n,new G(t),"pointer"),!0):!1}function JRt(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof G&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(G.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(Pg(n,G.create(n.state.doc,i),"pointer"),!0):!1}function QRt(n,e,t,r,i){return v9(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?JRt(n,t):GRt(n,t))}function YRt(n,e,t,r){return v9(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function XRt(n,e,t,r){return v9(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||ZRt(n,t,r)}function ZRt(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Pg(n,D.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Pg(n,D.create(r,a+1,a+1+o.content.size),"pointer");else if(G.isSelectable(o))Pg(n,G.create(r,a),"pointer");else continue;return!0}}function b9(n){return dT(n)}const yve=wo?"metaKey":"ctrlKey";ol.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=b9(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&WRt(t,n.input.lastClick)&&!t[yve]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(SA(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new eOt(n,o,t,!!r)):(s=="doubleClick"?YRt:XRt)(n,o.pos,o.inside,t)?t.preventDefault():rd(n,"pointer"))};class eOt{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[yve],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof G&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&xA&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),rd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>y9(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(SA(e))),this.updateAllowDefault(e),this.allowDefault||!t?rd(this.view,"pointer"):QRt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Cp&&this.mightDrag&&!this.mightDrag.node.isAtom||Ep&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Pg(this.view,V.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):rd(this.view,"pointer")}move(e){this.updateAllowDefault(e),rd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ol.touchstart=n=>{n.input.lastTouch=Date.now(),b9(n),rd(n,"pointer")};ol.touchmove=n=>{n.input.lastTouch=Date.now(),rd(n,"pointer")};ol.contextmenu=n=>b9(n);function vve(n,e){return n.composing?!0:Cp&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const tOt=k1?5e3:-1;ro.compositionstart=ro.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),dT(n,!0),n.markCursor=null;else if(dT(n),xA&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}bve(n,tOt)};ro.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,bve(n,20))};function bve(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>dT(n),e))}function nOt(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=rOt());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function rOt(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function dT(n,e=!1){if(!(k1&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),nOt(n),e||n.docView&&n.docView.dirty){let t=ARt(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function iOt(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const c0=b1&&ove<15||m9&&_Rt<604;ol.copy=ro.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=c0?null:t.clipboardData,o=r.content(),{dom:a,text:l}=uve(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):iOt(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sOt(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function oOt(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?X6(n,r.value,null,i,e):X6(n,r.textContent,r.innerHTML,i,e)},50)}function X6(n,e,t,r,i){let s=dve(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,s||Fo.empty)))return!0;if(!s)return!1;let o=sOt(s),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ro.paste=(n,e)=>{let t=e;if(n.composing&&!k1)return;let r=c0?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&X6(n,r.getData("text/plain"),r.getData("text/html"),i,t)?t.preventDefault():oOt(n,t)};class aOt{constructor(e,t){this.slice=e,this.move=t}}const kve=wo?"altKey":"ctrlKey";ol.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(SA(t));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof G?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(G.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let c=n.docView.nearestDesc(t.target,!0);c&&c.node.type.spec.draggable&&c!=n.docView&&n.dispatch(n.state.tr.setSelection(G.create(n.state.doc,c.posBefore)))}}let o=n.state.selection.content(),{dom:a,text:l}=uve(n,o);t.dataTransfer.clearData(),t.dataTransfer.setData(c0?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",c0||t.dataTransfer.setData("text/plain",l),n.dragging=new aOt(o,!t[kve])};ol.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};ro.dragover=ro.dragenter=(n,e)=>e.preventDefault();ro.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(SA(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=dve(n,t.dataTransfer.getData(c0?"Text":"text/plain"),c0?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!t[kve]);if(n.someProp("handleDrop",p=>p(n,t,o||Fo.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?oA(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&G.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new G(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,k)=>p=k),c.setSelection(lve(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};ol.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&y9(n)},20))};ol.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};ol.beforeinput=(n,e)=>{if(Ep&&k1&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,ive(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in ro)ol[n]=ro[n];function Sk(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class fT{constructor(e,t){this.toDOM=e,this.spec=t||Rh,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new Wl(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof fT&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Sk(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class bd{constructor(e,t){this.attrs=e,this.spec=t||Rh}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Wl(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof bd&&Sk(this.attrs,e.attrs)&&Sk(this.spec,e.spec)}static is(e){return e.type instanceof bd}destroy(){}}let lOt=class xve{constructor(e,t){this.attrs=e,this.spec=t||Rh}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Wl(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof xve&&Sk(this.attrs,e.attrs)&&Sk(this.spec,e.spec)}destroy(){}};class Wl{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Wl(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Wl(e,e,new fT(t,r))}static inline(e,t,r,i){return new Wl(e,t,new bd(r,i))}static node(e,t,r,i){return new Wl(e,t,new lOt(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof bd}get widget(){return this.type instanceof fT}}const Hm=[],Rh={};class Jn{constructor(e,t){this.local=e.length?e:Hm,this.children=t.length?t:Hm}static create(e,t){return t.length?hT(t,e,0,Rh):Pi}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==Pi||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Rh)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?cOt(this.children,o||[],e,t,r,i,s):o?new Jn(o.sort(Oh),Hm):Pi}add(e,t){return t.length?this==Pi?Jn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=wve(t,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,hT(u,a,c+1,Rh)),s+=3}});let o=Sve(s?$ve(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Jn(o.length?this.local.concat(o).sort(Oh):this.local,i||this.children)}remove(e){return e.length==0||this==Pi?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Pi?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Jn(i,r):Pi}forChild(e,t){if(this==Pi)return this;if(t.isLeaf)return Jn.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof bd){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Jn(i.sort(Oh),Hm);return r?new Lf([a,r]):a}return r||Pi}eq(e){if(this==e)return!0;if(!(e instanceof Jn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return k9(this.localsInner(e))}localsInner(e){if(this==Pi)return Hm;if(e.inlineContent||!this.local.some(bd.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof bd||t.push(this.local[r]);return t}}Jn.empty=new Jn([],[]);Jn.removeOverlap=k9;const Pi=Jn.empty;class Lf{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Rh));return Lf.from(r)}forChild(e,t){if(t.isLeaf)return Jn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Pi&&(s instanceof Lf?r=r.concat(s.members):r.push(s))}return Lf.from(r)}eq(e){if(!(e instanceof Lf)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?k9(r?t:t.sort(Oh)):Hm}static from(e){switch(e.length){case 0:return Pi;case 1:return e[0];default:return new Lf(e.every(t=>t instanceof Jn)?e:e.reduce((t,r)=>t.concat(r instanceof Jn?r:r.members),[]))}}}function cOt(n,e,t,r,i,s,o){let a=n.slice();for(let c=0,u=s;c<t.maps.length;c++){let d=0;t.maps[c].forEach((f,h,p,m)=>{let g=m-p-(h-f);for(let y=0;y<a.length;y+=3){let k=a[y+1];if(k<0||f>k+u-d)continue;let b=a[y]+u-d;h>=b?a[y+1]=f<=b?-2:-1:p>=i&&g&&(a[y]+=g,a[y+1]+=g)}d+=g}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=t.map(n[c+1]+s,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),g=r.maybeChild(p);if(g&&m==d&&m+g.nodeSize==h){let y=a[c+2].mapInner(t,g,u+1,n[c]+s+1,o);y!=Pi?(a[c]=d,a[c+1]=h,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=uOt(a,n,e,t,i,s,o),u=hT(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Jn(e.sort(Oh),a)}function Sve(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Wl(i.from+e,i.to+e,i.type))}return t}function uOt(n,e,t,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?t.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function wve(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function $ve(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function hT(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let c=wve(n,a,l+t);if(c){s=!0;let u=hT(c,a,t+l+1,r);u!=Pi&&i.push(l,l+a.nodeSize,u)}});let o=Sve(s?$ve(n):n,-t).sort(Oh);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Jn(o,i):Pi}function Oh(n,e){return n.from-e.from||n.to-e.to}function k9(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),NX(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),NX(e,i,r.copy(s.from,r.to)));break}}}return e}function NX(n,e,t){for(;e<n.length&&Oh(t,n[e])>0;)e++;n.splice(e,0,t)}function Eve(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}let dOt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Eve({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function Hs(n,e,t){return n.config[e]===void 0&&n.parent?Hs(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Hs(n.parent,e,t):null}):n.config[e]}function fOt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Zr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function FX(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function hOt(n){return typeof n=="function"}function ba(n,e=void 0,...t){return hOt(n)?e?n.bind(e)(...t):n(...t):n}function pOt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function mOt(n){return Object.prototype.toString.call(n).slice(8,-1)}function yP(n){return mOt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function x9(n,e){const t={...n};return yP(n)&&yP(e)&&Object.keys(e).forEach(r=>{yP(e[r])?r in n?t[r]=x9(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let Y0=class Z6{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ba(Hs(this,"addOptions",{name:this.name}))),this.storage=ba(Hs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Z6(e)}configure(e={}){const t=this.extend();return t.options=x9(this.options,e),t.storage=ba(Hs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Z6({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ba(Hs(t,"addOptions",{name:t.name})),t.storage=ba(Hs(t,"addStorage",{name:t.name,options:t.options})),t}};function gOt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function yOt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}Y0.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=yOt(t);return gOt(r,{from:o,to:a},{textSerializers:l})}}})]}});const vOt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),bOt=(n=!1)=>({commands:e})=>e.setContent("",n),kOt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},xOt=n=>e=>n(e),SOt=()=>({state:n,dispatch:e})=>nn(n,e),wOt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},$Ot=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},EOt=n=>({tr:e,state:t,dispatch:r})=>{const i=Zr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},COt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},MOt=()=>({state:n,dispatch:e})=>Ht(n,e),TOt=()=>({commands:n})=>n.keyboardShortcut("Enter"),_Ot=()=>({state:n,dispatch:e})=>tn(n,e);function pT(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:pOt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function eL(n,e,t={}){return n.find(r=>r.type===e&&pT(r.attrs,t))}function AOt(n,e,t={}){return!!eL(n,e,t)}function Cve(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=eL([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(eL([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&AOt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function mf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const IOt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=mf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Cve(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},ROt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Mve(n){return n instanceof D}function yh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function OOt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,yh(0,i,s),yh(n.content.size,i,s)):D.create(n,yh(e,i,s),yh(e,i,s))}function S9(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const POt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{S9()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Mve(t.state.selection))return o(),!0;const a=OOt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},DOt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),NOt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Tve=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Tve(r)}return n};function LX(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Tve(t)}function mT(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?rr.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),mT("",e,t)}if(typeof n=="string"){const r=Xye.fromSchema(e);return t.slice?r.parseSlice(LX(n),t.parseOptions).content:r.parse(LX(n),t.parseOptions)}return mT("",e,t)}function FOt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const LOt=n=>n.toString().startsWith("<"),zOt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=mT(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((LOt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&FOt(r,r.steps.length-1,-1)}return!0},BOt=()=>({state:n,dispatch:e})=>Yt(n,e),jOt=()=>({state:n,dispatch:e})=>Xt(n,e),VOt=()=>({state:n,dispatch:e})=>Wt(n,e),qOt=()=>({state:n,dispatch:e})=>Jt(n,e),KOt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},UOt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},HOt=()=>({state:n,dispatch:e})=>Cn(n,e),WOt=()=>({state:n,dispatch:e})=>Mn(n,e);function _ve(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function GOt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))S9()||_ve()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const JOt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=GOt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function w9(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Zr(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>pT(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const QOt=(n,e={})=>({state:t,dispatch:r})=>{const i=Zr(n,t.schema);return w9(t,i,e)?Zt(t,r):!1},YOt=()=>({state:n,dispatch:e})=>rn(n,e),XOt=n=>({state:e,dispatch:t})=>{const r=Zr(n,e.schema);return un(r)(e,t)},ZOt=()=>({state:n,dispatch:e})=>en(n,e);function Ave(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function zX(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const ePt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Ave(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Zr(n,r.schema)),a==="mark"&&(o=mf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,zX(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(zX(d.attrs,e)))})})}),!0):!1},tPt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),nPt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),rPt=()=>({state:n,dispatch:e})=>Gt(n,e),iPt=()=>({state:n,dispatch:e})=>Qt(n,e),sPt=()=>({state:n,dispatch:e})=>sn(n,e),oPt=()=>({state:n,dispatch:e})=>an(n,e),aPt=()=>({state:n,dispatch:e})=>on(n,e);function lPt(n,e,t={}){return mT(n,e,{slice:!1,parseOptions:t})}const cPt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=lPt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function uPt(n,e){const t=mf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function dPt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function fPt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function $9(n){return e=>fPt(e.$from,n)}function h$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function hPt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?mf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>pT(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>pT(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function BX(n,e){const{nodeExtensions:t}=fOt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ba(Hs(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function pPt(n,e,t){var r;const{selection:i}=e;let s=null;if(Mve(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const mPt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=mf(n,r.schema);if(i)if(o){const c=uPt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return pPt(r,t,l)},gPt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),yPt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Zr(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},vPt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=yh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},bPt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=yh(i,o,a),c=yh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},kPt=n=>({state:e,dispatch:t})=>{const r=Zr(n,e.schema);return dn(r)(e,t)};function jX(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const xPt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=h$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&jX(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:dPt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&jX(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},SPt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=Zr(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=rr.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=rr.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=h$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(rr.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new Fo(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=h$(d,u.type.name,u.attrs),p=h$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},vP=(n,e)=>{const t=$9(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},bP=(n,e)=>{const t=$9(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},wPt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Zr(n,o.schema),p=Zr(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=$9(x=>BX(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(BX(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>vP(s,h)).command(()=>bP(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>vP(s,h)).command(()=>bP(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>vP(s,h)).command(()=>bP(s,h)).run()},$Pt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=mf(n,r.schema);return hPt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},EPt=(n,e,t={})=>({state:r,commands:i})=>{const s=Zr(n,r.schema),o=Zr(e,r.schema);return w9(r,s,t)?i.setNode(o):i.setNode(s,t)},CPt=(n,e={})=>({state:t,commands:r})=>{const i=Zr(n,t.schema);return w9(t,i,e)?r.lift(i):r.wrapIn(i,e)},MPt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},TPt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},_Pt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=mf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Cve(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},APt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=Ave(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Zr(n,r.schema)),a==="mark"&&(o=mf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},IPt=(n,e={})=>({state:t,dispatch:r})=>{const i=Zr(n,t.schema);return ln(i,e)(t,r)},RPt=(n,e={})=>({state:t,dispatch:r})=>{const i=Zr(n,t.schema);return cn(i,e)(t,r)};var OPt=Object.freeze({__proto__:null,blur:vOt,clearContent:bOt,clearNodes:kOt,command:xOt,createParagraphNear:SOt,cut:wOt,deleteCurrentNode:$Ot,deleteNode:EOt,deleteRange:COt,deleteSelection:MOt,enter:TOt,exitCode:_Ot,extendMarkRange:IOt,first:ROt,focus:POt,forEach:DOt,insertContent:NOt,insertContentAt:zOt,joinUp:BOt,joinDown:jOt,joinBackward:VOt,joinForward:qOt,joinItemBackward:KOt,joinItemForward:UOt,joinTextblockBackward:HOt,joinTextblockForward:WOt,keyboardShortcut:JOt,lift:QOt,liftEmptyBlock:YOt,liftListItem:XOt,newlineInCode:ZOt,resetAttributes:ePt,scrollIntoView:tPt,selectAll:nPt,selectNodeBackward:rPt,selectNodeForward:iPt,selectParentNode:sPt,selectTextblockEnd:oPt,selectTextblockStart:aPt,setContent:cPt,setMark:mPt,setMeta:gPt,setNode:yPt,setNodeSelection:vPt,setTextSelection:bPt,sinkListItem:kPt,splitBlock:xPt,splitListItem:SPt,toggleList:wPt,toggleMark:$Pt,toggleNode:EPt,toggleWrap:CPt,undoInputRule:MPt,unsetAllMarks:TPt,unsetMark:_Pt,updateAttributes:APt,wrapIn:IPt,wrapInList:RPt});Y0.create({name:"commands",addCommands(){return{...OPt}}});Y0.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}});Y0.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});Y0.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return S9()||_ve()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Eve({state:t,transaction:d}),{commands:h}=new dOt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}});Y0.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});let PPt=class tL{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ba(Hs(this,"addOptions",{name:this.name}))),this.storage=ba(Hs(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tL(e)}configure(e={}){const t=this.extend();return t.options=x9(this.options,e),t.storage=ba(Hs(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new tL({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ba(Hs(t,"addOptions",{name:t.name})),t.storage=ba(Hs(t,"addStorage",{name:t.name,options:t.options})),t}};function DPt(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function NPt(n){var e;const{char:t,allowSpaces:r,allowedPrefixes:i,startOfLine:s,$position:o}=n,a=DPt(t),l=new RegExp(`\\s${a}$`),c=s?"^":"",u=r?new RegExp(`${c}${a}.*?(?=\\s${a}|$)`,"gm"):new RegExp(`${c}(?:^)?${a}[^\\s${a}]*`,"gm"),d=((e=o.nodeBefore)===null||e===void 0?void 0:e.isText)&&o.nodeBefore.text;if(!d)return null;const f=o.pos-d.length,h=Array.from(d.matchAll(u)).pop();if(!h||h.input===void 0||h.index===void 0)return null;const p=h.input.slice(Math.max(0,h.index-1),h.index),m=new RegExp(`^[${i==null?void 0:i.join("")}\0]?$`).test(p);if(i!==null&&!m)return null;const g=f+h.index;let y=g+h[0].length;return r&&l.test(d.slice(y-1,y+1))&&(h[0]+=" ",y+=1),g<o.pos&&y>=o.pos?{range:{from:g,to:y},query:h[0].slice(t.length),text:h[0]}:null}const FPt=new Y("suggestion");function LPt({pluginKey:n=FPt,editor:e,char:t="@",allowSpaces:r=!1,allowedPrefixes:i=[" "],startOfLine:s=!1,decorationTag:o="span",decorationClass:a="suggestion",command:l=()=>null,items:c=()=>[],render:u=()=>({}),allow:d=()=>!0,findSuggestionMatch:f=NPt}){let h;const p=u==null?void 0:u(),m=new Q({key:n,view(){return{update:async(g,y)=>{var k,b,S,w,x,$,E;const C=(k=this.key)===null||k===void 0?void 0:k.getState(y),M=(b=this.key)===null||b===void 0?void 0:b.getState(g.state),P=C.active&&M.active&&C.range.from!==M.range.from,I=!C.active&&M.active,N=C.active&&!M.active,T=!I&&!N&&C.query!==M.query,R=I||P,A=T&&!P,L=N||P;if(!R&&!A&&!L)return;const F=L&&!R?C:M,O=g.dom.querySelector(`[data-decoration-id="${F.decorationId}"]`);h={editor:e,range:F.range,query:F.query,text:F.text,items:[],command:z=>{l({editor:e,range:F.range,props:z})},decorationNode:O,clientRect:O?()=>{var z;const{decorationId:j}=(z=this.key)===null||z===void 0?void 0:z.getState(e.state),K=g.dom.querySelector(`[data-decoration-id="${j}"]`);return(K==null?void 0:K.getBoundingClientRect())||null}:null},R&&((S=p==null?void 0:p.onBeforeStart)===null||S===void 0||S.call(p,h)),A&&((w=p==null?void 0:p.onBeforeUpdate)===null||w===void 0||w.call(p,h)),(A||R)&&(h.items=await c({editor:e,query:F.query})),L&&((x=p==null?void 0:p.onExit)===null||x===void 0||x.call(p,h)),A&&(($=p==null?void 0:p.onUpdate)===null||$===void 0||$.call(p,h)),R&&((E=p==null?void 0:p.onStart)===null||E===void 0||E.call(p,h))},destroy:()=>{var g;h&&((g=p==null?void 0:p.onExit)===null||g===void 0||g.call(p,h))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(g,y,k,b){const{isEditable:S}=e,{composing:w}=e.view,{selection:x}=g,{empty:$,from:E}=x,C={...y};if(C.composing=w,S&&($||e.view.composing)){(E<y.range.from||E>y.range.to)&&!w&&!y.composing&&(C.active=!1);const M=f({char:t,allowSpaces:r,allowedPrefixes:i,startOfLine:s,$position:x.$from}),P=`id_${Math.floor(Math.random()*4294967295)}`;M&&d({editor:e,state:b,range:M.range})?(C.active=!0,C.decorationId=y.decorationId?y.decorationId:P,C.range=M.range,C.query=M.query,C.text=M.text):C.active=!1}else C.active=!1;return C.active||(C.decorationId=null,C.range={from:0,to:0},C.query=null,C.text=null),C}},props:{handleKeyDown(g,y){var k;const{active:b,range:S}=m.getState(g.state);return b&&((k=p==null?void 0:p.onKeyDown)===null||k===void 0?void 0:k.call(p,{view:g,event:y,range:S}))||!1},decorations(g){const{active:y,range:k,decorationId:b}=m.getState(g);return y?Jn.create(g.doc,[Wl.inline(k.from,k.to,{nodeName:o,class:a,"data-decoration-id":b})]):null}}});return m}const zPt=new Y("mention"),E9=PPt.create({name:"mention",addOptions(){return{HTMLAttributes:{},renderText({options:n,node:e}){var t;return`${n.suggestion.char}${(t=e.attrs.label)!==null&&t!==void 0?t:e.attrs.id}`},renderHTML({options:n,node:e}){var t;return["span",this.HTMLAttributes,`${n.suggestion.char}${(t=e.attrs.label)!==null&&t!==void 0?t:e.attrs.id}`]},suggestion:{char:"@",pluginKey:zPt,command:({editor:n,range:e,props:t})=>{var r,i;const s=n.view.state.selection.$to.nodeAfter;((r=s==null?void 0:s.text)===null||r===void 0?void 0:r.startsWith(" "))&&(e.to+=1),n.chain().focus().insertContentAt(e,[{type:this.name,attrs:t},{type:"text",text:" "}]).run(),(i=window.getSelection())===null||i===void 0||i.collapseToEnd()},allow:({state:n,range:e})=>{const t=n.doc.resolve(e.from),r=n.schema.nodes[this.name];return!!t.parent.type.contentMatch.matchType(r)}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:n=>n.getAttribute("data-id"),renderHTML:n=>n.id?{"data-id":n.id}:{}},label:{default:null,parseHTML:n=>n.getAttribute("data-label"),renderHTML:n=>n.label?{"data-label":n.label}:{}}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:n,HTMLAttributes:e}){if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",FX({"data-type":this.name},this.options.HTMLAttributes,e),this.options.renderLabel({options:this.options,node:n})];const t=this.options.renderHTML({options:this.options,node:n});return typeof t=="string"?["span",FX({"data-type":this.name},this.options.HTMLAttributes,e),t]:t},renderText({node:n}){return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel({options:this.options,node:n})):this.options.renderText({options:this.options,node:n})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:n,state:e})=>{let t=!1;const{selection:r}=e,{empty:i,anchor:s}=r;return i?(e.doc.nodesBetween(s-1,s,(o,a)=>{if(o.type.name===this.name)return t=!0,n.insertText(this.options.suggestion.char||"",a,a+o.nodeSize),!1}),t):!1})}},addProseMirrorPlugins(){return[LPt({editor:this.editor,...this.options.suggestion})]}});function Ive(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Ive(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Rve(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Rve(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}let Ua=class Ai{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ai(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ai(r,i)}cutByIndex(e,t){return e==t?Ai.empty:e==0&&t==this.content.length?this:new Ai(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Ai(i,s)}addToStart(e){return new Ai([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ai(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Ive(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Rve(this,e,t,r)}findIndex(e,t=-1){if(e==0)return VS(0,e);if(e==this.size)return VS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?VS(r+1,o):VS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Ai.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ai(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ai.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Ai(t||e,r)}static from(e){if(!e)return Ai.empty;if(e instanceof Ai)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ai([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ua.empty=new Ua([],0);const kP={index:0,offset:0};function VS(n,e){return kP.index=n,kP.offset=e,kP}function nL(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!nL(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!nL(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Bl=class rL{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&nL(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return rL.none;if(e instanceof rL)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Bl.none=[];let gT=class Wm{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Pve(this.content,e+this.openStart,t);return r&&new Wm(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Wm(Ove(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Wm.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Wm(Ua.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Wm(e,r,i)}};gT.empty=new gT(Ua.empty,0,0);function Ove(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Ove(s.content,e-i-1,t-i-1)))}function Pve(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Pve(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}let BPt=class iL{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new qX(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new qX(this,t,!0);return r.addAll(e,t.from,t.to),gT.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(qPt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=KX(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=KX(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new iL(e,iL.schemaRules(e)))}};const Dve={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},jPt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Nve={ol:!0,ul:!0},yT=1,vT=2,kb=4;function VX(n,e,t){return e!=null?(e?yT:0)|(e==="full"?vT:0):n&&n.whitespace=="pre"?yT|vT:t&~kb}let qS=class{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Bl.none,this.stashMarks=[],this.match=o||(a&kb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ua.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&yT)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Ua.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ua.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):UPt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Dve.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},qX=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=VX(null,t.preserveWhitespace,0)|(r?kb:0);i?s=new qS(i.type,i.attrs,Bl.none,Bl.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new qS(null,null,Bl.none,Bl.none,!0,null,o):s=new qS(e.schema.topNodeType,null,Bl.none,Bl.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(KPt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&vT||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&yT)r.options&vT?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Nve.hasOwnProperty(r)&&this.parser.normalizeLists&&VPt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:jPt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(Dve.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Bl.none,r=Bl.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=VX(e,i,s.options);s.options&kb&&s.content.length==0&&(o|=kb),this.nodes.push(new qS(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=HPt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}};function VPt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Nve.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function qPt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function KPt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function KX(n){let e={};for(let t in n)e[t]=n[t];return e}function UPt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function HPt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class vg{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=xP(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=vg.renderSpec(xP(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&vg.renderSpec(xP(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<t.length;u++){let d=t[u];if(d===0){if(u<t.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=vg.renderSpec(e,d,r);if(a.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new vg(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=UX(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return UX(e.marks)}}function UX(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function xP(n){return n.document||window.document}function Fve(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class WPt{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),y=h(...m)(g);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Fve({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}function Zn(n,e,t){return n.config[e]===void 0&&n.parent?Zn(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Zn(n.parent,e,t):null}):n.config[e]}function GPt(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function ei(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function JPt(n){return typeof n=="function"}function Mr(n,e=void 0,...t){return JPt(n)?e?n.bind(e)(...t):n(...t):n}function QPt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function YPt(n){return Object.prototype.toString.call(n).slice(8,-1)}function SP(n){return YPt(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function wA(n,e){const t={...n};return SP(n)&&SP(e)&&Object.keys(e).forEach(r=>{SP(e[r])?r in n?t[r]=wA(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}class qo{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Mr(Zn(this,"addOptions",{name:this.name}))),this.storage=Mr(Zn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new qo(e)}configure(e={}){const t=this.extend();return t.options=wA(this.options,e),t.storage=Mr(Zn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new qo(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Mr(Zn(t,"addOptions",{name:t.name})),t.storage=Mr(Zn(t,"addStorage",{name:t.name,options:t.options})),t}}function XPt(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function ZPt(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const eDt=qo.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Q({key:new Y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=ZPt(t);return XPt(r,{from:o,to:a},{textSerializers:l})}}})]}}),tDt=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),nDt=(n=!1)=>({commands:e})=>e.setContent("",n),rDt=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=vt(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},iDt=n=>e=>n(e),sDt=()=>({state:n,dispatch:e})=>nn(n,e),oDt=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new D(r.doc.resolve(o-1))),!0},aDt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},lDt=n=>({tr:e,state:t,dispatch:r})=>{const i=ei(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},cDt=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},uDt=()=>({state:n,dispatch:e})=>Ht(n,e),dDt=()=>({commands:n})=>n.keyboardShortcut("Enter"),fDt=()=>({state:n,dispatch:e})=>tn(n,e);function bT(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:QPt(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function sL(n,e,t={}){return n.find(r=>r.type===e&&bT(r.attrs,t))}function hDt(n,e,t={}){return!!sL(n,e,t)}function Lve(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=sL([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(sL([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&hDt([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function gf(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const pDt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=gf(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Lve(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=D.create(o,d.from,d.to);t.setSelection(f)}}return!0},mDt=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function zve(n){return n instanceof D}function vh(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function gDt(n,e=null){if(!e)return null;const t=V.atStart(n),r=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?D.create(n,vh(0,i,s),vh(n.content.size,i,s)):D.create(n,vh(e,i,s),vh(e,i,s))}function C9(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const yDt=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{C9()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!zve(t.state.selection))return o(),!0;const a=gDt(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},vDt=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),bDt=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),oL=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&!/\S/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&oL(r)}return n};function HX(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return oL(t),oL(t)}function kT(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Ua.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),kT("",e,t)}if(typeof n=="string"){const r=BPt.fromSchema(e);return t.slice?r.parseSlice(HX(n),t.parseOptions).content:r.parse(HX(n),t.parseOptions)}return kT("",e,t)}function kDt(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof je||i instanceof Ve))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const xDt=n=>n.toString().startsWith("<"),SDt=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=kT(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((xDt(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&kDt(r,r.steps.length-1,-1)}return!0},wDt=()=>({state:n,dispatch:e})=>Yt(n,e),$Dt=()=>({state:n,dispatch:e})=>Xt(n,e),EDt=()=>({state:n,dispatch:e})=>Wt(n,e),CDt=()=>({state:n,dispatch:e})=>Jt(n,e),MDt=()=>({tr:n,state:e,dispatch:t})=>{try{const r=Oe(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},TDt=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Oe(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}};function Bve(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function _Dt(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))C9()||Bve()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const ADt=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=_Dt(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function M9(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?ei(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>bT(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const IDt=(n,e={})=>({state:t,dispatch:r})=>{const i=ei(n,t.schema);return M9(t,i,e)?Zt(t,r):!1},RDt=()=>({state:n,dispatch:e})=>rn(n,e),ODt=n=>({state:e,dispatch:t})=>{const r=ei(n,e.schema);return un(r)(e,t)},PDt=()=>({state:n,dispatch:e})=>en(n,e);function jve(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function WX(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const DDt=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=jve(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=ei(n,r.schema)),a==="mark"&&(o=gf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,WX(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(WX(d.attrs,e)))})})}),!0):!1},NDt=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),FDt=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),LDt=()=>({state:n,dispatch:e})=>Gt(n,e),zDt=()=>({state:n,dispatch:e})=>Qt(n,e),BDt=()=>({state:n,dispatch:e})=>sn(n,e),jDt=()=>({state:n,dispatch:e})=>an(n,e),VDt=()=>({state:n,dispatch:e})=>on(n,e);function qDt(n,e,t={}){return kT(n,e,{slice:!1,parseOptions:t})}const KDt=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=qDt(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function UDt(n,e){const t=gf(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function HDt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function WDt(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function T9(n){return e=>WDt(e.$from,n)}function Vve(n,e){const t=vg.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function p$(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function GDt(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?gf(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>bT(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),k=Math.min(p,g+m.nodeSize),b=k-y;o+=b,a.push(...m.marks.map(S=>({mark:S,from:y,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>bT(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function GX(n,e){const{nodeExtensions:t}=GPt(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Mr(Zn(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function JDt(n,e,t){var r;const{selection:i}=e;let s=null;if(zve(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const QDt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=gf(n,r.schema);if(i)if(o){const c=UDt(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&t.addMark(p,m,l.create({...y.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return JDt(r,t,l)},YDt=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),XDt=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=ei(n,t.schema);return s.isTextblock?i().command(({commands:o})=>De(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>De(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},ZDt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=vh(n,0,r.content.size),s=G.create(r,i);e.setSelection(s)}return!0},eNt=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=D.atStart(r).from,a=D.atEnd(r).to,l=vh(i,o,a),c=vh(s,o,a),u=D.create(r,l,c);e.setSelection(u)}return!0},tNt=n=>({state:e,dispatch:t})=>{const r=ei(n,e.schema);return dn(r)(e,t)};function JX(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const nNt=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=p$(c,a.node().type.name,a.node().attrs);if(s instanceof G&&s.node.isBlock)return!a.parentOffset||!ne(o,a.pos)?!1:(r&&(n&&JX(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof D&&e.deleteSelection();const f=a.depth===0?void 0:HDt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ne(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ne(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&JX(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},rNt=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=ei(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Ua.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let $=a.depth-y;$>=a.depth-3;$-=1)g=Ua.from(a.node($).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b=p$(d,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;g=g.append(Ua.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-k),new gT(g,4-y,0));let x=-1;e.doc.nodesBetween(w,e.doc.content.size,($,E)=>{if(x>-1)return!1;$.isTextblock&&$.content.size===0&&(x=E+1)}),x>-1&&e.setSelection(D.near(e.doc.resolve(x))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=p$(d,u.type.name,u.attrs),p=p$(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ne(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=t,{splittableMarks:k}=i.extensionManager,b=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!b||!r)return!0;const S=b.filter(w=>k.includes(w.type.name));e.ensureMarks(S)}return!0},wP=(n,e)=>{const t=T9(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,t.pos)&&n.join(t.pos),!0},$P=(n,e)=>{const t=T9(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Me(n.doc,r)&&n.join(r),!0},iNt=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=ei(n,o.schema),p=ei(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:k}=m,b=y.blockRange(k),S=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=T9(x=>GX(x.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(p);if(GX(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,h),!0)).command(()=>wP(s,h)).command(()=>$P(s,h)).run()}return!t||!S||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>wP(s,h)).command(()=>$P(s,h)).run():l().command(()=>{const x=u().wrapInList(h,r),$=S.filter(E=>f.includes(E.type.name));return s.ensureMarks($),x?!0:c.clearNodes()}).wrapInList(h,r).command(()=>wP(s,h)).command(()=>$P(s,h)).run()},sNt=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=gf(n,r.schema);return GDt(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},oNt=(n,e,t={})=>({state:r,commands:i})=>{const s=ei(n,r.schema),o=ei(e,r.schema);return M9(r,s,t)?i.setNode(o):i.setNode(s,t)},aNt=(n,e={})=>({state:t,commands:r})=>{const i=ei(n,t.schema);return M9(t,i,e)?r.lift(i):r.wrapIn(i,e)},lNt=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},cNt=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},uNt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=gf(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Lve(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},dNt=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=jve(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=ei(n,r.schema)),a==="mark"&&(o=gf(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},fNt=(n,e={})=>({state:t,dispatch:r})=>{const i=ei(n,t.schema);return ln(i,e)(t,r)},hNt=(n,e={})=>({state:t,dispatch:r})=>{const i=ei(n,t.schema);return cn(i,e)(t,r)};var pNt=Object.freeze({__proto__:null,blur:tDt,clearContent:nDt,clearNodes:rDt,command:iDt,createParagraphNear:sDt,cut:oDt,deleteCurrentNode:aDt,deleteNode:lDt,deleteRange:cDt,deleteSelection:uDt,enter:dDt,exitCode:fDt,extendMarkRange:pDt,first:mDt,focus:yDt,forEach:vDt,insertContent:bDt,insertContentAt:SDt,joinUp:wDt,joinDown:$Dt,joinBackward:EDt,joinForward:CDt,joinItemBackward:MDt,joinItemForward:TDt,keyboardShortcut:ADt,lift:IDt,liftEmptyBlock:RDt,liftListItem:ODt,newlineInCode:PDt,resetAttributes:DDt,scrollIntoView:NDt,selectAll:FDt,selectNodeBackward:LDt,selectNodeForward:zDt,selectParentNode:BDt,selectTextblockEnd:jDt,selectTextblockStart:VDt,setContent:KDt,setMark:QDt,setMeta:YDt,setNode:XDt,setNodeSelection:ZDt,setTextSelection:eNt,sinkListItem:tNt,splitBlock:nNt,splitListItem:rNt,toggleList:iNt,toggleMark:sNt,toggleNode:oNt,toggleWrap:aNt,undoInputRule:lNt,unsetAllMarks:cNt,unsetMark:uNt,updateAttributes:dNt,wrapIn:fNt,wrapInList:hNt});const mNt=qo.create({name:"commands",addCommands(){return{...pNt}}}),gNt=qo.create({name:"editable",addProseMirrorPlugins(){return[new Q({key:new Y("editable"),props:{editable:()=>this.editor.options.editable}})]}}),yNt=qo.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Q({key:new Y("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),vNt=qo.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return C9()||Bve()?s:i},addProseMirrorPlugins(){return[new Q({key:new Y("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=V.atStart(e.doc).from,l=V.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=Fve({state:t,transaction:d}),{commands:h}=new WPt({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),bNt=qo.create({name:"tabindex",addProseMirrorPlugins(){return[new Q({key:new Y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var kNt=Object.freeze({__proto__:null,ClipboardTextSerializer:eDt,Commands:mNt,Editable:gNt,FocusEvents:yNt,Keymap:vNt,Tabindex:bNt});let X0=class aL{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Mr(Zn(this,"addOptions",{name:this.name}))),this.storage=Mr(Zn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new aL(e)}configure(e={}){const t=this.extend();return t.options=wA(this.options,e),t.storage=Mr(Zn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new aL(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Mr(Zn(t,"addOptions",{name:t.name})),t.storage=Mr(Zn(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}},Zi=class lL{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Mr(Zn(this,"addOptions",{name:this.name}))),this.storage=Mr(Zn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new lL(e)}configure(e={}){const t=this.extend();return t.options=wA(this.options,e),t.storage=Mr(Zn(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new lL(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Mr(Zn(t,"addOptions",{name:t.name})),t.storage=Mr(Zn(t,"addStorage",{name:t.name,options:t.options})),t}};function qve(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=qve(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Kve(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Kve(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class Xe{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Xe(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Xe(r,i)}cutByIndex(e,t){return e==t?Xe.empty:e==0&&t==this.content.length?this:new Xe(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Xe(i,s)}addToStart(e){return new Xe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Xe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return qve(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Kve(this,e,t,r)}findIndex(e,t=-1){if(e==0)return KS(0,e);if(e==this.size)return KS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?KS(r+1,o):KS(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Xe.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Xe(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Xe.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Xe(t||e,r)}static from(e){if(!e)return Xe.empty;if(e instanceof Xe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Xe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Xe.empty=new Xe([],0);const EP={index:0,offset:0};function KS(n,e){return EP.index=n,EP.offset=e,EP}function xT(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!xT(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!xT(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class dt{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&xT(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return dt.none;if(e instanceof dt)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}dt.none=[];class cL extends Error{}class ka{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Hve(this.content,e+this.openStart,t);return r&&new ka(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ka(Uve(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ka.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ka(Xe.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new ka(e,r,i)}}ka.empty=new ka(Xe.empty,0,0);function Uve(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Uve(s.content,e-i-1,t-i-1)))}function Hve(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=Hve(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function xNt(n,e,t){if(t.openStart>n.depth)throw new cL("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new cL("Inconsistent open depths");return Wve(n,e,t,0)}function Wve(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=Wve(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Dh(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=SNt(t,n);return Dh(s,Jve(n,o,a,e,r))}else return Dh(s,ST(n,e,r))}function Gve(n,e){if(!e.type.compatibleContent(n.type))throw new cL("Cannot join "+e.type.name+" onto "+n.type.name)}function uL(n,e,t){let r=n.node(t);return Gve(r,e.node(t)),r}function Ph(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function xb(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Ph(n.nodeAfter,r),s++));for(let a=s;a<o;a++)Ph(i.child(a),r);e&&e.depth==t&&e.textOffset&&Ph(e.nodeBefore,r)}function Dh(n,e){return n.type.checkContent(e),n.copy(e)}function Jve(n,e,t,r,i){let s=n.depth>i&&uL(n,e,i+1),o=r.depth>i&&uL(t,r,i+1),a=[];return xb(null,n,i,a),s&&o&&e.index(i)==t.index(i)?(Gve(s,o),Ph(Dh(s,Jve(n,e,t,r,i+1)),a)):(s&&Ph(Dh(s,ST(n,e,i+1)),a),xb(e,t,i,a),o&&Ph(Dh(o,ST(t,r,i+1)),a)),xb(r,null,i,a),new Xe(a)}function ST(n,e,t){let r=[];if(xb(null,n,t,r),n.depth>t){let i=uL(n,e,t+1);Ph(Dh(i,ST(n,e,t+1)),r)}return xb(e,null,t,r),new Xe(r)}function SNt(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(Xe.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class wk{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return dt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new $Nt(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new wk(t,r,s)}static resolveCached(e,t){for(let i=0;i<CP.length;i++){let s=CP[i];if(s.pos==t&&s.doc==e)return s}let r=CP[MP]=wk.resolve(e,t);return MP=(MP+1)%wNt,r}}let CP=[],MP=0,wNt=12;class $Nt{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ENt=Object.create(null);let Dg=class dL{constructor(e,t,r,i=dt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||Xe.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&xT(this.attrs,t||e.defaultAttrs||ENt)&&dt.sameSet(this.marks,r||dt.none)}copy(e=null){return e==this.content?this:new dL(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new dL(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return ka.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new ka(c,i.depth-o,s.depth-o)}replace(e,t,r){return xNt(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return wk.resolveCached(this,e)}resolveNoCache(e){return wk.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Qve(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=Xe.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=dt.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!dt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=Xe.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}};Dg.prototype.text=void 0;class wT extends Dg{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Qve(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new wT(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new wT(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Qve(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class tp{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new CNt(e,t);if(r.next==null)return tp.empty;let i=Yve(r);r.next&&r.err("Unexpected trailing text");let s=ONt(RNt(i));return PNt(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return Xe.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}tp.empty=new tp(!0);class CNt{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Yve(n){let e=[];do e.push(MNt(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function MNt(n){let e=[];do e.push(TNt(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function TNt(n){let e=INt(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=_Nt(n,e);else break;return e}function QX(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function _Nt(n,e){let t=QX(n),r=t;return n.eat(",")&&(n.next!="}"?r=QX(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function ANt(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function INt(n){if(n.eat("(")){let e=Yve(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=ANt(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function RNt(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=t())}else if(o.type=="star"){let l=t();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Xve(n,e){return e-n}function YX(n,e){let t=[];return r(e),t.sort(Xve);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&r(l)}}}function ONt(n){let e=Object.create(null);return t(YX(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);YX(n,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new tp(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Xve);s.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return s}}function PNt(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Zve(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function ebe(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function tbe(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new DNt(n[t]);return e}class $T{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=tbe(r.attrs),this.defaultAttrs=Zve(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==tp.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ebe(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Dg(this,this.computeAttrs(e),Xe.from(t),dt.setFrom(r))}createChecked(e=null,t,r){return t=Xe.from(t),this.checkContent(t),new Dg(this,this.computeAttrs(e),t,dt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=Xe.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(Xe.empty,!0);return s?new Dg(this,e,t.append(s),dt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:dt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new $T(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class DNt{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class _9{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=tbe(i.attrs),this.excluded=null;let s=Zve(this.attrs);this.instance=s?new dt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new dt(this,ebe(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new _9(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class NNt{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Nn.from(e.nodes),t.marks=Nn.from(e.marks||{}),this.nodes=$T.compile(this.spec.nodes,this),this.marks=_9.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=tp.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?XX(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:XX(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof $T){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new wT(r,r.defaultAttrs,e,dt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Dg.fromJSON(this,e)}markFromJSON(e){return dt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function XX(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class ET{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new eZ(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new eZ(this,t,!0);return r.addAll(e,t.from,t.to),ka.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(zNt(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=tZ(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=tZ(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ET(e,ET.schemaRules(e)))}}const nbe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},FNt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rbe={ol:!0,ul:!0},CT=1,MT=2,Sb=4;function ZX(n,e,t){return e!=null?(e?CT:0)|(e==="full"?MT:0):n&&n.whitespace=="pre"?CT|MT:t&~Sb}class US{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=dt.none,this.stashMarks=[],this.match=o||(a&Sb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Xe.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&CT)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Xe.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Xe.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):jNt(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!nbe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class eZ{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=ZX(null,t.preserveWhitespace,0)|(r?Sb:0);i?s=new US(i.type,i.attrs,dt.none,dt.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new US(null,null,dt.none,dt.none,!0,null,o):s=new US(e.schema.topNodeType,null,dt.none,dt.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(BNt(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);t();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&MT||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&CT)r.options&MT?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;rbe.hasOwnProperty(r)&&this.parser.normalizeLists&&LNt(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:FNt.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(nbe.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=dt.none,r=dt.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return[t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=ZX(e,i,s.options);s.options&Sb&&s.content.length==0&&(o|=Sb),this.nodes.push(new US(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=VNt(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}}function LNt(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&rbe.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function zNt(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function BNt(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function tZ(n){let e={};for(let t in n)e[t]=n[t];return e}function jNt(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function VNt(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}const nZ={};function qNt(n){let e=nZ[n];if(e)return e;e=nZ[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);e.push(r)}for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function u0(n,e){typeof e!="string"&&(e=u0.defaultChars);const t=qNt(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,o=r.length;s<o;s+=3){const a=parseInt(r.slice(s+1,s+3),16);if(a<128){i+=t[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const c=a<<6&1984|l&63;c<128?i+="":i+=String.fromCharCode(c),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(r.slice(s+4,s+6),16),c=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(c&192)===128){const u=a<<12&61440|l<<6&4032|c&63;u<2048||u>=55296&&u<=57343?i+="":i+=String.fromCharCode(u),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(r.slice(s+4,s+6),16),c=parseInt(r.slice(s+7,s+9),16),u=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(c&192)===128&&(u&192)===128){let d=a<<18&1835008|l<<12&258048|c<<6&4032|u&63;d<65536||d>1114111?i+="":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),s+=9;continue}}i+=""}return i})}u0.defaultChars=";/?:@&=+$,#";u0.componentChars="";const rZ={};function KNt(n){let e=rZ[n];if(e)return e;e=rZ[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function x1(n,e,t){typeof e!="string"&&(t=e,e=x1.defaultChars),typeof t>"u"&&(t=!0);const r=KNt(e);let i="";for(let s=0,o=n.length;s<o;s++){const a=n.charCodeAt(s);if(t&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(n.slice(s+1,s+3))){i+=n.slice(s,s+3),s+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=n.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(n[s]+n[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(n[s])}return i}x1.defaultChars=";/?:@&=+$,-_.!~*'()#";x1.componentChars="-_.!~*'()";function A9(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function TT(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const UNt=/^([a-z0-9.+-]+:)/i,HNt=/:[0-9]*$/,WNt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,GNt=["<",">",'"',"`"," ","\r",`
`,"	"],JNt=["{","}","|","\\","^","`"].concat(GNt),QNt=["'"].concat(JNt),iZ=["%","/","?",";","#"].concat(QNt),sZ=["/","?","#"],YNt=255,oZ=/^[+a-z0-9A-Z_-]{0,63}$/,XNt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,aZ={javascript:!0,"javascript:":!0},lZ={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function I9(n,e){if(n&&n instanceof TT)return n;const t=new TT;return t.parse(n,e),t}TT.prototype.parse=function(n,e){let t,r,i,s=n;if(s=s.trim(),!e&&n.split("#").length===1){const c=WNt.exec(s);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=UNt.exec(s);if(o&&(o=o[0],t=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(e||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&aZ[o])&&(s=s.substr(2),this.slashes=!0)),!aZ[o]&&(i||o&&!lZ[o])){let c=-1;for(let p=0;p<sZ.length;p++)r=s.indexOf(sZ[p]),r!==-1&&(c===-1||r<c)&&(c=r);let u,d;c===-1?d=s.lastIndexOf("@"):d=s.lastIndexOf("@",c),d!==-1&&(u=s.slice(0,d),s=s.slice(d+1),this.auth=u),c=-1;for(let p=0;p<iZ.length;p++)r=s.indexOf(iZ[p]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=s.length),s[c-1]===":"&&c--;const f=s.slice(0,c);s=s.slice(c),this.parseHost(f),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let m=0,g=p.length;m<g;m++){const y=p[m];if(y&&!y.match(oZ)){let k="";for(let b=0,S=y.length;b<S;b++)y.charCodeAt(b)>127?k+="x":k+=y[b];if(!k.match(oZ)){const b=p.slice(0,m),S=p.slice(m+1),w=y.match(XNt);w&&(b.push(w[1]),S.unshift(w[2])),S.length&&(s=S.join(".")+s),this.hostname=b.join(".");break}}}}this.hostname.length>YNt&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),lZ[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};TT.prototype.parseHost=function(n){let e=HNt.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const ZNt=Object.freeze(Object.defineProperty({__proto__:null,decode:u0,encode:x1,format:A9,parse:I9},Symbol.toStringTag,{value:"Module"})),ibe=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,sbe=/[\0-\x1F\x7F-\x9F]/,e3t=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,R9=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,obe=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,t3t=Object.freeze(Object.defineProperty({__proto__:null,Any:ibe,Cc:sbe,Cf:e3t,P:R9,Z:obe},Symbol.toStringTag,{value:"Module"})),n3t=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(n=>n.charCodeAt(0))),r3t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(n=>n.charCodeAt(0)));var TP;const i3t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),s3t=(TP=String.fromCodePoint)!==null&&TP!==void 0?TP:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function o3t(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=i3t.get(n))!==null&&e!==void 0?e:n}var er;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(er||(er={}));const a3t=32;var id;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(id||(id={}));function fL(n){return n>=er.ZERO&&n<=er.NINE}function l3t(n){return n>=er.UPPER_A&&n<=er.UPPER_F||n>=er.LOWER_A&&n<=er.LOWER_F}function c3t(n){return n>=er.UPPER_A&&n<=er.UPPER_Z||n>=er.LOWER_A&&n<=er.LOWER_Z||fL(n)}function u3t(n){return n===er.EQUALS||c3t(n)}var Un;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(Un||(Un={}));var Gu;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(Gu||(Gu={}));class d3t{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=Un.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Gu.Strict}startEntity(e){this.decodeMode=e,this.state=Un.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case Un.EntityStart:return e.charCodeAt(t)===er.NUM?(this.state=Un.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=Un.NamedEntity,this.stateNamedEntity(e,t));case Un.NumericStart:return this.stateNumericStart(e,t);case Un.NumericDecimal:return this.stateNumericDecimal(e,t);case Un.NumericHex:return this.stateNumericHex(e,t);case Un.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|a3t)===er.LOWER_X?(this.state=Un.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=Un.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){const s=r-t;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(t,s),i),this.consumed+=s}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(fL(i)||l3t(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(fL(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===er.SEMI)this.consumed+=1;else if(this.decodeMode===Gu.Strict)return 0;return this.emitCodePoint(o3t(this.result),this.consumed),this.errors&&(e!==er.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&id.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=f3t(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Gu.Attribute&&(s===0||u3t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&id.VALUE_LENGTH)>>14,s!==0){if(o===er.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Gu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,i=(r[t]&id.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~id.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Un.NamedEntity:return this.result!==0&&(this.decodeMode!==Gu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Un.NumericDecimal:return this.emitNumericEntity(0,2);case Un.NumericHex:return this.emitNumericEntity(0,3);case Un.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Un.EntityStart:return 0}}}function abe(n){let e="";const t=new d3t(n,r=>e+=s3t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),t.startEntity(s);const c=t.write(i,a+1);if(c<0){o=a+t.end();break}o=a+c,a=c===0?o+1:o}const l=e+i.slice(o);return e="",l}}function f3t(n,e,t,r){const i=(e&id.BRANCH_LENGTH)>>7,s=e&id.JUMP_TABLE;if(i===0)return s!==0&&r===s?t:-1;if(s){const l=r-s;return l<0||l>=i?-1:n[t+l]-1}let o=t,a=o+i-1;for(;o<=a;){const l=o+a>>>1,c=n[l];if(c<r)o=l+1;else if(c>r)a=l-1;else return n[l+i]}return-1}const h3t=abe(n3t);abe(r3t);function lbe(n,e=Gu.Legacy){return h3t(n,e)}function p3t(n){return Object.prototype.toString.call(n)}function O9(n){return p3t(n)==="[object String]"}const m3t=Object.prototype.hasOwnProperty;function g3t(n,e){return m3t.call(n,e)}function $A(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){n[r]=t[r]})}}),n}function cbe(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function P9(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function _T(n){if(n>65535){n-=65536;const e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}const ube=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,y3t=/&([a-z#][a-z0-9]{1,31});/gi,v3t=new RegExp(ube.source+"|"+y3t.source,"gi"),b3t=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function k3t(n,e){if(e.charCodeAt(0)===35&&b3t.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return P9(r)?_T(r):n}const t=lbe(n);return t!==n?t:n}function x3t(n){return n.indexOf("\\")<0?n:n.replace(ube,"$1")}function $k(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(v3t,function(e,t,r){return t||k3t(e,r)})}const S3t=/[&<>"]/,w3t=/[&<>"]/g,$3t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function E3t(n){return $3t[n]}function Od(n){return S3t.test(n)?n.replace(w3t,E3t):n}const C3t=/[.?*+^$[\]\\(){}|-]/g;function M3t(n){return n.replace(C3t,"\\$&")}function Et(n){switch(n){case 9:case 32:return!0}return!1}function Ek(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Ck(n){return R9.test(n)}function Mk(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function EA(n){return n=n.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(n=n.replace(//g,"")),n.toLowerCase().toUpperCase()}const T3t={mdurl:ZNt,ucmicro:t3t},_3t=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:cbe,assign:$A,escapeHtml:Od,escapeRE:M3t,fromCodePoint:_T,has:g3t,isMdAsciiPunct:Mk,isPunctChar:Ck,isSpace:Et,isString:O9,isValidEntityCode:P9,isWhiteSpace:Ek,lib:T3t,normalizeReference:EA,unescapeAll:$k,unescapeMd:x3t},Symbol.toStringTag,{value:"Module"}));function A3t(n,e,t){let r,i,s,o;const a=n.posMax,l=n.pos;for(n.pos=e+1,r=1;n.pos<a;){if(s=n.src.charCodeAt(n.pos),s===93&&(r--,r===0)){i=!0;break}if(o=n.pos,n.md.inline.skipToken(n),s===91){if(o===n.pos-1)r++;else if(t)return n.pos=l,-1}}let c=-1;return i&&(c=n.pos),n.pos=l,c}function I3t(n,e,t){let r,i=e;const s={ok:!1,pos:0,lines:0,str:""};if(n.charCodeAt(i)===60){for(i++;i<t;){if(r=n.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=$k(n.slice(e+1,i)),s.ok=!0,s;if(r===92&&i+1<t){i+=2;continue}i++}return s}let o=0;for(;i<t&&(r=n.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<t){if(n.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}i++}return e===i||o!==0||(s.str=$k(n.slice(e,i)),s.pos=i,s.ok=!0),s}function R3t(n,e,t){let r,i,s=0,o=e;const a={ok:!1,pos:0,lines:0,str:""};if(o>=t||(i=n.charCodeAt(o),i!==34&&i!==39&&i!==40))return a;for(o++,i===40&&(i=41);o<t;){if(r=n.charCodeAt(o),r===i)return a.pos=o+1,a.lines=s,a.str=$k(n.slice(e+1,o)),a.ok=!0,a;if(r===40&&i===41)return a;r===10?s++:r===92&&o+1<t&&(o++,n.charCodeAt(o)===10&&s++),o++}return a}const O3t=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:I3t,parseLinkLabel:A3t,parseLinkTitle:R3t},Symbol.toStringTag,{value:"Module"})),mc={};mc.code_inline=function(n,e,t,r,i){const s=n[e];return"<code"+i.renderAttrs(s)+">"+Od(s.content)+"</code>"};mc.code_block=function(n,e,t,r,i){const s=n[e];return"<pre"+i.renderAttrs(s)+"><code>"+Od(n[e].content)+`</code></pre>
`};mc.fence=function(n,e,t,r,i){const s=n[e],o=s.info?$k(s.info).trim():"";let a="",l="";if(o){const u=o.split(/(\s+)/g);a=u[0],l=u.slice(2).join("")}let c;if(t.highlight?c=t.highlight(s.content,a,l)||Od(s.content):c=Od(s.content),c.indexOf("<pre")===0)return c+`
`;if(o){const u=s.attrIndex("class"),d=s.attrs?s.attrs.slice():[];u<0?d.push(["class",t.langPrefix+a]):(d[u]=d[u].slice(),d[u][1]+=" "+t.langPrefix+a);const f={attrs:d};return`<pre><code${i.renderAttrs(f)}>${c}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${c}</code></pre>
`};mc.image=function(n,e,t,r,i){const s=n[e];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,t,r),i.renderToken(n,e,t)};mc.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};mc.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};mc.text=function(n,e){return Od(n[e].content)};mc.html_block=function(n,e){return n[e].content};mc.html_inline=function(n,e){return n[e].content};function Z0(){this.rules=$A({},mc)}Z0.prototype.renderAttrs=function(e){let t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+Od(e.attrs[t][0])+'="'+Od(e.attrs[t][1])+'"';return i};Z0.prototype.renderToken=function(e,t,r){const i=e[t];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&t+1<e.length)){const a=e[t+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};Z0.prototype.renderInline=function(n,e,t){let r="";const i=this.rules;for(let s=0,o=n.length;s<o;s++){const a=n[s].type;typeof i[a]<"u"?r+=i[a](n,s,e,t,this):r+=this.renderToken(n,s,e)}return r};Z0.prototype.renderInlineAsText=function(n,e,t){let r="";for(let i=0,s=n.length;i<s;i++)switch(n[i].type){case"text":r+=n[i].content;break;case"image":r+=this.renderInlineAsText(n[i].children,e,t);break;case"html_inline":case"html_block":r+=n[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Z0.prototype.render=function(n,e,t){let r="";const i=this.rules;for(let s=0,o=n.length;s<o;s++){const a=n[s].type;a==="inline"?r+=this.renderInline(n[s].children,e,t):typeof i[a]<"u"?r+=i[a](n,s,e,t,this):r+=this.renderToken(n,s,e,t)}return r};function gs(){this.__rules__=[],this.__cache__=null}gs.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};gs.prototype.__compile__=function(){const n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};gs.prototype.at=function(n,e,t){const r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};gs.prototype.before=function(n,e,t,r){const i=this.__find__(n),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};gs.prototype.after=function(n,e,t,r){const i=this.__find__(n),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};gs.prototype.push=function(n,e,t){const r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};gs.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};gs.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};gs.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};gs.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function al(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}al.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};al.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};al.prototype.attrSet=function(e,t){const r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};al.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r};al.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};function dbe(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}dbe.prototype.Token=al;const P3t=/\r\n?|\n/g,D3t=/\0/g;function N3t(n){let e;e=n.src.replace(P3t,`
`),e=e.replace(D3t,""),n.src=e}function F3t(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function L3t(n){const e=n.tokens;for(let t=0,r=e.length;t<r;t++){const i=e[t];i.type==="inline"&&n.md.inline.parse(i.content,n.md,n.env,i.children)}}function z3t(n){return/^<a[>\s]/i.test(n)}function B3t(n){return/^<\/a\s*>/i.test(n)}function j3t(n){const e=n.tokens;if(n.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let i=e[t].children,s=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(z3t(a.content)&&s>0&&s--,B3t(a.content)&&s++),!(s>0)&&a.type==="text"&&n.md.linkify.test(a.content)){const l=a.content;let c=n.md.linkify.match(l);const u=[];let d=a.level,f=0;c.length>0&&c[0].index===0&&o>0&&i[o-1].type==="text_special"&&(c=c.slice(1));for(let h=0;h<c.length;h++){const p=c[h].url,m=n.md.normalizeLink(p);if(!n.md.validateLink(m))continue;let g=c[h].text;c[h].schema?c[h].schema==="mailto:"&&!/^mailto:/i.test(g)?g=n.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=n.md.normalizeLinkText(g):g=n.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");const y=c[h].index;if(y>f){const w=new n.Token("text","",0);w.content=l.slice(f,y),w.level=d,u.push(w)}const k=new n.Token("link_open","a",1);k.attrs=[["href",m]],k.level=d++,k.markup="linkify",k.info="auto",u.push(k);const b=new n.Token("text","",0);b.content=g,b.level=d,u.push(b);const S=new n.Token("link_close","a",-1);S.level=--d,S.markup="linkify",S.info="auto",u.push(S),f=c[h].lastIndex}if(f<l.length){const h=new n.Token("text","",0);h.content=l.slice(f),h.level=d,u.push(h)}e[t].children=i=cbe(i,o,u)}}}}const fbe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,V3t=/\((c|tm|r)\)/i,q3t=/\((c|tm|r)\)/ig,K3t={c:"",r:"",tm:""};function U3t(n,e){return K3t[e.toLowerCase()]}function H3t(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&(r.content=r.content.replace(q3t,U3t)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function W3t(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&fbe.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function G3t(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(V3t.test(n.tokens[e].content)&&H3t(n.tokens[e].children),fbe.test(n.tokens[e].content)&&W3t(n.tokens[e].children))}const J3t=/['"]/,cZ=/['"]/g,uZ="";function HS(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function Q3t(n,e){let t;const r=[];for(let i=0;i<n.length;i++){const s=n[i],o=n[i].level;for(t=r.length-1;t>=0&&!(r[t].level<=o);t--);if(r.length=t+1,s.type!=="text")continue;let a=s.content,l=0,c=a.length;e:for(;l<c;){cZ.lastIndex=l;const u=cZ.exec(a);if(!u)break;let d=!0,f=!0;l=u.index+1;const h=u[0]==="'";let p=32;if(u.index-1>=0)p=a.charCodeAt(u.index-1);else for(t=i-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){p=n[t].content.charCodeAt(n[t].content.length-1);break}let m=32;if(l<c)m=a.charCodeAt(l);else for(t=i+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){m=n[t].content.charCodeAt(0);break}const g=Mk(p)||Ck(String.fromCharCode(p)),y=Mk(m)||Ck(String.fromCharCode(m)),k=Ek(p),b=Ek(m);if(b?d=!1:y&&(k||g||(d=!1)),k?f=!1:g&&(b||y||(f=!1)),m===34&&u[0]==='"'&&p>=48&&p<=57&&(f=d=!1),d&&f&&(d=g,f=y),!d&&!f){h&&(s.content=HS(s.content,u.index,uZ));continue}if(f)for(t=r.length-1;t>=0;t--){let S=r[t];if(r[t].level<o)break;if(S.single===h&&r[t].level===o){S=r[t];let w,x;h?(w=e.md.options.quotes[2],x=e.md.options.quotes[3]):(w=e.md.options.quotes[0],x=e.md.options.quotes[1]),s.content=HS(s.content,u.index,x),n[S.token].content=HS(n[S.token].content,S.pos,w),l+=x.length-1,S.token===i&&(l+=w.length-1),a=s.content,c=a.length,r.length=t;continue e}}d?r.push({token:i,pos:u.index,single:h,level:o}):f&&h&&(s.content=HS(s.content,u.index,uZ))}}}function Y3t(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!J3t.test(n.tokens[e].content)||Q3t(n.tokens[e].children,n)}function X3t(n){let e,t;const r=n.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const o=r[s].children,a=o.length;for(e=0;e<a;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=t=0;e<a;e++)o[e].type==="text"&&e+1<a&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==t&&(o[t]=o[e]),t++);e!==t&&(o.length=t)}}const _P=[["normalize",N3t],["block",F3t],["inline",L3t],["linkify",j3t],["replacements",G3t],["smartquotes",Y3t],["text_join",X3t]];function D9(){this.ruler=new gs;for(let n=0;n<_P.length;n++)this.ruler.push(_P[n][0],_P[n][1])}D9.prototype.process=function(n){const e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](n)};D9.prototype.State=dbe;function gc(n,e,t,r){this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,a=0,l=0,c=i.length,u=!1;o<c;o++){const d=i.charCodeAt(o);if(!u)if(Et(d)){a++,d===9?l+=4-l%4:l++;continue}else u=!0;(d===10||o===c-1)&&(d!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),u=!1,a=0,l=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}gc.prototype.push=function(n,e,t){const r=new al(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};gc.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};gc.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};gc.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const r=this.src.charCodeAt(e);if(!Et(r))break}return e};gc.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Et(this.src.charCodeAt(--e)))return e+1;return e};gc.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};gc.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};gc.prototype.getLines=function(e,t,r,i){if(e>=t)return"";const s=new Array(t-e);for(let o=0,a=e;a<t;a++,o++){let l=0;const c=this.bMarks[a];let u=c,d;for(a+1<t||i?d=this.eMarks[a]+1:d=this.eMarks[a];u<d&&l<r;){const f=this.src.charCodeAt(u);if(Et(f))f===9?l+=4-(l+this.bsCount[a])%4:l++;else if(u-c<this.tShift[a])l++;else break;u++}l>r?s[o]=new Array(l-r+1).join(" ")+this.src.slice(u,d):s[o]=this.src.slice(u,d)}return s.join("")};gc.prototype.Token=al;function AP(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function dZ(n){const e=[],t=n.length;let r=0,i=n.charCodeAt(r),s=!1,o=0,a="";for(;r<t;)i===124&&(s?(a+=n.substring(o,r-1),o=r):(e.push(a+n.substring(o,r)),a="",o=r+1)),s=i===92,r++,i=n.charCodeAt(r);return e.push(a+n.substring(o)),e}function Z3t(n,e,t,r){if(e+2>t)return!1;let i=e+1;if(n.sCount[i]<n.blkIndent||n.sCount[i]-n.blkIndent>=4)return!1;let s=n.bMarks[i]+n.tShift[i];if(s>=n.eMarks[i])return!1;const o=n.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=n.eMarks[i])return!1;const a=n.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!Et(a)||o===45&&Et(a))return!1;for(;s<n.eMarks[i];){const b=n.src.charCodeAt(s);if(b!==124&&b!==45&&b!==58&&!Et(b))return!1;s++}let l=AP(n,e+1),c=l.split("|");const u=[];for(let b=0;b<c.length;b++){const S=c[b].trim();if(!S){if(b===0||b===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(S))return!1;S.charCodeAt(S.length-1)===58?u.push(S.charCodeAt(0)===58?"center":"right"):S.charCodeAt(0)===58?u.push("left"):u.push("")}if(l=AP(n,e).trim(),l.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;c=dZ(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const d=c.length;if(d===0||d!==u.length)return!1;if(r)return!0;const f=n.parentType;n.parentType="table";const h=n.md.block.ruler.getRules("blockquote"),p=n.push("table_open","table",1),m=[e,0];p.map=m;const g=n.push("thead_open","thead",1);g.map=[e,e+1];const y=n.push("tr_open","tr",1);y.map=[e,e+1];for(let b=0;b<c.length;b++){const S=n.push("th_open","th",1);u[b]&&(S.attrs=[["style","text-align:"+u[b]]]);const w=n.push("inline","",0);w.content=c[b].trim(),w.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let k;for(i=e+2;i<t&&!(n.sCount[i]<n.blkIndent);i++){let b=!1;for(let w=0,x=h.length;w<x;w++)if(h[w](n,i,t,!0)){b=!0;break}if(b||(l=AP(n,i).trim(),!l)||n.sCount[i]-n.blkIndent>=4)break;if(c=dZ(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),i===e+2){const w=n.push("tbody_open","tbody",1);w.map=k=[e+2,0]}const S=n.push("tr_open","tr",1);S.map=[i,i+1];for(let w=0;w<d;w++){const x=n.push("td_open","td",1);u[w]&&(x.attrs=[["style","text-align:"+u[w]]]);const $=n.push("inline","",0);$.content=c[w]?c[w].trim():"",$.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return k&&(n.push("tbody_close","tbody",-1),k[1]=i),n.push("table_close","table",-1),m[1]=i,n.parentType=f,n.line=i,!0}function eFt(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let r=e+1,i=r;for(;r<t;){if(n.isEmpty(r)){r++;continue}if(n.sCount[r]-n.blkIndent>=4){r++,i=r;continue}break}n.line=i;const s=n.push("code_block","code",0);return s.content=n.getLines(e,i,4+n.blkIndent,!1)+`
`,s.map=[e,n.line],!0}function tFt(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||i+3>s)return!1;const o=n.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=n.skipChars(i,o);let l=i-a;if(l<3)return!1;const c=n.src.slice(a,i),u=n.src.slice(i,s);if(o===96&&u.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let d=e,f=!1;for(;d++,!(d>=t||(i=a=n.bMarks[d]+n.tShift[d],s=n.eMarks[d],i<s&&n.sCount[d]<n.blkIndent));)if(n.src.charCodeAt(i)===o&&!(n.sCount[d]-n.blkIndent>=4)&&(i=n.skipChars(i,o),!(i-a<l)&&(i=n.skipSpaces(i),!(i<s)))){f=!0;break}l=n.sCount[e],n.line=d+(f?1:0);const h=n.push("fence","code",0);return h.info=u,h.content=n.getLines(e+1,d,l,!0),h.markup=c,h.map=[e,n.line],!0}function nFt(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];const o=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],c=[],u=[],d=n.md.block.ruler.getRules("blockquote"),f=n.parentType;n.parentType="blockquote";let h=!1,p;for(p=e;p<t;p++){const b=n.sCount[p]<n.blkIndent;if(i=n.bMarks[p]+n.tShift[p],s=n.eMarks[p],i>=s)break;if(n.src.charCodeAt(i++)===62&&!b){let w=n.sCount[p]+1,x,$;n.src.charCodeAt(i)===32?(i++,w++,$=!1,x=!0):n.src.charCodeAt(i)===9?(x=!0,(n.bsCount[p]+w)%4===3?(i++,w++,$=!1):$=!0):x=!1;let E=w;for(a.push(n.bMarks[p]),n.bMarks[p]=i;i<s;){const C=n.src.charCodeAt(i);if(Et(C))C===9?E+=4-(E+n.bsCount[p]+($?1:0))%4:E++;else break;i++}h=i>=s,l.push(n.bsCount[p]),n.bsCount[p]=n.sCount[p]+1+(x?1:0),c.push(n.sCount[p]),n.sCount[p]=E-w,u.push(n.tShift[p]),n.tShift[p]=i-n.bMarks[p];continue}if(h)break;let S=!1;for(let w=0,x=d.length;w<x;w++)if(d[w](n,p,t,!0)){S=!0;break}if(S){n.lineMax=p,n.blkIndent!==0&&(a.push(n.bMarks[p]),l.push(n.bsCount[p]),u.push(n.tShift[p]),c.push(n.sCount[p]),n.sCount[p]-=n.blkIndent);break}a.push(n.bMarks[p]),l.push(n.bsCount[p]),u.push(n.tShift[p]),c.push(n.sCount[p]),n.sCount[p]=-1}const m=n.blkIndent;n.blkIndent=0;const g=n.push("blockquote_open","blockquote",1);g.markup=">";const y=[e,0];g.map=y,n.md.block.tokenize(n,e,p);const k=n.push("blockquote_close","blockquote",-1);k.markup=">",n.lineMax=o,n.parentType=f,y[1]=n.line;for(let b=0;b<u.length;b++)n.bMarks[b+e]=a[b],n.tShift[b+e]=u[b],n.sCount[b+e]=c[b],n.bsCount[b+e]=l[b];return n.blkIndent=m,!0}function rFt(n,e,t,r){const i=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let s=n.bMarks[e]+n.tShift[e];const o=n.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<i;){const c=n.src.charCodeAt(s++);if(c!==o&&!Et(c))return!1;c===o&&a++}if(a<3)return!1;if(r)return!0;n.line=e+1;const l=n.push("hr","hr",0);return l.map=[e,n.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function fZ(n,e){const t=n.eMarks[e];let r=n.bMarks[e]+n.tShift[e];const i=n.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<t){const s=n.src.charCodeAt(r);if(!Et(s))return-1}return r}function hZ(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];let i=t;if(i+1>=r)return-1;let s=n.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=n.src.charCodeAt(i++),s>=48&&s<=57){if(i-t>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=n.src.charCodeAt(i),!Et(s))?-1:i}function iFt(n,e){const t=n.level+2;for(let r=e+2,i=n.tokens.length-2;r<i;r++)n.tokens[r].level===t&&n.tokens[r].type==="paragraph_open"&&(n.tokens[r+2].hidden=!0,n.tokens[r].hidden=!0,r+=2)}function sFt(n,e,t,r){let i,s,o,a,l=e,c=!0;if(n.sCount[l]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[l]-n.listIndent>=4&&n.sCount[l]<n.blkIndent)return!1;let u=!1;r&&n.parentType==="paragraph"&&n.sCount[l]>=n.blkIndent&&(u=!0);let d,f,h;if((h=hZ(n,l))>=0){if(d=!0,o=n.bMarks[l]+n.tShift[l],f=Number(n.src.slice(o,h-1)),u&&f!==1)return!1}else if((h=fZ(n,l))>=0)d=!1;else return!1;if(u&&n.skipSpaces(h)>=n.eMarks[l])return!1;if(r)return!0;const p=n.src.charCodeAt(h-1),m=n.tokens.length;d?(a=n.push("ordered_list_open","ol",1),f!==1&&(a.attrs=[["start",f]])):a=n.push("bullet_list_open","ul",1);const g=[l,0];a.map=g,a.markup=String.fromCharCode(p);let y=!1;const k=n.md.block.ruler.getRules("list"),b=n.parentType;for(n.parentType="list";l<t;){s=h,i=n.eMarks[l];const S=n.sCount[l]+h-(n.bMarks[l]+n.tShift[l]);let w=S;for(;s<i;){const R=n.src.charCodeAt(s);if(R===9)w+=4-(w+n.bsCount[l])%4;else if(R===32)w++;else break;s++}const x=s;let $;x>=i?$=1:$=w-S,$>4&&($=1);const E=S+$;a=n.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const C=[l,0];a.map=C,d&&(a.info=n.src.slice(o,h-1));const M=n.tight,P=n.tShift[l],I=n.sCount[l],N=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=E,n.tight=!0,n.tShift[l]=x-n.bMarks[l],n.sCount[l]=w,x>=i&&n.isEmpty(l+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,l,t,!0),(!n.tight||y)&&(c=!1),y=n.line-l>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=N,n.tShift[l]=P,n.sCount[l]=I,n.tight=M,a=n.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=n.line,C[1]=l,l>=t||n.sCount[l]<n.blkIndent||n.sCount[l]-n.blkIndent>=4)break;let T=!1;for(let R=0,A=k.length;R<A;R++)if(k[R](n,l,t,!0)){T=!0;break}if(T)break;if(d){if(h=hZ(n,l),h<0)break;o=n.bMarks[l]+n.tShift[l]}else if(h=fZ(n,l),h<0)break;if(p!==n.src.charCodeAt(h-1))break}return d?a=n.push("ordered_list_close","ol",-1):a=n.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),g[1]=l,n.line=l,n.parentType=b,c&&iFt(n,m),!0}function oFt(n,e,t,r){let i=0,s=n.bMarks[e]+n.tShift[e],o=n.eMarks[e],a=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(s)!==91)return!1;for(;++s<o;)if(n.src.charCodeAt(s)===93&&n.src.charCodeAt(s-1)!==92){if(s+1===o||n.src.charCodeAt(s+1)!==58)return!1;break}const l=n.lineMax,c=n.md.block.ruler.getRules("reference"),u=n.parentType;for(n.parentType="reference";a<l&&!n.isEmpty(a);a++){if(n.sCount[a]-n.blkIndent>3||n.sCount[a]<0)continue;let w=!1;for(let x=0,$=c.length;x<$;x++)if(c[x](n,a,l,!0)){w=!0;break}if(w)break}const d=n.getLines(e,a,n.blkIndent,!1).trim();o=d.length;let f=-1;for(s=1;s<o;s++){const w=d.charCodeAt(s);if(w===91)return!1;if(w===93){f=s;break}else w===10?i++:w===92&&(s++,s<o&&d.charCodeAt(s)===10&&i++)}if(f<0||d.charCodeAt(f+1)!==58)return!1;for(s=f+2;s<o;s++){const w=d.charCodeAt(s);if(w===10)i++;else if(!Et(w))break}const h=n.md.helpers.parseLinkDestination(d,s,o);if(!h.ok)return!1;const p=n.md.normalizeLink(h.str);if(!n.md.validateLink(p))return!1;s=h.pos,i+=h.lines;const m=s,g=i,y=s;for(;s<o;s++){const w=d.charCodeAt(s);if(w===10)i++;else if(!Et(w))break}const k=n.md.helpers.parseLinkTitle(d,s,o);let b;for(s<o&&y!==s&&k.ok?(b=k.str,s=k.pos,i+=k.lines):(b="",s=m,i=g);s<o;){const w=d.charCodeAt(s);if(!Et(w))break;s++}if(s<o&&d.charCodeAt(s)!==10&&b)for(b="",s=m,i=g;s<o;){const w=d.charCodeAt(s);if(!Et(w))break;s++}if(s<o&&d.charCodeAt(s)!==10)return!1;const S=EA(d.slice(1,f));return S?(r||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[S]>"u"&&(n.env.references[S]={title:b,href:p}),n.parentType=u,n.line=e+i+1),!0):!1}const aFt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],lFt="[a-zA-Z_:][a-zA-Z0-9:._-]*",cFt="[^\"'=<>`\\x00-\\x20]+",uFt="'[^']*'",dFt='"[^"]*"',fFt="(?:"+cFt+"|"+uFt+"|"+dFt+")",hFt="(?:\\s+"+lFt+"(?:\\s*=\\s*"+fFt+")?)",hbe="<[A-Za-z][A-Za-z0-9\\-]*"+hFt+"*\\s*\\/?>",pbe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",pFt="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",mFt="<[?][\\s\\S]*?[?]>",gFt="<![A-Z]+\\s+[^>]*>",yFt="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",vFt=new RegExp("^(?:"+hbe+"|"+pbe+"|"+pFt+"|"+mFt+"|"+gFt+"|"+yFt+")"),bFt=new RegExp("^(?:"+hbe+"|"+pbe+")"),Yp=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+aFt.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(bFt.source+"\\s*$"),/^$/,!1]];function kFt(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(i)!==60)return!1;let o=n.src.slice(i,s),a=0;for(;a<Yp.length&&!Yp[a][0].test(o);a++);if(a===Yp.length)return!1;if(r)return Yp[a][2];let l=e+1;if(!Yp[a][1].test(o)){for(;l<t&&!(n.sCount[l]<n.blkIndent);l++)if(i=n.bMarks[l]+n.tShift[l],s=n.eMarks[l],o=n.src.slice(i,s),Yp[a][1].test(o)){o.length!==0&&l++;break}}n.line=l;const c=n.push("html_block","",0);return c.map=[e,l],c.content=n.getLines(e,l,n.blkIndent,!0),!0}function xFt(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let o=n.src.charCodeAt(i);if(o!==35||i>=s)return!1;let a=1;for(o=n.src.charCodeAt(++i);o===35&&i<s&&a<=6;)a++,o=n.src.charCodeAt(++i);if(a>6||i<s&&!Et(o))return!1;if(r)return!0;s=n.skipSpacesBack(s,i);const l=n.skipCharsBack(s,35,i);l>i&&Et(n.src.charCodeAt(l-1))&&(s=l),n.line=e+1;const c=n.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[e,n.line];const u=n.push("inline","",0);u.content=n.src.slice(i,s).trim(),u.map=[e,n.line],u.children=[];const d=n.push("heading_close","h"+String(a),-1);return d.markup="########".slice(0,a),!0}function SFt(n,e,t){const r=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;const i=n.parentType;n.parentType="paragraph";let s=0,o,a=e+1;for(;a<t&&!n.isEmpty(a);a++){if(n.sCount[a]-n.blkIndent>3)continue;if(n.sCount[a]>=n.blkIndent){let h=n.bMarks[a]+n.tShift[a];const p=n.eMarks[a];if(h<p&&(o=n.src.charCodeAt(h),(o===45||o===61)&&(h=n.skipChars(h,o),h=n.skipSpaces(h),h>=p))){s=o===61?1:2;break}}if(n.sCount[a]<0)continue;let f=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](n,a,t,!0)){f=!0;break}if(f)break}if(!s)return!1;const l=n.getLines(e,a,n.blkIndent,!1).trim();n.line=a+1;const c=n.push("heading_open","h"+String(s),1);c.markup=String.fromCharCode(o),c.map=[e,n.line];const u=n.push("inline","",0);u.content=l,u.map=[e,n.line-1],u.children=[];const d=n.push("heading_close","h"+String(s),-1);return d.markup=String.fromCharCode(o),n.parentType=i,!0}function wFt(n,e,t){const r=n.md.block.ruler.getRules("paragraph"),i=n.parentType;let s=e+1;for(n.parentType="paragraph";s<t&&!n.isEmpty(s);s++){if(n.sCount[s]-n.blkIndent>3||n.sCount[s]<0)continue;let c=!1;for(let u=0,d=r.length;u<d;u++)if(r[u](n,s,t,!0)){c=!0;break}if(c)break}const o=n.getLines(e,s,n.blkIndent,!1).trim();n.line=s;const a=n.push("paragraph_open","p",1);a.map=[e,n.line];const l=n.push("inline","",0);return l.content=o,l.map=[e,n.line],l.children=[],n.push("paragraph_close","p",-1),n.parentType=i,!0}const WS=[["table",Z3t,["paragraph","reference"]],["code",eFt],["fence",tFt,["paragraph","reference","blockquote","list"]],["blockquote",nFt,["paragraph","reference","blockquote","list"]],["hr",rFt,["paragraph","reference","blockquote","list"]],["list",sFt,["paragraph","reference","blockquote"]],["reference",oFt],["html_block",kFt,["paragraph","reference","blockquote"]],["heading",xFt,["paragraph","reference","blockquote"]],["lheading",SFt],["paragraph",wFt]];function CA(){this.ruler=new gs;for(let n=0;n<WS.length;n++)this.ruler.push(WS[n][0],WS[n][1],{alt:(WS[n][2]||[]).slice()})}CA.prototype.tokenize=function(n,e,t){const r=this.ruler.getRules(""),i=r.length,s=n.md.options.maxNesting;let o=e,a=!1;for(;o<t&&(n.line=o=n.skipEmptyLines(o),!(o>=t||n.sCount[o]<n.blkIndent));){if(n.level>=s){n.line=t;break}const l=n.line;let c=!1;for(let u=0;u<i;u++)if(c=r[u](n,o,t,!1),c){if(l>=n.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");n.tight=!a,n.isEmpty(n.line-1)&&(a=!0),o=n.line,o<t&&n.isEmpty(o)&&(a=!0,o++,n.line=o)}};CA.prototype.parse=function(n,e,t,r){if(!n)return;const i=new this.State(n,e,t,r);this.tokenize(i,i.line,i.lineMax)};CA.prototype.State=gc;function S1(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}S1.prototype.pushPending=function(){const n=new al("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};S1.prototype.push=function(n,e,t){this.pending&&this.pushPending();const r=new al(n,e,t);let i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};S1.prototype.scanDelims=function(n,e){let t,r,i=!0,s=!0;const o=this.posMax,a=this.src.charCodeAt(n),l=n>0?this.src.charCodeAt(n-1):32;let c=n;for(;c<o&&this.src.charCodeAt(c)===a;)c++;const u=c-n,d=c<o?this.src.charCodeAt(c):32,f=Mk(l)||Ck(String.fromCharCode(l)),h=Mk(d)||Ck(String.fromCharCode(d)),p=Ek(l),m=Ek(d);return m?i=!1:h&&(p||f||(i=!1)),p?s=!1:f&&(m||h||(s=!1)),e?(t=i,r=s):(t=i&&(!s||f),r=s&&(!i||h)),{can_open:t,can_close:r,length:u}};S1.prototype.Token=al;function $Ft(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function EFt(n,e){let t=n.pos;for(;t<n.posMax&&!$Ft(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}const CFt=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function MFt(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;const t=n.pos,r=n.posMax;if(t+3>r||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;const i=n.pending.match(CFt);if(!i)return!1;const s=i[1],o=n.md.linkify.matchAtStart(n.src.slice(t-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const l=n.md.normalizeLink(a);if(!n.md.validateLink(l))return!1;if(!e){n.pending=n.pending.slice(0,-s.length);const c=n.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(a);const d=n.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return n.pos+=a.length-s.length,!0}function TFt(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;const r=n.pending.length-1,i=n.posMax;if(!e)if(r>=0&&n.pending.charCodeAt(r)===32)if(r>=1&&n.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&n.pending.charCodeAt(s-1)===32;)s--;n.pending=n.pending.slice(0,s),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<i&&Et(n.src.charCodeAt(t));)t++;return n.pos=t,!0}const N9=[];for(let n=0;n<256;n++)N9.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){N9[n.charCodeAt(0)]=1});function _Ft(n,e){let t=n.pos;const r=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let i=n.src.charCodeAt(t);if(i===10){for(e||n.push("hardbreak","br",0),t++;t<r&&(i=n.src.charCodeAt(t),!!Et(i));)t++;return n.pos=t,!0}let s=n.src[t];if(i>=55296&&i<=56319&&t+1<r){const a=n.src.charCodeAt(t+1);a>=56320&&a<=57343&&(s+=n.src[t+1],t++)}const o="\\"+s;if(!e){const a=n.push("text_special","",0);i<256&&N9[i]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return n.pos=t+1,!0}function AFt(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;const i=t;t++;const s=n.posMax;for(;t<s&&n.src.charCodeAt(t)===96;)t++;const o=n.src.slice(i,t),a=o.length;if(n.backticksScanned&&(n.backticks[a]||0)<=i)return e||(n.pending+=o),n.pos+=a,!0;let l=t,c;for(;(c=n.src.indexOf("`",l))!==-1;){for(l=c+1;l<s&&n.src.charCodeAt(l)===96;)l++;const u=l-c;if(u===a){if(!e){const d=n.push("code_inline","code",0);d.markup=o,d.content=n.src.slice(t,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=l,!0}n.backticks[u]=c}return n.backticksScanned=!0,e||(n.pending+=o),n.pos+=a,!0}function IFt(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==126)return!1;const i=n.scanDelims(n.pos,!0);let s=i.length;const o=String.fromCharCode(r);if(s<2)return!1;let a;s%2&&(a=n.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=n.push("text","",0),a.content=o+o,n.delimiters.push({marker:r,length:0,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function pZ(n,e){let t;const r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s];if(o.marker!==126||o.end===-1)continue;const a=e[o.end];t=n.tokens[o.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[a.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[a.token-1].type==="text"&&n.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<n.tokens.length&&n.tokens[o].type==="s_close";)o++;o--,s!==o&&(t=n.tokens[o],n.tokens[o]=n.tokens[s],n.tokens[s]=t)}}function RFt(n){const e=n.tokens_meta,t=n.tokens_meta.length;pZ(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&pZ(n,e[r].delimiters)}const mbe={tokenize:IFt,postProcess:RFt};function OFt(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;const i=n.scanDelims(n.pos,r===42);for(let s=0;s<i.length;s++){const o=n.push("text","",0);o.content=String.fromCharCode(r),n.delimiters.push({marker:r,length:i.length,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function mZ(n,e){const t=e.length;for(let r=t-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=e[i.end],o=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===s.token+1,a=String.fromCharCode(i.marker),l=n.tokens[i.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const c=n.tokens[s.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?a+a:a,c.content="",o&&(n.tokens[e[r-1].token].content="",n.tokens[e[i.end+1].token].content="",r--)}}function PFt(n){const e=n.tokens_meta,t=n.tokens_meta.length;mZ(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&mZ(n,e[r].delimiters)}const gbe={tokenize:OFt,postProcess:PFt};function DFt(n,e){let t,r,i,s,o="",a="",l=n.pos,c=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const u=n.pos,d=n.posMax,f=n.pos+1,h=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(h<0)return!1;let p=h+1;if(p<d&&n.src.charCodeAt(p)===40){for(c=!1,p++;p<d&&(t=n.src.charCodeAt(p),!(!Et(t)&&t!==10));p++);if(p>=d)return!1;if(l=p,i=n.md.helpers.parseLinkDestination(n.src,p,n.posMax),i.ok){for(o=n.md.normalizeLink(i.str),n.md.validateLink(o)?p=i.pos:o="",l=p;p<d&&(t=n.src.charCodeAt(p),!(!Et(t)&&t!==10));p++);if(i=n.md.helpers.parseLinkTitle(n.src,p,n.posMax),p<d&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<d&&(t=n.src.charCodeAt(p),!(!Et(t)&&t!==10));p++);}(p>=d||n.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof n.env.references>"u")return!1;if(p<d&&n.src.charCodeAt(p)===91?(l=p+1,p=n.md.helpers.parseLinkLabel(n,p),p>=0?r=n.src.slice(l,p++):p=h+1):p=h+1,r||(r=n.src.slice(f,h)),s=n.env.references[EA(r)],!s)return n.pos=u,!1;o=s.href,a=s.title}if(!e){n.pos=f,n.posMax=h;const m=n.push("link_open","a",1),g=[["href",o]];m.attrs=g,a&&g.push(["title",a]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=p,n.posMax=d,!0}function NFt(n,e){let t,r,i,s,o,a,l,c,u="";const d=n.pos,f=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const h=n.pos+2,p=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(p<0)return!1;if(s=p+1,s<f&&n.src.charCodeAt(s)===40){for(s++;s<f&&(t=n.src.charCodeAt(s),!(!Et(t)&&t!==10));s++);if(s>=f)return!1;for(c=s,a=n.md.helpers.parseLinkDestination(n.src,s,n.posMax),a.ok&&(u=n.md.normalizeLink(a.str),n.md.validateLink(u)?s=a.pos:u=""),c=s;s<f&&(t=n.src.charCodeAt(s),!(!Et(t)&&t!==10));s++);if(a=n.md.helpers.parseLinkTitle(n.src,s,n.posMax),s<f&&c!==s&&a.ok)for(l=a.str,s=a.pos;s<f&&(t=n.src.charCodeAt(s),!(!Et(t)&&t!==10));s++);else l="";if(s>=f||n.src.charCodeAt(s)!==41)return n.pos=d,!1;s++}else{if(typeof n.env.references>"u")return!1;if(s<f&&n.src.charCodeAt(s)===91?(c=s+1,s=n.md.helpers.parseLinkLabel(n,s),s>=0?i=n.src.slice(c,s++):s=p+1):s=p+1,i||(i=n.src.slice(h,p)),o=n.env.references[EA(i)],!o)return n.pos=d,!1;u=o.href,l=o.title}if(!e){r=n.src.slice(h,p);const m=[];n.md.inline.parse(r,n.md,n.env,m);const g=n.push("image","img",0),y=[["src",u],["alt",""]];g.attrs=y,g.children=m,g.content=r,l&&y.push(["title",l])}return n.pos=s,n.posMax=f,!0}const FFt=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,LFt=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function zFt(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;const r=n.pos,i=n.posMax;for(;;){if(++t>=i)return!1;const o=n.src.charCodeAt(t);if(o===60)return!1;if(o===62)break}const s=n.src.slice(r+1,t);if(LFt.test(s)){const o=n.md.normalizeLink(s);if(!n.md.validateLink(o))return!1;if(!e){const a=n.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=n.push("text","",0);l.content=n.md.normalizeLinkText(s);const c=n.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return n.pos+=s.length+2,!0}if(FFt.test(s)){const o=n.md.normalizeLink("mailto:"+s);if(!n.md.validateLink(o))return!1;if(!e){const a=n.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=n.push("text","",0);l.content=n.md.normalizeLinkText(s);const c=n.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return n.pos+=s.length+2,!0}return!1}function BFt(n){return/^<a[>\s]/i.test(n)}function jFt(n){return/^<\/a\s*>/i.test(n)}function VFt(n){const e=n|32;return e>=97&&e<=122}function qFt(n,e){if(!n.md.options.html)return!1;const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==60||r+2>=t)return!1;const i=n.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!VFt(i))return!1;const s=n.src.slice(r).match(vFt);if(!s)return!1;if(!e){const o=n.push("html_inline","",0);o.content=s[0],BFt(o.content)&&n.linkLevel++,jFt(o.content)&&n.linkLevel--}return n.pos+=s[0].length,!0}const KFt=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,UFt=/^&([a-z][a-z0-9]{1,31});/i;function HFt(n,e){const t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=r)return!1;if(n.src.charCodeAt(t+1)===35){const s=n.src.slice(t).match(KFt);if(s){if(!e){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=n.push("text_special","",0);a.content=P9(o)?_T(o):_T(65533),a.markup=s[0],a.info="entity"}return n.pos+=s[0].length,!0}}else{const s=n.src.slice(t).match(UFt);if(s){const o=lbe(s[0]);if(o!==s[0]){if(!e){const a=n.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return n.pos+=s[0].length,!0}}}return!1}function gZ(n){const e={},t=n.length;if(!t)return;let r=0,i=-2;const s=[];for(let o=0;o<t;o++){const a=n[o];if(s.push(0),(n[r].marker!==a.marker||i!==a.token-1)&&(r=o),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let c=r-s[r]-1,u=c;for(;c>l;c-=s[c]+1){const d=n[c];if(d.marker===a.marker&&d.open&&d.end<0){let f=!1;if((d.close||a.open)&&(d.length+a.length)%3===0&&(d.length%3!==0||a.length%3!==0)&&(f=!0),!f){const h=c>0&&!n[c-1].open?s[c-1]+1:0;s[o]=o-c+h,s[c]=h,a.open=!1,d.end=o,d.close=!1,u=-1,i=-2;break}}}u!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=u)}}function WFt(n){const e=n.tokens_meta,t=n.tokens_meta.length;gZ(n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&gZ(e[r].delimiters)}function GFt(n){let e,t,r=0;const i=n.tokens,s=n.tokens.length;for(e=t=0;e<s;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<s&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}const IP=[["text",EFt],["linkify",MFt],["newline",TFt],["escape",_Ft],["backticks",AFt],["strikethrough",mbe.tokenize],["emphasis",gbe.tokenize],["link",DFt],["image",NFt],["autolink",zFt],["html_inline",qFt],["entity",HFt]],RP=[["balance_pairs",WFt],["strikethrough",mbe.postProcess],["emphasis",gbe.postProcess],["fragments_join",GFt]];function w1(){this.ruler=new gs;for(let n=0;n<IP.length;n++)this.ruler.push(IP[n][0],IP[n][1]);this.ruler2=new gs;for(let n=0;n<RP.length;n++)this.ruler2.push(RP[n][0],RP[n][1])}w1.prototype.skipToken=function(n){const e=n.pos,t=this.ruler.getRules(""),r=t.length,i=n.md.options.maxNesting,s=n.cache;if(typeof s[e]<"u"){n.pos=s[e];return}let o=!1;if(n.level<i){for(let a=0;a<r;a++)if(n.level++,o=t[a](n,!0),n.level--,o){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;o||n.pos++,s[e]=n.pos};w1.prototype.tokenize=function(n){const e=this.ruler.getRules(""),t=e.length,r=n.posMax,i=n.md.options.maxNesting;for(;n.pos<r;){const s=n.pos;let o=!1;if(n.level<i){for(let a=0;a<t;a++)if(o=e[a](n,!1),o){if(s>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(n.pos>=r)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};w1.prototype.parse=function(n,e,t,r){const i=new this.State(n,e,t,r);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](i)};w1.prototype.State=S1;function JFt(n){const e={};n=n||{},e.src_Any=ibe.source,e.src_Cc=sbe.source,e.src_Z=obe.source,e.src_P=R9.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function hL(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function MA(n){return Object.prototype.toString.call(n)}function QFt(n){return MA(n)==="[object String]"}function YFt(n){return MA(n)==="[object Object]"}function XFt(n){return MA(n)==="[object RegExp]"}function yZ(n){return MA(n)==="[object Function]"}function ZFt(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const ybe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function e5t(n){return Object.keys(n||{}).reduce(function(e,t){return e||ybe.hasOwnProperty(t)},!1)}const t5t={"http:":{validate:function(n,e,t){const r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},n5t="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",r5t="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function i5t(n){n.__index__=-1,n.__text_cache__=""}function s5t(n){return function(e,t){const r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function vZ(){return function(n,e){e.normalize(n)}}function AT(n){const e=n.re=JFt(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(n5t),t.push(e.src_xn),e.src_tlds=t.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];n.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(n.__schemas__).forEach(function(a){const l=n.__schemas__[a];if(l===null)return;const c={validate:null,link:null};if(n.__compiled__[a]=c,YFt(l)){XFt(l.validate)?c.validate=s5t(l.validate):yZ(l.validate)?c.validate=l.validate:s(a,l),yZ(l.normalize)?c.normalize=l.normalize:l.normalize?s(a,l):c.normalize=vZ();return}if(QFt(l)){i.push(a);return}s(a,l)}),i.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:vZ()};const o=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(ZFt).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),i5t(n)}function o5t(n,e){const t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function pL(n,e){const t=new o5t(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function io(n,e){if(!(this instanceof io))return new io(n,e);e||e5t(n)&&(e=n,n={}),this.__opts__=hL({},ybe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=hL({},t5t,n),this.__compiled__={},this.__tlds__=r5t,this.__tlds_replaced__=!1,this.re={},AT(this)}io.prototype.add=function(e,t){return this.__schemas__[e]=t,AT(this),this};io.prototype.set=function(e){return this.__opts__=hL(this.__opts__,e),this};io.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,s,o,a,l,c,u;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(t=l.exec(e))!==null;)if(s=this.testSchemaAt(e,t[2],l.lastIndex),s){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};io.prototype.pretest=function(e){return this.re.pretest.test(e)};io.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};io.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(pL(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push(pL(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};io.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,pL(this,0)):null};io.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),AT(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,AT(this),this)};io.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};io.prototype.onCompile=function(){};const Ng=2147483647,Gl=36,F9=1,Tk=26,a5t=38,l5t=700,vbe=72,bbe=128,kbe="-",c5t=/^xn--/,u5t=/[^\0-\x7F]/,d5t=/[\x2E\u3002\uFF0E\uFF61]/g,f5t={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},OP=Gl-F9,Jl=Math.floor,PP=String.fromCharCode;function Fu(n){throw new RangeError(f5t[n])}function h5t(n,e){const t=[];let r=n.length;for(;r--;)t[r]=e(n[r]);return t}function xbe(n,e){const t=n.split("@");let r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(d5t,".");const i=n.split("."),s=h5t(i,e).join(".");return r+s}function Sbe(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const s=n.charCodeAt(t++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const p5t=n=>String.fromCodePoint(...n),m5t=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:Gl},bZ=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},wbe=function(n,e,t){let r=0;for(n=t?Jl(n/l5t):n>>1,n+=Jl(n/e);n>OP*Tk>>1;r+=Gl)n=Jl(n/OP);return Jl(r+(OP+1)*n/(n+a5t))},$be=function(n){const e=[],t=n.length;let r=0,i=bbe,s=vbe,o=n.lastIndexOf(kbe);o<0&&(o=0);for(let a=0;a<o;++a)n.charCodeAt(a)>=128&&Fu("not-basic"),e.push(n.charCodeAt(a));for(let a=o>0?o+1:0;a<t;){const l=r;for(let u=1,d=Gl;;d+=Gl){a>=t&&Fu("invalid-input");const f=m5t(n.charCodeAt(a++));f>=Gl&&Fu("invalid-input"),f>Jl((Ng-r)/u)&&Fu("overflow"),r+=f*u;const h=d<=s?F9:d>=s+Tk?Tk:d-s;if(f<h)break;const p=Gl-h;u>Jl(Ng/p)&&Fu("overflow"),u*=p}const c=e.length+1;s=wbe(r-l,c,l==0),Jl(r/c)>Ng-i&&Fu("overflow"),i+=Jl(r/c),r%=c,e.splice(r++,0,i)}return String.fromCodePoint(...e)},Ebe=function(n){const e=[];n=Sbe(n);const t=n.length;let r=bbe,i=0,s=vbe;for(const l of n)l<128&&e.push(PP(l));const o=e.length;let a=o;for(o&&e.push(kbe);a<t;){let l=Ng;for(const u of n)u>=r&&u<l&&(l=u);const c=a+1;l-r>Jl((Ng-i)/c)&&Fu("overflow"),i+=(l-r)*c,r=l;for(const u of n)if(u<r&&++i>Ng&&Fu("overflow"),u===r){let d=i;for(let f=Gl;;f+=Gl){const h=f<=s?F9:f>=s+Tk?Tk:f-s;if(d<h)break;const p=d-h,m=Gl-h;e.push(PP(bZ(h+p%m,0))),d=Jl(p/m)}e.push(PP(bZ(d,0))),s=wbe(i,c,a===o),i=0,++a}++i,++r}return e.join("")},g5t=function(n){return xbe(n,function(e){return c5t.test(e)?$be(e.slice(4).toLowerCase()):e})},y5t=function(n){return xbe(n,function(e){return u5t.test(e)?"xn--"+Ebe(e):e})},Cbe={version:"2.3.1",ucs2:{decode:Sbe,encode:p5t},decode:$be,encode:Ebe,toASCII:y5t,toUnicode:g5t},v5t={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},b5t={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},k5t={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},x5t={default:v5t,zero:b5t,commonmark:k5t},S5t=/^(vbscript|javascript|file|data):/,w5t=/^data:image\/(gif|png|jpeg|webp);/;function $5t(n){const e=n.trim().toLowerCase();return S5t.test(e)?w5t.test(e):!0}const Mbe=["http:","https:","mailto:"];function E5t(n){const e=I9(n,!0);if(e.hostname&&(!e.protocol||Mbe.indexOf(e.protocol)>=0))try{e.hostname=Cbe.toASCII(e.hostname)}catch{}return x1(A9(e))}function C5t(n){const e=I9(n,!0);if(e.hostname&&(!e.protocol||Mbe.indexOf(e.protocol)>=0))try{e.hostname=Cbe.toUnicode(e.hostname)}catch{}return u0(A9(e),u0.defaultChars+"%")}function Ko(n,e){if(!(this instanceof Ko))return new Ko(n,e);e||O9(n)||(e=n||{},n="default"),this.inline=new w1,this.block=new CA,this.core=new D9,this.renderer=new Z0,this.linkify=new io,this.validateLink=$5t,this.normalizeLink=E5t,this.normalizeLinkText=C5t,this.utils=_3t,this.helpers=$A({},O3t),this.options={},this.configure(n),e&&this.set(e)}Ko.prototype.set=function(n){return $A(this.options,n),this};Ko.prototype.configure=function(n){const e=this;if(O9(n)){const t=n;if(n=x5t[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};Ko.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Ko.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Ko.prototype.use=function(n){const e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};Ko.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");const t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};Ko.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};Ko.prototype.parseInline=function(n,e){const t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};Ko.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};const M5t=new NNt({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(n){return["h"+n.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:n=>({params:n.getAttribute("data-params")||""})}],toDOM(n){return["pre",n.attrs.params?{"data-params":n.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(n){return{order:n.hasAttribute("start")?+n.getAttribute("start"):1,tight:n.hasAttribute("data-tight")}}}],toDOM(n){return["ol",{start:n.attrs.order==1?null:n.attrs.order,"data-tight":n.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:n=>({tight:n.hasAttribute("data-tight")})}],toDOM(n){return["ul",{"data-tight":n.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(n){return{src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt")}}}],toDOM(n){return["img",n.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:n=>n.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name=="strong"},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(n){return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM(n){return["a",n.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function T5t(n,e){if(n.isText&&e.isText&&dt.sameSet(n.marks,e.marks))return n.withText(n.text+e.text)}class _5t{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:dt.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let t=this.top(),r=t.content,i=r[r.length-1],s=this.schema.text(e,t.marks),o;i&&(o=T5t(i,s))?r[r.length-1]=o:r.push(s)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let r=e[t],i=this.tokenHandlers[r.type];if(!i)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");i(this,r,e,t)}}addNode(e,t,r){let i=this.top(),s=e.createAndFill(t,r,i?i.marks:[]);return s?(this.push(s),s):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:dt.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function Uy(n,e,t,r){return n.getAttrs?n.getAttrs(e,t,r):n.attrs instanceof Function?n.attrs(e):n.attrs}function DP(n,e){return n.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function kZ(n){return n[n.length-1]==`
`?n.slice(0,n.length-1):n}function NP(){}function A5t(n,e){let t=Object.create(null);for(let r in e){let i=e[r];if(i.block){let s=n.nodeType(i.block);DP(i,r)?t[r]=(o,a,l,c)=>{o.openNode(s,Uy(i,a,l,c)),o.addText(kZ(a.content)),o.closeNode()}:(t[r+"_open"]=(o,a,l,c)=>o.openNode(s,Uy(i,a,l,c)),t[r+"_close"]=o=>o.closeNode())}else if(i.node){let s=n.nodeType(i.node);t[r]=(o,a,l,c)=>o.addNode(s,Uy(i,a,l,c))}else if(i.mark){let s=n.marks[i.mark];DP(i,r)?t[r]=(o,a,l,c)=>{o.openMark(s.create(Uy(i,a,l,c))),o.addText(kZ(a.content)),o.closeMark(s)}:(t[r+"_open"]=(o,a,l,c)=>o.openMark(s.create(Uy(i,a,l,c))),t[r+"_close"]=o=>o.closeMark(s))}else if(i.ignore)DP(i,r)?t[r]=NP:(t[r+"_open"]=NP,t[r+"_close"]=NP);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return t.text=(r,i)=>r.addText(i.content),t.inline=(r,i)=>r.parseTokens(i.children),t.softbreak=t.softbreak||(r=>r.addText(" ")),t}let I5t=class{constructor(e,t,r){this.schema=e,this.tokenizer=t,this.tokens=r,this.tokenHandlers=A5t(e,r)}parse(e,t={}){let r=new _5t(this.schema,this.tokenHandlers),i;r.parseTokens(this.tokenizer.parse(e,t));do i=r.closeNode();while(r.stack.length);return i||this.schema.topNodeType.createAndFill()}};function xZ(n,e){for(;++e<n.length;)if(n[e].type!="list_item_open")return n[e].hidden;return!1}new I5t(M5t,Ko("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(n,e,t)=>({tight:xZ(e,t)})},ordered_list:{block:"ordered_list",getAttrs:(n,e,t)=>({order:+n.attrGet("start")||1,tight:xZ(e,t)})},heading:{block:"heading",getAttrs:n=>({level:+n.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:n=>({params:n.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:n=>({src:n.attrGet("src"),title:n.attrGet("title")||null,alt:n.children[0]&&n.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:n=>({href:n.attrGet("href"),title:n.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});let R5t=class{constructor(e,t,r={}){this.nodes=e,this.marks=t,this.options=r}serialize(e,t={}){t=Object.assign({},this.options,t);let r=new Tbe(this.nodes,this.marks,t);return r.renderContent(e),r.out}};const yc=new R5t({blockquote(n,e){n.wrapBlock("> ",null,e,()=>n.renderContent(e))},code_block(n,e){const t=e.textContent.match(/`{3,}/gm),r=t?t.sort().slice(-1)[0]+"`":"```";n.write(r+(e.attrs.params||"")+`
`),n.text(e.textContent,!1),n.write(`
`),n.write(r),n.closeBlock(e)},heading(n,e){n.write(n.repeat("#",e.attrs.level)+" "),n.renderInline(e,!1),n.closeBlock(e)},horizontal_rule(n,e){n.write(e.attrs.markup||"---"),n.closeBlock(e)},bullet_list(n,e){n.renderList(e,"  ",()=>(e.attrs.bullet||"*")+" ")},ordered_list(n,e){let t=e.attrs.order||1,r=String(t+e.childCount-1).length,i=n.repeat(" ",r+2);n.renderList(e,i,s=>{let o=String(t+s);return n.repeat(" ",r-o.length)+o+". "})},list_item(n,e){n.renderContent(e)},paragraph(n,e){n.renderInline(e),n.closeBlock(e)},image(n,e){n.write("!["+n.esc(e.attrs.alt||"")+"]("+e.attrs.src.replace(/[\(\)]/g,"\\$&")+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(n,e,t,r){for(let i=r+1;i<t.childCount;i++)if(t.child(i).type!=e.type){n.write(`\\
`);return}},text(n,e){n.text(e.text,!n.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(n,e,t,r){return n.inAutolink=O5t(e,t,r),n.inAutolink?"<":"["},close(n,e,t,r){let{inAutolink:i}=n;return n.inAutolink=void 0,i?">":"]("+e.attrs.href.replace(/[\(\)"]/g,"\\$&")+(e.attrs.title?` "${e.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(n,e,t,r){return SZ(t.child(r),-1)},close(n,e,t,r){return SZ(t.child(r-1),1)},escape:!1}});function SZ(n,e){let t=/`+/g,r,i=0;if(n.isText)for(;r=t.exec(n.text);)i=Math.max(i,r[0].length);let s=i>0&&e>0?" `":"`";for(let o=0;o<i;o++)s+="`";return i>0&&e<0&&(s+=" "),s}function O5t(n,e,t){if(n.attrs.title||!/^\w+:/.test(n.attrs.href))return!1;let r=e.child(t);return!r.isText||r.text!=n.attrs.href||r.marks[r.marks.length-1]!=n?!1:t==e.childCount-1||!n.isInSet(e.child(t+1).marks)}let Tbe=class{constructor(e,t,r){this.nodes=e,this.marks=t,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let t=this.delim,r=/\s+$/.exec(t);r&&(t=t.slice(0,t.length-r[0].length));for(let i=1;i<e;i++)this.out+=t+`
`}this.closed=null}}wrapBlock(e,t,r,i){let s=this.delim;this.write(t??e),this.delim+=e,i(),this.delim=s,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){let r=e.split(`
`);for(let i=0;i<r.length;i++)this.write(),!t&&r[i][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(r[i],this.atBlockStart):r[i],i!=r.length-1&&(this.out+=`
`)}render(e,t,r){if(!this.nodes[e.type.name])throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");this.nodes[e.type.name](this,e,t,r)}renderContent(e){e.forEach((t,r,i)=>this.render(t,e,i))}renderInline(e,t=!0){this.atBlockStart=t;let r=[],i="",s=(o,a,l)=>{let c=o?o.marks:[];o&&o.type.name===this.options.hardBreakNodeName&&(c=c.filter(m=>{if(l+1==e.childCount)return!1;let g=e.child(l+1);return m.isInSet(g.marks)&&(!g.isText||/\S/.test(g.text))}));let u=i;if(i="",o&&o.isText&&c.some(m=>{let g=this.marks[m.type.name];return g&&g.expelEnclosingWhitespace&&!m.isInSet(r)})){let[m,g,y]=/^(\s*)(.*)$/m.exec(o.text);g&&(u+=g,o=y?o.withText(y):null,o||(c=r))}if(o&&o.isText&&c.some(m=>{let g=this.marks[m.type.name];return g&&g.expelEnclosingWhitespace&&(l==e.childCount-1||!m.isInSet(e.child(l+1).marks))})){let[m,g,y]=/^(.*?)(\s*)$/m.exec(o.text);y&&(i=y,o=g?o.withText(g):null,o||(c=r))}let d=c.length?c[c.length-1]:null,f=d&&this.marks[d.type.name].escape===!1,h=c.length-(f?1:0);e:for(let m=0;m<h;m++){let g=c[m];if(!this.marks[g.type.name].mixable)break;for(let y=0;y<r.length;y++){let k=r[y];if(!this.marks[k.type.name].mixable)break;if(g.eq(k)){m>y?c=c.slice(0,y).concat(g).concat(c.slice(y,m)).concat(c.slice(m+1,h)):y>m&&(c=c.slice(0,m).concat(c.slice(m+1,y)).concat(g).concat(c.slice(y,h)));continue e}}}let p=0;for(;p<Math.min(r.length,h)&&c[p].eq(r[p]);)++p;for(;p<r.length;)this.text(this.markString(r.pop(),!1,e,l),!1);if(u&&this.text(u),o){for(;r.length<h;){let m=c[r.length];r.push(m),this.text(this.markString(m,!0,e,l),!1),this.atBlockStart=!1}f&&o.isText?this.text(this.markString(d,!0,e,l)+o.text+this.markString(d,!1,e,l+1),!1):this.render(o,e,l),this.atBlockStart=!1}o!=null&&o.isText&&o.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(s),s(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let i=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,s=this.inTightList;this.inTightList=i,e.forEach((o,a,l)=>{l&&i&&this.flushClose(1),this.wrapBlock(t,r(l),e,()=>this.render(o,e,l))}),this.inTightList=s}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(r,i)=>r=="_"&&i>0&&i+1<e.length&&e[i-1].match(/\w/)&&e[i+1].match(/\w/)?r:"\\"+r),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return t[0]+e+t[1]}repeat(e,t){let r="";for(let i=0;i<t;i++)r+=e;return r}markString(e,t,r,i){let s=this.marks[e.type.name],o=t?s.open:s.close;return typeof o=="string"?o:o(this,e,r,i)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}};var ut={};const P5t="",D5t="",N5t="",F5t="",L5t="",z5t="",B5t="",j5t="",V5t="",q5t="",K5t="",U5t="",H5t="",W5t="",G5t="",J5t="",Q5t="",Y5t="",X5t="",Z5t="",e6t="",t6t="",n6t="",r6t="",i6t="",s6t="",o6t="&",a6t="&",l6t="",c6t="",u6t="",d6t="",f6t="",h6t="",p6t="",m6t="",g6t="",y6t="",v6t="",b6t="",k6t="",x6t="",S6t="",w6t="",$6t="",E6t="",C6t="",M6t="",T6t="",_6t="",A6t="",I6t="",R6t="",O6t="",P6t="",D6t="",N6t="",F6t="",L6t="",z6t="",B6t="",j6t="'",V6t="",q6t="",K6t="",U6t="",H6t="",W6t="",G6t="",J6t="",Q6t="*",Y6t="",X6t="",Z6t="",eLt="",tLt="",nLt="",rLt="",iLt="",sLt="",oLt="",aLt="",lLt="",cLt="",uLt="",dLt="",fLt="",hLt="",pLt="",mLt="",gLt="",yLt="",vLt="",bLt="",kLt="",xLt="",SLt="",wLt="",$Lt="",ELt="",CLt="",MLt="",TLt="",_Lt="",ALt="",ILt="",RLt="",OLt="",PLt="",DLt="",NLt="",FLt="",LLt="",zLt="",BLt="",jLt="",VLt="",qLt="",KLt="",ULt="",HLt="",WLt="",GLt="",JLt="",QLt="",YLt="",XLt="",ZLt="",e4t="",t4t="",n4t="",r4t="",i4t="",s4t="",o4t="=",a4t="",l4t="",c4t="",u4t="",d4t="",f4t="",h4t="",p4t="",m4t="",g4t="",y4t="",v4t="",b4t="",k4t="",x4t="",S4t="",w4t="",$4t="",E4t="",C4t="",M4t="",T4t="",_4t="",A4t="",I4t="",R4t="",O4t="",P4t="",D4t="",N4t="",F4t="",L4t="",z4t="",B4t="",j4t="",V4t="",q4t="",K4t="",U4t="",H4t="",W4t="",G4t="",J4t="",Q4t="",Y4t="",X4t="",Z4t="",ezt="",tzt="",nzt="",rzt="",izt="",szt="",ozt="",azt="",lzt="",czt="",uzt="",dzt="",fzt="",hzt="",pzt="",mzt="\\",gzt="",yzt="",vzt="",bzt="",kzt="",xzt="",Szt="",wzt="",$zt="",Ezt="",Czt="",Mzt="",Tzt="",_zt="",Azt="",Izt="",Rzt="",Ozt="",Pzt="",Dzt="",Nzt="",Fzt="",Lzt="",zzt="",Bzt="",jzt="",Vzt="",qzt="",Kzt="",Uzt="",Hzt="",Wzt="",Gzt="",Jzt="",Qzt="",Yzt="",Xzt="",Zzt="",e8t="",t8t="",n8t="",r8t="",i8t="",s8t="",o8t="",a8t="",l8t="",c8t="",u8t="",d8t="",f8t="",h8t="",p8t="",m8t="",g8t="",y8t="",v8t="",b8t="",k8t="",x8t="",S8t="",w8t="",$8t="",E8t="",C8t="",M8t="",T8t="",_8t="",A8t="",I8t="",R8t="",O8t="",P8t=":",D8t="",N8t="",F8t="",L8t="",z8t=",",B8t="@",j8t="",V8t="",q8t="",K8t="",U8t="",H8t="",W8t="",G8t="",J8t="",Q8t="",Y8t="",X8t="",Z8t="",eBt="",tBt="",nBt="",rBt="",iBt="",sBt="",oBt="",aBt="",lBt="",cBt="",uBt="",dBt="",fBt="",hBt="",pBt="",mBt="",gBt="",yBt="",vBt="",bBt="",kBt="",xBt="",SBt="",wBt="",$Bt="",EBt="",CBt="",MBt="",TBt="",_Bt="",ABt="",IBt="",RBt="",OBt="",PBt="",DBt="",NBt="",FBt="",LBt="",zBt="",BBt="",jBt="",VBt="",qBt="",KBt="",UBt="",HBt="",WBt="",GBt="",JBt="",QBt="",YBt="",XBt="",ZBt="",e7t="",t7t="",n7t="",r7t="",i7t="",s7t="",o7t="",a7t="",l7t="",c7t="",u7t="",d7t="",f7t="",h7t="",p7t="",m7t="",g7t="",y7t="",v7t="",b7t="",k7t="",x7t="",S7t="",w7t="",$7t="",E7t="`",C7t="",M7t="",T7t="",_7t="",A7t="",I7t="",R7t="",O7t="",P7t="",D7t="",N7t="",F7t="",L7t="",z7t="",B7t="",j7t="",V7t="",q7t="",K7t="$",U7t="",H7t="",W7t="",G7t="",J7t="",Q7t="",Y7t="",X7t="",Z7t="",e9t="",t9t="",n9t="",r9t="",i9t="",s9t="",o9t="",a9t="",l9t="",c9t="",u9t="",d9t="",f9t="",h9t="",p9t="",m9t="",g9t="",y9t="",v9t="",b9t="",k9t="",x9t="",S9t="",w9t="",$9t="",E9t="",C9t="",M9t="",T9t="",_9t="",A9t="",I9t="",R9t="",O9t="",P9t="",D9t="",N9t="",F9t="",L9t="",z9t="",B9t="",j9t="",V9t="",q9t="",K9t="",U9t="",H9t="",W9t="",G9t="",J9t="",Q9t="",Y9t="",X9t="",Z9t="",ejt="",tjt="",njt="",rjt="",ijt="",sjt="",ojt="",ajt="",ljt="",cjt="",ujt="",djt="",fjt="",hjt="",pjt="",mjt="",gjt="",yjt="",vjt="",bjt="",kjt="",xjt="",Sjt="",wjt="",$jt="",Ejt="",Cjt="",Mjt="",Tjt="",_jt="",Ajt="",Ijt="",Rjt="",Ojt="",Pjt="",Djt="",Njt="",Fjt="",Ljt="",zjt="",Bjt="",jjt="",Vjt="",qjt="",Kjt="",Ujt="",Hjt="",Wjt="",Gjt="",Jjt="",Qjt="",Yjt="",Xjt="",Zjt="",eVt="",tVt="",nVt="",rVt="",iVt="",sVt="",oVt="=",aVt="",lVt="",cVt="",uVt="",dVt="",fVt="",hVt="",pVt="",mVt="",gVt="",yVt="",vVt="",bVt="",kVt="",xVt="",SVt="",wVt="",$Vt="",EVt="",CVt="",MVt="!",TVt="",_Vt="",AVt="",IVt="",RVt="",OVt="",PVt="",DVt="",NVt="",FVt="",LVt="",zVt="",BVt="",jVt="",VVt="",qVt="",KVt="",UVt="fj",HVt="",WVt="",GVt="",JVt="",QVt="",YVt="",XVt="",ZVt="",eqt="",tqt="",nqt="",rqt="",iqt="",sqt="",oqt="",aqt="",lqt="",cqt="",uqt="",dqt="",fqt="",hqt="",pqt="",mqt="",gqt="",yqt="",vqt="",bqt="",kqt="",xqt="",Sqt="",wqt="",$qt="",Eqt="",Cqt="",Mqt="",Tqt="",_qt="",Aqt="",Iqt="",Rqt="",Oqt="",Pqt="",Dqt="",Nqt="",Fqt="",Lqt="",zqt="",Bqt="",jqt="",Vqt="",qqt="",Kqt="",Uqt="",Hqt="",Wqt="",Gqt="",Jqt="",Qqt="",Yqt="",Xqt="",Zqt="",eKt="",tKt="",nKt="",rKt="",iKt="",sKt="",oKt="",aKt="",lKt="",cKt="",uKt="",dKt="",fKt="",hKt="",pKt="",mKt="",gKt="",yKt="",vKt="",bKt="`",kKt="",xKt="",SKt="",wKt="",$Kt="",EKt="",CKt="",MKt="",TKt="",_Kt="",AKt="",IKt="",RKt="",OKt="",PKt=">",DKt=">",NKt="",FKt="",LKt="",zKt="",BKt="",jKt="",VKt="",qKt="",KKt="",UKt="",HKt="",WKt="",GKt="",JKt="",QKt="",YKt="",XKt="",ZKt="",eUt="",tUt="",nUt="",rUt="",iUt="",sUt="^",oUt="",aUt="",lUt="",cUt="",uUt="",dUt="",fUt="",hUt="",pUt="",mUt="",gUt="",yUt="",vUt="",bUt="",kUt="",xUt="",SUt="",wUt="",$Ut="",EUt="",CUt="",MUt="",TUt="",_Ut="",AUt="",IUt="",RUt="",OUt="",PUt="",DUt="",NUt="",FUt="",LUt="",zUt="",BUt="",jUt="",VUt="",qUt="",KUt="",UUt="",HUt="",WUt="",GUt="",JUt="",QUt="",YUt="",XUt="",ZUt="",eHt="",tHt="",nHt="",rHt="",iHt="",sHt="",oHt="",aHt="",lHt="",cHt="",uHt="",dHt="",fHt="",hHt="",pHt="",mHt="",gHt="",yHt="",vHt="",bHt="",kHt="",xHt="",SHt="",wHt="",$Ht="",EHt="",CHt="",MHt="",THt="",_Ht="",AHt="",IHt="",RHt="",OHt="",PHt="",DHt="",NHt="",FHt="",LHt="",zHt="",BHt="",jHt="",VHt="",qHt="",KHt="",UHt="",HHt="",WHt="",GHt="",JHt="",QHt="",YHt="",XHt="",ZHt="",eWt="",tWt="",nWt="",rWt="",iWt="",sWt="",oWt="",aWt="",lWt="",cWt="",uWt="",dWt="",fWt="",hWt="",pWt="",mWt="",gWt="",yWt="",vWt="",bWt="",kWt="",xWt="",SWt="",wWt="",$Wt="",EWt="",CWt="",MWt="",TWt="",_Wt="",AWt="",IWt="",RWt="",OWt="",PWt="",DWt="",NWt="",FWt="",LWt="",zWt="",BWt="",jWt="",VWt="",qWt="",KWt="",UWt="",HWt="",WWt="",GWt="",JWt="",QWt="",YWt="",XWt="",ZWt="",eGt="",tGt="",nGt="",rGt="",iGt="",sGt="",oGt="",aGt="",lGt="",cGt="",uGt="",dGt="",fGt="",hGt="{",pGt="[",mGt="",gGt="",yGt="",vGt="",bGt="",kGt="",xGt="",SGt="",wGt="{",$Gt="",EGt="",CGt="",MGt="",TGt="",_Gt="",AGt="",IGt="",RGt="",OGt="",PGt="",DGt="",NGt="",FGt="",LGt="",zGt="",BGt="",jGt="",VGt="",qGt="",KGt="",UGt="",HGt="",WGt="",GGt="",JGt="",QGt="",YGt="",XGt="",ZGt="",eJt="",tJt="",nJt="",rJt="",iJt="",sJt="",oJt="",aJt="",lJt="",cJt="",uJt="",dJt="",fJt="",hJt="",pJt="",mJt="",gJt="",yJt="",vJt="",bJt="",kJt="",xJt="",SJt="",wJt="",$Jt="",EJt="",CJt="",MJt="",TJt="",_Jt="",AJt="",IJt="",RJt="",OJt="",PJt="",DJt="",NJt="",FJt="",LJt="",zJt="",BJt="",jJt="",VJt="",qJt="",KJt="",UJt="",HJt="",WJt="",GJt="",JJt="",QJt="",YJt="",XJt="",ZJt="",eQt="",tQt="",nQt="",rQt="",iQt="",sQt="",oQt="",aQt="",lQt="",cQt="",uQt="",dQt="",fQt="",hQt="",pQt="",mQt="",gQt="",yQt="",vQt="",bQt="",kQt="",xQt="",SQt="",wQt="",$Qt="",EQt="",CQt="",MQt="",TQt="",_Qt="",AQt="",IQt="",RQt="",OQt="",PQt="",DQt="",NQt="",FQt="",LQt="_",zQt="",BQt="",jQt="",VQt="",qQt="",KQt="(",UQt="",HQt="",WQt="",GQt="",JQt="",QQt="",YQt="",XQt="",ZQt="",eYt="",tYt="",nYt="",rYt="",iYt="",sYt="",oYt="[",aYt="",lYt="",cYt="",uYt="",dYt="",fYt="",hYt="<",pYt="<",mYt="",gYt="",yYt="",vYt="",bYt="",kYt="",xYt="",SYt="",wYt="",$Yt="",EYt="",CYt="",MYt="",TYt="",_Yt="",AYt="",IYt="",RYt="",OYt="",PYt="",DYt="",NYt="",FYt="",LYt="",zYt="",BYt="",jYt="",VYt="",qYt="",KYt="",UYt="",HYt="",WYt="",GYt="",JYt="",QYt="",YYt="*",XYt="",ZYt="",eXt="",tXt="",nXt="",rXt="",iXt="",sXt="",oXt="",aXt="",lXt="",cXt="",uXt="",dXt="",fXt="",hXt="",pXt="",mXt="",gXt="",yXt="",vXt="",bXt="",kXt="",xXt="",SXt="",wXt="",$Xt="",EXt="",CXt="",MXt="",TXt="",_Xt="",AXt="",IXt="",RXt="",OXt="",PXt="",DXt="",NXt="",FXt="",LXt="",zXt="",BXt="",jXt="",VXt="",qXt="",KXt="",UXt="",HXt="",WXt="",GXt="",JXt="",QXt="",YXt="",XXt="",ZXt="",eZt="",tZt="",nZt="",rZt="",iZt="",sZt="",oZt="",aZt=`
`,lZt="",cZt="",uZt="",dZt="",fZt="",hZt="",pZt="",mZt="",gZt="",yZt="",vZt="",bZt="",kZt="",xZt="",SZt="",wZt="",$Zt="",EZt="",CZt="",MZt="",TZt="",_Zt="",AZt="",IZt="",RZt="",OZt="",PZt="",DZt="",NZt="",FZt="",LZt="",zZt="",BZt="",jZt="",VZt="",qZt="",KZt="",UZt="",HZt="",WZt="",GZt="",JZt="",QZt="",YZt="",XZt="",ZZt="",een="",ten="",nen="",ren="",ien="",sen="",oen="",aen="",len="",cen="",uen="",den="",fen="",hen="",pen="",men="",gen="",yen="",ven="",ben="",ken="",xen="",Sen="",wen="",$en="",Een="",Cen="",Men="",Ten="",_en="",Aen="",Ien="",Ren="",Oen="",Pen="",Den="",Nen="",Fen="",Len="",zen="",Ben="",jen="",Ven="",qen="",Ken="",Uen="",Hen="",Wen="",Gen="",Jen="",Qen="",Yen="",Xen="",Zen="",etn="",ttn="",ntn="",rtn="",itn="",stn="",otn="",atn="",ltn="",ctn="",utn="",dtn="",ftn="",htn="",ptn="",mtn="",gtn="",ytn="",vtn="",btn="",ktn="",xtn="",Stn="",wtn="",$tn="",Etn="",Ctn="",Mtn="",Ttn="",_tn="",Atn="",Itn="",Rtn="",Otn="",Ptn="",Dtn="",Ntn="",Ftn="",Ltn="",ztn="",Btn="",jtn="",Vtn="",qtn="",Ktn="",Utn="",Htn="",Wtn="",Gtn="",Jtn="",Qtn="",Ytn="",Xtn="",Ztn="",enn="",tnn="",nnn="",rnn="",inn="",snn="",onn="",ann="",lnn="",cnn="",unn="",dnn="",fnn="",hnn="",pnn="",mnn="",gnn="#",ynn="",vnn="",bnn="",knn="",xnn="",Snn="",wnn="",$nn="",Enn=">",Cnn="",Mnn="",Tnn="",_nn="",Ann="<",Inn="",Rnn="",Onn="",Pnn="",Dnn="",Nnn="",Fnn="",Lnn="",znn="",Bnn="",jnn="",Vnn="",qnn="",Knn="",Unn="",Hnn="",Wnn="",Gnn="",Jnn="",Qnn="",Ynn="",Xnn="",Znn="",ern="",trn="",nrn="",rrn="",irn="",srn="",orn="",arn="",lrn="",crn="",urn="",drn="",frn="",hrn="",prn="",mrn="",grn="",yrn="",vrn="",brn="",krn="",xrn="",Srn="",wrn="",$rn="",Ern="",Crn="",Mrn="",Trn="",_rn="",Arn="",Irn="",Rrn="",Orn="",Prn="",Drn="",Nrn="",Frn="",Lrn="",zrn="",Brn="",jrn="",Vrn="",qrn="",Krn="",Urn="",Hrn="",Wrn="",Grn="",Jrn="",Qrn="",Yrn="",Xrn="",Zrn="",ein="",tin="",nin="",rin="",iin="",sin="",oin="",ain="",lin="",cin="",uin="",din="",fin="",hin="",pin="",min="",gin="",yin="%",vin=".",bin="",kin="",xin="",Sin="",win="",$in="",Ein="",Cin="",Min="",Tin="",_in="",Ain="",Iin="",Rin="",Oin="",Pin="",Din="",Nin="",Fin="",Lin="",zin="+",Bin="",jin="",Vin="",qin="",Kin="",Uin="",Hin="",Win="",Gin="",Jin="",Qin="",Yin="",Xin="",Zin="",esn="",tsn="",nsn="",rsn="",isn="",ssn="",osn="",asn="",lsn="",csn="",usn="",dsn="",fsn="",hsn="",psn="",msn="",gsn="",ysn="",vsn="",bsn="",ksn="",xsn="",Ssn="",wsn="",$sn="",Esn="",Csn="",Msn="",Tsn="",_sn="",Asn="",Isn="",Rsn="",Osn="",Psn="",Dsn="",Nsn="",Fsn="",Lsn="",zsn="",Bsn="",jsn="",Vsn="",qsn="",Ksn="",Usn="",Hsn="",Wsn="",Gsn="",Jsn="?",Qsn="",Ysn='"',Xsn='"',Zsn="",eon="",ton="",non="",ron="",ion="",son="",oon="",aon="",lon="",con="",uon="",don="",fon="",hon="",pon="",mon="",gon="",yon="",von="",bon="",kon="",xon="",Son="",won="",$on="",Eon="",Con="",Mon="",Ton="",_on="",Aon="",Ion="",Ron="",Oon="",Pon="}",Don="]",Non="",Fon="",Lon="",zon="",Bon="",jon="",Von="",qon="",Kon="}",Uon="",Hon="",Won="",Gon="",Jon="",Qon="",Yon="",Xon="",Zon="",ean="",tan="",nan="",ran="",ian="",san="",oan="",aan="",lan="",can="",uan="",dan="",fan="",han="",pan="",man="",gan="",yan="",van="",ban="",kan="",xan="",San="",wan="",$an="",Ean="",Can="",Man="",Tan="",_an="",Aan="",Ian="",Ran="",Oan="",Pan="",Dan="",Nan="",Fan="",Lan="",zan="",Ban="",jan="",Van="",qan="",Kan="",Uan="",Han="",Wan="",Gan="",Jan="",Qan="",Yan="",Xan="",Zan="",eln="",tln="",nln="",rln="",iln="",sln="",oln="",aln="",lln="",cln="",uln="",dln="",fln="",hln="",pln="",mln=")",gln="",yln="",vln="",bln="",kln="",xln="",Sln="",wln="",$ln="",Eln="]",Cln="",Mln="",Tln="",_ln="",Aln="",Iln="",Rln="",Oln="",Pln="",Dln="",Nln="",Fln="",Lln="",zln="",Bln="",jln="",Vln="",qln="",Kln="",Uln="",Hln="",Wln="",Gln="",Jln="",Qln="",Yln="",Xln="",Zln="",ecn="",tcn="",ncn="",rcn="",icn="",scn="",ocn="",acn="",lcn="",ccn="",ucn="",dcn="",fcn="",hcn=";",pcn="",mcn="",gcn="",ycn="",vcn="",bcn="",kcn="",xcn="",Scn="",wcn="",$cn="",Ecn="",Ccn="",Mcn="",Tcn="",_cn="",Acn="",Icn="",Rcn="",Ocn="",Pcn="",Dcn="",Ncn="",Fcn="",Lcn="",zcn="",Bcn="",jcn="",Vcn="",qcn="",Kcn="",Ucn="",Hcn="",Wcn="",Gcn="",Jcn="",Qcn="",Ycn="",Xcn="",Zcn="",eun="",tun="",nun="",run="",iun="",sun="",oun="",aun="",lun="/",cun="",uun="",dun="",fun="",hun="",pun="",mun="",gun="",yun="",vun="",bun="",kun="",xun="",Sun="",wun="",$un="",Eun="",Cun="",Mun="",Tun="",_un="",Aun="",Iun="",Run="",Oun="",Pun="",Dun="",Nun="",Fun="",Lun="",zun="",Bun="",jun="",Vun="",qun="",Kun="",Uun="",Hun="",Wun="",Gun="",Jun="",Qun="",Yun="",Xun="",Zun="",edn="",tdn="",ndn="",rdn="",idn="",sdn="",odn="",adn="",ldn="",cdn="",udn="",ddn="",fdn="",hdn="",pdn="",mdn="",gdn="",ydn="",vdn="",bdn="",kdn="",xdn="",Sdn="",wdn="",$dn="",Edn="",Cdn="",Mdn="",Tdn="",_dn="",Adn="",Idn="",Rdn="",Odn="",Pdn="",Ddn="",Ndn="",Fdn="",Ldn="",zdn="",Bdn="",jdn="",Vdn="",qdn="",Kdn="",Udn="",Hdn="",Wdn="",Gdn="",Jdn="",Qdn="",Ydn="",Xdn="",Zdn="",efn="",tfn="",nfn="",rfn="",ifn="",sfn="",ofn="",afn="",lfn="",cfn="",ufn="",dfn="",ffn="",hfn="	",pfn="",mfn="",gfn="",yfn="",vfn="",bfn="",kfn="",xfn="",Sfn="",wfn="",$fn="",Efn="",Cfn="",Mfn="",Tfn="",_fn="",Afn="",Ifn="",Rfn="",Ofn="",Pfn="",Dfn="",Nfn="",Ffn="",Lfn="",zfn="",Bfn="",jfn="",Vfn="",qfn="",Kfn="",Ufn="",Hfn="",Wfn="",Gfn="",Jfn="",Qfn="",Yfn="",Xfn="",Zfn="",ehn="",thn="",nhn="",rhn="",ihn="",shn="",ohn="",ahn="",lhn="",chn="",uhn="",dhn="",fhn="",hhn="",phn="",mhn="",ghn="",yhn="",vhn="",bhn="",khn="",xhn="",Shn="",whn="",$hn="",Ehn="",Chn="",Mhn="",Thn="",_hn="",Ahn="",Ihn="",Rhn="",Ohn="",Phn="",Dhn="",Nhn="",Fhn="",Lhn="",zhn="",Bhn="",jhn="",Vhn="",qhn="",Khn="",Uhn="",Hhn="",Whn="",Ghn="",Jhn="",Qhn="",Yhn="",Xhn="",Zhn="",epn="",tpn="",npn="",rpn="",ipn="",spn="",opn="",apn="",lpn="",cpn="",upn="",dpn="",fpn="",hpn="",ppn="",mpn="",gpn="",ypn="_",vpn="",bpn="",kpn="",xpn="",Spn="",wpn="",$pn="",Epn="",Cpn="",Mpn="",Tpn="",_pn="",Apn="",Ipn="",Rpn="",Opn="",Ppn="",Dpn="",Npn="",Fpn="",Lpn="",zpn="",Bpn="",jpn="",Vpn="",qpn="",Kpn="",Upn="",Hpn="",Wpn="",Gpn="",Jpn="",Qpn="",Ypn="",Xpn="",Zpn="",emn="",tmn="",nmn="",rmn="",imn="",smn="",omn="",amn="",lmn="",cmn="",umn="",dmn="",fmn="",hmn="",pmn="",mmn="",gmn="",ymn="",vmn="",bmn="",kmn="",xmn="",Smn="",wmn="",$mn="",Emn="",Cmn="",Mmn="",Tmn="",_mn="",Amn="",Imn="",Rmn="",Omn="",Pmn="",Dmn="",Nmn="",Fmn="",Lmn="",zmn="",Bmn="",jmn="",Vmn="",qmn="",Kmn="",Umn="|",Hmn="",Wmn="|",Gmn="",Jmn="",Qmn="|",Ymn="",Xmn="",Zmn="",egn="",tgn="",ngn="",rgn="",ign="",sgn="",ogn="",agn="",lgn="",cgn="",ugn="",dgn="",fgn="",hgn="",pgn="",mgn="",ggn="",ygn="",vgn="",bgn="",kgn="",xgn="",Sgn="",wgn="",$gn="",Egn="",Cgn="",Mgn="",Tgn="",_gn="",Agn="",Ign="",Rgn="",Ogn="",Pgn="",Dgn="",Ngn="",Fgn="",Lgn="",zgn="",Bgn="",jgn="",Vgn="",qgn="",Kgn="",Ugn="",Hgn="",Wgn="",Ggn="",Jgn="",Qgn="",Ygn="",Xgn="",Zgn="",e0n="",t0n="",n0n="",r0n="",i0n="",s0n="",o0n="",a0n="",l0n="",c0n="",u0n="",d0n="",f0n="",h0n="",p0n="",m0n="",g0n="",y0n="",v0n="",b0n="",k0n="",x0n="",S0n="",w0n="",$0n="",E0n="",C0n="",M0n="",T0n="",_0n="",A0n="",I0n="",R0n="",O0n="",P0n="",D0n="",N0n="",F0n="",L0n="",z0n="",B0n="",j0n="",V0n="",q0n="",K0n="",U0n="",H0n="",W0n="",G0n="",J0n="",Q0n="",Y0n={Aacute:P5t,aacute:D5t,Abreve:N5t,abreve:F5t,ac:L5t,acd:z5t,acE:B5t,Acirc:j5t,acirc:V5t,acute:q5t,Acy:K5t,acy:U5t,AElig:H5t,aelig:W5t,af:G5t,Afr:J5t,afr:Q5t,Agrave:Y5t,agrave:X5t,alefsym:Z5t,aleph:e6t,Alpha:t6t,alpha:n6t,Amacr:r6t,amacr:i6t,amalg:s6t,amp:o6t,AMP:a6t,andand:l6t,And:c6t,and:u6t,andd:d6t,andslope:f6t,andv:h6t,ang:p6t,ange:m6t,angle:g6t,angmsdaa:y6t,angmsdab:v6t,angmsdac:b6t,angmsdad:k6t,angmsdae:x6t,angmsdaf:S6t,angmsdag:w6t,angmsdah:$6t,angmsd:E6t,angrt:C6t,angrtvb:M6t,angrtvbd:T6t,angsph:_6t,angst:A6t,angzarr:I6t,Aogon:R6t,aogon:O6t,Aopf:P6t,aopf:D6t,apacir:N6t,ap:F6t,apE:L6t,ape:z6t,apid:B6t,apos:j6t,ApplyFunction:V6t,approx:q6t,approxeq:K6t,Aring:U6t,aring:H6t,Ascr:W6t,ascr:G6t,Assign:J6t,ast:Q6t,asymp:Y6t,asympeq:X6t,Atilde:Z6t,atilde:eLt,Auml:tLt,auml:nLt,awconint:rLt,awint:iLt,backcong:sLt,backepsilon:oLt,backprime:aLt,backsim:lLt,backsimeq:cLt,Backslash:uLt,Barv:dLt,barvee:fLt,barwed:hLt,Barwed:pLt,barwedge:mLt,bbrk:gLt,bbrktbrk:yLt,bcong:vLt,Bcy:bLt,bcy:kLt,bdquo:xLt,becaus:SLt,because:wLt,Because:$Lt,bemptyv:ELt,bepsi:CLt,bernou:MLt,Bernoullis:TLt,Beta:_Lt,beta:ALt,beth:ILt,between:RLt,Bfr:OLt,bfr:PLt,bigcap:DLt,bigcirc:NLt,bigcup:FLt,bigodot:LLt,bigoplus:zLt,bigotimes:BLt,bigsqcup:jLt,bigstar:VLt,bigtriangledown:qLt,bigtriangleup:KLt,biguplus:ULt,bigvee:HLt,bigwedge:WLt,bkarow:GLt,blacklozenge:JLt,blacksquare:QLt,blacktriangle:YLt,blacktriangledown:XLt,blacktriangleleft:ZLt,blacktriangleright:e4t,blank:t4t,blk12:n4t,blk14:r4t,blk34:i4t,block:s4t,bne:o4t,bnequiv:a4t,bNot:l4t,bnot:c4t,Bopf:u4t,bopf:d4t,bot:f4t,bottom:h4t,bowtie:p4t,boxbox:m4t,boxdl:g4t,boxdL:y4t,boxDl:v4t,boxDL:b4t,boxdr:k4t,boxdR:x4t,boxDr:S4t,boxDR:w4t,boxh:$4t,boxH:E4t,boxhd:C4t,boxHd:M4t,boxhD:T4t,boxHD:_4t,boxhu:A4t,boxHu:I4t,boxhU:R4t,boxHU:O4t,boxminus:P4t,boxplus:D4t,boxtimes:N4t,boxul:F4t,boxuL:L4t,boxUl:z4t,boxUL:B4t,boxur:j4t,boxuR:V4t,boxUr:q4t,boxUR:K4t,boxv:U4t,boxV:H4t,boxvh:W4t,boxvH:G4t,boxVh:J4t,boxVH:Q4t,boxvl:Y4t,boxvL:X4t,boxVl:Z4t,boxVL:ezt,boxvr:tzt,boxvR:nzt,boxVr:rzt,boxVR:izt,bprime:szt,breve:ozt,Breve:azt,brvbar:lzt,bscr:czt,Bscr:uzt,bsemi:dzt,bsim:fzt,bsime:hzt,bsolb:pzt,bsol:mzt,bsolhsub:gzt,bull:yzt,bullet:vzt,bump:bzt,bumpE:kzt,bumpe:xzt,Bumpeq:Szt,bumpeq:wzt,Cacute:$zt,cacute:Ezt,capand:Czt,capbrcup:Mzt,capcap:Tzt,cap:_zt,Cap:Azt,capcup:Izt,capdot:Rzt,CapitalDifferentialD:Ozt,caps:Pzt,caret:Dzt,caron:Nzt,Cayleys:Fzt,ccaps:Lzt,Ccaron:zzt,ccaron:Bzt,Ccedil:jzt,ccedil:Vzt,Ccirc:qzt,ccirc:Kzt,Cconint:Uzt,ccups:Hzt,ccupssm:Wzt,Cdot:Gzt,cdot:Jzt,cedil:Qzt,Cedilla:Yzt,cemptyv:Xzt,cent:Zzt,centerdot:e8t,CenterDot:t8t,cfr:n8t,Cfr:r8t,CHcy:i8t,chcy:s8t,check:o8t,checkmark:a8t,Chi:l8t,chi:c8t,circ:u8t,circeq:d8t,circlearrowleft:f8t,circlearrowright:h8t,circledast:p8t,circledcirc:m8t,circleddash:g8t,CircleDot:y8t,circledR:v8t,circledS:b8t,CircleMinus:k8t,CirclePlus:x8t,CircleTimes:S8t,cir:w8t,cirE:$8t,cire:E8t,cirfnint:C8t,cirmid:M8t,cirscir:T8t,ClockwiseContourIntegral:_8t,CloseCurlyDoubleQuote:A8t,CloseCurlyQuote:I8t,clubs:R8t,clubsuit:O8t,colon:P8t,Colon:D8t,Colone:N8t,colone:F8t,coloneq:L8t,comma:z8t,commat:B8t,comp:j8t,compfn:V8t,complement:q8t,complexes:K8t,cong:U8t,congdot:H8t,Congruent:W8t,conint:G8t,Conint:J8t,ContourIntegral:Q8t,copf:Y8t,Copf:X8t,coprod:Z8t,Coproduct:eBt,copy:tBt,COPY:nBt,copysr:rBt,CounterClockwiseContourIntegral:iBt,crarr:sBt,cross:oBt,Cross:aBt,Cscr:lBt,cscr:cBt,csub:uBt,csube:dBt,csup:fBt,csupe:hBt,ctdot:pBt,cudarrl:mBt,cudarrr:gBt,cuepr:yBt,cuesc:vBt,cularr:bBt,cularrp:kBt,cupbrcap:xBt,cupcap:SBt,CupCap:wBt,cup:$Bt,Cup:EBt,cupcup:CBt,cupdot:MBt,cupor:TBt,cups:_Bt,curarr:ABt,curarrm:IBt,curlyeqprec:RBt,curlyeqsucc:OBt,curlyvee:PBt,curlywedge:DBt,curren:NBt,curvearrowleft:FBt,curvearrowright:LBt,cuvee:zBt,cuwed:BBt,cwconint:jBt,cwint:VBt,cylcty:qBt,dagger:KBt,Dagger:UBt,daleth:HBt,darr:WBt,Darr:GBt,dArr:JBt,dash:QBt,Dashv:YBt,dashv:XBt,dbkarow:ZBt,dblac:e7t,Dcaron:t7t,dcaron:n7t,Dcy:r7t,dcy:i7t,ddagger:s7t,ddarr:o7t,DD:a7t,dd:l7t,DDotrahd:c7t,ddotseq:u7t,deg:d7t,Del:f7t,Delta:h7t,delta:p7t,demptyv:m7t,dfisht:g7t,Dfr:y7t,dfr:v7t,dHar:b7t,dharl:k7t,dharr:x7t,DiacriticalAcute:S7t,DiacriticalDot:w7t,DiacriticalDoubleAcute:$7t,DiacriticalGrave:E7t,DiacriticalTilde:C7t,diam:M7t,diamond:T7t,Diamond:_7t,diamondsuit:A7t,diams:I7t,die:R7t,DifferentialD:O7t,digamma:P7t,disin:D7t,div:N7t,divide:F7t,divideontimes:L7t,divonx:z7t,DJcy:B7t,djcy:j7t,dlcorn:V7t,dlcrop:q7t,dollar:K7t,Dopf:U7t,dopf:H7t,Dot:W7t,dot:G7t,DotDot:J7t,doteq:Q7t,doteqdot:Y7t,DotEqual:X7t,dotminus:Z7t,dotplus:e9t,dotsquare:t9t,doublebarwedge:n9t,DoubleContourIntegral:r9t,DoubleDot:i9t,DoubleDownArrow:s9t,DoubleLeftArrow:o9t,DoubleLeftRightArrow:a9t,DoubleLeftTee:l9t,DoubleLongLeftArrow:c9t,DoubleLongLeftRightArrow:u9t,DoubleLongRightArrow:d9t,DoubleRightArrow:f9t,DoubleRightTee:h9t,DoubleUpArrow:p9t,DoubleUpDownArrow:m9t,DoubleVerticalBar:g9t,DownArrowBar:y9t,downarrow:v9t,DownArrow:b9t,Downarrow:k9t,DownArrowUpArrow:x9t,DownBreve:S9t,downdownarrows:w9t,downharpoonleft:$9t,downharpoonright:E9t,DownLeftRightVector:C9t,DownLeftTeeVector:M9t,DownLeftVectorBar:T9t,DownLeftVector:_9t,DownRightTeeVector:A9t,DownRightVectorBar:I9t,DownRightVector:R9t,DownTeeArrow:O9t,DownTee:P9t,drbkarow:D9t,drcorn:N9t,drcrop:F9t,Dscr:L9t,dscr:z9t,DScy:B9t,dscy:j9t,dsol:V9t,Dstrok:q9t,dstrok:K9t,dtdot:U9t,dtri:H9t,dtrif:W9t,duarr:G9t,duhar:J9t,dwangle:Q9t,DZcy:Y9t,dzcy:X9t,dzigrarr:Z9t,Eacute:ejt,eacute:tjt,easter:njt,Ecaron:rjt,ecaron:ijt,Ecirc:sjt,ecirc:ojt,ecir:ajt,ecolon:ljt,Ecy:cjt,ecy:ujt,eDDot:djt,Edot:fjt,edot:hjt,eDot:pjt,ee:mjt,efDot:gjt,Efr:yjt,efr:vjt,eg:bjt,Egrave:kjt,egrave:xjt,egs:Sjt,egsdot:wjt,el:$jt,Element:Ejt,elinters:Cjt,ell:Mjt,els:Tjt,elsdot:_jt,Emacr:Ajt,emacr:Ijt,empty:Rjt,emptyset:Ojt,EmptySmallSquare:Pjt,emptyv:Djt,EmptyVerySmallSquare:Njt,emsp13:Fjt,emsp14:Ljt,emsp:zjt,ENG:Bjt,eng:jjt,ensp:Vjt,Eogon:qjt,eogon:Kjt,Eopf:Ujt,eopf:Hjt,epar:Wjt,eparsl:Gjt,eplus:Jjt,epsi:Qjt,Epsilon:Yjt,epsilon:Xjt,epsiv:Zjt,eqcirc:eVt,eqcolon:tVt,eqsim:nVt,eqslantgtr:rVt,eqslantless:iVt,Equal:sVt,equals:oVt,EqualTilde:aVt,equest:lVt,Equilibrium:cVt,equiv:uVt,equivDD:dVt,eqvparsl:fVt,erarr:hVt,erDot:pVt,escr:mVt,Escr:gVt,esdot:yVt,Esim:vVt,esim:bVt,Eta:kVt,eta:xVt,ETH:SVt,eth:wVt,Euml:$Vt,euml:EVt,euro:CVt,excl:MVt,exist:TVt,Exists:_Vt,expectation:AVt,exponentiale:IVt,ExponentialE:RVt,fallingdotseq:OVt,Fcy:PVt,fcy:DVt,female:NVt,ffilig:FVt,fflig:LVt,ffllig:zVt,Ffr:BVt,ffr:jVt,filig:VVt,FilledSmallSquare:qVt,FilledVerySmallSquare:KVt,fjlig:UVt,flat:HVt,fllig:WVt,fltns:GVt,fnof:JVt,Fopf:QVt,fopf:YVt,forall:XVt,ForAll:ZVt,fork:eqt,forkv:tqt,Fouriertrf:nqt,fpartint:rqt,frac12:iqt,frac13:sqt,frac14:oqt,frac15:aqt,frac16:lqt,frac18:cqt,frac23:uqt,frac25:dqt,frac34:fqt,frac35:hqt,frac38:pqt,frac45:mqt,frac56:gqt,frac58:yqt,frac78:vqt,frasl:bqt,frown:kqt,fscr:xqt,Fscr:Sqt,gacute:wqt,Gamma:$qt,gamma:Eqt,Gammad:Cqt,gammad:Mqt,gap:Tqt,Gbreve:_qt,gbreve:Aqt,Gcedil:Iqt,Gcirc:Rqt,gcirc:Oqt,Gcy:Pqt,gcy:Dqt,Gdot:Nqt,gdot:Fqt,ge:Lqt,gE:zqt,gEl:Bqt,gel:jqt,geq:Vqt,geqq:qqt,geqslant:Kqt,gescc:Uqt,ges:Hqt,gesdot:Wqt,gesdoto:Gqt,gesdotol:Jqt,gesl:Qqt,gesles:Yqt,Gfr:Xqt,gfr:Zqt,gg:eKt,Gg:tKt,ggg:nKt,gimel:rKt,GJcy:iKt,gjcy:sKt,gla:oKt,gl:aKt,glE:lKt,glj:cKt,gnap:uKt,gnapprox:dKt,gne:fKt,gnE:hKt,gneq:pKt,gneqq:mKt,gnsim:gKt,Gopf:yKt,gopf:vKt,grave:bKt,GreaterEqual:kKt,GreaterEqualLess:xKt,GreaterFullEqual:SKt,GreaterGreater:wKt,GreaterLess:$Kt,GreaterSlantEqual:EKt,GreaterTilde:CKt,Gscr:MKt,gscr:TKt,gsim:_Kt,gsime:AKt,gsiml:IKt,gtcc:RKt,gtcir:OKt,gt:PKt,GT:DKt,Gt:NKt,gtdot:FKt,gtlPar:LKt,gtquest:zKt,gtrapprox:BKt,gtrarr:jKt,gtrdot:VKt,gtreqless:qKt,gtreqqless:KKt,gtrless:UKt,gtrsim:HKt,gvertneqq:WKt,gvnE:GKt,Hacek:JKt,hairsp:QKt,half:YKt,hamilt:XKt,HARDcy:ZKt,hardcy:eUt,harrcir:tUt,harr:nUt,hArr:rUt,harrw:iUt,Hat:sUt,hbar:oUt,Hcirc:aUt,hcirc:lUt,hearts:cUt,heartsuit:uUt,hellip:dUt,hercon:fUt,hfr:hUt,Hfr:pUt,HilbertSpace:mUt,hksearow:gUt,hkswarow:yUt,hoarr:vUt,homtht:bUt,hookleftarrow:kUt,hookrightarrow:xUt,hopf:SUt,Hopf:wUt,horbar:$Ut,HorizontalLine:EUt,hscr:CUt,Hscr:MUt,hslash:TUt,Hstrok:_Ut,hstrok:AUt,HumpDownHump:IUt,HumpEqual:RUt,hybull:OUt,hyphen:PUt,Iacute:DUt,iacute:NUt,ic:FUt,Icirc:LUt,icirc:zUt,Icy:BUt,icy:jUt,Idot:VUt,IEcy:qUt,iecy:KUt,iexcl:UUt,iff:HUt,ifr:WUt,Ifr:GUt,Igrave:JUt,igrave:QUt,ii:YUt,iiiint:XUt,iiint:ZUt,iinfin:eHt,iiota:tHt,IJlig:nHt,ijlig:rHt,Imacr:iHt,imacr:sHt,image:oHt,ImaginaryI:aHt,imagline:lHt,imagpart:cHt,imath:uHt,Im:dHt,imof:fHt,imped:hHt,Implies:pHt,incare:mHt,in:"",infin:gHt,infintie:yHt,inodot:vHt,intcal:bHt,int:kHt,Int:xHt,integers:SHt,Integral:wHt,intercal:$Ht,Intersection:EHt,intlarhk:CHt,intprod:MHt,InvisibleComma:THt,InvisibleTimes:_Ht,IOcy:AHt,iocy:IHt,Iogon:RHt,iogon:OHt,Iopf:PHt,iopf:DHt,Iota:NHt,iota:FHt,iprod:LHt,iquest:zHt,iscr:BHt,Iscr:jHt,isin:VHt,isindot:qHt,isinE:KHt,isins:UHt,isinsv:HHt,isinv:WHt,it:GHt,Itilde:JHt,itilde:QHt,Iukcy:YHt,iukcy:XHt,Iuml:ZHt,iuml:eWt,Jcirc:tWt,jcirc:nWt,Jcy:rWt,jcy:iWt,Jfr:sWt,jfr:oWt,jmath:aWt,Jopf:lWt,jopf:cWt,Jscr:uWt,jscr:dWt,Jsercy:fWt,jsercy:hWt,Jukcy:pWt,jukcy:mWt,Kappa:gWt,kappa:yWt,kappav:vWt,Kcedil:bWt,kcedil:kWt,Kcy:xWt,kcy:SWt,Kfr:wWt,kfr:$Wt,kgreen:EWt,KHcy:CWt,khcy:MWt,KJcy:TWt,kjcy:_Wt,Kopf:AWt,kopf:IWt,Kscr:RWt,kscr:OWt,lAarr:PWt,Lacute:DWt,lacute:NWt,laemptyv:FWt,lagran:LWt,Lambda:zWt,lambda:BWt,lang:jWt,Lang:VWt,langd:qWt,langle:KWt,lap:UWt,Laplacetrf:HWt,laquo:WWt,larrb:GWt,larrbfs:JWt,larr:QWt,Larr:YWt,lArr:XWt,larrfs:ZWt,larrhk:eGt,larrlp:tGt,larrpl:nGt,larrsim:rGt,larrtl:iGt,latail:sGt,lAtail:oGt,lat:aGt,late:lGt,lates:cGt,lbarr:uGt,lBarr:dGt,lbbrk:fGt,lbrace:hGt,lbrack:pGt,lbrke:mGt,lbrksld:gGt,lbrkslu:yGt,Lcaron:vGt,lcaron:bGt,Lcedil:kGt,lcedil:xGt,lceil:SGt,lcub:wGt,Lcy:$Gt,lcy:EGt,ldca:CGt,ldquo:MGt,ldquor:TGt,ldrdhar:_Gt,ldrushar:AGt,ldsh:IGt,le:RGt,lE:OGt,LeftAngleBracket:PGt,LeftArrowBar:DGt,leftarrow:NGt,LeftArrow:FGt,Leftarrow:LGt,LeftArrowRightArrow:zGt,leftarrowtail:BGt,LeftCeiling:jGt,LeftDoubleBracket:VGt,LeftDownTeeVector:qGt,LeftDownVectorBar:KGt,LeftDownVector:UGt,LeftFloor:HGt,leftharpoondown:WGt,leftharpoonup:GGt,leftleftarrows:JGt,leftrightarrow:QGt,LeftRightArrow:YGt,Leftrightarrow:XGt,leftrightarrows:ZGt,leftrightharpoons:eJt,leftrightsquigarrow:tJt,LeftRightVector:nJt,LeftTeeArrow:rJt,LeftTee:iJt,LeftTeeVector:sJt,leftthreetimes:oJt,LeftTriangleBar:aJt,LeftTriangle:lJt,LeftTriangleEqual:cJt,LeftUpDownVector:uJt,LeftUpTeeVector:dJt,LeftUpVectorBar:fJt,LeftUpVector:hJt,LeftVectorBar:pJt,LeftVector:mJt,lEg:gJt,leg:yJt,leq:vJt,leqq:bJt,leqslant:kJt,lescc:xJt,les:SJt,lesdot:wJt,lesdoto:$Jt,lesdotor:EJt,lesg:CJt,lesges:MJt,lessapprox:TJt,lessdot:_Jt,lesseqgtr:AJt,lesseqqgtr:IJt,LessEqualGreater:RJt,LessFullEqual:OJt,LessGreater:PJt,lessgtr:DJt,LessLess:NJt,lesssim:FJt,LessSlantEqual:LJt,LessTilde:zJt,lfisht:BJt,lfloor:jJt,Lfr:VJt,lfr:qJt,lg:KJt,lgE:UJt,lHar:HJt,lhard:WJt,lharu:GJt,lharul:JJt,lhblk:QJt,LJcy:YJt,ljcy:XJt,llarr:ZJt,ll:eQt,Ll:tQt,llcorner:nQt,Lleftarrow:rQt,llhard:iQt,lltri:sQt,Lmidot:oQt,lmidot:aQt,lmoustache:lQt,lmoust:cQt,lnap:uQt,lnapprox:dQt,lne:fQt,lnE:hQt,lneq:pQt,lneqq:mQt,lnsim:gQt,loang:yQt,loarr:vQt,lobrk:bQt,longleftarrow:kQt,LongLeftArrow:xQt,Longleftarrow:SQt,longleftrightarrow:wQt,LongLeftRightArrow:$Qt,Longleftrightarrow:EQt,longmapsto:CQt,longrightarrow:MQt,LongRightArrow:TQt,Longrightarrow:_Qt,looparrowleft:AQt,looparrowright:IQt,lopar:RQt,Lopf:OQt,lopf:PQt,loplus:DQt,lotimes:NQt,lowast:FQt,lowbar:LQt,LowerLeftArrow:zQt,LowerRightArrow:BQt,loz:jQt,lozenge:VQt,lozf:qQt,lpar:KQt,lparlt:UQt,lrarr:HQt,lrcorner:WQt,lrhar:GQt,lrhard:JQt,lrm:QQt,lrtri:YQt,lsaquo:XQt,lscr:ZQt,Lscr:eYt,lsh:tYt,Lsh:nYt,lsim:rYt,lsime:iYt,lsimg:sYt,lsqb:oYt,lsquo:aYt,lsquor:lYt,Lstrok:cYt,lstrok:uYt,ltcc:dYt,ltcir:fYt,lt:hYt,LT:pYt,Lt:mYt,ltdot:gYt,lthree:yYt,ltimes:vYt,ltlarr:bYt,ltquest:kYt,ltri:xYt,ltrie:SYt,ltrif:wYt,ltrPar:$Yt,lurdshar:EYt,luruhar:CYt,lvertneqq:MYt,lvnE:TYt,macr:_Yt,male:AYt,malt:IYt,maltese:RYt,Map:"",map:OYt,mapsto:PYt,mapstodown:DYt,mapstoleft:NYt,mapstoup:FYt,marker:LYt,mcomma:zYt,Mcy:BYt,mcy:jYt,mdash:VYt,mDDot:qYt,measuredangle:KYt,MediumSpace:UYt,Mellintrf:HYt,Mfr:WYt,mfr:GYt,mho:JYt,micro:QYt,midast:YYt,midcir:XYt,mid:ZYt,middot:eXt,minusb:tXt,minus:nXt,minusd:rXt,minusdu:iXt,MinusPlus:sXt,mlcp:oXt,mldr:aXt,mnplus:lXt,models:cXt,Mopf:uXt,mopf:dXt,mp:fXt,mscr:hXt,Mscr:pXt,mstpos:mXt,Mu:gXt,mu:yXt,multimap:vXt,mumap:bXt,nabla:kXt,Nacute:xXt,nacute:SXt,nang:wXt,nap:$Xt,napE:EXt,napid:CXt,napos:MXt,napprox:TXt,natural:_Xt,naturals:AXt,natur:IXt,nbsp:RXt,nbump:OXt,nbumpe:PXt,ncap:DXt,Ncaron:NXt,ncaron:FXt,Ncedil:LXt,ncedil:zXt,ncong:BXt,ncongdot:jXt,ncup:VXt,Ncy:qXt,ncy:KXt,ndash:UXt,nearhk:HXt,nearr:WXt,neArr:GXt,nearrow:JXt,ne:QXt,nedot:YXt,NegativeMediumSpace:XXt,NegativeThickSpace:ZXt,NegativeThinSpace:eZt,NegativeVeryThinSpace:tZt,nequiv:nZt,nesear:rZt,nesim:iZt,NestedGreaterGreater:sZt,NestedLessLess:oZt,NewLine:aZt,nexist:lZt,nexists:cZt,Nfr:uZt,nfr:dZt,ngE:fZt,nge:hZt,ngeq:pZt,ngeqq:mZt,ngeqslant:gZt,nges:yZt,nGg:vZt,ngsim:bZt,nGt:kZt,ngt:xZt,ngtr:SZt,nGtv:wZt,nharr:$Zt,nhArr:EZt,nhpar:CZt,ni:MZt,nis:TZt,nisd:_Zt,niv:AZt,NJcy:IZt,njcy:RZt,nlarr:OZt,nlArr:PZt,nldr:DZt,nlE:NZt,nle:FZt,nleftarrow:LZt,nLeftarrow:zZt,nleftrightarrow:BZt,nLeftrightarrow:jZt,nleq:VZt,nleqq:qZt,nleqslant:KZt,nles:UZt,nless:HZt,nLl:WZt,nlsim:GZt,nLt:JZt,nlt:QZt,nltri:YZt,nltrie:XZt,nLtv:ZZt,nmid:een,NoBreak:ten,NonBreakingSpace:nen,nopf:ren,Nopf:ien,Not:sen,not:oen,NotCongruent:aen,NotCupCap:len,NotDoubleVerticalBar:cen,NotElement:uen,NotEqual:den,NotEqualTilde:fen,NotExists:hen,NotGreater:pen,NotGreaterEqual:men,NotGreaterFullEqual:gen,NotGreaterGreater:yen,NotGreaterLess:ven,NotGreaterSlantEqual:ben,NotGreaterTilde:ken,NotHumpDownHump:xen,NotHumpEqual:Sen,notin:wen,notindot:$en,notinE:Een,notinva:Cen,notinvb:Men,notinvc:Ten,NotLeftTriangleBar:_en,NotLeftTriangle:Aen,NotLeftTriangleEqual:Ien,NotLess:Ren,NotLessEqual:Oen,NotLessGreater:Pen,NotLessLess:Den,NotLessSlantEqual:Nen,NotLessTilde:Fen,NotNestedGreaterGreater:Len,NotNestedLessLess:zen,notni:Ben,notniva:jen,notnivb:Ven,notnivc:qen,NotPrecedes:Ken,NotPrecedesEqual:Uen,NotPrecedesSlantEqual:Hen,NotReverseElement:Wen,NotRightTriangleBar:Gen,NotRightTriangle:Jen,NotRightTriangleEqual:Qen,NotSquareSubset:Yen,NotSquareSubsetEqual:Xen,NotSquareSuperset:Zen,NotSquareSupersetEqual:etn,NotSubset:ttn,NotSubsetEqual:ntn,NotSucceeds:rtn,NotSucceedsEqual:itn,NotSucceedsSlantEqual:stn,NotSucceedsTilde:otn,NotSuperset:atn,NotSupersetEqual:ltn,NotTilde:ctn,NotTildeEqual:utn,NotTildeFullEqual:dtn,NotTildeTilde:ftn,NotVerticalBar:htn,nparallel:ptn,npar:mtn,nparsl:gtn,npart:ytn,npolint:vtn,npr:btn,nprcue:ktn,nprec:xtn,npreceq:Stn,npre:wtn,nrarrc:$tn,nrarr:Etn,nrArr:Ctn,nrarrw:Mtn,nrightarrow:Ttn,nRightarrow:_tn,nrtri:Atn,nrtrie:Itn,nsc:Rtn,nsccue:Otn,nsce:Ptn,Nscr:Dtn,nscr:Ntn,nshortmid:Ftn,nshortparallel:Ltn,nsim:ztn,nsime:Btn,nsimeq:jtn,nsmid:Vtn,nspar:qtn,nsqsube:Ktn,nsqsupe:Utn,nsub:Htn,nsubE:Wtn,nsube:Gtn,nsubset:Jtn,nsubseteq:Qtn,nsubseteqq:Ytn,nsucc:Xtn,nsucceq:Ztn,nsup:enn,nsupE:tnn,nsupe:nnn,nsupset:rnn,nsupseteq:inn,nsupseteqq:snn,ntgl:onn,Ntilde:ann,ntilde:lnn,ntlg:cnn,ntriangleleft:unn,ntrianglelefteq:dnn,ntriangleright:fnn,ntrianglerighteq:hnn,Nu:pnn,nu:mnn,num:gnn,numero:ynn,numsp:vnn,nvap:bnn,nvdash:knn,nvDash:xnn,nVdash:Snn,nVDash:wnn,nvge:$nn,nvgt:Enn,nvHarr:Cnn,nvinfin:Mnn,nvlArr:Tnn,nvle:_nn,nvlt:Ann,nvltrie:Inn,nvrArr:Rnn,nvrtrie:Onn,nvsim:Pnn,nwarhk:Dnn,nwarr:Nnn,nwArr:Fnn,nwarrow:Lnn,nwnear:znn,Oacute:Bnn,oacute:jnn,oast:Vnn,Ocirc:qnn,ocirc:Knn,ocir:Unn,Ocy:Hnn,ocy:Wnn,odash:Gnn,Odblac:Jnn,odblac:Qnn,odiv:Ynn,odot:Xnn,odsold:Znn,OElig:ern,oelig:trn,ofcir:nrn,Ofr:rrn,ofr:irn,ogon:srn,Ograve:orn,ograve:arn,ogt:lrn,ohbar:crn,ohm:urn,oint:drn,olarr:frn,olcir:hrn,olcross:prn,oline:mrn,olt:grn,Omacr:yrn,omacr:vrn,Omega:brn,omega:krn,Omicron:xrn,omicron:Srn,omid:wrn,ominus:$rn,Oopf:Ern,oopf:Crn,opar:Mrn,OpenCurlyDoubleQuote:Trn,OpenCurlyQuote:_rn,operp:Arn,oplus:Irn,orarr:Rrn,Or:Orn,or:Prn,ord:Drn,order:Nrn,orderof:Frn,ordf:Lrn,ordm:zrn,origof:Brn,oror:jrn,orslope:Vrn,orv:qrn,oS:Krn,Oscr:Urn,oscr:Hrn,Oslash:Wrn,oslash:Grn,osol:Jrn,Otilde:Qrn,otilde:Yrn,otimesas:Xrn,Otimes:Zrn,otimes:ein,Ouml:tin,ouml:nin,ovbar:rin,OverBar:iin,OverBrace:sin,OverBracket:oin,OverParenthesis:ain,para:lin,parallel:cin,par:uin,parsim:din,parsl:fin,part:hin,PartialD:pin,Pcy:min,pcy:gin,percnt:yin,period:vin,permil:bin,perp:kin,pertenk:xin,Pfr:Sin,pfr:win,Phi:$in,phi:Ein,phiv:Cin,phmmat:Min,phone:Tin,Pi:_in,pi:Ain,pitchfork:Iin,piv:Rin,planck:Oin,planckh:Pin,plankv:Din,plusacir:Nin,plusb:Fin,pluscir:Lin,plus:zin,plusdo:Bin,plusdu:jin,pluse:Vin,PlusMinus:qin,plusmn:Kin,plussim:Uin,plustwo:Hin,pm:Win,Poincareplane:Gin,pointint:Jin,popf:Qin,Popf:Yin,pound:Xin,prap:Zin,Pr:esn,pr:tsn,prcue:nsn,precapprox:rsn,prec:isn,preccurlyeq:ssn,Precedes:osn,PrecedesEqual:asn,PrecedesSlantEqual:lsn,PrecedesTilde:csn,preceq:usn,precnapprox:dsn,precneqq:fsn,precnsim:hsn,pre:psn,prE:msn,precsim:gsn,prime:ysn,Prime:vsn,primes:bsn,prnap:ksn,prnE:xsn,prnsim:Ssn,prod:wsn,Product:$sn,profalar:Esn,profline:Csn,profsurf:Msn,prop:Tsn,Proportional:_sn,Proportion:Asn,propto:Isn,prsim:Rsn,prurel:Osn,Pscr:Psn,pscr:Dsn,Psi:Nsn,psi:Fsn,puncsp:Lsn,Qfr:zsn,qfr:Bsn,qint:jsn,qopf:Vsn,Qopf:qsn,qprime:Ksn,Qscr:Usn,qscr:Hsn,quaternions:Wsn,quatint:Gsn,quest:Jsn,questeq:Qsn,quot:Ysn,QUOT:Xsn,rAarr:Zsn,race:eon,Racute:ton,racute:non,radic:ron,raemptyv:ion,rang:son,Rang:oon,rangd:aon,range:lon,rangle:con,raquo:uon,rarrap:don,rarrb:fon,rarrbfs:hon,rarrc:pon,rarr:mon,Rarr:gon,rArr:yon,rarrfs:von,rarrhk:bon,rarrlp:kon,rarrpl:xon,rarrsim:Son,Rarrtl:won,rarrtl:$on,rarrw:Eon,ratail:Con,rAtail:Mon,ratio:Ton,rationals:_on,rbarr:Aon,rBarr:Ion,RBarr:Ron,rbbrk:Oon,rbrace:Pon,rbrack:Don,rbrke:Non,rbrksld:Fon,rbrkslu:Lon,Rcaron:zon,rcaron:Bon,Rcedil:jon,rcedil:Von,rceil:qon,rcub:Kon,Rcy:Uon,rcy:Hon,rdca:Won,rdldhar:Gon,rdquo:Jon,rdquor:Qon,rdsh:Yon,real:Xon,realine:Zon,realpart:ean,reals:tan,Re:nan,rect:ran,reg:ian,REG:san,ReverseElement:oan,ReverseEquilibrium:aan,ReverseUpEquilibrium:lan,rfisht:can,rfloor:uan,rfr:dan,Rfr:fan,rHar:han,rhard:pan,rharu:man,rharul:gan,Rho:yan,rho:van,rhov:ban,RightAngleBracket:kan,RightArrowBar:xan,rightarrow:San,RightArrow:wan,Rightarrow:$an,RightArrowLeftArrow:Ean,rightarrowtail:Can,RightCeiling:Man,RightDoubleBracket:Tan,RightDownTeeVector:_an,RightDownVectorBar:Aan,RightDownVector:Ian,RightFloor:Ran,rightharpoondown:Oan,rightharpoonup:Pan,rightleftarrows:Dan,rightleftharpoons:Nan,rightrightarrows:Fan,rightsquigarrow:Lan,RightTeeArrow:zan,RightTee:Ban,RightTeeVector:jan,rightthreetimes:Van,RightTriangleBar:qan,RightTriangle:Kan,RightTriangleEqual:Uan,RightUpDownVector:Han,RightUpTeeVector:Wan,RightUpVectorBar:Gan,RightUpVector:Jan,RightVectorBar:Qan,RightVector:Yan,ring:Xan,risingdotseq:Zan,rlarr:eln,rlhar:tln,rlm:nln,rmoustache:rln,rmoust:iln,rnmid:sln,roang:oln,roarr:aln,robrk:lln,ropar:cln,ropf:uln,Ropf:dln,roplus:fln,rotimes:hln,RoundImplies:pln,rpar:mln,rpargt:gln,rppolint:yln,rrarr:vln,Rrightarrow:bln,rsaquo:kln,rscr:xln,Rscr:Sln,rsh:wln,Rsh:$ln,rsqb:Eln,rsquo:Cln,rsquor:Mln,rthree:Tln,rtimes:_ln,rtri:Aln,rtrie:Iln,rtrif:Rln,rtriltri:Oln,RuleDelayed:Pln,ruluhar:Dln,rx:Nln,Sacute:Fln,sacute:Lln,sbquo:zln,scap:Bln,Scaron:jln,scaron:Vln,Sc:qln,sc:Kln,sccue:Uln,sce:Hln,scE:Wln,Scedil:Gln,scedil:Jln,Scirc:Qln,scirc:Yln,scnap:Xln,scnE:Zln,scnsim:ecn,scpolint:tcn,scsim:ncn,Scy:rcn,scy:icn,sdotb:scn,sdot:ocn,sdote:acn,searhk:lcn,searr:ccn,seArr:ucn,searrow:dcn,sect:fcn,semi:hcn,seswar:pcn,setminus:mcn,setmn:gcn,sext:ycn,Sfr:vcn,sfr:bcn,sfrown:kcn,sharp:xcn,SHCHcy:Scn,shchcy:wcn,SHcy:$cn,shcy:Ecn,ShortDownArrow:Ccn,ShortLeftArrow:Mcn,shortmid:Tcn,shortparallel:_cn,ShortRightArrow:Acn,ShortUpArrow:Icn,shy:Rcn,Sigma:Ocn,sigma:Pcn,sigmaf:Dcn,sigmav:Ncn,sim:Fcn,simdot:Lcn,sime:zcn,simeq:Bcn,simg:jcn,simgE:Vcn,siml:qcn,simlE:Kcn,simne:Ucn,simplus:Hcn,simrarr:Wcn,slarr:Gcn,SmallCircle:Jcn,smallsetminus:Qcn,smashp:Ycn,smeparsl:Xcn,smid:Zcn,smile:eun,smt:tun,smte:nun,smtes:run,SOFTcy:iun,softcy:sun,solbar:oun,solb:aun,sol:lun,Sopf:cun,sopf:uun,spades:dun,spadesuit:fun,spar:hun,sqcap:pun,sqcaps:mun,sqcup:gun,sqcups:yun,Sqrt:vun,sqsub:bun,sqsube:kun,sqsubset:xun,sqsubseteq:Sun,sqsup:wun,sqsupe:$un,sqsupset:Eun,sqsupseteq:Cun,square:Mun,Square:Tun,SquareIntersection:_un,SquareSubset:Aun,SquareSubsetEqual:Iun,SquareSuperset:Run,SquareSupersetEqual:Oun,SquareUnion:Pun,squarf:Dun,squ:Nun,squf:Fun,srarr:Lun,Sscr:zun,sscr:Bun,ssetmn:jun,ssmile:Vun,sstarf:qun,Star:Kun,star:Uun,starf:Hun,straightepsilon:Wun,straightphi:Gun,strns:Jun,sub:Qun,Sub:Yun,subdot:Xun,subE:Zun,sube:edn,subedot:tdn,submult:ndn,subnE:rdn,subne:idn,subplus:sdn,subrarr:odn,subset:adn,Subset:ldn,subseteq:cdn,subseteqq:udn,SubsetEqual:ddn,subsetneq:fdn,subsetneqq:hdn,subsim:pdn,subsub:mdn,subsup:gdn,succapprox:ydn,succ:vdn,succcurlyeq:bdn,Succeeds:kdn,SucceedsEqual:xdn,SucceedsSlantEqual:Sdn,SucceedsTilde:wdn,succeq:$dn,succnapprox:Edn,succneqq:Cdn,succnsim:Mdn,succsim:Tdn,SuchThat:_dn,sum:Adn,Sum:Idn,sung:Rdn,sup1:Odn,sup2:Pdn,sup3:Ddn,sup:Ndn,Sup:Fdn,supdot:Ldn,supdsub:zdn,supE:Bdn,supe:jdn,supedot:Vdn,Superset:qdn,SupersetEqual:Kdn,suphsol:Udn,suphsub:Hdn,suplarr:Wdn,supmult:Gdn,supnE:Jdn,supne:Qdn,supplus:Ydn,supset:Xdn,Supset:Zdn,supseteq:efn,supseteqq:tfn,supsetneq:nfn,supsetneqq:rfn,supsim:ifn,supsub:sfn,supsup:ofn,swarhk:afn,swarr:lfn,swArr:cfn,swarrow:ufn,swnwar:dfn,szlig:ffn,Tab:hfn,target:pfn,Tau:mfn,tau:gfn,tbrk:yfn,Tcaron:vfn,tcaron:bfn,Tcedil:kfn,tcedil:xfn,Tcy:Sfn,tcy:wfn,tdot:$fn,telrec:Efn,Tfr:Cfn,tfr:Mfn,there4:Tfn,therefore:_fn,Therefore:Afn,Theta:Ifn,theta:Rfn,thetasym:Ofn,thetav:Pfn,thickapprox:Dfn,thicksim:Nfn,ThickSpace:Ffn,ThinSpace:Lfn,thinsp:zfn,thkap:Bfn,thksim:jfn,THORN:Vfn,thorn:qfn,tilde:Kfn,Tilde:Ufn,TildeEqual:Hfn,TildeFullEqual:Wfn,TildeTilde:Gfn,timesbar:Jfn,timesb:Qfn,times:Yfn,timesd:Xfn,tint:Zfn,toea:ehn,topbot:thn,topcir:nhn,top:rhn,Topf:ihn,topf:shn,topfork:ohn,tosa:ahn,tprime:lhn,trade:chn,TRADE:uhn,triangle:dhn,triangledown:fhn,triangleleft:hhn,trianglelefteq:phn,triangleq:mhn,triangleright:ghn,trianglerighteq:yhn,tridot:vhn,trie:bhn,triminus:khn,TripleDot:xhn,triplus:Shn,trisb:whn,tritime:$hn,trpezium:Ehn,Tscr:Chn,tscr:Mhn,TScy:Thn,tscy:_hn,TSHcy:Ahn,tshcy:Ihn,Tstrok:Rhn,tstrok:Ohn,twixt:Phn,twoheadleftarrow:Dhn,twoheadrightarrow:Nhn,Uacute:Fhn,uacute:Lhn,uarr:zhn,Uarr:Bhn,uArr:jhn,Uarrocir:Vhn,Ubrcy:qhn,ubrcy:Khn,Ubreve:Uhn,ubreve:Hhn,Ucirc:Whn,ucirc:Ghn,Ucy:Jhn,ucy:Qhn,udarr:Yhn,Udblac:Xhn,udblac:Zhn,udhar:epn,ufisht:tpn,Ufr:npn,ufr:rpn,Ugrave:ipn,ugrave:spn,uHar:opn,uharl:apn,uharr:lpn,uhblk:cpn,ulcorn:upn,ulcorner:dpn,ulcrop:fpn,ultri:hpn,Umacr:ppn,umacr:mpn,uml:gpn,UnderBar:ypn,UnderBrace:vpn,UnderBracket:bpn,UnderParenthesis:kpn,Union:xpn,UnionPlus:Spn,Uogon:wpn,uogon:$pn,Uopf:Epn,uopf:Cpn,UpArrowBar:Mpn,uparrow:Tpn,UpArrow:_pn,Uparrow:Apn,UpArrowDownArrow:Ipn,updownarrow:Rpn,UpDownArrow:Opn,Updownarrow:Ppn,UpEquilibrium:Dpn,upharpoonleft:Npn,upharpoonright:Fpn,uplus:Lpn,UpperLeftArrow:zpn,UpperRightArrow:Bpn,upsi:jpn,Upsi:Vpn,upsih:qpn,Upsilon:Kpn,upsilon:Upn,UpTeeArrow:Hpn,UpTee:Wpn,upuparrows:Gpn,urcorn:Jpn,urcorner:Qpn,urcrop:Ypn,Uring:Xpn,uring:Zpn,urtri:emn,Uscr:tmn,uscr:nmn,utdot:rmn,Utilde:imn,utilde:smn,utri:omn,utrif:amn,uuarr:lmn,Uuml:cmn,uuml:umn,uwangle:dmn,vangrt:fmn,varepsilon:hmn,varkappa:pmn,varnothing:mmn,varphi:gmn,varpi:ymn,varpropto:vmn,varr:bmn,vArr:kmn,varrho:xmn,varsigma:Smn,varsubsetneq:wmn,varsubsetneqq:$mn,varsupsetneq:Emn,varsupsetneqq:Cmn,vartheta:Mmn,vartriangleleft:Tmn,vartriangleright:_mn,vBar:Amn,Vbar:Imn,vBarv:Rmn,Vcy:Omn,vcy:Pmn,vdash:Dmn,vDash:Nmn,Vdash:Fmn,VDash:Lmn,Vdashl:zmn,veebar:Bmn,vee:jmn,Vee:Vmn,veeeq:qmn,vellip:Kmn,verbar:Umn,Verbar:Hmn,vert:Wmn,Vert:Gmn,VerticalBar:Jmn,VerticalLine:Qmn,VerticalSeparator:Ymn,VerticalTilde:Xmn,VeryThinSpace:Zmn,Vfr:egn,vfr:tgn,vltri:ngn,vnsub:rgn,vnsup:ign,Vopf:sgn,vopf:ogn,vprop:agn,vrtri:lgn,Vscr:cgn,vscr:ugn,vsubnE:dgn,vsubne:fgn,vsupnE:hgn,vsupne:pgn,Vvdash:mgn,vzigzag:ggn,Wcirc:ygn,wcirc:vgn,wedbar:bgn,wedge:kgn,Wedge:xgn,wedgeq:Sgn,weierp:wgn,Wfr:$gn,wfr:Egn,Wopf:Cgn,wopf:Mgn,wp:Tgn,wr:_gn,wreath:Agn,Wscr:Ign,wscr:Rgn,xcap:Ogn,xcirc:Pgn,xcup:Dgn,xdtri:Ngn,Xfr:Fgn,xfr:Lgn,xharr:zgn,xhArr:Bgn,Xi:jgn,xi:Vgn,xlarr:qgn,xlArr:Kgn,xmap:Ugn,xnis:Hgn,xodot:Wgn,Xopf:Ggn,xopf:Jgn,xoplus:Qgn,xotime:Ygn,xrarr:Xgn,xrArr:Zgn,Xscr:e0n,xscr:t0n,xsqcup:n0n,xuplus:r0n,xutri:i0n,xvee:s0n,xwedge:o0n,Yacute:a0n,yacute:l0n,YAcy:c0n,yacy:u0n,Ycirc:d0n,ycirc:f0n,Ycy:h0n,ycy:p0n,yen:m0n,Yfr:g0n,yfr:y0n,YIcy:v0n,yicy:b0n,Yopf:k0n,yopf:x0n,Yscr:S0n,yscr:w0n,YUcy:$0n,yucy:E0n,yuml:C0n,Yuml:M0n,Zacute:T0n,zacute:_0n,Zcaron:A0n,zcaron:I0n,Zcy:R0n,zcy:O0n,Zdot:P0n,zdot:D0n,zeetrf:N0n,ZeroWidthSpace:F0n,Zeta:L0n,zeta:z0n,zfr:B0n,Zfr:j0n,ZHcy:V0n,zhcy:q0n,zigrarr:K0n,zopf:U0n,Zopf:H0n,Zscr:W0n,zscr:G0n,zwj:J0n,zwnj:Q0n};var _be=Y0n,L9=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,ey={},wZ={};function X0n(n){var e,t,r=wZ[n];if(r)return r;for(r=wZ[n]=[],e=0;e<128;e++)t=String.fromCharCode(e),/^[0-9a-z]$/i.test(t)?r.push(t):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<n.length;e++)r[n.charCodeAt(e)]=n[e];return r}function TA(n,e,t){var r,i,s,o,a,l="";for(typeof e!="string"&&(t=e,e=TA.defaultChars),typeof t>"u"&&(t=!0),a=X0n(e),r=0,i=n.length;r<i;r++){if(s=n.charCodeAt(r),t&&s===37&&r+2<i&&/^[0-9a-f]{2}$/i.test(n.slice(r+1,r+3))){l+=n.slice(r,r+3),r+=2;continue}if(s<128){l+=a[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&r+1<i&&(o=n.charCodeAt(r+1),o>=56320&&o<=57343)){l+=encodeURIComponent(n[r]+n[r+1]),r++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(n[r])}return l}TA.defaultChars=";/?:@&=+$,-_.!~*'()#";TA.componentChars="-_.!~*'()";var Z0n=TA,$Z={};function eyn(n){var e,t,r=$Z[n];if(r)return r;for(r=$Z[n]=[],e=0;e<128;e++)t=String.fromCharCode(e),r.push(t);for(e=0;e<n.length;e++)t=n.charCodeAt(e),r[t]="%"+("0"+t.toString(16).toUpperCase()).slice(-2);return r}function _A(n,e){var t;return typeof e!="string"&&(e=_A.defaultChars),t=eyn(e),n.replace(/(%[a-f0-9]{2})+/gi,function(r){var i,s,o,a,l,c,u,d="";for(i=0,s=r.length;i<s;i+=3){if(o=parseInt(r.slice(i+1,i+3),16),o<128){d+=t[o];continue}if((o&224)===192&&i+3<s&&(a=parseInt(r.slice(i+4,i+6),16),(a&192)===128)){u=o<<6&1984|a&63,u<128?d+="":d+=String.fromCharCode(u),i+=3;continue}if((o&240)===224&&i+6<s&&(a=parseInt(r.slice(i+4,i+6),16),l=parseInt(r.slice(i+7,i+9),16),(a&192)===128&&(l&192)===128)){u=o<<12&61440|a<<6&4032|l&63,u<2048||u>=55296&&u<=57343?d+="":d+=String.fromCharCode(u),i+=6;continue}if((o&248)===240&&i+9<s&&(a=parseInt(r.slice(i+4,i+6),16),l=parseInt(r.slice(i+7,i+9),16),c=parseInt(r.slice(i+10,i+12),16),(a&192)===128&&(l&192)===128&&(c&192)===128)){u=o<<18&1835008|a<<12&258048|l<<6&4032|c&63,u<65536||u>1114111?d+="":(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),i+=9;continue}d+=""}return d})}_A.defaultChars=";/?:@&=+$,#";_A.componentChars="";var tyn=_A,nyn=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t};function IT(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var ryn=/^([a-z0-9.+-]+:)/i,iyn=/:[0-9]*$/,syn=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,oyn=["<",">",'"',"`"," ","\r",`
`,"	"],ayn=["{","}","|","\\","^","`"].concat(oyn),lyn=["'"].concat(ayn),EZ=["%","/","?",";","#"].concat(lyn),CZ=["/","?","#"],cyn=255,MZ=/^[+a-z0-9A-Z_-]{0,63}$/,uyn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,TZ={javascript:!0,"javascript:":!0},_Z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function dyn(n,e){if(n&&n instanceof IT)return n;var t=new IT;return t.parse(n,e),t}IT.prototype.parse=function(n,e){var t,r,i,s,o,a=n;if(a=a.trim(),!e&&n.split("#").length===1){var l=syn.exec(a);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}var c=ryn.exec(a);if(c&&(c=c[0],i=c.toLowerCase(),this.protocol=c,a=a.substr(c.length)),(e||c||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(o=a.substr(0,2)==="//",o&&!(c&&TZ[c])&&(a=a.substr(2),this.slashes=!0)),!TZ[c]&&(o||c&&!_Z[c])){var u=-1;for(t=0;t<CZ.length;t++)s=a.indexOf(CZ[t]),s!==-1&&(u===-1||s<u)&&(u=s);var d,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=d),u=-1,t=0;t<EZ.length;t++)s=a.indexOf(EZ[t]),s!==-1&&(u===-1||s<u)&&(u=s);u===-1&&(u=a.length),a[u-1]===":"&&u--;var h=a.slice(0,u);a=a.slice(u),this.parseHost(h),this.hostname=this.hostname||"";var p=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!p){var m=this.hostname.split(/\./);for(t=0,r=m.length;t<r;t++){var g=m[t];if(g&&!g.match(MZ)){for(var y="",k=0,b=g.length;k<b;k++)g.charCodeAt(k)>127?y+="x":y+=g[k];if(!y.match(MZ)){var S=m.slice(0,t),w=m.slice(t+1),x=g.match(uyn);x&&(S.push(x[1]),w.unshift(x[2])),w.length&&(a=w.join(".")+a),this.hostname=S.join(".");break}}}}this.hostname.length>cyn&&(this.hostname=""),p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var $=a.indexOf("#");$!==-1&&(this.hash=a.substr($),a=a.slice(0,$));var E=a.indexOf("?");return E!==-1&&(this.search=a.substr(E),a=a.slice(0,E)),a&&(this.pathname=a),_Z[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};IT.prototype.parseHost=function(n){var e=iyn.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};var fyn=dyn;ey.encode=Z0n;ey.decode=tyn;ey.format=nyn;ey.parse=fyn;var Sf={},FP,AZ;function Abe(){return AZ||(AZ=1,FP=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),FP}var LP,IZ;function Ibe(){return IZ||(IZ=1,LP=/[\0-\x1F\x7F-\x9F]/),LP}var zP,RZ;function hyn(){return RZ||(RZ=1,zP=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),zP}var BP,OZ;function Rbe(){return OZ||(OZ=1,BP=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),BP}var PZ;function pyn(){return PZ||(PZ=1,Sf.Any=Abe(),Sf.Cc=Ibe(),Sf.Cf=hyn(),Sf.P=L9,Sf.Z=Rbe()),Sf}(function(n){function e(T){return Object.prototype.toString.call(T)}function t(T){return e(T)==="[object String]"}var r=Object.prototype.hasOwnProperty;function i(T,R){return r.call(T,R)}function s(T){var R=Array.prototype.slice.call(arguments,1);return R.forEach(function(A){if(A){if(typeof A!="object")throw new TypeError(A+"must be object");Object.keys(A).forEach(function(L){T[L]=A[L]})}}),T}function o(T,R,A){return[].concat(T.slice(0,R),A,T.slice(R+1))}function a(T){return!(T>=55296&&T<=57343||T>=64976&&T<=65007||(T&65535)===65535||(T&65535)===65534||T>=0&&T<=8||T===11||T>=14&&T<=31||T>=127&&T<=159||T>1114111)}function l(T){if(T>65535){T-=65536;var R=55296+(T>>10),A=56320+(T&1023);return String.fromCharCode(R,A)}return String.fromCharCode(T)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=/&([a-z#][a-z0-9]{1,31});/gi,d=new RegExp(c.source+"|"+u.source,"gi"),f=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,h=_be;function p(T,R){var A;return i(h,R)?h[R]:R.charCodeAt(0)===35&&f.test(R)&&(A=R[1].toLowerCase()==="x"?parseInt(R.slice(2),16):parseInt(R.slice(1),10),a(A))?l(A):T}function m(T){return T.indexOf("\\")<0?T:T.replace(c,"$1")}function g(T){return T.indexOf("\\")<0&&T.indexOf("&")<0?T:T.replace(d,function(R,A,L){return A||p(R,L)})}var y=/[&<>"]/,k=/[&<>"]/g,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function S(T){return b[T]}function w(T){return y.test(T)?T.replace(k,S):T}var x=/[.?*+^$[\]\\(){}|-]/g;function $(T){return T.replace(x,"\\$&")}function E(T){switch(T){case 9:case 32:return!0}return!1}function C(T){if(T>=8192&&T<=8202)return!0;switch(T){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var M=L9;function P(T){return M.test(T)}function I(T){switch(T){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function N(T){return T=T.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(T=T.replace(//g,"")),T.toLowerCase().toUpperCase()}n.lib={},n.lib.mdurl=ey,n.lib.ucmicro=pyn(),n.assign=s,n.isString=t,n.has=i,n.unescapeMd=m,n.unescapeAll=g,n.isValidEntityCode=a,n.fromCodePoint=l,n.escapeHtml=w,n.arrayReplaceAt=o,n.isSpace=E,n.isWhiteSpace=C,n.isMdAsciiPunct=I,n.isPunctChar=P,n.escapeRE=$,n.normalizeReference=N})(ut);var AA={},myn=function(e,t,r){var i,s,o,a,l=-1,c=e.posMax,u=e.pos;for(e.pos=t+1,i=1;e.pos<c;){if(o=e.src.charCodeAt(e.pos),o===93&&(i--,i===0)){s=!0;break}if(a=e.pos,e.md.inline.skipToken(e),o===91){if(a===e.pos-1)i++;else if(r)return e.pos=u,-1}}return s&&(l=e.pos),e.pos=u,l},DZ=ut.unescapeAll,gyn=function(e,t,r){var i,s,o=t,a={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(o)===60){for(o++;o<r;){if(i=e.charCodeAt(o),i===10||i===60)return a;if(i===62)return a.pos=o+1,a.str=DZ(e.slice(t+1,o)),a.ok=!0,a;if(i===92&&o+1<r){o+=2;continue}o++}return a}for(s=0;o<r&&(i=e.charCodeAt(o),!(i===32||i<32||i===127));){if(i===92&&o+1<r){if(e.charCodeAt(o+1)===32)break;o+=2;continue}if(i===40&&(s++,s>32))return a;if(i===41){if(s===0)break;s--}o++}return t===o||s!==0||(a.str=DZ(e.slice(t,o)),a.pos=o,a.ok=!0),a},yyn=ut.unescapeAll,vyn=function(e,t,r){var i,s,o=0,a=t,l={ok:!1,pos:0,lines:0,str:""};if(a>=r||(s=e.charCodeAt(a),s!==34&&s!==39&&s!==40))return l;for(a++,s===40&&(s=41);a<r;){if(i=e.charCodeAt(a),i===s)return l.pos=a+1,l.lines=o,l.str=yyn(e.slice(t+1,a)),l.ok=!0,l;if(i===40&&s===41)return l;i===10?o++:i===92&&a+1<r&&(a++,e.charCodeAt(a)===10&&o++),a++}return l};AA.parseLinkLabel=myn;AA.parseLinkDestination=gyn;AA.parseLinkTitle=vyn;var byn=ut.assign,kyn=ut.unescapeAll,np=ut.escapeHtml,vc={};vc.code_inline=function(n,e,t,r,i){var s=n[e];return"<code"+i.renderAttrs(s)+">"+np(s.content)+"</code>"};vc.code_block=function(n,e,t,r,i){var s=n[e];return"<pre"+i.renderAttrs(s)+"><code>"+np(n[e].content)+`</code></pre>
`};vc.fence=function(n,e,t,r,i){var s=n[e],o=s.info?kyn(s.info).trim():"",a="",l="",c,u,d,f,h;return o&&(d=o.split(/(\s+)/g),a=d[0],l=d.slice(2).join("")),t.highlight?c=t.highlight(s.content,a,l)||np(s.content):c=np(s.content),c.indexOf("<pre")===0?c+`
`:o?(u=s.attrIndex("class"),f=s.attrs?s.attrs.slice():[],u<0?f.push(["class",t.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+t.langPrefix+a),h={attrs:f},"<pre><code"+i.renderAttrs(h)+">"+c+`</code></pre>
`):"<pre><code"+i.renderAttrs(s)+">"+c+`</code></pre>
`};vc.image=function(n,e,t,r,i){var s=n[e];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,t,r),i.renderToken(n,e,t)};vc.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};vc.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};vc.text=function(n,e){return np(n[e].content)};vc.html_block=function(n,e){return n[e].content};vc.html_inline=function(n,e){return n[e].content};function ty(){this.rules=byn({},vc)}ty.prototype.renderAttrs=function(e){var t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+np(e.attrs[t][0])+'="'+np(e.attrs[t][1])+'"';return i};ty.prototype.renderToken=function(e,t,r){var i,s="",o=!1,a=e[t];return a.hidden?"":(a.block&&a.nesting!==-1&&t&&e[t-1].hidden&&(s+=`
`),s+=(a.nesting===-1?"</":"<")+a.tag,s+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(s+=" /"),a.block&&(o=!0,a.nesting===1&&t+1<e.length&&(i=e[t+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(o=!1))),s+=o?`>
`:">",s)};ty.prototype.renderInline=function(n,e,t){for(var r,i="",s=this.rules,o=0,a=n.length;o<a;o++)r=n[o].type,typeof s[r]<"u"?i+=s[r](n,o,e,t,this):i+=this.renderToken(n,o,e);return i};ty.prototype.renderInlineAsText=function(n,e,t){for(var r="",i=0,s=n.length;i<s;i++)n[i].type==="text"?r+=n[i].content:n[i].type==="image"?r+=this.renderInlineAsText(n[i].children,e,t):n[i].type==="softbreak"&&(r+=`
`);return r};ty.prototype.render=function(n,e,t){var r,i,s,o="",a=this.rules;for(r=0,i=n.length;r<i;r++)s=n[r].type,s==="inline"?o+=this.renderInline(n[r].children,e,t):typeof a[s]<"u"?o+=a[s](n,r,e,t,this):o+=this.renderToken(n,r,e,t);return o};var xyn=ty;function ll(){this.__rules__=[],this.__cache__=null}ll.prototype.__find__=function(n){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};ll.prototype.__compile__=function(){var n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};ll.prototype.at=function(n,e,t){var r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};ll.prototype.before=function(n,e,t,r){var i=this.__find__(n),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};ll.prototype.after=function(n,e,t,r){var i=this.__find__(n),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};ll.prototype.push=function(n,e,t){var r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};ll.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);var t=[];return n.forEach(function(r){var i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};ll.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};ll.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);var t=[];return n.forEach(function(r){var i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};ll.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};var z9=ll,Syn=/\r\n?|\n/g,wyn=/\0/g,$yn=function(e){var t;t=e.src.replace(Syn,`
`),t=t.replace(wyn,""),e.src=t},Eyn=function(e){var t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)},Cyn=function(e){var t=e.tokens,r,i,s;for(i=0,s=t.length;i<s;i++)r=t[i],r.type==="inline"&&e.md.inline.parse(r.content,e.md,e.env,r.children)},Myn=ut.arrayReplaceAt;function Tyn(n){return/^<a[>\s]/i.test(n)}function _yn(n){return/^<\/a\s*>/i.test(n)}var Ayn=function(e){var t,r,i,s,o,a,l,c,u,d,f,h,p,m,g,y,k=e.tokens,b;if(e.md.options.linkify){for(r=0,i=k.length;r<i;r++)if(!(k[r].type!=="inline"||!e.md.linkify.pretest(k[r].content)))for(s=k[r].children,p=0,t=s.length-1;t>=0;t--){if(a=s[t],a.type==="link_close"){for(t--;s[t].level!==a.level&&s[t].type!=="link_open";)t--;continue}if(a.type==="html_inline"&&(Tyn(a.content)&&p>0&&p--,_yn(a.content)&&p++),!(p>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,b=e.md.linkify.match(u),l=[],h=a.level,f=0,b.length>0&&b[0].index===0&&t>0&&s[t-1].type==="text_special"&&(b=b.slice(1)),c=0;c<b.length;c++)m=b[c].url,g=e.md.normalizeLink(m),e.md.validateLink(g)&&(y=b[c].text,b[c].schema?b[c].schema==="mailto:"&&!/^mailto:/i.test(y)?y=e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):y=e.md.normalizeLinkText(y):y=e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,""),d=b[c].index,d>f&&(o=new e.Token("text","",0),o.content=u.slice(f,d),o.level=h,l.push(o)),o=new e.Token("link_open","a",1),o.attrs=[["href",g]],o.level=h++,o.markup="linkify",o.info="auto",l.push(o),o=new e.Token("text","",0),o.content=y,o.level=h,l.push(o),o=new e.Token("link_close","a",-1),o.level=--h,o.markup="linkify",o.info="auto",l.push(o),f=b[c].lastIndex);f<u.length&&(o=new e.Token("text","",0),o.content=u.slice(f),o.level=h,l.push(o)),k[r].children=s=Myn(s,t,l)}}}},Obe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Iyn=/\((c|tm|r)\)/i,Ryn=/\((c|tm|r)\)/ig,Oyn={c:"",r:"",tm:""};function Pyn(n,e){return Oyn[e.toLowerCase()]}function Dyn(n){var e,t,r=0;for(e=n.length-1;e>=0;e--)t=n[e],t.type==="text"&&!r&&(t.content=t.content.replace(Ryn,Pyn)),t.type==="link_open"&&t.info==="auto"&&r--,t.type==="link_close"&&t.info==="auto"&&r++}function Nyn(n){var e,t,r=0;for(e=n.length-1;e>=0;e--)t=n[e],t.type==="text"&&!r&&Obe.test(t.content)&&(t.content=t.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),t.type==="link_open"&&t.info==="auto"&&r--,t.type==="link_close"&&t.info==="auto"&&r++}var Fyn=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Iyn.test(e.tokens[t].content)&&Dyn(e.tokens[t].children),Obe.test(e.tokens[t].content)&&Nyn(e.tokens[t].children))},NZ=ut.isWhiteSpace,FZ=ut.isPunctChar,LZ=ut.isMdAsciiPunct,Lyn=/['"]/,zZ=/['"]/g,BZ="";function GS(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function zyn(n,e){var t,r,i,s,o,a,l,c,u,d,f,h,p,m,g,y,k,b,S,w,x;for(S=[],t=0;t<n.length;t++){for(r=n[t],l=n[t].level,k=S.length-1;k>=0&&!(S[k].level<=l);k--);if(S.length=k+1,r.type==="text"){i=r.content,o=0,a=i.length;e:for(;o<a&&(zZ.lastIndex=o,s=zZ.exec(i),!!s);){if(g=y=!0,o=s.index+1,b=s[0]==="'",u=32,s.index-1>=0)u=i.charCodeAt(s.index-1);else for(k=t-1;k>=0&&!(n[k].type==="softbreak"||n[k].type==="hardbreak");k--)if(n[k].content){u=n[k].content.charCodeAt(n[k].content.length-1);break}if(d=32,o<a)d=i.charCodeAt(o);else for(k=t+1;k<n.length&&!(n[k].type==="softbreak"||n[k].type==="hardbreak");k++)if(n[k].content){d=n[k].content.charCodeAt(0);break}if(f=LZ(u)||FZ(String.fromCharCode(u)),h=LZ(d)||FZ(String.fromCharCode(d)),p=NZ(u),m=NZ(d),m?g=!1:h&&(p||f||(g=!1)),p?y=!1:f&&(m||h||(y=!1)),d===34&&s[0]==='"'&&u>=48&&u<=57&&(y=g=!1),g&&y&&(g=f,y=h),!g&&!y){b&&(r.content=GS(r.content,s.index,BZ));continue}if(y){for(k=S.length-1;k>=0&&(c=S[k],!(S[k].level<l));k--)if(c.single===b&&S[k].level===l){c=S[k],b?(w=e.md.options.quotes[2],x=e.md.options.quotes[3]):(w=e.md.options.quotes[0],x=e.md.options.quotes[1]),r.content=GS(r.content,s.index,x),n[c.token].content=GS(n[c.token].content,c.pos,w),o+=x.length-1,c.token===t&&(o+=w.length-1),i=r.content,a=i.length,S.length=k;continue e}}g?S.push({token:t,pos:s.index,single:b,level:l}):y&&b&&(r.content=GS(r.content,s.index,BZ))}}}}var Byn=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Lyn.test(e.tokens[t].content)||zyn(e.tokens[t].children,e)},jyn=function(e){var t,r,i,s,o,a,l=e.tokens;for(t=0,r=l.length;t<r;t++)if(l[t].type==="inline"){for(i=l[t].children,o=i.length,s=0;s<o;s++)i[s].type==="text_special"&&(i[s].type="text");for(s=a=0;s<o;s++)i[s].type==="text"&&s+1<o&&i[s+1].type==="text"?i[s+1].content=i[s].content+i[s+1].content:(s!==a&&(i[a]=i[s]),a++);s!==a&&(i.length=a)}};function ny(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}ny.prototype.attrIndex=function(e){var t,r,i;if(!this.attrs)return-1;for(t=this.attrs,r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};ny.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};ny.prototype.attrSet=function(e,t){var r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};ny.prototype.attrGet=function(e){var t=this.attrIndex(e),r=null;return t>=0&&(r=this.attrs[t][1]),r};ny.prototype.attrJoin=function(e,t){var r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};var B9=ny,Vyn=B9;function Pbe(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}Pbe.prototype.Token=Vyn;var qyn=Pbe,Kyn=z9,jP=[["normalize",$yn],["block",Eyn],["inline",Cyn],["linkify",Ayn],["replacements",Fyn],["smartquotes",Byn],["text_join",jyn]];function j9(){this.ruler=new Kyn;for(var n=0;n<jP.length;n++)this.ruler.push(jP[n][0],jP[n][1])}j9.prototype.process=function(n){var e,t,r;for(r=this.ruler.getRules(""),e=0,t=r.length;e<t;e++)r[e](n)};j9.prototype.State=qyn;var Uyn=j9,VP=ut.isSpace;function qP(n,e){var t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function jZ(n){var e=[],t=0,r=n.length,i,s=!1,o=0,a="";for(i=n.charCodeAt(t);t<r;)i===124&&(s?(a+=n.substring(o,t-1),o=t):(e.push(a+n.substring(o,t)),a="",o=t+1)),s=i===92,t++,i=n.charCodeAt(t);return e.push(a+n.substring(o)),e}var Hyn=function(e,t,r,i){var s,o,a,l,c,u,d,f,h,p,m,g,y,k,b,S,w,x;if(t+2>r||(u=t+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(w=e.src.charCodeAt(a++),w!==124&&w!==45&&w!==58)||a>=e.eMarks[u]||(x=e.src.charCodeAt(a++),x!==124&&x!==45&&x!==58&&!VP(x))||w===45&&VP(x))return!1;for(;a<e.eMarks[u];){if(s=e.src.charCodeAt(a),s!==124&&s!==45&&s!==58&&!VP(s))return!1;a++}for(o=qP(e,t+1),d=o.split("|"),p=[],l=0;l<d.length;l++){if(m=d[l].trim(),!m){if(l===0||l===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;m.charCodeAt(m.length-1)===58?p.push(m.charCodeAt(0)===58?"center":"right"):m.charCodeAt(0)===58?p.push("left"):p.push("")}if(o=qP(e,t).trim(),o.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4||(d=jZ(o),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),f=d.length,f===0||f!==p.length))return!1;if(i)return!0;for(k=e.parentType,e.parentType="table",S=e.md.block.ruler.getRules("blockquote"),h=e.push("table_open","table",1),h.map=g=[t,0],h=e.push("thead_open","thead",1),h.map=[t,t+1],h=e.push("tr_open","tr",1),h.map=[t,t+1],l=0;l<d.length;l++)h=e.push("th_open","th",1),p[l]&&(h.attrs=[["style","text-align:"+p[l]]]),h=e.push("inline","",0),h.content=d[l].trim(),h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),u=t+2;u<r&&!(e.sCount[u]<e.blkIndent);u++){for(b=!1,l=0,c=S.length;l<c;l++)if(S[l](e,u,r,!0)){b=!0;break}if(b||(o=qP(e,u).trim(),!o)||e.sCount[u]-e.blkIndent>=4)break;for(d=jZ(o),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),u===t+2&&(h=e.push("tbody_open","tbody",1),h.map=y=[t+2,0]),h=e.push("tr_open","tr",1),h.map=[u,u+1],l=0;l<f;l++)h=e.push("td_open","td",1),p[l]&&(h.attrs=[["style","text-align:"+p[l]]]),h=e.push("inline","",0),h.content=d[l]?d[l].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return y&&(h=e.push("tbody_close","tbody",-1),y[1]=u),h=e.push("table_close","table",-1),g[1]=u,e.parentType=k,e.line=u,!0},Wyn=function(e,t,r){var i,s,o;if(e.sCount[t]-e.blkIndent<4)return!1;for(s=i=t+1;i<r;){if(e.isEmpty(i)){i++;continue}if(e.sCount[i]-e.blkIndent>=4){i++,s=i;continue}break}return e.line=s,o=e.push("code_block","code",0),o.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,o.map=[t,e.line],!0},Gyn=function(e,t,r,i){var s,o,a,l,c,u,d,f=!1,h=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||h+3>p||(s=e.src.charCodeAt(h),s!==126&&s!==96)||(c=h,h=e.skipChars(h,s),o=h-c,o<3)||(d=e.src.slice(c,h),a=e.src.slice(h,p),s===96&&a.indexOf(String.fromCharCode(s))>=0))return!1;if(i)return!0;for(l=t;l++,!(l>=r||(h=c=e.bMarks[l]+e.tShift[l],p=e.eMarks[l],h<p&&e.sCount[l]<e.blkIndent));)if(e.src.charCodeAt(h)===s&&!(e.sCount[l]-e.blkIndent>=4)&&(h=e.skipChars(h,s),!(h-c<o)&&(h=e.skipSpaces(h),!(h<p)))){f=!0;break}return o=e.sCount[t],e.line=l+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(t+1,l,o,!0),u.markup=d,u.map=[t,e.line],!0},Jyn=ut.isSpace,Qyn=function(e,t,r,i){var s,o,a,l,c,u,d,f,h,p,m,g,y,k,b,S,w,x,$,E,C=e.lineMax,M=e.bMarks[t]+e.tShift[t],P=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(M)!==62)return!1;if(i)return!0;for(p=[],m=[],k=[],b=[],x=e.md.block.ruler.getRules("blockquote"),y=e.parentType,e.parentType="blockquote",f=t;f<r&&(E=e.sCount[f]<e.blkIndent,M=e.bMarks[f]+e.tShift[f],P=e.eMarks[f],!(M>=P));f++){if(e.src.charCodeAt(M++)===62&&!E){for(l=e.sCount[f]+1,e.src.charCodeAt(M)===32?(M++,l++,s=!1,S=!0):e.src.charCodeAt(M)===9?(S=!0,(e.bsCount[f]+l)%4===3?(M++,l++,s=!1):s=!0):S=!1,h=l,p.push(e.bMarks[f]),e.bMarks[f]=M;M<P&&(o=e.src.charCodeAt(M),Jyn(o));){o===9?h+=4-(h+e.bsCount[f]+(s?1:0))%4:h++;M++}u=M>=P,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(S?1:0),k.push(e.sCount[f]),e.sCount[f]=h-l,b.push(e.tShift[f]),e.tShift[f]=M-e.bMarks[f];continue}if(u)break;for(w=!1,a=0,c=x.length;a<c;a++)if(x[a](e,f,r,!0)){w=!0;break}if(w){e.lineMax=f,e.blkIndent!==0&&(p.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),k.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}p.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),k.push(e.sCount[f]),e.sCount[f]=-1}for(g=e.blkIndent,e.blkIndent=0,$=e.push("blockquote_open","blockquote",1),$.markup=">",$.map=d=[t,0],e.md.block.tokenize(e,t,f),$=e.push("blockquote_close","blockquote",-1),$.markup=">",e.lineMax=C,e.parentType=y,d[1]=e.line,a=0;a<b.length;a++)e.bMarks[a+t]=p[a],e.tShift[a+t]=b[a],e.sCount[a+t]=k[a],e.bsCount[a+t]=m[a];return e.blkIndent=g,!0},Yyn=ut.isSpace,Xyn=function(e,t,r,i){var s,o,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||(s=e.src.charCodeAt(c++),s!==42&&s!==45&&s!==95))return!1;for(o=1;c<u;){if(a=e.src.charCodeAt(c++),a!==s&&!Yyn(a))return!1;a===s&&o++}return o<3?!1:(i||(e.line=t+1,l=e.push("hr","hr",0),l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(s))),!0)},Dbe=ut.isSpace;function VZ(n,e){var t,r,i,s;return r=n.bMarks[e]+n.tShift[e],i=n.eMarks[e],t=n.src.charCodeAt(r++),t!==42&&t!==45&&t!==43||r<i&&(s=n.src.charCodeAt(r),!Dbe(s))?-1:r}function qZ(n,e){var t,r=n.bMarks[e]+n.tShift[e],i=r,s=n.eMarks[e];if(i+1>=s||(t=n.src.charCodeAt(i++),t<48||t>57))return-1;for(;;){if(i>=s)return-1;if(t=n.src.charCodeAt(i++),t>=48&&t<=57){if(i-r>=10)return-1;continue}if(t===41||t===46)break;return-1}return i<s&&(t=n.src.charCodeAt(i),!Dbe(t))?-1:i}function Zyn(n,e){var t,r,i=n.level+2;for(t=e+2,r=n.tokens.length-2;t<r;t++)n.tokens[t].level===i&&n.tokens[t].type==="paragraph_open"&&(n.tokens[t+2].hidden=!0,n.tokens[t].hidden=!0,t+=2)}var evn=function(e,t,r,i){var s,o,a,l,c,u,d,f,h,p,m,g,y,k,b,S,w,x,$,E,C,M,P,I,N,T,R,A=t,L=!1,F=!0;if(e.sCount[A]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[A]-e.listIndent>=4&&e.sCount[A]<e.blkIndent)return!1;if(i&&e.parentType==="paragraph"&&e.sCount[A]>=e.blkIndent&&(L=!0),(M=qZ(e,A))>=0){if(d=!0,I=e.bMarks[A]+e.tShift[A],y=Number(e.src.slice(I,M-1)),L&&y!==1)return!1}else if((M=VZ(e,A))>=0)d=!1;else return!1;if(L&&e.skipSpaces(M)>=e.eMarks[A])return!1;if(i)return!0;for(g=e.src.charCodeAt(M-1),m=e.tokens.length,d?(R=e.push("ordered_list_open","ol",1),y!==1&&(R.attrs=[["start",y]])):R=e.push("bullet_list_open","ul",1),R.map=p=[A,0],R.markup=String.fromCharCode(g),P=!1,T=e.md.block.ruler.getRules("list"),w=e.parentType,e.parentType="list";A<r;){for(C=M,k=e.eMarks[A],u=b=e.sCount[A]+M-(e.bMarks[A]+e.tShift[A]);C<k;){if(s=e.src.charCodeAt(C),s===9)b+=4-(b+e.bsCount[A])%4;else if(s===32)b++;else break;C++}if(o=C,o>=k?c=1:c=b-u,c>4&&(c=1),l=u+c,R=e.push("list_item_open","li",1),R.markup=String.fromCharCode(g),R.map=f=[A,0],d&&(R.info=e.src.slice(I,M-1)),E=e.tight,$=e.tShift[A],x=e.sCount[A],S=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=l,e.tight=!0,e.tShift[A]=o-e.bMarks[A],e.sCount[A]=b,o>=k&&e.isEmpty(A+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,A,r,!0),(!e.tight||P)&&(F=!1),P=e.line-A>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[A]=$,e.sCount[A]=x,e.tight=E,R=e.push("list_item_close","li",-1),R.markup=String.fromCharCode(g),A=e.line,f[1]=A,A>=r||e.sCount[A]<e.blkIndent||e.sCount[A]-e.blkIndent>=4)break;for(N=!1,a=0,h=T.length;a<h;a++)if(T[a](e,A,r,!0)){N=!0;break}if(N)break;if(d){if(M=qZ(e,A),M<0)break;I=e.bMarks[A]+e.tShift[A]}else if(M=VZ(e,A),M<0)break;if(g!==e.src.charCodeAt(M-1))break}return d?R=e.push("ordered_list_close","ol",-1):R=e.push("bullet_list_close","ul",-1),R.markup=String.fromCharCode(g),p[1]=A,e.line=A,e.parentType=w,F&&Zyn(e,m),!0},tvn=ut.normalizeReference,JS=ut.isSpace,nvn=function(e,t,r,i){var s,o,a,l,c,u,d,f,h,p,m,g,y,k,b,S,w=0,x=e.bMarks[t]+e.tShift[t],$=e.eMarks[t],E=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(x)!==91)return!1;for(;++x<$;)if(e.src.charCodeAt(x)===93&&e.src.charCodeAt(x-1)!==92){if(x+1===$||e.src.charCodeAt(x+1)!==58)return!1;break}for(l=e.lineMax,b=e.md.block.ruler.getRules("reference"),p=e.parentType,e.parentType="reference";E<l&&!e.isEmpty(E);E++)if(!(e.sCount[E]-e.blkIndent>3)&&!(e.sCount[E]<0)){for(k=!1,u=0,d=b.length;u<d;u++)if(b[u](e,E,l,!0)){k=!0;break}if(k)break}for(y=e.getLines(t,E,e.blkIndent,!1).trim(),$=y.length,x=1;x<$;x++){if(s=y.charCodeAt(x),s===91)return!1;if(s===93){h=x;break}else s===10?w++:s===92&&(x++,x<$&&y.charCodeAt(x)===10&&w++)}if(h<0||y.charCodeAt(h+1)!==58)return!1;for(x=h+2;x<$;x++)if(s=y.charCodeAt(x),s===10)w++;else if(!JS(s))break;if(m=e.md.helpers.parseLinkDestination(y,x,$),!m.ok||(c=e.md.normalizeLink(m.str),!e.md.validateLink(c)))return!1;for(x=m.pos,w+=m.lines,o=x,a=w,g=x;x<$;x++)if(s=y.charCodeAt(x),s===10)w++;else if(!JS(s))break;for(m=e.md.helpers.parseLinkTitle(y,x,$),x<$&&g!==x&&m.ok?(S=m.str,x=m.pos,w+=m.lines):(S="",x=o,w=a);x<$&&(s=y.charCodeAt(x),!!JS(s));)x++;if(x<$&&y.charCodeAt(x)!==10&&S)for(S="",x=o,w=a;x<$&&(s=y.charCodeAt(x),!!JS(s));)x++;return x<$&&y.charCodeAt(x)!==10||(f=tvn(y.slice(1,h)),!f)?!1:(i||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[f]>"u"&&(e.env.references[f]={title:S,href:c}),e.parentType=p,e.line=t+w+1),!0)},rvn=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],IA={},ivn="[a-zA-Z_:][a-zA-Z0-9:._-]*",svn="[^\"'=<>`\\x00-\\x20]+",ovn="'[^']*'",avn='"[^"]*"',lvn="(?:"+svn+"|"+ovn+"|"+avn+")",cvn="(?:\\s+"+ivn+"(?:\\s*=\\s*"+lvn+")?)",Nbe="<[A-Za-z][A-Za-z0-9\\-]*"+cvn+"*\\s*\\/?>",Fbe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",uvn="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",dvn="<[?][\\s\\S]*?[?]>",fvn="<![A-Z]+\\s+[^>]*>",hvn="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",pvn=new RegExp("^(?:"+Nbe+"|"+Fbe+"|"+uvn+"|"+dvn+"|"+fvn+"|"+hvn+")"),mvn=new RegExp("^(?:"+Nbe+"|"+Fbe+")");IA.HTML_TAG_RE=pvn;IA.HTML_OPEN_CLOSE_TAG_RE=mvn;var gvn=rvn,yvn=IA.HTML_OPEN_CLOSE_TAG_RE,Xp=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+gvn.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(yvn.source+"\\s*$"),/^$/,!1]],vvn=function(e,t,r,i){var s,o,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(c)!==60)return!1;for(l=e.src.slice(c,u),s=0;s<Xp.length&&!Xp[s][0].test(l);s++);if(s===Xp.length)return!1;if(i)return Xp[s][2];if(o=t+1,!Xp[s][1].test(l)){for(;o<r&&!(e.sCount[o]<e.blkIndent);o++)if(c=e.bMarks[o]+e.tShift[o],u=e.eMarks[o],l=e.src.slice(c,u),Xp[s][1].test(l)){l.length!==0&&o++;break}}return e.line=o,a=e.push("html_block","",0),a.map=[t,o],a.content=e.getLines(t,o,e.blkIndent,!0),!0},KZ=ut.isSpace,bvn=function(e,t,r,i){var s,o,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||(s=e.src.charCodeAt(c),s!==35||c>=u))return!1;for(o=1,s=e.src.charCodeAt(++c);s===35&&c<u&&o<=6;)o++,s=e.src.charCodeAt(++c);return o>6||c<u&&!KZ(s)?!1:(i||(u=e.skipSpacesBack(u,c),a=e.skipCharsBack(u,35,c),a>c&&KZ(e.src.charCodeAt(a-1))&&(u=a),e.line=t+1,l=e.push("heading_open","h"+String(o),1),l.markup="########".slice(0,o),l.map=[t,e.line],l=e.push("inline","",0),l.content=e.src.slice(c,u).trim(),l.map=[t,e.line],l.children=[],l=e.push("heading_close","h"+String(o),-1),l.markup="########".slice(0,o)),!0)},kvn=function(e,t,r){var i,s,o,a,l,c,u,d,f,h=t+1,p,m=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(p=e.parentType,e.parentType="paragraph";h<r&&!e.isEmpty(h);h++)if(!(e.sCount[h]-e.blkIndent>3)){if(e.sCount[h]>=e.blkIndent&&(c=e.bMarks[h]+e.tShift[h],u=e.eMarks[h],c<u&&(f=e.src.charCodeAt(c),(f===45||f===61)&&(c=e.skipChars(c,f),c=e.skipSpaces(c),c>=u)))){d=f===61?1:2;break}if(!(e.sCount[h]<0)){for(s=!1,o=0,a=m.length;o<a;o++)if(m[o](e,h,r,!0)){s=!0;break}if(s)break}}return d?(i=e.getLines(t,h,e.blkIndent,!1).trim(),e.line=h+1,l=e.push("heading_open","h"+String(d),1),l.markup=String.fromCharCode(f),l.map=[t,e.line],l=e.push("inline","",0),l.content=i,l.map=[t,e.line-1],l.children=[],l=e.push("heading_close","h"+String(d),-1),l.markup=String.fromCharCode(f),e.parentType=p,!0):!1},xvn=function(e,t,r){var i,s,o,a,l,c,u=t+1,d=e.md.block.ruler.getRules("paragraph");for(c=e.parentType,e.parentType="paragraph";u<r&&!e.isEmpty(u);u++)if(!(e.sCount[u]-e.blkIndent>3)&&!(e.sCount[u]<0)){for(s=!1,o=0,a=d.length;o<a;o++)if(d[o](e,u,r,!0)){s=!0;break}if(s)break}return i=e.getLines(t,u,e.blkIndent,!1).trim(),e.line=u,l=e.push("paragraph_open","p",1),l.map=[t,e.line],l=e.push("inline","",0),l.content=i,l.map=[t,e.line],l.children=[],l=e.push("paragraph_close","p",-1),e.parentType=c,!0},Lbe=B9,RA=ut.isSpace;function bc(n,e,t,r){var i,s,o,a,l,c,u,d;for(this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",s=this.src,d=!1,o=a=c=u=0,l=s.length;a<l;a++){if(i=s.charCodeAt(a),!d)if(RA(i)){c++,i===9?u+=4-u%4:u++;continue}else d=!0;(i===10||a===l-1)&&(i!==10&&a++,this.bMarks.push(o),this.eMarks.push(a),this.tShift.push(c),this.sCount.push(u),this.bsCount.push(0),d=!1,c=0,u=0,o=a+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}bc.prototype.push=function(n,e,t){var r=new Lbe(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};bc.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};bc.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};bc.prototype.skipSpaces=function(e){for(var t,r=this.src.length;e<r&&(t=this.src.charCodeAt(e),!!RA(t));e++);return e};bc.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!RA(this.src.charCodeAt(--e)))return e+1;return e};bc.prototype.skipChars=function(e,t){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};bc.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};bc.prototype.getLines=function(e,t,r,i){var s,o,a,l,c,u,d,f=e;if(e>=t)return"";for(u=new Array(t-e),s=0;f<t;f++,s++){for(o=0,d=l=this.bMarks[f],f+1<t||i?c=this.eMarks[f]+1:c=this.eMarks[f];l<c&&o<r;){if(a=this.src.charCodeAt(l),RA(a))a===9?o+=4-(o+this.bsCount[f])%4:o++;else if(l-d<this.tShift[f])o++;else break;l++}o>r?u[s]=new Array(o-r+1).join(" ")+this.src.slice(l,c):u[s]=this.src.slice(l,c)}return u.join("")};bc.prototype.Token=Lbe;var Svn=bc,wvn=z9,QS=[["table",Hyn,["paragraph","reference"]],["code",Wyn],["fence",Gyn,["paragraph","reference","blockquote","list"]],["blockquote",Qyn,["paragraph","reference","blockquote","list"]],["hr",Xyn,["paragraph","reference","blockquote","list"]],["list",evn,["paragraph","reference","blockquote"]],["reference",nvn],["html_block",vvn,["paragraph","reference","blockquote"]],["heading",bvn,["paragraph","reference","blockquote"]],["lheading",kvn],["paragraph",xvn]];function OA(){this.ruler=new wvn;for(var n=0;n<QS.length;n++)this.ruler.push(QS[n][0],QS[n][1],{alt:(QS[n][2]||[]).slice()})}OA.prototype.tokenize=function(n,e,t){for(var r,i,s,o=this.ruler.getRules(""),a=o.length,l=e,c=!1,u=n.md.options.maxNesting;l<t&&(n.line=l=n.skipEmptyLines(l),!(l>=t||n.sCount[l]<n.blkIndent));){if(n.level>=u){n.line=t;break}for(s=n.line,i=0;i<a;i++)if(r=o[i](n,l,t,!1),r){if(s>=n.line)throw new Error("block rule didn't increment state.line");break}if(!r)throw new Error("none of the block rules matched");n.tight=!c,n.isEmpty(n.line-1)&&(c=!0),l=n.line,l<t&&n.isEmpty(l)&&(c=!0,l++,n.line=l)}};OA.prototype.parse=function(n,e,t,r){var i;n&&(i=new this.State(n,e,t,r),this.tokenize(i,i.line,i.lineMax))};OA.prototype.State=Svn;var $vn=OA;function Evn(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var Cvn=function(e,t){for(var r=e.pos;r<e.posMax&&!Evn(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)},Mvn=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,Tvn=function(e,t){var r,i,s,o,a,l,c,u;return!e.md.options.linkify||e.linkLevel>0||(r=e.pos,i=e.posMax,r+3>i)||e.src.charCodeAt(r)!==58||e.src.charCodeAt(r+1)!==47||e.src.charCodeAt(r+2)!==47||(s=e.pending.match(Mvn),!s)||(o=s[1],a=e.md.linkify.matchAtStart(e.src.slice(r-o.length)),!a)||(l=a.url,l.length<=o.length)||(l=l.replace(/\*+$/,""),c=e.md.normalizeLink(l),!e.md.validateLink(c))?!1:(t||(e.pending=e.pending.slice(0,-o.length),u=e.push("link_open","a",1),u.attrs=[["href",c]],u.markup="linkify",u.info="auto",u=e.push("text","",0),u.content=e.md.normalizeLinkText(l),u=e.push("link_close","a",-1),u.markup="linkify",u.info="auto"),e.pos+=l.length-o.length,!0)},_vn=ut.isSpace,Avn=function(e,t){var r,i,s,o=e.pos;if(e.src.charCodeAt(o)!==10)return!1;if(r=e.pending.length-1,i=e.posMax,!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){for(s=r-1;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(o++;o<i&&_vn(e.src.charCodeAt(o));)o++;return e.pos=o,!0},Ivn=ut.isSpace,V9=[];for(var UZ=0;UZ<256;UZ++)V9.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){V9[n.charCodeAt(0)]=1});var Rvn=function(e,t){var r,i,s,o,a,l=e.pos,c=e.posMax;if(e.src.charCodeAt(l)!==92||(l++,l>=c))return!1;if(r=e.src.charCodeAt(l),r===10){for(t||e.push("hardbreak","br",0),l++;l<c&&(r=e.src.charCodeAt(l),!!Ivn(r));)l++;return e.pos=l,!0}return o=e.src[l],r>=55296&&r<=56319&&l+1<c&&(i=e.src.charCodeAt(l+1),i>=56320&&i<=57343&&(o+=e.src[l+1],l++)),s="\\"+o,t||(a=e.push("text_special","",0),r<256&&V9[r]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"),e.pos=l+1,!0},Ovn=function(e,t){var r,i,s,o,a,l,c,u,d=e.pos,f=e.src.charCodeAt(d);if(f!==96)return!1;for(r=d,d++,i=e.posMax;d<i&&e.src.charCodeAt(d)===96;)d++;if(s=e.src.slice(r,d),c=s.length,e.backticksScanned&&(e.backticks[c]||0)<=r)return t||(e.pending+=s),e.pos+=c,!0;for(l=d;(a=e.src.indexOf("`",l))!==-1;){for(l=a+1;l<i&&e.src.charCodeAt(l)===96;)l++;if(u=l-a,u===c)return t||(o=e.push("code_inline","code",0),o.markup=s,o.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=l,!0;e.backticks[u]=a}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=c,!0},PA={};PA.tokenize=function(e,t){var r,i,s,o,a,l=e.pos,c=e.src.charCodeAt(l);if(t||c!==126||(i=e.scanDelims(e.pos,!0),o=i.length,a=String.fromCharCode(c),o<2))return!1;for(o%2&&(s=e.push("text","",0),s.content=a,o--),r=0;r<o;r+=2)s=e.push("text","",0),s.content=a+a,e.delimiters.push({marker:c,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function HZ(n,e){var t,r,i,s,o,a=[],l=e.length;for(t=0;t<l;t++)i=e[t],i.marker===126&&i.end!==-1&&(s=e[i.end],o=n.tokens[i.token],o.type="s_open",o.tag="s",o.nesting=1,o.markup="~~",o.content="",o=n.tokens[s.token],o.type="s_close",o.tag="s",o.nesting=-1,o.markup="~~",o.content="",n.tokens[s.token-1].type==="text"&&n.tokens[s.token-1].content==="~"&&a.push(s.token-1));for(;a.length;){for(t=a.pop(),r=t+1;r<n.tokens.length&&n.tokens[r].type==="s_close";)r++;r--,t!==r&&(o=n.tokens[r],n.tokens[r]=n.tokens[t],n.tokens[t]=o)}}PA.postProcess=function(e){var t,r=e.tokens_meta,i=e.tokens_meta.length;for(HZ(e,e.delimiters),t=0;t<i;t++)r[t]&&r[t].delimiters&&HZ(e,r[t].delimiters)};var DA={};DA.tokenize=function(e,t){var r,i,s,o=e.pos,a=e.src.charCodeAt(o);if(t||a!==95&&a!==42)return!1;for(i=e.scanDelims(e.pos,a===42),r=0;r<i.length;r++)s=e.push("text","",0),s.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function WZ(n,e){var t,r,i,s,o,a,l=e.length;for(t=l-1;t>=0;t--)r=e[t],!(r.marker!==95&&r.marker!==42)&&r.end!==-1&&(i=e[r.end],a=t>0&&e[t-1].end===r.end+1&&e[t-1].marker===r.marker&&e[t-1].token===r.token-1&&e[r.end+1].token===i.token+1,o=String.fromCharCode(r.marker),s=n.tokens[r.token],s.type=a?"strong_open":"em_open",s.tag=a?"strong":"em",s.nesting=1,s.markup=a?o+o:o,s.content="",s=n.tokens[i.token],s.type=a?"strong_close":"em_close",s.tag=a?"strong":"em",s.nesting=-1,s.markup=a?o+o:o,s.content="",a&&(n.tokens[e[t-1].token].content="",n.tokens[e[r.end+1].token].content="",t--))}DA.postProcess=function(e){var t,r=e.tokens_meta,i=e.tokens_meta.length;for(WZ(e,e.delimiters),t=0;t<i;t++)r[t]&&r[t].delimiters&&WZ(e,r[t].delimiters)};var Pvn=ut.normalizeReference,KP=ut.isSpace,Dvn=function(e,t){var r,i,s,o,a,l,c,u,d,f="",h="",p=e.pos,m=e.posMax,g=e.pos,y=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,o=e.md.helpers.parseLinkLabel(e,e.pos,!0),o<0))return!1;if(l=o+1,l<m&&e.src.charCodeAt(l)===40){for(y=!1,l++;l<m&&(i=e.src.charCodeAt(l),!(!KP(i)&&i!==10));l++);if(l>=m)return!1;if(g=l,c=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),c.ok){for(f=e.md.normalizeLink(c.str),e.md.validateLink(f)?l=c.pos:f="",g=l;l<m&&(i=e.src.charCodeAt(l),!(!KP(i)&&i!==10));l++);if(c=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<m&&g!==l&&c.ok)for(h=c.str,l=c.pos;l<m&&(i=e.src.charCodeAt(l),!(!KP(i)&&i!==10));l++);}(l>=m||e.src.charCodeAt(l)!==41)&&(y=!0),l++}if(y){if(typeof e.env.references>"u")return!1;if(l<m&&e.src.charCodeAt(l)===91?(g=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(g,l++):l=o+1):l=o+1,s||(s=e.src.slice(a,o)),u=e.env.references[Pvn(s)],!u)return e.pos=p,!1;f=u.href,h=u.title}return t||(e.pos=a,e.posMax=o,d=e.push("link_open","a",1),d.attrs=r=[["href",f]],h&&r.push(["title",h]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,d=e.push("link_close","a",-1)),e.pos=l,e.posMax=m,!0},Nvn=ut.normalizeReference,UP=ut.isSpace,Fvn=function(e,t){var r,i,s,o,a,l,c,u,d,f,h,p,m,g="",y=e.pos,k=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(l=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(c=a+1,c<k&&e.src.charCodeAt(c)===40){for(c++;c<k&&(i=e.src.charCodeAt(c),!(!UP(i)&&i!==10));c++);if(c>=k)return!1;for(m=c,d=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),d.ok&&(g=e.md.normalizeLink(d.str),e.md.validateLink(g)?c=d.pos:g=""),m=c;c<k&&(i=e.src.charCodeAt(c),!(!UP(i)&&i!==10));c++);if(d=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<k&&m!==c&&d.ok)for(f=d.str,c=d.pos;c<k&&(i=e.src.charCodeAt(c),!(!UP(i)&&i!==10));c++);else f="";if(c>=k||e.src.charCodeAt(c)!==41)return e.pos=y,!1;c++}else{if(typeof e.env.references>"u")return!1;if(c<k&&e.src.charCodeAt(c)===91?(m=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?o=e.src.slice(m,c++):c=a+1):c=a+1,o||(o=e.src.slice(l,a)),u=e.env.references[Nvn(o)],!u)return e.pos=y,!1;g=u.href,f=u.title}return t||(s=e.src.slice(l,a),e.md.inline.parse(s,e.md,e.env,p=[]),h=e.push("image","img",0),h.attrs=r=[["src",g],["alt",""]],h.children=p,h.content=s,f&&r.push(["title",f])),e.pos=c,e.posMax=k,!0},Lvn=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,zvn=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,Bvn=function(e,t){var r,i,s,o,a,l,c=e.pos;if(e.src.charCodeAt(c)!==60)return!1;for(a=e.pos,l=e.posMax;;){if(++c>=l||(o=e.src.charCodeAt(c),o===60))return!1;if(o===62)break}return r=e.src.slice(a+1,c),zvn.test(r)?(i=e.md.normalizeLink(r),e.md.validateLink(i)?(t||(s=e.push("link_open","a",1),s.attrs=[["href",i]],s.markup="autolink",s.info="auto",s=e.push("text","",0),s.content=e.md.normalizeLinkText(r),s=e.push("link_close","a",-1),s.markup="autolink",s.info="auto"),e.pos+=r.length+2,!0):!1):Lvn.test(r)?(i=e.md.normalizeLink("mailto:"+r),e.md.validateLink(i)?(t||(s=e.push("link_open","a",1),s.attrs=[["href",i]],s.markup="autolink",s.info="auto",s=e.push("text","",0),s.content=e.md.normalizeLinkText(r),s=e.push("link_close","a",-1),s.markup="autolink",s.info="auto"),e.pos+=r.length+2,!0):!1):!1},jvn=IA.HTML_TAG_RE;function Vvn(n){return/^<a[>\s]/i.test(n)}function qvn(n){return/^<\/a\s*>/i.test(n)}function Kvn(n){var e=n|32;return e>=97&&e<=122}var Uvn=function(e,t){var r,i,s,o,a=e.pos;return!e.md.options.html||(s=e.posMax,e.src.charCodeAt(a)!==60||a+2>=s)||(r=e.src.charCodeAt(a+1),r!==33&&r!==63&&r!==47&&!Kvn(r))||(i=e.src.slice(a).match(jvn),!i)?!1:(t||(o=e.push("html_inline","",0),o.content=i[0],Vvn(o.content)&&e.linkLevel++,qvn(o.content)&&e.linkLevel--),e.pos+=i[0].length,!0)},GZ=_be,Hvn=ut.has,Wvn=ut.isValidEntityCode,JZ=ut.fromCodePoint,Gvn=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Jvn=/^&([a-z][a-z0-9]{1,31});/i,Qvn=function(e,t){var r,i,s,o,a=e.pos,l=e.posMax;if(e.src.charCodeAt(a)!==38||a+1>=l)return!1;if(r=e.src.charCodeAt(a+1),r===35){if(s=e.src.slice(a).match(Gvn),s)return t||(i=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),o=e.push("text_special","",0),o.content=Wvn(i)?JZ(i):JZ(65533),o.markup=s[0],o.info="entity"),e.pos+=s[0].length,!0}else if(s=e.src.slice(a).match(Jvn),s&&Hvn(GZ,s[1]))return t||(o=e.push("text_special","",0),o.content=GZ[s[1]],o.markup=s[0],o.info="entity"),e.pos+=s[0].length,!0;return!1};function QZ(n){var e,t,r,i,s,o,a,l,c={},u=n.length;if(u){var d=0,f=-2,h=[];for(e=0;e<u;e++)if(r=n[e],h.push(0),(n[d].marker!==r.marker||f!==r.token-1)&&(d=e),f=r.token,r.length=r.length||0,!!r.close){for(c.hasOwnProperty(r.marker)||(c[r.marker]=[-1,-1,-1,-1,-1,-1]),s=c[r.marker][(r.open?3:0)+r.length%3],t=d-h[d]-1,o=t;t>s;t-=h[t]+1)if(i=n[t],i.marker===r.marker&&i.open&&i.end<0&&(a=!1,(i.close||r.open)&&(i.length+r.length)%3===0&&(i.length%3!==0||r.length%3!==0)&&(a=!0),!a)){l=t>0&&!n[t-1].open?h[t-1]+1:0,h[e]=e-t+l,h[t]=l,r.open=!1,i.end=e,i.close=!1,o=-1,f=-2;break}o!==-1&&(c[r.marker][(r.open?3:0)+(r.length||0)%3]=o)}}}var Yvn=function(e){var t,r=e.tokens_meta,i=e.tokens_meta.length;for(QZ(e.delimiters),t=0;t<i;t++)r[t]&&r[t].delimiters&&QZ(r[t].delimiters)},Xvn=function(e){var t,r,i=0,s=e.tokens,o=e.tokens.length;for(t=r=0;t<o;t++)s[t].nesting<0&&i--,s[t].level=i,s[t].nesting>0&&i++,s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==r&&(s[r]=s[t]),r++);t!==r&&(s.length=r)},q9=B9,YZ=ut.isWhiteSpace,XZ=ut.isPunctChar,ZZ=ut.isMdAsciiPunct;function $1(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}$1.prototype.pushPending=function(){var n=new q9("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};$1.prototype.push=function(n,e,t){this.pending&&this.pushPending();var r=new q9(n,e,t),i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};$1.prototype.scanDelims=function(n,e){var t=n,r,i,s,o,a,l,c,u,d,f=!0,h=!0,p=this.posMax,m=this.src.charCodeAt(n);for(r=n>0?this.src.charCodeAt(n-1):32;t<p&&this.src.charCodeAt(t)===m;)t++;return s=t-n,i=t<p?this.src.charCodeAt(t):32,c=ZZ(r)||XZ(String.fromCharCode(r)),d=ZZ(i)||XZ(String.fromCharCode(i)),l=YZ(r),u=YZ(i),u?f=!1:d&&(l||c||(f=!1)),l?h=!1:c&&(u||d||(h=!1)),e?(o=f,a=h):(o=f&&(!h||c),a=h&&(!f||d)),{can_open:o,can_close:a,length:s}};$1.prototype.Token=q9;var Zvn=$1,eee=z9,HP=[["text",Cvn],["linkify",Tvn],["newline",Avn],["escape",Rvn],["backticks",Ovn],["strikethrough",PA.tokenize],["emphasis",DA.tokenize],["link",Dvn],["image",Fvn],["autolink",Bvn],["html_inline",Uvn],["entity",Qvn]],WP=[["balance_pairs",Yvn],["strikethrough",PA.postProcess],["emphasis",DA.postProcess],["fragments_join",Xvn]];function E1(){var n;for(this.ruler=new eee,n=0;n<HP.length;n++)this.ruler.push(HP[n][0],HP[n][1]);for(this.ruler2=new eee,n=0;n<WP.length;n++)this.ruler2.push(WP[n][0],WP[n][1])}E1.prototype.skipToken=function(n){var e,t,r=n.pos,i=this.ruler.getRules(""),s=i.length,o=n.md.options.maxNesting,a=n.cache;if(typeof a[r]<"u"){n.pos=a[r];return}if(n.level<o){for(t=0;t<s;t++)if(n.level++,e=i[t](n,!0),n.level--,e){if(r>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;e||n.pos++,a[r]=n.pos};E1.prototype.tokenize=function(n){for(var e,t,r,i=this.ruler.getRules(""),s=i.length,o=n.posMax,a=n.md.options.maxNesting;n.pos<o;){if(r=n.pos,n.level<a){for(t=0;t<s;t++)if(e=i[t](n,!1),e){if(r>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(e){if(n.pos>=o)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};E1.prototype.parse=function(n,e,t,r){var i,s,o,a=new this.State(n,e,t,r);for(this.tokenize(a),s=this.ruler2.getRules(""),o=s.length,i=0;i<o;i++)s[i](a)};E1.prototype.State=Zvn;var ebn=E1,GP,tee;function tbn(){return tee||(tee=1,GP=function(n){var e={};n=n||{},e.src_Any=Abe().source,e.src_Cc=Ibe().source,e.src_Z=Rbe().source,e.src_P=L9.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}),GP}function mL(n){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function NA(n){return Object.prototype.toString.call(n)}function nbn(n){return NA(n)==="[object String]"}function rbn(n){return NA(n)==="[object Object]"}function ibn(n){return NA(n)==="[object RegExp]"}function nee(n){return NA(n)==="[object Function]"}function sbn(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var zbe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function obn(n){return Object.keys(n||{}).reduce(function(e,t){return e||zbe.hasOwnProperty(t)},!1)}var abn={"http:":{validate:function(n,e,t){var r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){var r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){var r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},lbn="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",cbn="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function ubn(n){n.__index__=-1,n.__text_cache__=""}function dbn(n){return function(e,t){var r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function ree(){return function(n,e){e.normalize(n)}}function RT(n){var e=n.re=tbn()(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(lbn),t.push(e.src_xn),e.src_tlds=t.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");var i=[];n.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(n.__schemas__).forEach(function(a){var l=n.__schemas__[a];if(l!==null){var c={validate:null,link:null};if(n.__compiled__[a]=c,rbn(l)){ibn(l.validate)?c.validate=dbn(l.validate):nee(l.validate)?c.validate=l.validate:s(a,l),nee(l.normalize)?c.normalize=l.normalize:l.normalize?s(a,l):c.normalize=ree();return}if(nbn(l)){i.push(a);return}s(a,l)}}),i.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:ree()};var o=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(sbn).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),ubn(n)}function fbn(n,e){var t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function gL(n,e){var t=new fbn(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function so(n,e){if(!(this instanceof so))return new so(n,e);e||obn(n)&&(e=n,n={}),this.__opts__=mL({},zbe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=mL({},abn,n),this.__compiled__={},this.__tlds__=cbn,this.__tlds_replaced__=!1,this.re={},RT(this)}so.prototype.add=function(e,t){return this.__schemas__[e]=t,RT(this),this};so.prototype.set=function(e){return this.__opts__=mL(this.__opts__,e),this};so.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,r,i,s,o,a,l,c,u;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(t=l.exec(e))!==null;)if(s=this.testSchemaAt(e,t[2],l.lastIndex),s){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};so.prototype.pretest=function(e){return this.re.pretest.test(e)};so.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};so.prototype.match=function(e){var t=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(gL(this,t)),t=this.__last_index__);for(var i=t?e.slice(t):e;this.test(i);)r.push(gL(this,t)),i=i.slice(this.__last_index__),t+=this.__last_index__;return r.length?r:null};so.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;var t=this.re.schema_at_start.exec(e);if(!t)return null;var r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,gL(this,0)):null};so.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),RT(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,RT(this),this)};so.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};so.prototype.onCompile=function(){};var hbn=so;const Fg=2147483647,Ql=36,K9=1,_k=26,pbn=38,mbn=700,Bbe=72,jbe=128,Vbe="-",gbn=/^xn--/,ybn=/[^\0-\x7F]/,vbn=/[\x2E\u3002\uFF0E\uFF61]/g,bbn={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},JP=Ql-K9,Yl=Math.floor,QP=String.fromCharCode;function Lu(n){throw new RangeError(bbn[n])}function kbn(n,e){const t=[];let r=n.length;for(;r--;)t[r]=e(n[r]);return t}function qbe(n,e){const t=n.split("@");let r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(vbn,".");const i=n.split("."),s=kbn(i,e).join(".");return r+s}function U9(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const s=n.charCodeAt(t++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const Kbe=n=>String.fromCodePoint(...n),xbn=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:Ql},iee=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},Ube=function(n,e,t){let r=0;for(n=t?Yl(n/mbn):n>>1,n+=Yl(n/e);n>JP*_k>>1;r+=Ql)n=Yl(n/JP);return Yl(r+(JP+1)*n/(n+pbn))},H9=function(n){const e=[],t=n.length;let r=0,i=jbe,s=Bbe,o=n.lastIndexOf(Vbe);o<0&&(o=0);for(let a=0;a<o;++a)n.charCodeAt(a)>=128&&Lu("not-basic"),e.push(n.charCodeAt(a));for(let a=o>0?o+1:0;a<t;){const l=r;for(let u=1,d=Ql;;d+=Ql){a>=t&&Lu("invalid-input");const f=xbn(n.charCodeAt(a++));f>=Ql&&Lu("invalid-input"),f>Yl((Fg-r)/u)&&Lu("overflow"),r+=f*u;const h=d<=s?K9:d>=s+_k?_k:d-s;if(f<h)break;const p=Ql-h;u>Yl(Fg/p)&&Lu("overflow"),u*=p}const c=e.length+1;s=Ube(r-l,c,l==0),Yl(r/c)>Fg-i&&Lu("overflow"),i+=Yl(r/c),r%=c,e.splice(r++,0,i)}return String.fromCodePoint(...e)},W9=function(n){const e=[];n=U9(n);const t=n.length;let r=jbe,i=0,s=Bbe;for(const l of n)l<128&&e.push(QP(l));const o=e.length;let a=o;for(o&&e.push(Vbe);a<t;){let l=Fg;for(const u of n)u>=r&&u<l&&(l=u);const c=a+1;l-r>Yl((Fg-i)/c)&&Lu("overflow"),i+=(l-r)*c,r=l;for(const u of n)if(u<r&&++i>Fg&&Lu("overflow"),u===r){let d=i;for(let f=Ql;;f+=Ql){const h=f<=s?K9:f>=s+_k?_k:f-s;if(d<h)break;const p=d-h,m=Ql-h;e.push(QP(iee(h+p%m,0))),d=Yl(p/m)}e.push(QP(iee(d,0))),s=Ube(i,c,a===o),i=0,++a}++i,++r}return e.join("")},Hbe=function(n){return qbe(n,function(e){return gbn.test(e)?H9(e.slice(4).toLowerCase()):e})},Wbe=function(n){return qbe(n,function(e){return ybn.test(e)?"xn--"+W9(e):e})},Sbn={version:"2.1.0",ucs2:{decode:U9,encode:Kbe},decode:H9,encode:W9,toASCII:Wbe,toUnicode:Hbe},wbn=Object.freeze(Object.defineProperty({__proto__:null,decode:H9,default:Sbn,encode:W9,toASCII:Wbe,toUnicode:Hbe,ucs2decode:U9,ucs2encode:Kbe},Symbol.toStringTag,{value:"Module"})),$bn=zL(wbn);var Ebn={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Cbn={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Mbn={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},wb=ut,Tbn=AA,_bn=xyn,Abn=Uyn,Ibn=$vn,Rbn=ebn,Obn=hbn,bh=ey,Gbe=$bn,Pbn={default:Ebn,zero:Cbn,commonmark:Mbn},Dbn=/^(vbscript|javascript|file|data):/,Nbn=/^data:image\/(gif|png|jpeg|webp);/;function Fbn(n){var e=n.trim().toLowerCase();return Dbn.test(e)?!!Nbn.test(e):!0}var Jbe=["http:","https:","mailto:"];function Lbn(n){var e=bh.parse(n,!0);if(e.hostname&&(!e.protocol||Jbe.indexOf(e.protocol)>=0))try{e.hostname=Gbe.toASCII(e.hostname)}catch{}return bh.encode(bh.format(e))}function zbn(n){var e=bh.parse(n,!0);if(e.hostname&&(!e.protocol||Jbe.indexOf(e.protocol)>=0))try{e.hostname=Gbe.toUnicode(e.hostname)}catch{}return bh.decode(bh.format(e),bh.decode.defaultChars+"%")}function Uo(n,e){if(!(this instanceof Uo))return new Uo(n,e);e||wb.isString(n)||(e=n||{},n="default"),this.inline=new Rbn,this.block=new Ibn,this.core=new Abn,this.renderer=new _bn,this.linkify=new Obn,this.validateLink=Fbn,this.normalizeLink=Lbn,this.normalizeLinkText=zbn,this.utils=wb,this.helpers=wb.assign({},Tbn),this.options={},this.configure(n),e&&this.set(e)}Uo.prototype.set=function(n){return wb.assign(this.options,n),this};Uo.prototype.configure=function(n){var e=this,t;if(wb.isString(n)&&(t=n,n=Pbn[t],!n))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(r){n.components[r].rules&&e[r].ruler.enableOnly(n.components[r].rules),n.components[r].rules2&&e[r].ruler2.enableOnly(n.components[r].rules2)}),this};Uo.prototype.enable=function(n,e){var t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));var r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Uo.prototype.disable=function(n,e){var t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));var r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Uo.prototype.use=function(n){var e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};Uo.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");var t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};Uo.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};Uo.prototype.parseInline=function(n,e){var t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};Uo.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};var Bbn=Uo,jbn=Bbn;const Qbe=tu(jbn);var yL=!0,Ybe=!1,Xbe=!1,Vbn=function(n,e){e&&(yL=!e.enabled,Ybe=!!e.label,Xbe=!!e.labelAfter),n.core.ruler.after("inline","github-task-lists",function(t){for(var r=t.tokens,i=2;i<r.length;i++)Kbn(r,i)&&(Ubn(r[i],t.Token),see(r[i-2],"class","task-list-item"+(yL?"":" enabled")),see(r[qbn(r,i-2)],"class","contains-task-list"))})};function see(n,e,t){var r=n.attrIndex(e),i=[e,t];r<0?n.attrPush(i):n.attrs[r]=i}function qbn(n,e){for(var t=n[e].level-1,r=e-1;r>=0;r--)if(n[r].level===t)return r;return-1}function Kbn(n,e){return Qbn(n[e])&&Ybn(n[e-1])&&Xbn(n[e-2])&&Zbn(n[e])}function Ubn(n,e){if(n.children.unshift(Hbn(n,e)),n.children[1].content=n.children[1].content.slice(3),n.content=n.content.slice(3),Ybe)if(Xbe){n.children.pop();var t="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);n.children[0].content=n.children[0].content.slice(0,-1)+' id="'+t+'">',n.children.push(Jbn(n.content,t,e))}else n.children.unshift(Wbn(e)),n.children.push(Gbn(e))}function Hbn(n,e){var t=new e("html_inline","",0),r=yL?' disabled="" ':"";return n.content.indexOf("[ ] ")===0?t.content='<input class="task-list-item-checkbox"'+r+'type="checkbox">':(n.content.indexOf("[x] ")===0||n.content.indexOf("[X] ")===0)&&(t.content='<input class="task-list-item-checkbox" checked=""'+r+'type="checkbox">'),t}function Wbn(n){var e=new n("html_inline","",0);return e.content="<label>",e}function Gbn(n){var e=new n("html_inline","",0);return e.content="</label>",e}function Jbn(n,e,t){var r=new t("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+e+'">'+n+"</label>",r.attrs=[{for:e}],r}function Qbn(n){return n.type==="inline"}function Ybn(n){return n.type==="paragraph_open"}function Xbn(n){return n.type==="list_item_open"}function Zbn(n){return n.content.indexOf("[ ] ")===0||n.content.indexOf("[x] ")===0||n.content.indexOf("[X] ")===0}const ekn=tu(Vbn);var tkn=Object.defineProperty,nkn=(n,e,t)=>e in n?tkn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,OT=(n,e,t)=>(nkn(n,typeof e!="symbol"?e+"":e,t),t);const rkn=qo.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:n=>n.getAttribute("data-tight")==="true"||!n.querySelector("p"),renderHTML:n=>({class:n.tight?this.options.tightClass:null,"data-tight":n.tight?"true":null})}}}]},addCommands(){var n=this;return{toggleTight:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=>{let{editor:r,commands:i}=t;function s(o){if(!r.isActive(o))return!1;const a=r.getAttributes(o);return i.updateAttributes(o,{tight:e??!(a!=null&&a.tight)})}return n.options.listTypes.some(o=>s(o))}}}}}),oee=Qbe();function Zbe(n,e){return oee.inline.State.prototype.scanDelims.call({src:n,posMax:n.length}),new oee.inline.State(n,null,null,[]).scanDelims(e,!0)}function eke(n,e,t,r){let i=n.substring(0,t)+n.substring(t+e.length);return i=i.substring(0,t+r)+e+i.substring(t+r),i}function ikn(n,e,t,r){let i=t,s=n;for(;i<r&&!Zbe(s,i).can_open;)s=eke(s,e,i,1),i++;return{text:s,from:i,to:r}}function skn(n,e,t,r){let i=r,s=n;for(;i>t&&!Zbe(s,i).can_close;)s=eke(s,e,i,-1),i--;return{text:s,from:t,to:i}}function okn(n,e,t,r){let i={text:n,from:t,to:r};return i=ikn(i.text,e,i.from,i.to),i=skn(i.text,e,i.from,i.to),i.to-i.from<e.length+1&&(i.text=i.text.substring(0,i.from)+i.text.substring(i.to+e.length)),i.text}class akn extends Tbe{constructor(e,t,r){super(e,t,r??{}),OT(this,"inTable",!1),this.inlines=[]}render(e,t,r){super.render(e,t,r);const i=this.inlines[this.inlines.length-1];if(i!=null&&i.start&&i!==null&&i!==void 0&&i.end){const{delimiter:s,start:o,end:a}=this.normalizeInline(i);this.out=okn(this.out,s,o,a),this.inlines.pop()}}markString(e,t,r,i){const s=this.marks[e.type.name];if(s.expelEnclosingWhitespace)if(t)this.inlines.push({start:this.out.length,delimiter:s.open});else{const o=this.inlines.pop();this.inlines.push({...o,end:this.out.length})}return super.markString(e,t,r,i)}normalizeInline(e){let{start:t,end:r}=e;for(;this.out.charAt(t).match(/\s/);)t++;return{...e,start:t}}}const tke=X0.create({name:"markdownHTMLMark",addStorage(){return{markdown:{serialize:{open(n,e){var t,r;return this.editor.storage.markdown.options.html?(t=(r=aee(e))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:"":(console.warn(`Tiptap Markdown: "${e.type.name}" mark is only available in html mode`),"")},close(n,e){var t,r;return this.editor.storage.markdown.options.html&&(t=(r=aee(e))===null||r===void 0?void 0:r[1])!==null&&t!==void 0?t:""}},parse:{}}}}});function aee(n){const e=n.type.schema,t=e.text(" ",[n]),i=Vve(Xe.from(t),e).match(/^(<.*?>) (<\/.*?>)$/);return i?[i[1],i[2]]:null}function G9(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function lkn(n){return n==null?void 0:n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ckn(n){const e=n.parentElement,t=e.cloneNode();for(;e.firstChild&&e.firstChild!==n;)t.appendChild(e.firstChild);t.childNodes.length>0&&e.parentElement.insertBefore(t,e),e.parentElement.insertBefore(n,e),e.childNodes.length===0&&e.remove()}function ukn(n){const e=n.parentNode;for(;n.firstChild;)e.insertBefore(n.firstChild,n);e.removeChild(n)}const FA=Zi.create({name:"markdownHTMLNode",addStorage(){return{markdown:{serialize(n,e,t){this.editor.storage.markdown.options.html?n.write(dkn(e,t)):(console.warn(`Tiptap Markdown: "${e.type.name}" node is only available in html mode`),n.write(`[${e.type.name}]`)),e.isBlock&&n.closeBlock(e)},parse:{}}}}});function dkn(n,e){const t=n.type.schema,r=Vve(Xe.from(n),t);return n.isBlock&&(e instanceof Xe||e.type.name===t.topNodeType.name)?fkn(r):r}function fkn(n){const t=G9(n).firstElementChild;return t.innerHTML=t.innerHTML.trim()?`
${t.innerHTML}
`:`
`,t.outerHTML}const hkn=Zi.create({name:"blockquote"}),pkn=hkn.extend({addStorage(){return{markdown:{serialize:yc.nodes.blockquote,parse:{}}}}}),mkn=Zi.create({name:"bulletList"}),nke=mkn.extend({addStorage(){return{markdown:{serialize(n,e){return n.renderList(e,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}}}}),gkn=Zi.create({name:"codeBlock"}),ykn=gkn.extend({addStorage(){return{markdown:{serialize(n,e){n.write("```"+(e.attrs.language||"")+`
`),n.text(e.textContent,!1),n.ensureNewLine(),n.write("```"),n.closeBlock(e)},parse:{setup(n){var e;n.set({langPrefix:(e=this.options.languageClassPrefix)!==null&&e!==void 0?e:"language-"})},updateDOM(n){n.innerHTML=n.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}}}),vkn=Zi.create({name:"hardBreak"}),rke=vkn.extend({addStorage(){return{markdown:{serialize(n,e,t,r){for(let i=r+1;i<t.childCount;i++)if(t.child(i).type!=e.type){n.write(n.inTable?FA.storage.markdown.serialize.call(this,n,e,t):`\\
`);return}},parse:{}}}}}),bkn=Zi.create({name:"heading"}),kkn=bkn.extend({addStorage(){return{markdown:{serialize:yc.nodes.heading,parse:{}}}}}),xkn=Zi.create({name:"horizontalRule"}),Skn=xkn.extend({addStorage(){return{markdown:{serialize:yc.nodes.horizontal_rule,parse:{}}}}}),wkn=Zi.create({name:"image"}),$kn=wkn.extend({addStorage(){return{markdown:{serialize:yc.nodes.image,parse:{}}}}}),Ekn=Zi.create({name:"listItem"}),Ckn=Ekn.extend({addStorage(){return{markdown:{serialize:yc.nodes.list_item,parse:{}}}}}),Mkn=Zi.create({name:"orderedList"});function Tkn(n,e,t){let r=0;for(;t-r>0&&e.child(t-r-1).type.name===n.type.name;r++);return r}const _kn=Mkn.extend({addStorage(){return{markdown:{serialize(n,e,t,r){const i=e.attrs.start||1,s=String(i+e.childCount-1).length,o=n.repeat(" ",s+2),l=Tkn(e,t,r)%2?") ":". ";n.renderList(e,o,c=>{const u=String(i+c);return n.repeat(" ",s-u.length)+u+l})},parse:{}}}}}),Akn=Zi.create({name:"paragraph"}),Ikn=Akn.extend({addStorage(){return{markdown:{serialize:yc.nodes.paragraph,parse:{}}}}});function YP(n){var e,t;return(e=n==null||(t=n.content)===null||t===void 0?void 0:t.content)!==null&&e!==void 0?e:[]}const Rkn=Zi.create({name:"table"}),Okn=Rkn.extend({addStorage(){return{markdown:{serialize(n,e,t){if(!Pkn(e)){FA.storage.markdown.serialize.call(this,n,e,t);return}n.inTable=!0,e.forEach((r,i,s)=>{if(n.write("| "),r.forEach((o,a,l)=>{l&&n.write(" | ");const c=o.firstChild;c.textContent.trim()&&n.renderInline(c)}),n.write(" |"),n.ensureNewLine(),!s){const o=Array.from({length:r.childCount}).map(()=>"---").join(" | ");n.write(`| ${o} |`),n.ensureNewLine()}}),n.closeBlock(e),n.inTable=!1},parse:{}}}}});function lee(n){return n.attrs.colspan>1||n.attrs.rowspan>1}function Pkn(n){const e=YP(n),t=e[0],r=e.slice(1);return!(YP(t).some(i=>i.type.name!=="tableHeader"||lee(i)||i.childCount>1)||r.some(i=>YP(i).some(s=>s.type.name==="tableHeader"||lee(s)||s.childCount>1)))}const Dkn=Zi.create({name:"taskItem"}),Nkn=Dkn.extend({addStorage(){return{markdown:{serialize(n,e){const t=e.attrs.checked?"[x]":"[ ]";n.write(`${t} `),n.renderContent(e)},parse:{updateDOM(n){[...n.querySelectorAll(".task-list-item")].forEach(e=>{const t=e.querySelector("input");e.setAttribute("data-type","taskItem"),t&&(e.setAttribute("data-checked",t.checked),t.remove())})}}}}}}),Fkn=Zi.create({name:"taskList"}),Lkn=Fkn.extend({addStorage(){return{markdown:{serialize:nke.storage.markdown.serialize,parse:{setup(n){n.use(ekn)},updateDOM(n){[...n.querySelectorAll(".contains-task-list")].forEach(e=>{e.setAttribute("data-type","taskList")})}}}}}}),zkn=Zi.create({name:"text"}),Bkn=zkn.extend({addStorage(){return{markdown:{serialize(n,e){n.text(lkn(e.text))},parse:{}}}}}),jkn=X0.create({name:"bold"}),Vkn=jkn.extend({addStorage(){return{markdown:{serialize:yc.marks.strong,parse:{}}}}}),qkn=X0.create({name:"code"}),Kkn=qkn.extend({addStorage(){return{markdown:{serialize:yc.marks.code,parse:{}}}}}),Ukn=X0.create({name:"italic"}),Hkn=Ukn.extend({addStorage(){return{markdown:{serialize:yc.marks.em,parse:{}}}}}),Wkn=X0.create({name:"link"}),Gkn=Wkn.extend({addStorage(){return{markdown:{serialize:yc.marks.link,parse:{}}}}}),Jkn=X0.create({name:"strike"}),Qkn=Jkn.extend({addStorage(){return{markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}}}}),Ykn=[pkn,nke,ykn,rke,kkn,Skn,FA,$kn,Ckn,_kn,Ikn,Okn,Nkn,Lkn,Bkn,Vkn,Kkn,tke,Hkn,Gkn,Qkn];function PT(n){var e,t;const r=(e=n.storage)===null||e===void 0?void 0:e.markdown,i=(t=Ykn.find(s=>s.name===n.name))===null||t===void 0?void 0:t.storage.markdown;return r||i?{...i,...r}:null}class Xkn{constructor(e){OT(this,"editor",null),this.editor=e}serialize(e){const t=new akn(this.nodes,this.marks,{hardBreakNodeName:rke.name});return t.renderContent(e),t.out}get nodes(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(t=>[t,this.serializeNode(FA)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(t=>t.type==="node"&&this.serializeNode(t)).map(t=>[t.name,this.serializeNode(t)]))!==null&&e!==void 0?e:[])}}get marks(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(t=>[t,this.serializeMark(tke)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(t=>t.type==="mark"&&this.serializeMark(t)).map(t=>[t.name,this.serializeMark(t)]))!==null&&e!==void 0?e:[])}}serializeNode(e){var t;return(t=PT(e))===null||t===void 0||(t=t.serialize)===null||t===void 0?void 0:t.bind({editor:this.editor,options:e.options})}serializeMark(e){var t;const r=(t=PT(e))===null||t===void 0?void 0:t.serialize;return r?{...r,open:typeof r.open=="function"?r.open.bind({editor:this.editor,options:e.options}):r.open,close:typeof r.close=="function"?r.close.bind({editor:this.editor,options:e.options}):r.close}:null}}class Zkn{constructor(e,t){OT(this,"editor",null),OT(this,"md",null);let{html:r,linkify:i,breaks:s}=t;this.editor=e,this.md=this.withPatchedRenderer(Qbe({html:r,linkify:i,breaks:s}))}parse(e){let{inline:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){this.editor.extensionManager.extensions.forEach(s=>{var o;return(o=PT(s))===null||o===void 0||(o=o.parse)===null||o===void 0||(o=o.setup)===null||o===void 0?void 0:o.call({editor:this.editor,options:s.options},this.md)});const r=this.md.render(e),i=G9(r);return this.editor.extensionManager.extensions.forEach(s=>{var o;return(o=PT(s))===null||o===void 0||(o=o.parse)===null||o===void 0||(o=o.updateDOM)===null||o===void 0?void 0:o.call({editor:this.editor,options:s.options},i)}),this.normalizeDOM(i,{inline:t,content:e}),i.innerHTML}return e}normalizeDOM(e,t){let{inline:r,content:i}=t;return this.normalizeBlocks(e),e.querySelectorAll("*").forEach(s=>{var o;((o=s.nextSibling)===null||o===void 0?void 0:o.nodeType)===Node.TEXT_NODE&&!s.closest("pre")&&(s.nextSibling.textContent=s.nextSibling.textContent.replace(/^\n/,""))}),r&&this.normalizeInline(e,i),e}normalizeBlocks(e){const r=Object.values(this.editor.schema.nodes).filter(i=>i.isBlock).map(i=>{var s;return(s=i.spec.parseDOM)===null||s===void 0?void 0:s.map(o=>o.tag)}).flat().filter(Boolean).join(",");r&&[...e.querySelectorAll(r)].forEach(i=>{i.parentElement.matches("p")&&ckn(i)})}normalizeInline(e,t){var r;if((r=e.firstElementChild)!==null&&r!==void 0&&r.matches("p")){var i,s,o,a;const l=e.firstElementChild,{nextElementSibling:c}=l,u=(i=(s=t.match(/^\s+/))===null||s===void 0?void 0:s[0])!==null&&i!==void 0?i:"",d=c?"":(o=(a=t.match(/\s+$/))===null||a===void 0?void 0:a[0])!==null&&o!==void 0?o:"";if(t.match(/^\n\n/)){l.innerHTML=`${l.innerHTML}${d}`;return}ukn(l),e.innerHTML=`${u}${e.innerHTML}${d}`}}withPatchedRenderer(e){const t=r=>function(){const i=r(...arguments);return i===`
`?i:i[i.length-1]===`
`?i.slice(0,-1):i};return e.renderer.rules.hardbreak=t(e.renderer.rules.hardbreak),e.renderer.rules.softbreak=t(e.renderer.rules.softbreak),e.renderer.rules.fence=t(e.renderer.rules.fence),e.renderer.rules.code_block=t(e.renderer.rules.code_block),e.renderer.renderToken=t(e.renderer.renderToken.bind(e.renderer)),e}}const e1n=qo.create({name:"markdownClipboard",addOptions(){return{transformPastedText:!1,transformCopiedText:!1}},addProseMirrorPlugins(){return[new Q({key:new Y("markdownClipboard"),props:{clipboardTextParser:(n,e,t)=>{if(t||!this.options.transformPastedText)return null;const r=this.editor.storage.markdown.parser.parse(n,{inline:!0});return ET.fromSchema(this.editor.schema).parseSlice(G9(r),{preserveWhitespace:!0,context:e})},clipboardTextSerializer:n=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(n.content):null}})]}}),ike=qo.create({name:"markdown",priority:50,addOptions(){return{html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}},addCommands(){const n=kNt.Commands.config.addCommands();return{setContent:(e,t,r)=>i=>n.setContent(i.editor.storage.markdown.parser.parse(e),t,r)(i),insertContentAt:(e,t,r)=>i=>n.insertContentAt(e,i.editor.storage.markdown.parser.parse(t,{inline:!0}),r)(i)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new Zkn(this.editor,this.options),serializer:new Xkn(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage(){return{}},addExtensions(){return[rkn.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),e1n.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}});var yte,vte,bte;const J9=OO.configure({HTMLAttributes:{...(yte=OO.options)==null?void 0:yte.HTMLAttributes,class:((bte=(vte=OO.options)==null?void 0:vte.HTMLAttributes)==null?void 0:bte.class)??"text-primary-600 hover:underline no-underline"}});var kte,xte,Ste;const Q9=VO.configure({HTMLAttributes:{...(kte=VO.options)==null?void 0:kte.HTMLAttributes,class:((Ste=(xte=VO.options)==null?void 0:xte.HTMLAttributes)==null?void 0:Ste.class)??"text-sm font-mono bg-background-200 text-foreground-900 rounded py-0.5 px-1 not-prose"}});var wte,$te,Ete;const ske=QR.configure({HTMLAttributes:{...(wte=QR.options)==null?void 0:wte.HTMLAttributes,class:((Ete=($te=QR.options)==null?void 0:$te.HTMLAttributes)==null?void 0:Ete.class)??"text-sm font-mono bg-background-200 text-foreground-900 rounded px-2 py-1 not-prose"}}),Y9=n=>uu.create({name:"catchNewLines",addProseMirrorPlugins(){return[new Q({key:new Y("eventHandler"),props:{handleKeyDown:(e,t)=>{if(t.key==="Enter")return n==null||n(),!0}}})]}}),X9=uu.create({name:"minimumKit",addExtensions(){var e,t,r,i,s,o,a,l,c;const n=[];return this.options.document!==!1&&n.push(dB.configure((e=this.options)==null?void 0:e.document)),this.options.paragraph!==!1&&n.push(o7.configure((t=this.options)==null?void 0:t.paragraph)),this.options.text!==!1&&n.push(d7.configure((r=this.options)==null?void 0:r.text)),this.options.link!==!1&&n.push(J9.configure((i=this.options)==null?void 0:i.link)),this.options.bold!==!1&&n.push(I7.configure((s=this.options)==null?void 0:s.bold)),this.options.code!==!1&&n.push(Q9.configure((o=this.options)==null?void 0:o.code)),this.options.italic!==!1&&n.push(V7.configure((a=this.options)==null?void 0:a.italic)),this.options.strike!==!1&&n.push(J7.configure((l=this.options)==null?void 0:l.strike)),this.options.history!==!1&&n.push(h9.configure((c=this.options)==null?void 0:c.history)),n}}),Z9=uu.create({name:"starterKit",addExtensions(){var e,t,r,i,s,o,a,l,c,u,d,f,h,p,m,g,y,k,b;const n=[];return this.options.blockquote!==!1&&n.push(spe.configure((e=this.options)==null?void 0:e.blockquote)),this.options.bold!==!1&&n.push(I7.configure((t=this.options)==null?void 0:t.bold)),this.options.bulletList!==!1&&n.push(kpe.configure((r=this.options)==null?void 0:r.bulletList)),this.options.link!==!1&&n.push(J9.configure((i=this.options)==null?void 0:i.link)),this.options.code!==!1&&n.push(Q9.configure((s=this.options)==null?void 0:s.code)),this.options.codeBlock!==!1&&n.push(ske.configure((o=this.options)==null?void 0:o.codeBlock)),this.options.document!==!1&&n.push(dB.configure((a=this.options)==null?void 0:a.document)),this.options.dropcursor!==!1&&n.push(z0e.configure((l=this.options)==null?void 0:l.dropcursor)),this.options.gapcursor!==!1&&n.push(Aye.configure((c=this.options)==null?void 0:c.gapcursor)),this.options.hardBreak!==!1&&n.push(Upe.configure((u=this.options)==null?void 0:u.hardBreak)),this.options.heading!==!1&&n.push(ime.configure((d=this.options)==null?void 0:d.heading)),this.options.history!==!1&&n.push(h9.configure((f=this.options)==null?void 0:f.history)),this.options.horizontalRule!==!1&&n.push(yme.configure((h=this.options)==null?void 0:h.horizontalRule)),this.options.italic!==!1&&n.push(V7.configure((p=this.options)==null?void 0:p.italic)),this.options.listItem!==!1&&n.push(Ame.configure((m=this.options)==null?void 0:m.listItem)),this.options.orderedList!==!1&&n.push(Ume.configure((g=this.options)==null?void 0:g.orderedList)),this.options.paragraph!==!1&&n.push(o7.configure((y=this.options)==null?void 0:y.paragraph)),this.options.strike!==!1&&n.push(J7.configure((k=this.options)==null?void 0:k.strike)),this.options.text!==!1&&n.push(d7.configure((b=this.options)==null?void 0:b.text)),n}}),t1n=n=>{const e=m1({editable:!1,content:n.children,extensions:[Z9,ike.configure({html:!1,linkify:!0,breaks:!0,transformPastedText:!0})]});return _(p1,{editor:e})},n1n=Object.freeze(Object.defineProperty({__proto__:null,Blockquote:spe,Bold:I7,BulletList:kpe,CatchNewLines:Y9,Code:Q9,CodeBlock:ske,Document:dB,Dropcursor:z0e,Editor:Hhe,EditorContent:p1,Gapcursor:Aye,HardBreak:Upe,Heading:ime,History:h9,HorizontalRule:yme,Italic:V7,Link:J9,ListItem:Ame,Markdown:t1n,MarkdownExtension:ike,Mention:E9,MinimumKit:X9,OrderedList:Ume,Paragraph:o7,StarterKit:Z9,Strike:J7,Text:d7,useEditor:m1},Symbol.toStringTag,{value:"Module"})),oke=function(){var n={defaultValue:null,kind:"LocalArgument",name:"after"},e={defaultValue:null,kind:"LocalArgument",name:"first"},t={defaultValue:null,kind:"LocalArgument",name:"includeItem"},r={defaultValue:null,kind:"LocalArgument",name:"includeItemPluginDatas"},i={defaultValue:null,kind:"LocalArgument",name:"includeItemPluginDatasFull"},s={defaultValue:null,kind:"LocalArgument",name:"includeNotes"},o={defaultValue:null,kind:"LocalArgument",name:"includeTaskPluginDatas"},a={defaultValue:null,kind:"LocalArgument",name:"includeTaskPluginDatasFull"},l={defaultValue:null,kind:"LocalArgument",name:"includeTasks"},c={defaultValue:null,kind:"LocalArgument",name:"renderDay"},u={defaultValue:null,kind:"LocalArgument",name:"renderDayContent"},d={defaultValue:null,kind:"LocalArgument",name:"renderDays"},f={defaultValue:null,kind:"LocalArgument",name:"renderItemCard"},h={defaultValue:null,kind:"LocalArgument",name:"renderTaskCard"},p=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"first"}],m={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"isAllDay",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},N=[{alias:null,args:null,kind:"ScalarField",name:"full",storageKey:null}],T={condition:"includeItemPluginDatas",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[m,b,M,P,I,{condition:"includeItemPluginDatasFull",kind:"Condition",passingValue:!0,selections:N}],storageKey:null}]},R={condition:"includeTaskPluginDatas",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[m,b,M,P,I,{condition:"includeTaskPluginDatasFull",kind:"Condition",passingValue:!0,selections:N}],storageKey:null}]},A={condition:"includeNotes",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Note",kind:"LinkedField",name:"notes",plural:!0,selections:[m,{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},g,b,M,y,{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null}],storageKey:null}]},L={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},F={alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[m,x,C],storageKey:null},O={alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[m,P,I],storageKey:null},z={alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[L,m,w,g,y,k,S,F,O],storageKey:null},j=[z],K=[m];return{fragment:{argumentDefinitions:[n,e,t,r,i,s,o,a,l,c,u,d,f,h],kind:"Fragment",metadata:null,name:"getDaysDaysQuery",selections:[{condition:"renderDays",kind:"Condition",passingValue:!0,selections:[{args:p,kind:"FragmentSpread",name:"Days_data"}]},{alias:null,args:p,concreteType:"QueryDaysConnection",kind:"LinkedField",name:"days",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryDaysConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Day",kind:"LinkedField",name:"node",plural:!1,selections:[{condition:"renderDay",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"Day_day"}]},{condition:"renderDayContent",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"DayContent_day"}]},m,g,{condition:"includeTasks",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{condition:"renderTaskCard",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"TaskCard_task"}]},m,g,y,k,b,S,w,{condition:"includeItem",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[{condition:"renderItemCard",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"ItemCard_item"}]},m,b,x,S,$,y,E,C,T],storageKey:null}]},R],storageKey:null}]},A],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,n,d,c,u,l,h,s,t,f,o,a,r,i],kind:"Operation",name:"getDaysDaysQuery",selections:[{alias:null,args:p,concreteType:"QueryDaysConnection",kind:"LinkedField",name:"days",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryDaysConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Day",kind:"LinkedField",name:"node",plural:!1,selections:[m,g,{condition:"renderDay",kind:"Condition",passingValue:!0,selections:j},{condition:"renderDayContent",kind:"Condition",passingValue:!0,selections:j},{condition:"includeTasks",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[m,g,y,k,b,S,w,{condition:"renderTaskCard",kind:"Condition",passingValue:!0,selections:[F,O]},{condition:"includeItem",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[m,b,x,S,$,y,E,C,{condition:"renderItemCard",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[P,I,m],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:K,storageKey:null},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:K,storageKey:null}]},T],storageKey:null}]},R],storageKey:null}]},A],storageKey:null}],storageKey:null}],storageKey:null},{condition:"renderDays",kind:"Condition",passingValue:!0,selections:[{alias:null,args:p,concreteType:"QueryDaysConnection",kind:"LinkedField",name:"days",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryDaysConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{alias:null,args:null,concreteType:"Day",kind:"LinkedField",name:"node",plural:!1,selections:[z,L],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPreviousPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startCursor",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:p,filters:null,handle:"connection",key:"Days_days",kind:"LinkedHandle",name:"days"}]}]},params:{cacheID:"c69124dcbdce7d66317f93c041547e18",id:null,metadata:{},name:"getDaysDaysQuery",operationKind:"query",text:`query getDaysDaysQuery(
  $first: Int!
  $after: ID
  $renderDays: Boolean!
  $renderDay: Boolean!
  $renderDayContent: Boolean!
  $includeTasks: Boolean!
  $renderTaskCard: Boolean!
  $includeNotes: Boolean!
  $includeItem: Boolean!
  $renderItemCard: Boolean!
  $includeTaskPluginDatas: Boolean!
  $includeTaskPluginDatasFull: Boolean!
  $includeItemPluginDatas: Boolean!
  $includeItemPluginDatasFull: Boolean!
) {
  ...Days_data_2HEEH6 @include(if: $renderDays)
  days(first: $first, after: $after) {
    edges {
      node {
        ...Day_day @include(if: $renderDay)
        ...DayContent_day @include(if: $renderDayContent)
        id
        date
        tasks @include(if: $includeTasks) {
          ...TaskCard_task @include(if: $renderTaskCard)
          id
          date
          title
          completedAt
          createdAt
          durationInMinutes
          status
          item @include(if: $includeItem) {
            ...ItemCard_item @include(if: $renderItemCard)
            id
            createdAt
            scheduledAt
            durationInMinutes
            isAllDay
            title
            color
            isRelevant
            pluginDatas @include(if: $includeItemPluginDatas) {
              id
              createdAt
              updatedAt
              pluginSlug
              min
              full @include(if: $includeItemPluginDatasFull)
            }
          }
          pluginDatas @include(if: $includeTaskPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeTaskPluginDatasFull)
          }
        }
        notes @include(if: $includeNotes) {
          id
          slug
          date
          createdAt
          updatedAt
          title
          content
        }
      }
    }
  }
}

fragment DayAddTaskActionsBar_day on Day {
  date
}

fragment DayContent_day on Day {
  date
  tasks {
    __typename
    id
    status
    ...TaskCard_task
  }
}

fragment Day_day on Day {
  date
  ...DayContent_day
  ...DayAddTaskActionsBar_day
}

fragment Days_data_2HEEH6 on Query {
  days(first: $first, after: $after) {
    edges {
      cursor
      node {
        ...Day_day
        id
        __typename
      }
    }
    pageInfo {
      endCursor
      hasNextPage
      hasPreviousPage
      startCursor
    }
  }
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}

fragment RenderTaskCardActions_task on Task {
  id
  status
  durationInMinutes
  item {
    id
    isRelevant
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderTaskCardDetails_task on Task {
  durationInMinutes
  item {
    id
    scheduledAt
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment TaskCardActions_task on Task {
  status
  id
  item {
    id
    isRelevant
  }
  ...TaskCardDurationButton_task
  ...RenderTaskCardActions_task
}

fragment TaskCardDurationButton_task on Task {
  id
  durationInMinutes
}

fragment TaskCard_task on Task {
  id
  date
  title
  status
  completedAt
  ...RenderTaskCardDetails_task
  ...TaskCardActions_task
  ...TaskTitle_task
}

fragment TaskTitle_task on Task {
  id
  title
}
`}}}();oke.hash="082ca0f7b72c633b4564022e5f60cdac";const ake=function(){var n={defaultValue:null,kind:"LocalArgument",name:"day0"},e={defaultValue:null,kind:"LocalArgument",name:"day1"},t={defaultValue:null,kind:"LocalArgument",name:"day2"},r={defaultValue:null,kind:"LocalArgument",name:"day3"},i={defaultValue:null,kind:"LocalArgument",name:"day4"},s={defaultValue:null,kind:"LocalArgument",name:"day5"},o={defaultValue:null,kind:"LocalArgument",name:"day6"},a={defaultValue:null,kind:"LocalArgument",name:"day7"},l={defaultValue:null,kind:"LocalArgument",name:"day8"},c={defaultValue:null,kind:"LocalArgument",name:"day9"},u={defaultValue:null,kind:"LocalArgument",name:"includeDay0"},d={defaultValue:null,kind:"LocalArgument",name:"includeDay1"},f={defaultValue:null,kind:"LocalArgument",name:"includeDay2"},h={defaultValue:null,kind:"LocalArgument",name:"includeDay3"},p={defaultValue:null,kind:"LocalArgument",name:"includeDay4"},m={defaultValue:null,kind:"LocalArgument",name:"includeDay5"},g={defaultValue:null,kind:"LocalArgument",name:"includeDay6"},y={defaultValue:null,kind:"LocalArgument",name:"includeDay7"},k={defaultValue:null,kind:"LocalArgument",name:"includeDay8"},b={defaultValue:null,kind:"LocalArgument",name:"includeDay9"},S={defaultValue:null,kind:"LocalArgument",name:"includeItem"},w={defaultValue:null,kind:"LocalArgument",name:"includeItemPluginDatas"},x={defaultValue:null,kind:"LocalArgument",name:"includeItemPluginDatasFull"},$={defaultValue:null,kind:"LocalArgument",name:"includeNotes"},E={defaultValue:null,kind:"LocalArgument",name:"includeTaskPluginDatas"},C={defaultValue:null,kind:"LocalArgument",name:"includeTaskPluginDatasFull"},M={defaultValue:null,kind:"LocalArgument",name:"includeTasks"},P={defaultValue:null,kind:"LocalArgument",name:"renderDay"},I={defaultValue:null,kind:"LocalArgument",name:"renderDayContent"},N={defaultValue:null,kind:"LocalArgument",name:"renderItemCard"},T={defaultValue:null,kind:"LocalArgument",name:"renderTaskCard"},R=[{kind:"Variable",name:"id",variableName:"day0"}],A={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},te={alias:null,args:null,kind:"ScalarField",name:"isAllDay",storageKey:null},pe={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},he={alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},se={alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},ke={alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},xe={alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},be=[{alias:null,args:null,kind:"ScalarField",name:"full",storageKey:null}],ye={condition:"includeItemPluginDatas",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[A,z,se,ke,xe,{condition:"includeItemPluginDatasFull",kind:"Condition",passingValue:!0,selections:be}],storageKey:null}]},Re={condition:"includeTaskPluginDatas",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[A,z,se,ke,xe,{condition:"includeTaskPluginDatasFull",kind:"Condition",passingValue:!0,selections:be}],storageKey:null}]},ft={condition:"includeNotes",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Note",kind:"LinkedField",name:"notes",plural:!0,selections:[A,{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},L,z,se,F,{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null}],storageKey:null}]},nt=[{kind:"InlineFragment",selections:[{condition:"renderDay",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"Day_day"}]},{condition:"renderDayContent",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"DayContent_day"}]},A,L,{condition:"includeTasks",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{condition:"renderTaskCard",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"TaskCard_task"}]},A,L,F,O,z,j,K,{condition:"includeItem",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[{condition:"renderItemCard",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"ItemCard_item"}]},A,z,Z,j,te,F,pe,he,ye],storageKey:null}]},Re],storageKey:null}]},ft],type:"Day",abstractKey:null}],Ft=[{kind:"Variable",name:"id",variableName:"day1"}],ts=[{kind:"Variable",name:"id",variableName:"day2"}],ys=[{kind:"Variable",name:"id",variableName:"day3"}],B=[{kind:"Variable",name:"id",variableName:"day4"}],U=[{kind:"Variable",name:"id",variableName:"day5"}],J=[{kind:"Variable",name:"id",variableName:"day6"}],ue=[{kind:"Variable",name:"id",variableName:"day7"}],oe=[{kind:"Variable",name:"id",variableName:"day8"}],ie=[{kind:"Variable",name:"id",variableName:"day9"}],ge={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},Ke={alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[A,Z,he],storageKey:null},It={alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[A,ke,xe],storageKey:null},Sn=[{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[ge,A,K,L,F,O,j,Ke,It],storageKey:null}],Xo=[A],wn=[ge,A,{kind:"InlineFragment",selections:[L,{condition:"renderDay",kind:"Condition",passingValue:!0,selections:Sn},{condition:"renderDayContent",kind:"Condition",passingValue:!0,selections:Sn},{condition:"includeTasks",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[A,L,F,O,z,j,K,{condition:"renderTaskCard",kind:"Condition",passingValue:!0,selections:[Ke,It]},{condition:"includeItem",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[A,z,Z,j,te,F,pe,he,{condition:"renderItemCard",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[ke,xe,A],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:Xo,storageKey:null},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:Xo,storageKey:null}]},ye],storageKey:null}]},Re],storageKey:null}]},ft],type:"Day",abstractKey:null}];return{fragment:{argumentDefinitions:[n,e,t,r,i,s,o,a,l,c,u,d,f,h,p,m,g,y,k,b,S,w,x,$,E,C,M,P,I,N,T],kind:"Fragment",metadata:null,name:"getDaysDaysMax10Query",selections:[{condition:"includeDay0",kind:"Condition",passingValue:!0,selections:[{alias:"day0",args:R,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay1",kind:"Condition",passingValue:!0,selections:[{alias:"day1",args:Ft,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay2",kind:"Condition",passingValue:!0,selections:[{alias:"day2",args:ts,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay3",kind:"Condition",passingValue:!0,selections:[{alias:"day3",args:ys,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay4",kind:"Condition",passingValue:!0,selections:[{alias:"day4",args:B,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay5",kind:"Condition",passingValue:!0,selections:[{alias:"day5",args:U,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay6",kind:"Condition",passingValue:!0,selections:[{alias:"day6",args:J,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay7",kind:"Condition",passingValue:!0,selections:[{alias:"day7",args:ue,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay8",kind:"Condition",passingValue:!0,selections:[{alias:"day8",args:oe,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]},{condition:"includeDay9",kind:"Condition",passingValue:!0,selections:[{alias:"day9",args:ie,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:nt,storageKey:null}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[u,n,d,e,f,t,h,r,p,i,m,s,g,o,y,a,k,l,b,c,P,I,M,T,$,S,N,E,C,w,x],kind:"Operation",name:"getDaysDaysMax10Query",selections:[{condition:"includeDay0",kind:"Condition",passingValue:!0,selections:[{alias:"day0",args:R,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay1",kind:"Condition",passingValue:!0,selections:[{alias:"day1",args:Ft,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay2",kind:"Condition",passingValue:!0,selections:[{alias:"day2",args:ts,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay3",kind:"Condition",passingValue:!0,selections:[{alias:"day3",args:ys,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay4",kind:"Condition",passingValue:!0,selections:[{alias:"day4",args:B,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay5",kind:"Condition",passingValue:!0,selections:[{alias:"day5",args:U,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay6",kind:"Condition",passingValue:!0,selections:[{alias:"day6",args:J,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay7",kind:"Condition",passingValue:!0,selections:[{alias:"day7",args:ue,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay8",kind:"Condition",passingValue:!0,selections:[{alias:"day8",args:oe,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]},{condition:"includeDay9",kind:"Condition",passingValue:!0,selections:[{alias:"day9",args:ie,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:wn,storageKey:null}]}]},params:{cacheID:"3c08f3fadfcfdf1c88d48cfbcd6929dd",id:null,metadata:{},name:"getDaysDaysMax10Query",operationKind:"query",text:`query getDaysDaysMax10Query(
  $includeDay0: Boolean!
  $day0: ID!
  $includeDay1: Boolean!
  $day1: ID!
  $includeDay2: Boolean!
  $day2: ID!
  $includeDay3: Boolean!
  $day3: ID!
  $includeDay4: Boolean!
  $day4: ID!
  $includeDay5: Boolean!
  $day5: ID!
  $includeDay6: Boolean!
  $day6: ID!
  $includeDay7: Boolean!
  $day7: ID!
  $includeDay8: Boolean!
  $day8: ID!
  $includeDay9: Boolean!
  $day9: ID!
  $renderDay: Boolean!
  $renderDayContent: Boolean!
  $includeTasks: Boolean!
  $renderTaskCard: Boolean!
  $includeNotes: Boolean!
  $includeItem: Boolean!
  $renderItemCard: Boolean!
  $includeTaskPluginDatas: Boolean!
  $includeTaskPluginDatasFull: Boolean!
  $includeItemPluginDatas: Boolean!
  $includeItemPluginDatasFull: Boolean!
) {
  day0: node(id: $day0) @include(if: $includeDay0) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day1: node(id: $day1) @include(if: $includeDay1) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day2: node(id: $day2) @include(if: $includeDay2) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day3: node(id: $day3) @include(if: $includeDay3) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day4: node(id: $day4) @include(if: $includeDay4) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day5: node(id: $day5) @include(if: $includeDay5) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day6: node(id: $day6) @include(if: $includeDay6) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day7: node(id: $day7) @include(if: $includeDay7) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day8: node(id: $day8) @include(if: $includeDay8) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
  day9: node(id: $day9) @include(if: $includeDay9) {
    __typename
    ... on Day {
      ...Day_day @include(if: $renderDay)
      ...DayContent_day @include(if: $renderDayContent)
      id
      date
      tasks @include(if: $includeTasks) {
        ...TaskCard_task @include(if: $renderTaskCard)
        id
        date
        title
        completedAt
        createdAt
        durationInMinutes
        status
        item @include(if: $includeItem) {
          ...ItemCard_item @include(if: $renderItemCard)
          id
          createdAt
          scheduledAt
          durationInMinutes
          isAllDay
          title
          color
          isRelevant
          pluginDatas @include(if: $includeItemPluginDatas) {
            id
            createdAt
            updatedAt
            pluginSlug
            min
            full @include(if: $includeItemPluginDatasFull)
          }
        }
        pluginDatas @include(if: $includeTaskPluginDatas) {
          id
          createdAt
          updatedAt
          pluginSlug
          min
          full @include(if: $includeTaskPluginDatasFull)
        }
      }
      notes @include(if: $includeNotes) {
        id
        slug
        date
        createdAt
        updatedAt
        title
        content
      }
    }
    id
  }
}

fragment DayAddTaskActionsBar_day on Day {
  date
}

fragment DayContent_day on Day {
  date
  tasks {
    __typename
    id
    status
    ...TaskCard_task
  }
}

fragment Day_day on Day {
  date
  ...DayContent_day
  ...DayAddTaskActionsBar_day
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}

fragment RenderTaskCardActions_task on Task {
  id
  status
  durationInMinutes
  item {
    id
    isRelevant
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderTaskCardDetails_task on Task {
  durationInMinutes
  item {
    id
    scheduledAt
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment TaskCardActions_task on Task {
  status
  id
  item {
    id
    isRelevant
  }
  ...TaskCardDurationButton_task
  ...RenderTaskCardActions_task
}

fragment TaskCardDurationButton_task on Task {
  id
  durationInMinutes
}

fragment TaskCard_task on Task {
  id
  date
  title
  status
  completedAt
  ...RenderTaskCardDetails_task
  ...TaskCardActions_task
  ...TaskTitle_task
}

fragment TaskTitle_task on Task {
  id
  title
}
`}}}();ake.hash="3d58e8b9911ea4481e26f2792c6da472";const r1n=async n=>{var l,c,u,d,f,h,p,m,g,y,k,b,S,w,x,$,E,C,M,P,I,N;const e=Qn(n.from).subtract(1,"day").format("YYYY-MM-DD"),t=Qn(n.to).diff(Qn(n.from),"day")+1,r=!!((l=n.toRender)!=null&&l.ItemCard),i=!!(r||(u=(c=n.include)==null?void 0:c.tasks)!=null&&u.item),s=!!((d=n.toRender)!=null&&d.TaskCard),o=!!(r||s||(f=n.include)!=null&&f.tasks),a=await $0(Ja,oke,{first:t,after:e,renderDays:!!((h=n.toRender)!=null&&h.Days),renderDay:!!((p=n.toRender)!=null&&p.Day),renderDayContent:!!((m=n.toRender)!=null&&m.DayContent),renderTaskCard:s,includeTasks:o,includeNotes:!!((g=n.include)!=null&&g.notes),renderItemCard:r,includeItem:i,includeTaskPluginDatas:!!((k=(y=n.include)==null?void 0:y.tasks)!=null&&k.pluginDatas),includeTaskPluginDatasFull:!!((w=(S=(b=n.include)==null?void 0:b.tasks)==null?void 0:S.pluginDatas)!=null&&w.full),includeItemPluginDatas:!!((E=($=(x=n.include)==null?void 0:x.tasks)==null?void 0:$.item)!=null&&E.pluginDatas),includeItemPluginDatasFull:!!((I=(P=(M=(C=n.include)==null?void 0:C.tasks)==null?void 0:M.item)==null?void 0:P.pluginDatas)!=null&&I.full)}).toPromise();return((N=a==null?void 0:a.days)==null?void 0:N.edges.map(T=>{var R;return{...T.node,tasks:((R=T.node.tasks)==null?void 0:R.map(A=>{var L,F;return{...A,pluginDatas:Object.fromEntries(((L=A.pluginDatas)==null?void 0:L.map(O=>[O.pluginSlug,O]))??[]),item:A.item?{...A.item,pluginDatas:Object.fromEntries(((F=A.item.pluginDatas)==null?void 0:F.map(O=>[O.pluginSlug,O]))??[])}:void 0}}))??[]}}))??[]},i1n=async n=>{var o,a,l,c,u,d,f,h,p,m,g,y,k,b,S,w,x,$,E,C;const e=!!((o=n.toRender)!=null&&o.ItemCard),t=!!(e||(l=(a=n.include)==null?void 0:a.tasks)!=null&&l.item),r=!!((c=n.toRender)!=null&&c.TaskCard),i=!!(e||r||(u=n.include)!=null&&u.tasks),s=await $0(Ja,ake,{includeDay0:!!n.dates[0],day0:fl(n.dates[0]),includeDay1:!!n.dates[1],day1:fl(n.dates[1]),includeDay2:!!n.dates[2],day2:fl(n.dates[2]),includeDay3:!!n.dates[3],day3:fl(n.dates[3]),includeDay4:!!n.dates[4],day4:fl(n.dates[4]),includeDay5:!!n.dates[5],day5:fl(n.dates[5]),includeDay6:!!n.dates[6],day6:fl(n.dates[6]),includeDay7:!!n.dates[7],day7:fl(n.dates[7]),includeDay8:!!n.dates[8],day8:fl(n.dates[8]),includeDay9:!!n.dates[9],day9:fl(n.dates[9]),renderDay:!!((d=n.toRender)!=null&&d.Day),renderDayContent:!!((f=n.toRender)!=null&&f.DayContent),renderTaskCard:r,includeTasks:i,includeNotes:!!((h=n.include)!=null&&h.notes),renderItemCard:e,includeItem:t,includeTaskPluginDatas:!!((m=(p=n.include)==null?void 0:p.tasks)!=null&&m.pluginDatas),includeTaskPluginDatasFull:!!((k=(y=(g=n.include)==null?void 0:g.tasks)==null?void 0:y.pluginDatas)!=null&&k.full),includeItemPluginDatas:!!((w=(S=(b=n.include)==null?void 0:b.tasks)==null?void 0:S.item)!=null&&w.pluginDatas),includeItemPluginDatasFull:!!((C=(E=($=(x=n.include)==null?void 0:x.tasks)==null?void 0:$.item)==null?void 0:E.pluginDatas)!=null&&C.full)}).toPromise();return[s==null?void 0:s.day0,s==null?void 0:s.day1,s==null?void 0:s.day2,s==null?void 0:s.day3,s==null?void 0:s.day4,s==null?void 0:s.day5,s==null?void 0:s.day6,s==null?void 0:s.day7,s==null?void 0:s.day8,s==null?void 0:s.day9]},fl=n=>`Day_${Qn(n).format("YYYY-MM-DD")}`,lke=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"slug"}],e=[{kind:"Variable",name:"slug",variableName:"slug"}],t={alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"NoteEditorQuery",selections:[{alias:null,args:e,concreteType:"Note",kind:"LinkedField",name:"note",plural:!1,selections:[t],storageKey:null},{alias:"tags",args:null,concreteType:"QueryNoteTagsConnection",kind:"LinkedField",name:"noteTags",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryNoteTagsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"NoteTag",kind:"LinkedField",name:"node",plural:!1,selections:[r],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"NoteEditorQuery",selections:[{alias:null,args:e,concreteType:"Note",kind:"LinkedField",name:"note",plural:!1,selections:[t,i],storageKey:null},{alias:"tags",args:null,concreteType:"QueryNoteTagsConnection",kind:"LinkedField",name:"noteTags",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryNoteTagsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"NoteTag",kind:"LinkedField",name:"node",plural:!1,selections:[r,i],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"c834d22d2137232f9a9c98bbda6d7da8",id:null,metadata:{},name:"NoteEditorQuery",operationKind:"query",text:`query NoteEditorQuery(
  $slug: String!
) {
  note(slug: $slug) {
    content
    id
  }
  tags: noteTags {
    edges {
      node {
        slug
        id
      }
    }
  }
}
`}}}();lke.hash="17dddbf69a776062e503bfcf82cb9182";const cke=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"Note",kind:"LinkedField",name:"createOrUpdateNote",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"NoteEditorUpsertNoteMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"NoteEditorUpsertNoteMutation",selections:e},params:{cacheID:"b9e2b6aa128fa2922cc4a67699eb868c",id:null,metadata:{},name:"NoteEditorUpsertNoteMutation",operationKind:"mutation",text:`mutation NoteEditorUpsertNoteMutation(
  $input: MutationCreateOrUpdateNoteInput!
) {
  createOrUpdateNote(input: $input) {
    id
  }
}
`}}}();cke.hash="9e9eaa521d0bb082f0ce109a6f8d841a";const s1n=n=>n.loading?_(ls,{children:"Loading..."}):_(v.Suspense,{fallback:"Loading...",children:_(o1n,{...n})}),o1n=n=>{var o;const e=v.useRef(),t=ot.useLazyLoadQuery(lke,{slug:n.slug}),[r]=Y$(cke),i=async a=>{var l,c;(l=n.onSaveBegin)==null||l.call(n,{html:a,tags:[]}),await r({variables:{input:{date:Qn().format("YYYY-MM-DD"),slug:n.slug,title:n.title,content:a,tags:[],newTags:[],removedTags:[]}}}),(c=n.onSaveEnd)==null||c.call(n,{html:a,tags:[]})},s=m1({extensions:[Z9],editorProps:{attributes:{class:"prose focus:outline-none"}},content:((o=t.note)==null?void 0:o.content)??n.initialValue,autofocus:n.autofocus,onUpdate:({editor:a})=>{e.current&&clearTimeout(e.current);const l=a.getHTML();e.current=setTimeout(()=>{i(l)},1e3),n.onChange&&n.onChange({html:l,tags:[]})}});return v.useEffect(()=>{s&&n.saveNow&&i(s.getHTML())},[n.saveNow,s]),_(p1,{editor:s})},uke={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Day_day",selections:[{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},{args:null,kind:"FragmentSpread",name:"DayContent_day"},{args:null,kind:"FragmentSpread",name:"DayAddTaskActionsBar_day"}],type:"Day",abstractKey:null};uke.hash="72d16b5a1bc3290d01debf8f07fc5abb";const dke={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DayContent_day",selections:[{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{args:null,kind:"FragmentSpread",name:"TaskCard_task"}],storageKey:null}],type:"Day",abstractKey:null};dke.hash="cd930b13f1a6ab54578100c611c696b8";const fke=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"DayUpdateTaskDateMutation",selections:[{alias:null,args:e,concreteType:"Day",kind:"LinkedField",name:"updateTaskDate",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"Day_day"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"DayUpdateTaskDateMutation",selections:[{alias:null,args:e,concreteType:"Day",kind:"LinkedField",name:"updateTaskDate",plural:!0,selections:[t,{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null}],storageKey:null}],storageKey:null},r],storageKey:null}]},params:{cacheID:"08da7e6fa7ce1b2aa5a16cbc4fba401a",id:null,metadata:{},name:"DayUpdateTaskDateMutation",operationKind:"mutation",text:`mutation DayUpdateTaskDateMutation(
  $input: MutationUpdateTaskDateInput!
) {
  updateTaskDate(input: $input) {
    ...Day_day
    id
  }
}

fragment DayAddTaskActionsBar_day on Day {
  date
}

fragment DayContent_day on Day {
  date
  tasks {
    __typename
    id
    status
    ...TaskCard_task
  }
}

fragment Day_day on Day {
  date
  ...DayContent_day
  ...DayAddTaskActionsBar_day
}

fragment RenderTaskCardActions_task on Task {
  id
  status
  durationInMinutes
  item {
    id
    isRelevant
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderTaskCardDetails_task on Task {
  durationInMinutes
  item {
    id
    scheduledAt
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment TaskCardActions_task on Task {
  status
  id
  item {
    id
    isRelevant
  }
  ...TaskCardDurationButton_task
  ...RenderTaskCardActions_task
}

fragment TaskCardDurationButton_task on Task {
  id
  durationInMinutes
}

fragment TaskCard_task on Task {
  id
  date
  title
  status
  completedAt
  ...RenderTaskCardDetails_task
  ...TaskCardActions_task
  ...TaskTitle_task
}

fragment TaskTitle_task on Task {
  id
  title
}
`}}}();fke.hash="a22478d08dc05ae8e2a9e90f8c7607e4";const hke={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DayAddTaskActionsBar_day",selections:[{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],type:"Day",abstractKey:null};hke.hash="a9f9dc3c80441b09693bb1f9eaf1f920";const pke={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TaskCard_task",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null},{args:null,kind:"FragmentSpread",name:"RenderTaskCardDetails_task"},{args:null,kind:"FragmentSpread",name:"TaskCardActions_task"},{args:null,kind:"FragmentSpread",name:"TaskTitle_task"}],type:"Task",abstractKey:null};pke.hash="c3119919327d27fc113f73bc80cefac5";const mke=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"id"}],e=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"}],concreteType:"Task",kind:"LinkedField",name:"deleteTask",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"TaskCardDeleteTaskMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"TaskCardDeleteTaskMutation",selections:e},params:{cacheID:"a8a989d8a8ea8875fc19b3749f174c2e",id:null,metadata:{},name:"TaskCardDeleteTaskMutation",operationKind:"mutation",text:`mutation TaskCardDeleteTaskMutation(
  $id: ID!
) {
  deleteTask(id: $id) {
    id
    date
  }
}
`}}}();mke.hash="ecf1a01e66f90fd98ddc3ddb977e73bd";const gke=function(){var n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TaskCardActions_task",selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},n,{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"TaskCardDurationButton_task"},{args:null,kind:"FragmentSpread",name:"RenderTaskCardActions_task"}],type:"Task",abstractKey:null}}();gke.hash="6d99e9aa7f729bb66b829d4e53b1102b";const yke=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"TaskCardUpdateTaskStatusMutation",selections:[{alias:null,args:e,concreteType:"Day",kind:"LinkedField",name:"updateTaskStatus",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"Day_day"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"TaskCardUpdateTaskStatusMutation",selections:[{alias:null,args:e,concreteType:"Day",kind:"LinkedField",name:"updateTaskStatus",plural:!0,selections:[t,{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null}],storageKey:null}],storageKey:null},r],storageKey:null}]},params:{cacheID:"0834fa5e7ffe4e071be844348921c9bf",id:null,metadata:{},name:"TaskCardUpdateTaskStatusMutation",operationKind:"mutation",text:`mutation TaskCardUpdateTaskStatusMutation(
  $input: MutationUpdateTaskStatusInput!
) {
  updateTaskStatus(input: $input) {
    ...Day_day
    id
  }
}

fragment DayAddTaskActionsBar_day on Day {
  date
}

fragment DayContent_day on Day {
  date
  tasks {
    __typename
    id
    status
    ...TaskCard_task
  }
}

fragment Day_day on Day {
  date
  ...DayContent_day
  ...DayAddTaskActionsBar_day
}

fragment RenderTaskCardActions_task on Task {
  id
  status
  durationInMinutes
  item {
    id
    isRelevant
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderTaskCardDetails_task on Task {
  durationInMinutes
  item {
    id
    scheduledAt
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment TaskCardActions_task on Task {
  status
  id
  item {
    id
    isRelevant
  }
  ...TaskCardDurationButton_task
  ...RenderTaskCardActions_task
}

fragment TaskCardDurationButton_task on Task {
  id
  durationInMinutes
}

fragment TaskCard_task on Task {
  id
  date
  title
  status
  completedAt
  ...RenderTaskCardDetails_task
  ...TaskCardActions_task
  ...TaskTitle_task
}

fragment TaskTitle_task on Task {
  id
  title
}
`}}}();yke.hash="4bdedcde3a9735b856bfc9f1432a46b7";const vke=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"Item",kind:"LinkedField",name:"updateItemStatus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"TaskCardUpdateItemStatusMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"TaskCardUpdateItemStatusMutation",selections:e},params:{cacheID:"7834afc56082caea11de8b958daa737a",id:null,metadata:{},name:"TaskCardUpdateItemStatusMutation",operationKind:"mutation",text:`mutation TaskCardUpdateItemStatusMutation(
  $input: MutationUpdateItemStatusInput!
) {
  updateItemStatus(input: $input) {
    id
    isRelevant
  }
}
`}}}();vke.hash="b828e47e946a214ae5ea3a025cdbc930";const bke={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TaskCardDurationButton_task",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null}],type:"Task",abstractKey:null};bke.hash="e79bab612e24897ba958afb86976cd24";const kke=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"TaskCardUpdateTaskDurationMutation",selections:[{alias:null,args:e,concreteType:"Task",kind:"LinkedField",name:"updateTask",plural:!1,selections:[t],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"TaskCardUpdateTaskDurationMutation",selections:[{alias:null,args:e,concreteType:"Task",kind:"LinkedField",name:"updateTask",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"043ef0f14d0be0217b5580c70451442e",id:null,metadata:{},name:"TaskCardUpdateTaskDurationMutation",operationKind:"mutation",text:`mutation TaskCardUpdateTaskDurationMutation(
  $input: MutationUpdateTaskInput!
) {
  updateTask(input: $input) {
    durationInMinutes
    id
  }
}
`}}}();kke.hash="96216c7078ed4b587c241a62e3cfb66a";const xke={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TaskTitle_task",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"Task",abstractKey:null};xke.hash="b0daa7afdc4951c3ef4cda45b16f236b";const Ske=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"Task",kind:"LinkedField",name:"updateTask",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"TaskTitleUpdateTaskTitleMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"TaskTitleUpdateTaskTitleMutation",selections:e},params:{cacheID:"134f30312057816a7c0d8984566d4390",id:null,metadata:{},name:"TaskTitleUpdateTaskTitleMutation",operationKind:"mutation",text:`mutation TaskTitleUpdateTaskTitleMutation(
  $input: MutationUpdateTaskInput!
) {
  updateTask(input: $input) {
    id
    title
  }
}
`}}}();Ske.hash="50fb71fbbb78a9950fc54b56af7a5bc9";const a1n=n=>{const e=ot.useFragment(xke,n.task),[t]=Ga(Ske),r=i=>{console.log("saving",e==null?void 0:e.id),t({variables:{input:{id:e==null?void 0:e.id,title:i}},optimisticResponse:{updateTask:{id:e==null?void 0:e.id,title:i}}})};return _(ej,{initialValue:e==null?void 0:e.title,onSave:r})},ej=n=>{const e=v.useRef(null),[t,r]=v.useState(n.autoFocus??!1),i=v.useCallback(()=>{var a,l,c;if(r(!1),!e.current)return;if(e.current.isEmpty){(a=n.onCancel)==null||a.call(n);return}if(!e.current.isEditable)return;const o=e.current.getHTML();if(o===n.initialValue){(l=n.onCancel)==null||l.call(n);return}(c=n.onSave)==null||c.call(n,o)},[e.current]);e.current=m1({extensions:[X9,Y9(()=>{e.current.commands.blur()}),E9.configure({suggestion:{char:"#"}})],content:n.initialValue??"",onBlur:i});const s=()=>{setTimeout(()=>{r(!0)},1)};return v.useEffect(()=>{var o,a;(o=e.current)==null||o.setEditable(t),t&&((a=e.current)==null||a.commands.focus("end"))},[t,e.current]),v.useEffect(()=>{e.current&&n.initialValue!==void 0&&n.initialValue!==e.current.getHTML()&&e.current.commands.setContent(n.initialValue)},[e.current,n.initialValue]),_(p1,{className:n.className??"TaskTitleInput w-full cursor-text p-0",editor:e.current,onClick:s})};function sr(){return sr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sr.apply(this,arguments)}function xn(){return xn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xn.apply(this,arguments)}function tj(n){const e=n+"CollectionProvider",[t,r]=Jo(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:p,children:m}=h,g=ee.useRef(null),y=ee.useRef(new Map).current;return ee.createElement(i,{scope:p,itemMap:y,collectionRef:g},m)},a=n+"CollectionSlot",l=ee.forwardRef((h,p)=>{const{scope:m,children:g}=h,y=s(a,m),k=at(p,y.collectionRef);return ee.createElement(Cd,{ref:k},g)}),c=n+"CollectionItemSlot",u="data-radix-collection-item",d=ee.forwardRef((h,p)=>{const{scope:m,children:g,...y}=h,k=ee.useRef(null),b=at(p,k),S=s(c,m);return ee.useEffect(()=>(S.itemMap.set(k,{ref:k,...y}),()=>void S.itemMap.delete(k))),ee.createElement(Cd,{[u]:"",ref:b},g)});function f(h){const p=s(n+"CollectionConsumer",h);return ee.useCallback(()=>{const g=p.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((S,w)=>y.indexOf(S.ref.current)-y.indexOf(w.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}const l1n=v.createContext(void 0);function nj(n){const e=v.useContext(l1n);return n||e||"ltr"}let XP=0;function LA(){v.useEffect(()=>{var n,e;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(n=t[0])!==null&&n!==void 0?n:cee()),document.body.insertAdjacentElement("beforeend",(e=t[1])!==null&&e!==void 0?e:cee()),XP++,()=>{XP===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),XP--}},[])}function cee(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}function vL(){return vL=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vL.apply(this,arguments)}const ZP="focusScope.autoFocusOnMount",eD="focusScope.autoFocusOnUnmount",uee={bubbles:!1,cancelable:!0},rj=v.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=v.useState(null),c=Bn(i),u=Bn(s),d=v.useRef(null),f=at(e,m=>l(m)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let m=function(b){if(h.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:Cu(d.current,{select:!0})},g=function(b){if(h.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||Cu(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const w of b)w.removedNodes.length>0&&Cu(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const k=new MutationObserver(y);return a&&k.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),k.disconnect()}}},[r,a,h.paused]),v.useEffect(()=>{if(a){fee.add(h);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(ZP,uee);a.addEventListener(ZP,c),a.dispatchEvent(y),y.defaultPrevented||(c1n(p1n(wke(a)),{select:!0}),document.activeElement===m&&Cu(a))}return()=>{a.removeEventListener(ZP,c),setTimeout(()=>{const y=new CustomEvent(eD,uee);a.addEventListener(eD,u),a.dispatchEvent(y),y.defaultPrevented||Cu(m??document.body,{select:!0}),a.removeEventListener(eD,u),fee.remove(h)},0)}}},[a,c,u,h]);const p=v.useCallback(m=>{if(!t&&!r||h.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const k=m.currentTarget,[b,S]=u1n(k);b&&S?!m.shiftKey&&y===S?(m.preventDefault(),t&&Cu(b,{select:!0})):m.shiftKey&&y===b&&(m.preventDefault(),t&&Cu(S,{select:!0})):y===k&&m.preventDefault()}},[t,r,h.paused]);return v.createElement(qe.div,vL({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function c1n(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Cu(r,{select:e}),document.activeElement!==t)return}function u1n(n){const e=wke(n),t=dee(e,n),r=dee(e.reverse(),n);return[t,r]}function wke(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function dee(n,e){for(const t of n)if(!d1n(t,{upTo:e}))return t}function d1n(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function f1n(n){return n instanceof HTMLInputElement&&"select"in n}function Cu(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&f1n(n)&&e&&n.select()}}const fee=h1n();function h1n(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=hee(n,e),n.unshift(e)},remove(e){var t;n=hee(n,e),(t=n[0])===null||t===void 0||t.resume()}}}function hee(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function p1n(n){return n.filter(e=>e.tagName!=="A")}function Ak(){return Ak=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ak.apply(this,arguments)}const tD="rovingFocusGroup.onEntryFocus",m1n={bubbles:!1,cancelable:!0},ij="RovingFocusGroup",[bL,$ke,g1n]=tj(ij),[y1n,Eke]=Jo(ij,[g1n]),[v1n,b1n]=y1n(ij),k1n=v.forwardRef((n,e)=>v.createElement(bL.Provider,{scope:n.__scopeRovingFocusGroup},v.createElement(bL.Slot,{scope:n.__scopeRovingFocusGroup},v.createElement(x1n,Ak({},n,{ref:e}))))),x1n=v.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=n,d=v.useRef(null),f=at(e,d),h=nj(s),[p=null,m]=Qc({prop:o,defaultProp:a,onChange:l}),[g,y]=v.useState(!1),k=Bn(c),b=$ke(t),S=v.useRef(!1),[w,x]=v.useState(0);return v.useEffect(()=>{const $=d.current;if($)return $.addEventListener(tD,k),()=>$.removeEventListener(tD,k)},[k]),v.createElement(v1n,{scope:t,orientation:r,dir:h,loop:i,currentTabStopId:p,onItemFocus:v.useCallback($=>m($),[m]),onItemShiftTab:v.useCallback(()=>y(!0),[]),onFocusableItemAdd:v.useCallback(()=>x($=>$+1),[]),onFocusableItemRemove:v.useCallback(()=>x($=>$-1),[])},v.createElement(qe.div,Ak({tabIndex:g||w===0?-1:0,"data-orientation":r},u,{ref:f,style:{outline:"none",...n.style},onMouseDown:me(n.onMouseDown,()=>{S.current=!0}),onFocus:me(n.onFocus,$=>{const E=!S.current;if($.target===$.currentTarget&&E&&!g){const C=new CustomEvent(tD,m1n);if($.currentTarget.dispatchEvent(C),!C.defaultPrevented){const M=b().filter(R=>R.focusable),P=M.find(R=>R.active),I=M.find(R=>R.id===p),T=[P,I,...M].filter(Boolean).map(R=>R.ref.current);Cke(T)}}S.current=!1}),onBlur:me(n.onBlur,()=>y(!1))})))}),S1n="RovingFocusGroupItem",w1n=v.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,...o}=n,a=Qs(),l=s||a,c=b1n(S1n,t),u=c.currentTabStopId===l,d=$ke(t),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return v.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),v.createElement(bL.ItemSlot,{scope:t,id:l,focusable:r,active:i},v.createElement(qe.span,Ak({tabIndex:u?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:me(n.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:me(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:me(n.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=C1n(p,c.orientation,c.dir);if(m!==void 0){p.preventDefault();let y=d().filter(k=>k.focusable).map(k=>k.ref.current);if(m==="last")y.reverse();else if(m==="prev"||m==="next"){m==="prev"&&y.reverse();const k=y.indexOf(p.currentTarget);y=c.loop?M1n(y,k+1):y.slice(k+1)}setTimeout(()=>Cke(y))}})})))}),$1n={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function E1n(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function C1n(n,e,t){const r=E1n(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $1n[r]}function Cke(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function M1n(n,e){return n.map((t,r)=>n[(e+r)%n.length])}const T1n=k1n,_1n=w1n;var A1n=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Zp=new WeakMap,YS=new WeakMap,XS={},nD=0,Mke=function(n){return n&&(n.host||Mke(n.parentNode))},I1n=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=Mke(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},R1n=function(n,e,t,r){var i=I1n(e,Array.isArray(n)?n:[n]);XS[t]||(XS[t]=new WeakMap);var s=XS[t],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(Zp.get(f)||0)+1,g=(s.get(f)||0)+1;Zp.set(f,m),s.set(f,g),o.push(f),m===1&&p&&YS.set(f,!0),g===1&&f.setAttribute(t,"true"),p||f.setAttribute(r,"true")}})};return u(e),a.clear(),nD++,function(){o.forEach(function(d){var f=Zp.get(d)-1,h=s.get(d)-1;Zp.set(d,f),s.set(d,h),f||(YS.has(d)||d.removeAttribute(r),YS.delete(d)),h||d.removeAttribute(t)}),nD--,nD||(Zp=new WeakMap,Zp=new WeakMap,YS=new WeakMap,XS={})}},C1=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=e||A1n(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),R1n(r,i,t,"aria-hidden")):function(){return null}},Tr=function(){return Tr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Tr.apply(this,arguments)};function sj(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Tke(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var $b="right-scroll-bar-position",Eb="width-before-scroll-bar",O1n="with-scroll-bars-hidden",P1n="--removed-body-scroll-bar-size";function D1n(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function N1n(n,e){var t=v.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}function _ke(n,e){return N1n(e||null,function(t){return n.forEach(function(r){return D1n(r,t)})})}function F1n(n){return n}function L1n(n,e){e===void 0&&(e=F1n);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return i}function Ake(n){n===void 0&&(n={});var e=L1n(null);return e.options=Tr({async:!0,ssr:!1},n),e}var Ike=function(n){var e=n.sideCar,t=sj(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,Tr({},t))};Ike.isSideCarExport=!0;function Rke(n,e){return n.useMedium(e),Ike}var Oke=Ake(),rD=function(){},zA=v.forwardRef(function(n,e){var t=v.useRef(null),r=v.useState({onScrollCapture:rD,onWheelCapture:rD,onTouchMoveCapture:rD}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,d=n.shards,f=n.sideCar,h=n.noIsolation,p=n.inert,m=n.allowPinchZoom,g=n.as,y=g===void 0?"div":g,k=sj(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=f,S=_ke([t,e]),w=Tr(Tr({},k),i);return v.createElement(v.Fragment,null,u&&v.createElement(b,{sideCar:Oke,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:t}),o?v.cloneElement(v.Children.only(a),Tr(Tr({},w),{ref:S})):v.createElement(y,Tr({},w,{className:l,ref:S}),a))});zA.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zA.classNames={fullWidth:Eb,zeroRight:$b};var pee,z1n=function(){if(pee)return pee;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function B1n(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=z1n();return e&&n.setAttribute("nonce",e),n}function j1n(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function V1n(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var q1n=function(){var n=0,e=null;return{add:function(t){n==0&&(e=B1n())&&(j1n(e,t),V1n(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},K1n=function(){var n=q1n();return function(e,t){v.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},oj=function(){var n=K1n(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},U1n={left:0,top:0,right:0,gap:0},iD=function(n){return parseInt(n||"",10)||0},H1n=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[iD(t),iD(r),iD(i)]},W1n=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return U1n;var e=H1n(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},G1n=oj(),J1n=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(O1n,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($b,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Eb,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat($b," .").concat($b,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Eb," .").concat(Eb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(P1n,": ").concat(a,`px;
  }
`)},Pke=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r,s=v.useMemo(function(){return W1n(i)},[i]);return v.createElement(G1n,{styles:J1n(s,!e,i,t?"":"!important")})},kL=!1;if(typeof window<"u")try{var ZS=Object.defineProperty({},"passive",{get:function(){return kL=!0,!0}});window.addEventListener("test",ZS,ZS),window.removeEventListener("test",ZS,ZS)}catch{kL=!1}var em=kL?{passive:!1}:!1,Q1n=function(n){return n.tagName==="TEXTAREA"},Dke=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Q1n(n)&&t[e]==="visible")},Y1n=function(n){return Dke(n,"overflowY")},X1n=function(n){return Dke(n,"overflowX")},mee=function(n,e){var t=e;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var r=Nke(n,t);if(r){var i=Fke(n,t),s=i[1],o=i[2];if(s>o)return!0}t=t.parentNode}while(t&&t!==document.body);return!1},Z1n=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},exn=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},Nke=function(n,e){return n==="v"?Y1n(e):X1n(e)},Fke=function(n,e){return n==="v"?Z1n(e):exn(e)},txn=function(n,e){return n==="h"&&e==="rtl"?-1:1},nxn=function(n,e,t,r,i){var s=txn(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=Fke(n,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Nke(n,a)&&(d+=y,f+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&d===0||!i&&o>d)||!u&&(i&&f===0||!i&&-o>f))&&(c=!0),c},ew=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},gee=function(n){return[n.deltaX,n.deltaY]},yee=function(n){return n&&"current"in n?n.current:n},rxn=function(n,e){return n[0]===e[0]&&n[1]===e[1]},ixn=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},sxn=0,tm=[];function oxn(n){var e=v.useRef([]),t=v.useRef([0,0]),r=v.useRef(),i=v.useState(sxn++)[0],s=v.useState(function(){return oj()})[0],o=v.useRef(n);v.useEffect(function(){o.current=n},[n]),v.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Tke([n.lockRef.current],(n.shards||[]).map(yee),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=v.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=ew(m),k=t.current,b="deltaX"in m?m.deltaX:k[0]-y[0],S="deltaY"in m?m.deltaY:k[1]-y[1],w,x=m.target,$=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in m&&$==="h"&&x.type==="range")return!1;var E=mee($,x);if(!E)return!0;if(E?w=$:(w=$==="v"?"h":"v",E=mee($,x)),!E)return!1;if(!r.current&&"changedTouches"in m&&(b||S)&&(r.current=w),!w)return!0;var C=r.current||w;return nxn(C,g,m,C==="h"?b:S,!0)},[]),l=v.useCallback(function(m){var g=m;if(!(!tm.length||tm[tm.length-1]!==s)){var y="deltaY"in g?gee(g):ew(g),k=e.current.filter(function(w){return w.name===g.type&&w.target===g.target&&rxn(w.delta,y)})[0];if(k&&k.should){g.cancelable&&g.preventDefault();return}if(!k){var b=(o.current.shards||[]).map(yee).filter(Boolean).filter(function(w){return w.contains(g.target)}),S=b.length>0?a(g,b[0]):!o.current.noIsolation;S&&g.cancelable&&g.preventDefault()}}},[]),c=v.useCallback(function(m,g,y,k){var b={name:m,delta:g,target:y,should:k};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=v.useCallback(function(m){t.current=ew(m),r.current=void 0},[]),d=v.useCallback(function(m){c(m.type,gee(m),m.target,a(m,n.lockRef.current))},[]),f=v.useCallback(function(m){c(m.type,ew(m),m.target,a(m,n.lockRef.current))},[]);v.useEffect(function(){return tm.push(s),n.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,em),document.addEventListener("touchmove",l,em),document.addEventListener("touchstart",u,em),function(){tm=tm.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,em),document.removeEventListener("touchmove",l,em),document.removeEventListener("touchstart",u,em)}},[]);var h=n.removeScrollBar,p=n.inert;return v.createElement(v.Fragment,null,p?v.createElement(s,{styles:ixn(i)}):null,h?v.createElement(Pke,{gapMode:"margin"}):null)}const axn=Rke(Oke,oxn);var Lke=v.forwardRef(function(n,e){return v.createElement(zA,Tr({},n,{ref:e,sideCar:axn}))});Lke.classNames=zA.classNames;const BA=Lke,xL=["Enter"," "],lxn=["ArrowDown","PageUp","Home"],zke=["ArrowUp","PageDown","End"],cxn=[...lxn,...zke],uxn={ltr:[...xL,"ArrowRight"],rtl:[...xL,"ArrowLeft"]},dxn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jA="Menu",[Ik,fxn,hxn]=tj(jA),[Mp,VA]=Jo(jA,[hxn,_0,Eke]),qA=_0(),Bke=Eke(),[jke,yf]=Mp(jA),[pxn,M1]=Mp(jA),mxn=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=n,a=qA(e),[l,c]=v.useState(null),u=v.useRef(!1),d=Bn(s),f=nj(i);return v.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),v.createElement(q_,a,v.createElement(jke,{scope:e,open:t,onOpenChange:d,content:l,onContentChange:c},v.createElement(pxn,{scope:e,onClose:v.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o},r)))},Vke=v.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=qA(t);return v.createElement(n8,xn({},i,r,{ref:e}))}),qke="MenuPortal",[gxn,Kke]=Mp(qke,{forceMount:void 0}),yxn=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,s=yf(qke,e);return v.createElement(gxn,{scope:e,forceMount:t},v.createElement(Qo,{present:t||s.open},v.createElement(i8,{asChild:!0,container:i},r)))},Ha="MenuContent",[vxn,aj]=Mp(Ha),bxn=v.forwardRef((n,e)=>{const t=Kke(Ha,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=yf(Ha,n.__scopeMenu),o=M1(Ha,n.__scopeMenu);return v.createElement(Ik.Provider,{scope:n.__scopeMenu},v.createElement(Qo,{present:r||s.open},v.createElement(Ik.Slot,{scope:n.__scopeMenu},o.modal?v.createElement(kxn,xn({},i,{ref:e})):v.createElement(xxn,xn({},i,{ref:e})))))}),kxn=v.forwardRef((n,e)=>{const t=yf(Ha,n.__scopeMenu),r=v.useRef(null),i=at(e,r);return v.useEffect(()=>{const s=r.current;if(s)return C1(s)},[]),v.createElement(lj,xn({},n,{ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:me(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)}))}),xxn=v.forwardRef((n,e)=>{const t=yf(Ha,n.__scopeMenu);return v.createElement(lj,xn({},n,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)}))}),lj=v.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...m}=n,g=yf(Ha,t),y=M1(Ha,t),k=qA(t),b=Bke(t),S=fxn(t),[w,x]=v.useState(null),$=v.useRef(null),E=at(e,$,g.onContentChange),C=v.useRef(0),M=v.useRef(""),P=v.useRef(0),I=v.useRef(null),N=v.useRef("right"),T=v.useRef(0),R=p?BA:v.Fragment,A=p?{as:Cd,allowPinchZoom:!0}:void 0,L=O=>{var z,j;const K=M.current+O,Z=S().filter(xe=>!xe.disabled),te=document.activeElement,pe=(z=Z.find(xe=>xe.ref.current===te))===null||z===void 0?void 0:z.textValue,he=Z.map(xe=>xe.textValue),se=Bxn(he,K,pe),ke=(j=Z.find(xe=>xe.textValue===se))===null||j===void 0?void 0:j.ref.current;(function xe(be){M.current=be,window.clearTimeout(C.current),be!==""&&(C.current=window.setTimeout(()=>xe(""),1e3))})(K),ke&&setTimeout(()=>ke.focus())};v.useEffect(()=>()=>window.clearTimeout(C.current),[]),LA();const F=v.useCallback(O=>{var z,j;return N.current===((z=I.current)===null||z===void 0?void 0:z.side)&&Vxn(O,(j=I.current)===null||j===void 0?void 0:j.area)},[]);return v.createElement(vxn,{scope:t,searchRef:M,onItemEnter:v.useCallback(O=>{F(O)&&O.preventDefault()},[F]),onItemLeave:v.useCallback(O=>{var z;F(O)||((z=$.current)===null||z===void 0||z.focus(),x(null))},[F]),onTriggerLeave:v.useCallback(O=>{F(O)&&O.preventDefault()},[F]),pointerGraceTimerRef:P,onPointerGraceIntentChange:v.useCallback(O=>{I.current=O},[])},v.createElement(R,A,v.createElement(rj,{asChild:!0,trapped:i,onMountAutoFocus:me(s,O=>{var z;O.preventDefault(),(z=$.current)===null||z===void 0||z.focus()}),onUnmountAutoFocus:o},v.createElement(B_,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h},v.createElement(T1n,xn({asChild:!0},b,{dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:x,onEntryFocus:me(l,O=>{y.isUsingKeyboardRef.current||O.preventDefault()})}),v.createElement(r8,xn({role:"menu","aria-orientation":"vertical","data-state":Yke(g.open),"data-radix-menu-content":"",dir:y.dir},k,m,{ref:E,style:{outline:"none",...m.style},onKeyDown:me(m.onKeyDown,O=>{const j=O.target.closest("[data-radix-menu-content]")===O.currentTarget,K=O.ctrlKey||O.altKey||O.metaKey,Z=O.key.length===1;j&&(O.key==="Tab"&&O.preventDefault(),!K&&Z&&L(O.key));const te=$.current;if(O.target!==te||!cxn.includes(O.key))return;O.preventDefault();const he=S().filter(se=>!se.disabled).map(se=>se.ref.current);zke.includes(O.key)&&he.reverse(),Lxn(he)}),onBlur:me(n.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(C.current),M.current="")}),onPointerMove:me(n.onPointerMove,Rk(O=>{const z=O.target,j=T.current!==O.clientX;if(O.currentTarget.contains(z)&&j){const K=O.clientX>T.current?"right":"left";N.current=K,T.current=O.clientX}}))})))))))}),Uke=v.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.createElement(qe.div,xn({role:"group"},r,{ref:e}))}),Sxn=v.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.createElement(qe.div,xn({},r,{ref:e}))}),SL="MenuItem",vee="menu.itemSelect",cj=v.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=v.useRef(null),o=M1(SL,n.__scopeMenu),a=aj(SL,n.__scopeMenu),l=at(e,s),c=v.useRef(!1),u=()=>{const d=s.current;if(!t&&d){const f=new CustomEvent(vee,{bubbles:!0,cancelable:!0});d.addEventListener(vee,h=>r==null?void 0:r(h),{once:!0}),Gz(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return v.createElement(Hke,xn({},i,{ref:l,disabled:t,onClick:me(n.onClick,u),onPointerDown:d=>{var f;(f=n.onPointerDown)===null||f===void 0||f.call(n,d),c.current=!0},onPointerUp:me(n.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)===null||f===void 0||f.click()}),onKeyDown:me(n.onKeyDown,d=>{const f=a.searchRef.current!=="";t||f&&d.key===" "||xL.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),Hke=v.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,o=aj(SL,t),a=Bke(t),l=v.useRef(null),c=at(e,l),[u,d]=v.useState(!1),[f,h]=v.useState("");return v.useEffect(()=>{const p=l.current;if(p){var m;h(((m=p.textContent)!==null&&m!==void 0?m:"").trim())}},[s.children]),v.createElement(Ik.ItemSlot,{scope:t,disabled:r,textValue:i??f},v.createElement(_1n,xn({asChild:!0},a,{focusable:!r}),v.createElement(qe.div,xn({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},s,{ref:c,onPointerMove:me(n.onPointerMove,Rk(p=>{r?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:me(n.onPointerLeave,Rk(p=>o.onItemLeave(p))),onFocus:me(n.onFocus,()=>d(!0)),onBlur:me(n.onBlur,()=>d(!1))}))))}),wxn=v.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return v.createElement(Gke,{scope:n.__scopeMenu,checked:t},v.createElement(cj,xn({role:"menuitemcheckbox","aria-checked":DT(t)?"mixed":t},i,{ref:e,"data-state":uj(t),onSelect:me(i.onSelect,()=>r==null?void 0:r(DT(t)?!0:!t),{checkForDefaultPrevented:!1})})))}),$xn="MenuRadioGroup",[Exn,Cxn]=Mp($xn,{value:void 0,onValueChange:()=>{}}),Mxn=v.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=Bn(r);return v.createElement(Exn,{scope:n.__scopeMenu,value:t,onValueChange:s},v.createElement(Uke,xn({},i,{ref:e})))}),Txn="MenuRadioItem",_xn=v.forwardRef((n,e)=>{const{value:t,...r}=n,i=Cxn(Txn,n.__scopeMenu),s=t===i.value;return v.createElement(Gke,{scope:n.__scopeMenu,checked:s},v.createElement(cj,xn({role:"menuitemradio","aria-checked":s},r,{ref:e,"data-state":uj(s),onSelect:me(r.onSelect,()=>{var o;return(o=i.onValueChange)===null||o===void 0?void 0:o.call(i,t)},{checkForDefaultPrevented:!1})})))}),Wke="MenuItemIndicator",[Gke,Axn]=Mp(Wke,{checked:!1}),Ixn=v.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=Axn(Wke,t);return v.createElement(Qo,{present:r||DT(s.checked)||s.checked===!0},v.createElement(qe.span,xn({},i,{ref:e,"data-state":uj(s.checked)})))}),Rxn=v.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.createElement(qe.div,xn({role:"separator","aria-orientation":"horizontal"},r,{ref:e}))}),Jke="MenuSub",[Oxn,Qke]=Mp(Jke),Pxn=n=>{const{__scopeMenu:e,children:t,open:r=!1,onOpenChange:i}=n,s=yf(Jke,e),o=qA(e),[a,l]=v.useState(null),[c,u]=v.useState(null),d=Bn(i);return v.useEffect(()=>(s.open===!1&&d(!1),()=>d(!1)),[s.open,d]),v.createElement(q_,o,v.createElement(jke,{scope:e,open:r,onOpenChange:d,content:c,onContentChange:u},v.createElement(Oxn,{scope:e,contentId:Qs(),triggerId:Qs(),trigger:a,onTriggerChange:l},t)))},tw="MenuSubTrigger",Dxn=v.forwardRef((n,e)=>{const t=yf(tw,n.__scopeMenu),r=M1(tw,n.__scopeMenu),i=Qke(tw,n.__scopeMenu),s=aj(tw,n.__scopeMenu),o=v.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:n.__scopeMenu},u=v.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return v.useEffect(()=>u,[u]),v.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),v.createElement(Vke,xn({asChild:!0},c),v.createElement(Hke,xn({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":Yke(t.open)},n,{ref:z_(e,i.onTriggerChange),onClick:d=>{var f;(f=n.onClick)===null||f===void 0||f.call(n,d),!(n.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:me(n.onPointerMove,Rk(d=>{s.onItemEnter(d),!d.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:me(n.onPointerLeave,Rk(d=>{var f;u();const h=(f=t.content)===null||f===void 0?void 0:f.getBoundingClientRect();if(h){var p;const m=(p=t.content)===null||p===void 0?void 0:p.dataset.side,g=m==="right",y=g?-5:5,k=h[g?"left":"right"],b=h[g?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:k,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:k,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:me(n.onKeyDown,d=>{const f=s.searchRef.current!=="";if(!(n.disabled||f&&d.key===" ")&&uxn[r.dir].includes(d.key)){var h;t.onOpenChange(!0),(h=t.content)===null||h===void 0||h.focus(),d.preventDefault()}})})))}),Nxn="MenuSubContent",Fxn=v.forwardRef((n,e)=>{const t=Kke(Ha,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=yf(Ha,n.__scopeMenu),o=M1(Ha,n.__scopeMenu),a=Qke(Nxn,n.__scopeMenu),l=v.useRef(null),c=at(e,l);return v.createElement(Ik.Provider,{scope:n.__scopeMenu},v.createElement(Qo,{present:r||s.open},v.createElement(Ik.Slot,{scope:n.__scopeMenu},v.createElement(lj,xn({id:a.contentId,"aria-labelledby":a.triggerId},i,{ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:me(n.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:me(n.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:me(n.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),f=dxn[o.dir].includes(u.key);if(d&&f){var h;s.onOpenChange(!1),(h=a.trigger)===null||h===void 0||h.focus(),u.preventDefault()}})})))))});function Yke(n){return n?"open":"closed"}function DT(n){return n==="indeterminate"}function uj(n){return DT(n)?"indeterminate":n?"checked":"unchecked"}function Lxn(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function zxn(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function Bxn(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=zxn(n,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function jxn(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function Vxn(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return jxn(t,e)}function Rk(n){return e=>e.pointerType==="mouse"?n(e):void 0}const Xke=mxn,Zke=Vke,e1e=yxn,t1e=bxn,qxn=Uke,n1e=Sxn,r1e=cj,i1e=wxn,Kxn=Mxn,s1e=_xn,o1e=Ixn,a1e=Rxn,Uxn=Pxn,l1e=Dxn,c1e=Fxn,u1e="DropdownMenu",[Hxn,j2n]=Jo(u1e,[VA]),es=VA(),[Wxn,d1e]=Hxn(u1e),Gxn=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=n,l=es(e),c=v.useRef(null),[u=!1,d]=Qc({prop:i,defaultProp:s,onChange:o});return v.createElement(Wxn,{scope:e,triggerId:Qs(),triggerRef:c,contentId:Qs(),open:u,onOpenChange:d,onOpenToggle:v.useCallback(()=>d(f=>!f),[d]),modal:a},v.createElement(Xke,sr({},l,{open:u,onOpenChange:d,dir:r,modal:a}),t))},Jxn="DropdownMenuTrigger",Qxn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,s=d1e(Jxn,t),o=es(t);return v.createElement(Zke,sr({asChild:!0},o),v.createElement(qe.button,sr({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:z_(e,s.triggerRef),onPointerDown:me(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:me(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),Yxn=n=>{const{__scopeDropdownMenu:e,...t}=n,r=es(e);return v.createElement(e1e,sr({},r,t))},Xxn="DropdownMenuContent",Zxn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=d1e(Xxn,t),s=es(t),o=v.useRef(!1);return v.createElement(t1e,sr({id:i.contentId,"aria-labelledby":i.triggerId},s,r,{ref:e,onCloseAutoFocus:me(n.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:me(n.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),eSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(qxn,sr({},i,r,{ref:e}))}),tSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(n1e,sr({},i,r,{ref:e}))}),nSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(r1e,sr({},i,r,{ref:e}))}),rSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(i1e,sr({},i,r,{ref:e}))}),iSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(Kxn,sr({},i,r,{ref:e}))}),sSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(s1e,sr({},i,r,{ref:e}))}),oSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(o1e,sr({},i,r,{ref:e}))}),aSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(a1e,sr({},i,r,{ref:e}))}),lSn=n=>{const{__scopeDropdownMenu:e,children:t,open:r,onOpenChange:i,defaultOpen:s}=n,o=es(e),[a=!1,l]=Qc({prop:r,defaultProp:s,onChange:i});return v.createElement(Uxn,sr({},o,{open:a,onOpenChange:l}),t)},cSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(l1e,sr({},i,r,{ref:e}))}),uSn=v.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=es(t);return v.createElement(c1e,sr({},i,r,{ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),dSn=Gxn,fSn=Qxn,f1e=Yxn,hSn=Zxn,pSn=eSn,mSn=tSn,gSn=nSn,ySn=rSn,vSn=iSn,bSn=sSn,h1e=oSn,kSn=aSn,xSn=lSn,SSn=cSn,wSn=uSn,p1e=dSn,$Sn=pSn,ESn=f1e,CSn=xSn,MSn=vSn,m1e=ee.forwardRef(({className:n,...e},t)=>_(fSn,{ref:t,className:Ce("outline-none",n),...e}));ee.forwardRef(({className:n,inset:e,children:t,...r},i)=>de(SSn,{ref:i,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-black",e&&"pl-8",n),...r,children:[t,_(Ble,{size:16,className:"ml-auto"})]}));const TSn=ee.forwardRef(({className:n,...e},t)=>_(wSn,{ref:t,className:Ce("bg-background-50 ring-0.5 ring-primary-100 text-foreground-900 data-[state=open]:animate-fade-in data-[state=closed]:animate-fade-out z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-lg",n),...e})),g1e=ee.forwardRef(({className:n,sideOffset:e=4,...t},r)=>_(f1e,{children:_(hSn,{ref:r,sideOffset:e,className:Ce("bg-background-50 ring-0.5 ring-primary-100 animate-fade-in animate-duration-100 z-50 rounded-md p-1 shadow-md outline-none",n),...t})})),_Sn=ee.forwardRef(({className:n,inset:e,...t},r)=>_(gSn,{ref:r,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t})),y1e=ee.forwardRef(({className:n,children:e,checked:t,...r},i)=>de(ySn,{ref:i,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[_("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_(h1e,{children:_(Wh,{size:16})})}),e]})),ASn=ee.forwardRef(({className:n,children:e,...t},r)=>de(bSn,{ref:r,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[_("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_(h1e,{children:_(jle,{size:8})})}),e]})),v1e=ee.forwardRef(({className:n,inset:e,...t},r)=>_(mSn,{ref:r,className:Ce("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t})),b1e=ee.forwardRef(({className:n,...e},t)=>_(kSn,{ref:t,className:Ce("bg-primary-100 -mx-1 my-1 h-px",n),...e})),ISn=({className:n,...e})=>_("span",{className:Ce("ml-auto text-xs tracking-widest opacity-60",n),...e});function Ki(){return Ki=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ki.apply(this,arguments)}const k1e="ContextMenu",[RSn,V2n]=Jo(k1e,[VA]),Yo=VA(),[OSn,x1e]=RSn(k1e),PSn=n=>{const{__scopeContextMenu:e,children:t,onOpenChange:r,dir:i,modal:s=!0}=n,[o,a]=v.useState(!1),l=Yo(e),c=Bn(r),u=v.useCallback(d=>{a(d),c(d)},[c]);return v.createElement(OSn,{scope:e,open:o,onOpenChange:u,modal:s},v.createElement(Xke,Ki({},l,{dir:i,open:o,onOpenChange:u,modal:s}),t))},DSn="ContextMenuTrigger",NSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,disabled:r=!1,...i}=n,s=x1e(DSn,t),o=Yo(t),a=v.useRef({x:0,y:0}),l=v.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=v.useRef(0),u=v.useCallback(()=>window.clearTimeout(c.current),[]),d=f=>{a.current={x:f.clientX,y:f.clientY},s.onOpenChange(!0)};return v.useEffect(()=>u,[u]),v.useEffect(()=>void(r&&u()),[r,u]),v.createElement(v.Fragment,null,v.createElement(Zke,Ki({},o,{virtualRef:l})),v.createElement(qe.span,Ki({"data-state":s.open?"open":"closed","data-disabled":r?"":void 0},i,{ref:e,style:{WebkitTouchCallout:"none",...n.style},onContextMenu:r?n.onContextMenu:me(n.onContextMenu,f=>{u(),d(f),f.preventDefault()}),onPointerDown:r?n.onPointerDown:me(n.onPointerDown,nw(f=>{u(),c.current=window.setTimeout(()=>d(f),700)})),onPointerMove:r?n.onPointerMove:me(n.onPointerMove,nw(u)),onPointerCancel:r?n.onPointerCancel:me(n.onPointerCancel,nw(u)),onPointerUp:r?n.onPointerUp:me(n.onPointerUp,nw(u))})))}),FSn=n=>{const{__scopeContextMenu:e,...t}=n,r=Yo(e);return v.createElement(e1e,Ki({},r,t))},LSn="ContextMenuContent",zSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=x1e(LSn,t),s=Yo(t),o=v.useRef(!1);return v.createElement(t1e,Ki({},s,r,{ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=n.onCloseAutoFocus)===null||l===void 0||l.call(n,a),!a.defaultPrevented&&o.current&&a.preventDefault(),o.current=!1},onInteractOutside:a=>{var l;(l=n.onInteractOutside)===null||l===void 0||l.call(n,a),!a.defaultPrevented&&!i.modal&&(o.current=!0)},style:{...n.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),BSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=Yo(t);return v.createElement(n1e,Ki({},i,r,{ref:e}))}),jSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=Yo(t);return v.createElement(r1e,Ki({},i,r,{ref:e}))}),VSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=Yo(t);return v.createElement(i1e,Ki({},i,r,{ref:e}))}),qSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=Yo(t);return v.createElement(s1e,Ki({},i,r,{ref:e}))}),KSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=Yo(t);return v.createElement(o1e,Ki({},i,r,{ref:e}))}),USn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=Yo(t);return v.createElement(a1e,Ki({},i,r,{ref:e}))}),HSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=Yo(t);return v.createElement(l1e,Ki({},i,r,{ref:e}))}),WSn=v.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=Yo(t);return v.createElement(c1e,Ki({},i,r,{ref:e,style:{...n.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))});function nw(n){return e=>e.pointerType!=="mouse"?n(e):void 0}const GSn=PSn,JSn=NSn,QSn=FSn,YSn=zSn,XSn=BSn,ZSn=jSn,S1e=VSn,ewn=qSn,w1e=KSn,twn=USn,nwn=HSn,rwn=WSn,iwn=GSn,swn=JSn;v.forwardRef(({className:n,inset:e,children:t,...r},i)=>de(nwn,{ref:i,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 data-[state=open]:bg-primary-100/70 data-[state=open]:text-primary-500 flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",e&&"pl-8",n),...r,children:[t,_(Ble,{size:16,className:"ml-auto"})]}));v.forwardRef(({className:n,...e},t)=>_(rwn,{ref:t,className:Ce("bg-background-50 ring-0.5 ring-primary-100 text-foreground-900 data-[state=open]:animate-fade-in animate-duration-100 data-[state=closed]:animate-fade-out z-50 overflow-hidden rounded-md border p-1 shadow-md",n),...e}));const own=v.forwardRef(({className:n,...e},t)=>_(QSn,{children:_(YSn,{ref:t,className:Ce("bg-background-50 ring-0.5 ring-primary-100 text-foreground-900 animate-fade-in data-[state=open]:animate-duration-100 data-[state=open]:animate-fade-in data-[state=closed]:animate-fade-out data-[state=closed]:animate-duration-100 z-50 overflow-hidden rounded-md border p-1 shadow-md",n),...e})})),awn=v.forwardRef(({className:n,inset:e,...t},r)=>_(ZSn,{ref:r,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));v.forwardRef(({className:n,children:e,checked:t,...r},i)=>de(S1e,{ref:i,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[_("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_(w1e,{children:_(Wh,{size:16})})}),e]}));S1e.displayName;v.forwardRef(({className:n,children:e,...t},r)=>de(ewn,{ref:r,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[_("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_(w1e,{children:_(jle,{size:8})})}),e]}));v.forwardRef(({className:n,inset:e,...t},r)=>_(XSn,{ref:r,className:Ce("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));v.forwardRef(({className:n,...e},t)=>_(twn,{ref:t,className:Ce("bg-primary-100 -mx-1 my-1 h-px",n),...e}));const $1e=function(){var n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RenderTaskCardDetails_task",selections:[{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null}],storageKey:null}],type:"Task",abstractKey:null}}();$1e.hash="4041a38e30b3c8aa1458e56cf9edeb42";const Tp=(n,e)=>{v.useEffect(()=>{n()},e)},NT=n=>_("div",{className:Ce("bg-primary-100 text-primary-600 inline-flex h-min rounded px-1 py-px text-sm",n.className),children:n.children}),E1e=n=>de(NT,{children:[bee(Math.floor(n.durationInMinutes/60)),":",bee(n.durationInMinutes%60)]}),bee=(n,e=2)=>n.toLocaleString("en-US",{minimumIntegerDigits:e}),lwn=n=>_("div",{className:"inline-flex h-min rounded bg-green-100 px-1 py-[1px] text-sm text-green-700",children:Qn(n.time).format("HH:mm")}),cwn=({className:n,...e})=>_("div",{className:Ce("bg-foreground-600/40 animate-pulse rounded-sm",n),...e}),uwn=n=>{var r;const e=ot.useFragment($1e,n.task),t=de(ls,{children:[(e==null?void 0:e.durationInMinutes)&&_(E1e,{durationInMinutes:e==null?void 0:e.durationInMinutes}),((r=e==null?void 0:e.item)==null?void 0:r.scheduledAt)&&_(lwn,{time:e==null?void 0:e.item.scheduledAt})]});return _(v.Suspense,{fallback:de("div",{className:"flex flex-wrap gap-2",children:[t,!!(e!=null&&e.item)&&fwn]}),children:_(dwn,{task:e,nativeDetails:t})})},dwn=n=>{const{plugins:e}=ZA(),[t,r]=v.useState([]),[i,s]=v.useState([]);return Tp(async()=>{const o=[];for(const a of Object.values(e)){if(!a.renderTaskCardDetails)continue;const l=await a.renderTaskCardDetails({task:n.task});l&&o.push(...l)}r(o.filter(a=>a.fullWidth)),s(o.filter(a=>!a.fullWidth))},[e,n.task]),de("div",{className:"flex w-full flex-col gap-2",children:[t.map(({component:o},a)=>_(o,{},a)),de("div",{className:"flex flex-wrap gap-2",children:[n.nativeDetails,i.map(({component:o},a)=>_(o,{},a))]})]})},kee=(n,e)=>Math.floor(Math.random()*(e-n+1)+n),fwn=_(ls,{children:new Array(kee(1,3)).fill(0).map((n,e)=>_(cwn,{className:`w-${kee(8,12)} h-5.5`},e))}),C1e=function(){var n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RenderTaskCardActions_task",selections:[n,{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null}],storageKey:null}],type:"Task",abstractKey:null}}();C1e.hash="0c28dd4f0c5e29cd61c19f43e2039c27";const hwn=n=>{const e=ot.useFragment(C1e,n.task);return _(v.Suspense,{children:_(pwn,{task:e})})},pwn=n=>{const{plugins:e}=ZA(),[t,r]=v.useState([]);return Tp(async()=>{const i=[];for(const s of Object.values(e)){if(!s.renderTaskCardActions)continue;const o=await s.renderTaskCardActions({task:n.task});o&&i.push(...o)}r(i)},[e]),_(ls,{children:t.map(({component:i},s)=>_(i,{},s))})},M1e=n=>{const e=ot.useFragment(pke,n.task),[t]=Ga(mke),r=()=>{t({variables:{id:e==null?void 0:e.id},optimisticResponse:{deleteTask:{id:e==null?void 0:e.id,date:e==null?void 0:e.date}},optimisticUpdater:xee,updater:xee})};return de(iwn,{children:[_(swn,{children:de("div",{className:Ce("bg-background-50 group flex cursor-pointer flex-col gap-1 rounded-lg p-3 shadow-sm hover:shadow-md",(e==null?void 0:e.status)!=="TODO"&&"opacity-50 hover:opacity-100"),children:[_(a1n,{task:e}),_(uwn,{task:e}),_(mwn,{task:e})]})}),_(own,{children:_(awn,{onClick:r,children:"Delete task"})})]})},mwn=n=>{const e=ot.useFragment(gke,n.task),[t]=Y$(yke),[r]=Y$(vke),i=async h=>{const p=t({variables:{input:{id:e==null?void 0:e.id,status:h}}});Ar.promise(p,{loading:"Updating task...",success:"Task updated",error:m=>m.message})},s=async h=>{await i(h?"DONE":"TODO"),e!=null&&e.item&&await r({variables:{input:{id:e==null?void 0:e.item.id,done:h}}})},o=_(zu,{onClick:()=>i("DONE"),children:_(Wh,{})},"done"),a=_(zu,{className:"bg-positive-100 text-positive-600 hover:bg-positive-200 active:bg-positive-300",onClick:()=>i("TODO"),children:_(Wh,{})},"undoDone"),l=_(zu,{className:"hidden group-hover:flex",onClick:()=>s(!0),children:_(s3,{})},"superdone"),c=_(zu,{className:"bg-positive-100 text-positive-600 hover:bg-positive-200 active:bg-positive-300",onClick:()=>s(!1),children:_(s3,{})},"undoSuperdone"),u=_(zu,{className:"hidden group-hover:flex",onClick:()=>i("CANCELED"),children:_(rE,{size:20})},"cancel"),d=_(zu,{className:"bg-negative-100 text-negative-600 hover:bg-negative-200 active:bg-negative-300",onClick:()=>i("TODO"),children:_(rE,{size:20})},"undoCancel"),f=v.useMemo(()=>(e==null?void 0:e.status)==="TODO"?[o,...e!=null&&e.item?[l]:[],u]:(e==null?void 0:e.status)==="DONE"?e!=null&&e.item&&!(e!=null&&e.item.isRelevant)?[a,c]:[a]:(e==null?void 0:e.status)==="CANCELED"?[d]:[],[e==null?void 0:e.status]);return de("div",{className:"flex gap-2",children:[f.map(h=>h),_(ywn,{task:e}),_(hwn,{task:e})]})},gwn=[{label:"None",value:null},{label:"5 minutes",value:5},{label:"10 minutes",value:10},{label:"15 minutes",value:15},{label:"20 minutes",value:20},{label:"30 minutes",value:30},{label:"40 minutes",value:40},{label:"45 minutes",value:45},{label:"1 hour",value:60},{label:"1.5 hours",value:90},{label:"2 hours",value:120},{label:"2.5 hours",value:150},{label:"3 hours",value:180}],ywn=n=>{const[e,t]=v.useState(!1),r=ot.useFragment(bke,n.task),[i]=Ga(kke),s=o=>{i({variables:{input:{id:r==null?void 0:r.id,durationInMinutes:o}},optimisticResponse:{updateTask:{id:r==null?void 0:r.id,durationInMinutes:o}}})};return _(T1e,{open:e,setOpen:t,value:r==null?void 0:r.durationInMinutes,onChange:s})},T1e=n=>de(p1e,{open:n.open,onOpenChange:n.setOpen,children:[_(m1e,{children:_(zu,{className:Ce(!n.showByDefault&&"hidden group-hover:flex",n.open&&"flex"),children:_(Cqe,{size:16,stroke:"2px"})})}),de(g1e,{align:"start",children:[_(v1e,{children:"How long will you take?"}),_(b1e,{}),_("div",{className:"no-scrollbar max-h-40 overflow-y-scroll",children:gwn.map(e=>_(y1e,{onClick:()=>n.onChange(e.value),checked:n.value===e.value,children:e.label},e.value))})]})]}),xee=(n,e)=>{const t=n.get(`Day_${e.deleteTask.date}`),r=t==null?void 0:t.getLinkedRecords("tasks");t==null||t.setLinkedRecords((r??[]).filter(i=>i.getValue("id")!==e.deleteTask.id),"tasks")},zu=n=>_("button",{...n,className:Ce("bg-background-200/50 text-foreground-700 hover:bg-background-300/70 active:bg-background-300/100 flex h-6 w-6 items-center justify-center rounded-full text-sm",n.className),children:n.children});var _1e={exports:{}};/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function See(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?See(Object(t),!0).forEach(function(r){vwn(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):See(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function m$(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m$=function(e){return typeof e}:m$=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m$(n)}function vwn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ho(){return Ho=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ho.apply(this,arguments)}function bwn(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function kwn(n,e){if(n==null)return{};var t=bwn(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function xwn(n){return Swn(n)||wwn(n)||$wn(n)||Ewn()}function Swn(n){if(Array.isArray(n))return wL(n)}function wwn(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $wn(n,e){if(n){if(typeof n=="string")return wL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wL(n,e)}}function wL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ewn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Cwn="1.15.0";function jc(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var du=jc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),T1=jc(/Edge/i),wee=jc(/firefox/i),Cb=jc(/safari/i)&&!jc(/chrome/i)&&!jc(/android/i),A1e=jc(/iP(ad|od|hone)/i),I1e=jc(/chrome/i)&&jc(/android/i),R1e={capture:!1,passive:!1};function Ye(n,e,t){n.addEventListener(e,t,!du&&R1e)}function He(n,e,t){n.removeEventListener(e,t,!du&&R1e)}function FT(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function Mwn(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function la(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&FT(n,e):FT(n,e))||r&&n===t)return n;if(n===t)break}while(n=Mwn(n))}return null}var $ee=/\s+/g;function Bt(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace($ee," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace($ee," ")}}function Se(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function Nh(n,e){var t="";if(typeof n=="string")t=n;else do{var r=Se(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function O1e(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function sc(){var n=document.scrollingElement;return n||document.documentElement}function Ot(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var s,o,a,l,c,u,d;if(n!==window&&n.parentNode&&n!==sc()?(s=n.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,d=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!du))do if(i&&i.getBoundingClientRect&&(Se(i,"transform")!=="none"||t&&Se(i,"position")!=="static")){var f=i.getBoundingClientRect();o-=f.top+parseInt(Se(i,"border-top-width")),a-=f.left+parseInt(Se(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&n!==window){var h=Nh(i||n),p=h&&h.a,m=h&&h.d;h&&(o/=m,a/=p,d/=p,u/=m,l=o+u,c=a+d)}return{top:o,left:a,bottom:l,right:c,width:d,height:u}}}function Eee(n,e,t){for(var r=sd(n,!0),i=Ot(n)[e];r;){var s=Ot(r)[t],o=void 0;if(t==="top"||t==="left"?o=i>=s:o=i<=s,!o)return r;if(r===sc())break;r=sd(r,!1)}return!1}function d0(n,e,t,r){for(var i=0,s=0,o=n.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Ie.ghost&&(r||o[s]!==Ie.dragged)&&la(o[s],t.draggable,n,!1)){if(i===e)return o[s];i++}s++}return null}function dj(n,e){for(var t=n.lastElementChild;t&&(t===Ie.ghost||Se(t,"display")==="none"||e&&!FT(t,e));)t=t.previousElementSibling;return t||null}function vn(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==Ie.clone&&(!e||FT(n,e))&&t++;return t}function Cee(n){var e=0,t=0,r=sc();if(n)do{var i=Nh(n),s=i.a,o=i.d;e+=n.scrollLeft*s,t+=n.scrollTop*o}while(n!==r&&(n=n.parentNode));return[e,t]}function Twn(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function sd(n,e){if(!n||!n.getBoundingClientRect)return sc();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=Se(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return sc();if(r||e)return t;r=!0}}while(t=t.parentNode);return sc()}function _wn(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function sD(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Mb;function P1e(n,e){return function(){if(!Mb){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),Mb=setTimeout(function(){Mb=void 0},e)}}}function Awn(){clearTimeout(Mb),Mb=void 0}function D1e(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function fj(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function Mee(n,e){Se(n,"position","absolute"),Se(n,"top",e.top),Se(n,"left",e.left),Se(n,"width",e.width),Se(n,"height",e.height)}function oD(n){Se(n,"position",""),Se(n,"top",""),Se(n,"left",""),Se(n,"width",""),Se(n,"height","")}var _r="Sortable"+new Date().getTime();function Iwn(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Se(i,"display")==="none"||i===Ie.ghost)){n.push({target:i,rect:Ot(i)});var s=fc({},n[n.length-1].rect);if(i.thisAnimationDuration){var o=Nh(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(Twn(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;n.forEach(function(a){var l=0,c=a.target,u=c.fromRect,d=Ot(c),f=c.prevFromRect,h=c.prevToRect,p=a.rect,m=Nh(c,!0);m&&(d.top-=m.f,d.left-=m.e),c.toRect=d,c.thisAnimationDuration&&sD(f,d)&&!sD(u,d)&&(p.top-d.top)/(p.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Own(p,f,h,i.options)),sD(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=i.options.animation),i.animate(c,p,d,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),n=[]},animate:function(r,i,s,o){if(o){Se(r,"transition",""),Se(r,"transform","");var a=Nh(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-s.left)/(l||1),d=(i.top-s.top)/(c||1);r.animatingX=!!u,r.animatingY=!!d,Se(r,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Rwn(r),Se(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Se(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Se(r,"transition",""),Se(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Rwn(n){return n.offsetWidth}function Own(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var nm=[],aD={initializeByDefault:!0},_1={mount:function(e){for(var t in aD)aD.hasOwnProperty(t)&&!(t in e)&&(e[t]=aD[t]);nm.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),nm.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";nm.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](fc({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](fc({sortable:t},r)))})},initializePlugins:function(e,t,r,i){nm.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,Ho(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var r={};return nm.forEach(function(i){typeof i.eventProperties=="function"&&Ho(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return nm.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],r))}),i}};function pv(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,s=n.cloneEl,o=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,u=n.oldDraggableIndex,d=n.newDraggableIndex,f=n.originalEvent,h=n.putSortable,p=n.extraEventProperties;if(e=e||t&&t[_r],!!e){var m,g=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!du&&!T1?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||t,m.from=a||t,m.item=i||t,m.clone=s,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=h?h.lastPutMode:void 0;var k=fc(fc({},p),_1.getEventProperties(r,e));for(var b in k)m[b]=k[b];t&&t.dispatchEvent(m),g[y]&&g[y].call(e,m)}}var Pwn=["evt"],rs=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=kwn(r,Pwn);_1.pluginEvent.bind(Ie)(e,t,fc({dragEl:ae,parentEl:fn,ghostEl:Le,rootEl:Rt,nextEl:If,lastDownEl:g$,cloneEl:Lt,cloneHidden:Ju,dragStarted:mv,putSortable:cr,activeSortable:Ie.active,originalEvent:i,oldIndex:bg,oldDraggableIndex:Tb,newIndex:ws,newDraggableIndex:Bu,hideGhostForTarget:z1e,unhideGhostForTarget:B1e,cloneNowHidden:function(){Ju=!0},cloneNowShown:function(){Ju=!1},dispatchSortableEvent:function(a){Ii({sortable:t,name:a,originalEvent:i})}},s))};function Ii(n){pv(fc({putSortable:cr,cloneEl:Lt,targetEl:ae,rootEl:Rt,oldIndex:bg,oldDraggableIndex:Tb,newIndex:ws,newDraggableIndex:Bu},n))}var ae,fn,Le,Rt,If,g$,Lt,Ju,bg,ws,Tb,Bu,rw,cr,Gm=!1,LT=!1,zT=[],wf,ra,lD,cD,Tee,_ee,mv,rm,_b,Ab=!1,iw=!1,y$,xr,uD=[],$L=!1,BT=[],KA=typeof document<"u",sw=A1e,Aee=T1||du?"cssFloat":"float",Dwn=KA&&!I1e&&!A1e&&"draggable"in document.createElement("div"),N1e=function(){if(KA){if(du)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),F1e=function(e,t){var r=Se(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=d0(e,0,t),o=d0(e,1,t),a=s&&Se(s),l=o&&Se(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ot(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ot(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[Aee]==="none"||o&&r[Aee]==="none"&&c+u>i)?"vertical":"horizontal"},Nwn=function(e,t,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,c=r?t.width:t.height;return i===a||s===l||i+o/2===a+c/2},Fwn=function(e,t){var r;return zT.some(function(i){var s=i[_r].options.emptyInsertThreshold;if(!(!s||dj(i))){var o=Ot(i),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return r=i}}),r},L1e=function(e){function t(s,o){return function(a,l,c,u){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||d))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,c,u),o)(a,l,c,u);var f=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===f||s.join&&s.indexOf(f)>-1}}var r={},i=e.group;(!i||m$(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},z1e=function(){!N1e&&Le&&Se(Le,"display","none")},B1e=function(){!N1e&&Le&&Se(Le,"display","")};KA&&!I1e&&document.addEventListener("click",function(n){if(LT)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),LT=!1,!1},!0);var $f=function(e){if(ae){e=e.touches?e.touches[0]:e;var t=Fwn(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[_r]._onDragOver(r)}}},Lwn=function(e){ae&&ae.parentNode[_r]._isOutsideThisEl(e.target)};function Ie(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Ho({},e),n[_r]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return F1e(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ie.supportPointer!==!1&&"PointerEvent"in window&&!Cb,emptyInsertThreshold:5};_1.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);L1e(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Dwn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ye(n,"pointerdown",this._onTapStart):(Ye(n,"mousedown",this._onTapStart),Ye(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ye(n,"dragover",this),Ye(n,"dragenter",this)),zT.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ho(this,Iwn())}Ie.prototype={constructor:Ie,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(rm=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,ae):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(Hwn(r),!ae&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Cb&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=la(l,i.draggable,r,!1),!(l&&l.animated)&&g$!==l)){if(bg=vn(l),Tb=vn(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Ii({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),rs("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=la(c,d.trim(),r,!1),d)return Ii({sortable:t,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),rs("filter",t,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!la(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!ae&&r.parentNode===s){var c=Ot(r);if(Rt=s,ae=r,fn=ae.parentNode,If=ae.nextSibling,g$=r,rw=o.group,Ie.dragged=ae,wf={target:ae,clientX:(t||e).clientX,clientY:(t||e).clientY},Tee=wf.clientX-c.left,_ee=wf.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ae.style["will-change"]="all",l=function(){if(rs("delayEnded",i,{evt:e}),Ie.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!wee&&i.nativeDraggable&&(ae.draggable=!0),i._triggerDragStart(e,t),Ii({sortable:i,name:"choose",originalEvent:e}),Bt(ae,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){O1e(ae,u.trim(),dD)}),Ye(a,"dragover",$f),Ye(a,"mousemove",$f),Ye(a,"touchmove",$f),Ye(a,"mouseup",i._onDrop),Ye(a,"touchend",i._onDrop),Ye(a,"touchcancel",i._onDrop),wee&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ae.draggable=!0),rs("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(T1||du))){if(Ie.eventCanceled){this._onDrop();return}Ye(a,"mouseup",i._disableDelayedDrag),Ye(a,"touchend",i._disableDelayedDrag),Ye(a,"touchcancel",i._disableDelayedDrag),Ye(a,"mousemove",i._delayedDragTouchMoveHandler),Ye(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ye(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ae&&dD(ae),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;He(e,"mouseup",this._disableDelayedDrag),He(e,"touchend",this._disableDelayedDrag),He(e,"touchcancel",this._disableDelayedDrag),He(e,"mousemove",this._delayedDragTouchMoveHandler),He(e,"touchmove",this._delayedDragTouchMoveHandler),He(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Ye(document,"pointermove",this._onTouchMove):t?Ye(document,"touchmove",this._onTouchMove):Ye(document,"mousemove",this._onTouchMove):(Ye(ae,"dragend",this),Ye(Rt,"dragstart",this._onDragStart));try{document.selection?v$(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Gm=!1,Rt&&ae){rs("dragStarted",this,{evt:t}),this.nativeDraggable&&Ye(document,"dragover",Lwn);var r=this.options;!e&&Bt(ae,r.dragClass,!1),Bt(ae,r.ghostClass,!0),Ie.active=this,e&&this._appendGhost(),Ii({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ra){this._lastX=ra.clientX,this._lastY=ra.clientY,z1e();for(var e=document.elementFromPoint(ra.clientX,ra.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ra.clientX,ra.clientY),e!==t);)t=e;if(ae.parentNode[_r]._isOutsideThisEl(e),t)do{if(t[_r]){var r=void 0;if(r=t[_r]._onDragOver({clientX:ra.clientX,clientY:ra.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);B1e()}},_onTouchMove:function(e){if(wf){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=Le&&Nh(Le,!0),a=Le&&o&&o.a,l=Le&&o&&o.d,c=sw&&xr&&Cee(xr),u=(s.clientX-wf.clientX+i.x)/(a||1)+(c?c[0]-uD[0]:0)/(a||1),d=(s.clientY-wf.clientY+i.y)/(l||1)+(c?c[1]-uD[1]:0)/(l||1);if(!Ie.active&&!Gm){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Le){o?(o.e+=u-(lD||0),o.f+=d-(cD||0)):o={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Se(Le,"webkitTransform",f),Se(Le,"mozTransform",f),Se(Le,"msTransform",f),Se(Le,"transform",f),lD=u,cD=d,ra=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Le){var e=this.options.fallbackOnBody?document.body:Rt,t=Ot(ae,!0,sw,!0,e),r=this.options;if(sw){for(xr=e;Se(xr,"position")==="static"&&Se(xr,"transform")==="none"&&xr!==document;)xr=xr.parentNode;xr!==document.body&&xr!==document.documentElement?(xr===document&&(xr=sc()),t.top+=xr.scrollTop,t.left+=xr.scrollLeft):xr=sc(),uD=Cee(xr)}Le=ae.cloneNode(!0),Bt(Le,r.ghostClass,!1),Bt(Le,r.fallbackClass,!0),Bt(Le,r.dragClass,!0),Se(Le,"transition",""),Se(Le,"transform",""),Se(Le,"box-sizing","border-box"),Se(Le,"margin",0),Se(Le,"top",t.top),Se(Le,"left",t.left),Se(Le,"width",t.width),Se(Le,"height",t.height),Se(Le,"opacity","0.8"),Se(Le,"position",sw?"absolute":"fixed"),Se(Le,"zIndex","100000"),Se(Le,"pointerEvents","none"),Ie.ghost=Le,e.appendChild(Le),Se(Le,"transform-origin",Tee/parseInt(Le.style.width)*100+"% "+_ee/parseInt(Le.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,s=r.options;if(rs("dragStart",this,{evt:e}),Ie.eventCanceled){this._onDrop();return}rs("setupClone",this),Ie.eventCanceled||(Lt=fj(ae),Lt.removeAttribute("id"),Lt.draggable=!1,Lt.style["will-change"]="",this._hideClone(),Bt(Lt,this.options.chosenClass,!1),Ie.clone=Lt),r.cloneId=v$(function(){rs("clone",r),!Ie.eventCanceled&&(r.options.removeCloneOnHide||Rt.insertBefore(Lt,ae),r._hideClone(),Ii({sortable:r,name:"clone"}))}),!t&&Bt(ae,s.dragClass,!0),t?(LT=!0,r._loopId=setInterval(r._emulateDragOver,50)):(He(document,"mouseup",r._onDrop),He(document,"touchend",r._onDrop),He(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,ae)),Ye(document,"drop",r),Se(ae,"transform","translateZ(0)")),Gm=!0,r._dragStartId=v$(r._dragStarted.bind(r,t,e)),Ye(document,"selectstart",r),mv=!0,Cb&&Se(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Ie.active,u=rw===l,d=a.sort,f=cr||c,h,p=this,m=!1;if($L)return;function g(F,O){rs(F,p,fc({evt:e,isOwner:u,axis:h?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:d,fromSortable:f,target:r,completed:k,onMove:function(j,K){return ow(Rt,t,ae,i,j,Ot(j),e,K)},changed:b},O))}function y(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function k(F){return g("dragOverCompleted",{insertion:F}),F&&(u?c._hideClone():c._showClone(p),p!==f&&(Bt(ae,cr?cr.options.ghostClass:c.options.ghostClass,!1),Bt(ae,a.ghostClass,!0)),cr!==p&&p!==Ie.active?cr=p:p===Ie.active&&cr&&(cr=null),f===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===ae&&!ae.animated||r===t&&!r.animated)&&(rm=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(ae.parentNode[_r]._isOutsideThisEl(e.target),!F&&$f(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function b(){ws=vn(ae),Bu=vn(ae,a.draggable),Ii({sortable:p,name:"change",toEl:t,newIndex:ws,newDraggableIndex:Bu,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=la(r,a.draggable,t,!0),g("dragOver"),Ie.eventCanceled)return m;if(ae.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return k(!1);if(LT=!1,c&&!a.disabled&&(u?d||(o=fn!==Rt):cr===this||(this.lastPutMode=rw.checkPull(this,c,ae,e))&&l.checkPut(this,c,ae,e))){if(h=this._getDirection(e,r)==="vertical",i=Ot(ae),g("dragOverValid"),Ie.eventCanceled)return m;if(o)return fn=Rt,y(),this._hideClone(),g("revert"),Ie.eventCanceled||(If?Rt.insertBefore(ae,If):Rt.appendChild(ae)),k(!0);var S=dj(t,a.draggable);if(!S||Vwn(e,h,this)&&!S.animated){if(S===ae)return k(!1);if(S&&t===e.target&&(r=S),r&&(s=Ot(r)),ow(Rt,t,ae,i,r,s,e,!!r)!==!1)return y(),S&&S.nextSibling?t.insertBefore(ae,S.nextSibling):t.appendChild(ae),fn=t,b(),k(!0)}else if(S&&jwn(e,h,this)){var w=d0(t,0,a,!0);if(w===ae)return k(!1);if(r=w,s=Ot(r),ow(Rt,t,ae,i,r,s,e,!1)!==!1)return y(),t.insertBefore(ae,w),fn=t,b(),k(!0)}else if(r.parentNode===t){s=Ot(r);var x=0,$,E=ae.parentNode!==t,C=!Nwn(ae.animated&&ae.toRect||i,r.animated&&r.toRect||s,h),M=h?"top":"left",P=Eee(r,"top","top")||Eee(ae,"top","top"),I=P?P.scrollTop:void 0;rm!==r&&($=s[M],Ab=!1,iw=!C&&a.invertSwap||E),x=qwn(e,r,s,h,C?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,iw,rm===r);var N;if(x!==0){var T=vn(ae);do T-=x,N=fn.children[T];while(N&&(Se(N,"display")==="none"||N===Le))}if(x===0||N===r)return k(!1);rm=r,_b=x;var R=r.nextElementSibling,A=!1;A=x===1;var L=ow(Rt,t,ae,i,r,s,e,A);if(L!==!1)return(L===1||L===-1)&&(A=L===1),$L=!0,setTimeout(Bwn,30),y(),A&&!R?t.appendChild(ae):r.parentNode.insertBefore(ae,A?R:r),P&&D1e(P,0,I-P.scrollTop),fn=ae.parentNode,$!==void 0&&!iw&&(y$=Math.abs($-Ot(r)[M])),b(),k(!0)}if(t.contains(ae))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){He(document,"mousemove",this._onTouchMove),He(document,"touchmove",this._onTouchMove),He(document,"pointermove",this._onTouchMove),He(document,"dragover",$f),He(document,"mousemove",$f),He(document,"touchmove",$f)},_offUpEvents:function(){var e=this.el.ownerDocument;He(e,"mouseup",this._onDrop),He(e,"touchend",this._onDrop),He(e,"pointerup",this._onDrop),He(e,"touchcancel",this._onDrop),He(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(ws=vn(ae),Bu=vn(ae,r.draggable),rs("drop",this,{evt:e}),fn=ae&&ae.parentNode,ws=vn(ae),Bu=vn(ae,r.draggable),Ie.eventCanceled){this._nulling();return}Gm=!1,iw=!1,Ab=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),EL(this.cloneId),EL(this._dragStartId),this.nativeDraggable&&(He(document,"drop",this),He(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Cb&&Se(document.body,"user-select",""),Se(ae,"transform",""),e&&(mv&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Le&&Le.parentNode&&Le.parentNode.removeChild(Le),(Rt===fn||cr&&cr.lastPutMode!=="clone")&&Lt&&Lt.parentNode&&Lt.parentNode.removeChild(Lt),ae&&(this.nativeDraggable&&He(ae,"dragend",this),dD(ae),ae.style["will-change"]="",mv&&!Gm&&Bt(ae,cr?cr.options.ghostClass:this.options.ghostClass,!1),Bt(ae,this.options.chosenClass,!1),Ii({sortable:this,name:"unchoose",toEl:fn,newIndex:null,newDraggableIndex:null,originalEvent:e}),Rt!==fn?(ws>=0&&(Ii({rootEl:fn,name:"add",toEl:fn,fromEl:Rt,originalEvent:e}),Ii({sortable:this,name:"remove",toEl:fn,originalEvent:e}),Ii({rootEl:fn,name:"sort",toEl:fn,fromEl:Rt,originalEvent:e}),Ii({sortable:this,name:"sort",toEl:fn,originalEvent:e})),cr&&cr.save()):ws!==bg&&ws>=0&&(Ii({sortable:this,name:"update",toEl:fn,originalEvent:e}),Ii({sortable:this,name:"sort",toEl:fn,originalEvent:e})),Ie.active&&((ws==null||ws===-1)&&(ws=bg,Bu=Tb),Ii({sortable:this,name:"end",toEl:fn,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){rs("nulling",this),Rt=ae=fn=Le=If=Lt=g$=Ju=wf=ra=mv=ws=Bu=bg=Tb=rm=_b=cr=rw=Ie.dragged=Ie.ghost=Ie.clone=Ie.active=null,BT.forEach(function(e){e.checked=!0}),BT.length=lD=cD=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ae&&(this._onDragOver(e),zwn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],la(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Uwn(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];la(a,this.options.draggable,i,!1)&&(r[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return la(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=_1.modifyOption(this,e,t);typeof i<"u"?r[e]=i:r[e]=t,e==="group"&&L1e(r)},destroy:function(){rs("destroy",this);var e=this.el;e[_r]=null,He(e,"mousedown",this._onTapStart),He(e,"touchstart",this._onTapStart),He(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(He(e,"dragover",this),He(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),zT.splice(zT.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ju){if(rs("hideClone",this),Ie.eventCanceled)return;Se(Lt,"display","none"),this.options.removeCloneOnHide&&Lt.parentNode&&Lt.parentNode.removeChild(Lt),Ju=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ju){if(rs("showClone",this),Ie.eventCanceled)return;ae.parentNode==Rt&&!this.options.group.revertClone?Rt.insertBefore(Lt,ae):If?Rt.insertBefore(Lt,If):Rt.appendChild(Lt),this.options.group.revertClone&&this.animate(ae,Lt),Se(Lt,"display",""),Ju=!1}}};function zwn(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function ow(n,e,t,r,i,s,o,a){var l,c=n[_r],u=c.options.onMove,d;return window.CustomEvent&&!du&&!T1?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Ot(e),l.willInsertAfter=a,l.originalEvent=o,n.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function dD(n){n.draggable=!1}function Bwn(){$L=!1}function jwn(n,e,t){var r=Ot(d0(t.el,0,t.options,!0)),i=10;return e?n.clientX<r.left-i||n.clientY<r.top&&n.clientX<r.right:n.clientY<r.top-i||n.clientY<r.bottom&&n.clientX<r.left}function Vwn(n,e,t){var r=Ot(dj(t.el,t.options.draggable)),i=10;return e?n.clientX>r.right+i||n.clientX<=r.right&&n.clientY>r.bottom&&n.clientX>=r.left:n.clientX>r.right&&n.clientY>r.top||n.clientX<=r.right&&n.clientY>r.bottom+i}function qwn(n,e,t,r,i,s,o,a){var l=r?n.clientY:n.clientX,c=r?t.height:t.width,u=r?t.top:t.left,d=r?t.bottom:t.right,f=!1;if(!o){if(a&&y$<c*i){if(!Ab&&(_b===1?l>u+c*s/2:l<d-c*s/2)&&(Ab=!0),Ab)f=!0;else if(_b===1?l<u+y$:l>d-y$)return-_b}else if(l>u+c*(1-i)/2&&l<d-c*(1-i)/2)return Kwn(e)}return f=f||o,f&&(l<u+c*s/2||l>d-c*s/2)?l>u+c/2?1:-1:0}function Kwn(n){return vn(ae)<vn(n)?1:-1}function Uwn(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function Hwn(n){BT.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&BT.push(r)}}function v$(n){return setTimeout(n,0)}function EL(n){return clearTimeout(n)}KA&&Ye(document,"touchmove",function(n){(Ie.active||Gm)&&n.cancelable&&n.preventDefault()});Ie.utils={on:Ye,off:He,css:Se,find:O1e,is:function(e,t){return!!la(e,t,e,!1)},extend:_wn,throttle:P1e,closest:la,toggleClass:Bt,clone:fj,index:vn,nextTick:v$,cancelNextTick:EL,detectDirection:F1e,getChild:d0};Ie.get=function(n){return n[_r]};Ie.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ie.utils=fc(fc({},Ie.utils),r.utils)),_1.mount(r)})};Ie.create=function(n,e){return new Ie(n,e)};Ie.version=Cwn;var Tn=[],gv,CL,ML=!1,fD,hD,jT,yv;function Wwn(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Ye(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ye(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ye(document,"touchmove",this._handleFallbackAutoScroll):Ye(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?He(document,"dragover",this._handleAutoScroll):(He(document,"pointermove",this._handleFallbackAutoScroll),He(document,"touchmove",this._handleFallbackAutoScroll),He(document,"mousemove",this._handleFallbackAutoScroll)),Iee(),b$(),Awn()},nulling:function(){jT=CL=gv=ML=yv=fD=hD=null,Tn.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(jT=t,r||this.options.forceAutoScrollFallback||T1||du||Cb){pD(t,this.options,a,r);var l=sd(a,!0);ML&&(!yv||s!==fD||o!==hD)&&(yv&&Iee(),yv=setInterval(function(){var c=sd(document.elementFromPoint(s,o),!0);c!==l&&(l=c,b$()),pD(t,i.options,c,r)},10),fD=s,hD=o)}else{if(!this.options.bubbleScroll||sd(a,!0)===sc()){b$();return}pD(t,this.options,sd(a,!1),!1)}}},Ho(n,{pluginName:"scroll",initializeByDefault:!0})}function b$(){Tn.forEach(function(n){clearInterval(n.pid)}),Tn=[]}function Iee(){clearInterval(yv)}var pD=P1e(function(n,e,t,r){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=sc(),c=!1,u;CL!==t&&(CL=t,b$(),gv=e.scroll,u=e.scrollFn,gv===!0&&(gv=sd(t,!0)));var d=0,f=gv;do{var h=f,p=Ot(h),m=p.top,g=p.bottom,y=p.left,k=p.right,b=p.width,S=p.height,w=void 0,x=void 0,$=h.scrollWidth,E=h.scrollHeight,C=Se(h),M=h.scrollLeft,P=h.scrollTop;h===l?(w=b<$&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),x=S<E&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(w=b<$&&(C.overflowX==="auto"||C.overflowX==="scroll"),x=S<E&&(C.overflowY==="auto"||C.overflowY==="scroll"));var I=w&&(Math.abs(k-i)<=o&&M+b<$)-(Math.abs(y-i)<=o&&!!M),N=x&&(Math.abs(g-s)<=o&&P+S<E)-(Math.abs(m-s)<=o&&!!P);if(!Tn[d])for(var T=0;T<=d;T++)Tn[T]||(Tn[T]={});(Tn[d].vx!=I||Tn[d].vy!=N||Tn[d].el!==h)&&(Tn[d].el=h,Tn[d].vx=I,Tn[d].vy=N,clearInterval(Tn[d].pid),(I!=0||N!=0)&&(c=!0,Tn[d].pid=setInterval((function(){r&&this.layer===0&&Ie.active._onTouchMove(jT);var R=Tn[this.layer].vy?Tn[this.layer].vy*a:0,A=Tn[this.layer].vx?Tn[this.layer].vx*a:0;typeof u=="function"&&u.call(Ie.dragged.parentNode[_r],A,R,n,jT,Tn[this.layer].el)!=="continue"||D1e(Tn[this.layer].el,A,R)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=sd(f,!1)));ML=c}},30),j1e=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var c=r||s;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function hj(){}hj.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=d0(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:j1e};Ho(hj,{pluginName:"revertOnSpill"});function pj(){}pj.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:j1e};Ho(pj,{pluginName:"removeOnSpill"});var yo;function Gwn(){function n(){this.defaults={swapClass:"sortable-swap-highlight"}}return n.prototype={dragStart:function(t){var r=t.dragEl;yo=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,a=t.changed,l=t.cancel;if(o.options.swap){var c=this.sortable.el,u=this.options;if(i&&i!==c){var d=yo;s(i)!==!1?(Bt(i,u.swapClass,!0),yo=i):yo=null,d&&d!==yo&&Bt(d,u.swapClass,!1)}a(),r(!0),l()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,a=this.options;yo&&Bt(yo,a.swapClass,!1),yo&&(a.swap||i&&i.options.swap)&&s!==yo&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),Jwn(s,yo),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){yo=null}},Ho(n,{pluginName:"swap",eventProperties:function(){return{swapItem:yo}}})}function Jwn(n,e){var t=n.parentNode,r=e.parentNode,i,s;!t||!r||t.isEqualNode(e)||r.isEqualNode(n)||(i=vn(n),s=vn(e),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(e,t.children[i]),r.insertBefore(n,r.children[s]))}var Ne=[],Ss=[],Hy,ia,Wy=!1,is=!1,im=!1,xt,Gy,aw;function Qwn(){function n(e){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?Ye(document,"pointerup",this._deselectMultiDrag):(Ye(document,"mouseup",this._deselectMultiDrag),Ye(document,"touchend",this._deselectMultiDrag))),Ye(document,"keydown",this._checkKeyDown),Ye(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(i,s){var o="";Ne.length&&ia===e?Ne.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return n.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;xt=r},delayEnded:function(){this.isMultiDrag=~Ne.indexOf(xt)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<Ne.length;s++)Ss.push(fj(Ne[s])),Ss[s].sortableIndex=Ne[s].sortableIndex,Ss[s].draggable=!1,Ss[s].style["will-change"]="",Bt(Ss[s],this.options.selectedClass,!1),Ne[s]===xt&&Bt(Ss[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ne.length&&ia===r&&(Ree(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(Ree(!1,i),Ss.forEach(function(o){Se(o,"display","")}),r(),aw=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(Ss.forEach(function(o){Se(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),aw=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&ia&&ia.multiDrag._deselectMultiDrag(),Ne.forEach(function(r){r.sortableIndex=vn(r)}),Ne=Ne.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),im=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ne.forEach(function(o){o!==xt&&Se(o,"position","absolute")});var s=Ot(xt,!1,!0,!0);Ne.forEach(function(o){o!==xt&&Mee(o,s)}),is=!0,Wy=!0}i.animateAll(function(){is=!1,Wy=!1,r.options.animation&&Ne.forEach(function(o){oD(o)}),r.options.sort&&lw()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;is&&~Ne.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;Ne.length>1&&(Ne.forEach(function(a){s.addAnimationState({target:a,rect:is?Ot(a):o}),oD(a),a.fromRect=o,r.removeAnimationState(a)}),is=!1,Ywn(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,a=t.parentEl,l=t.putSortable,c=this.options;if(s){if(i&&o._hideClone(),Wy=!1,c.animation&&Ne.length>1&&(is||!i&&!o.options.sort&&!l)){var u=Ot(xt,!1,!0,!0);Ne.forEach(function(f){f!==xt&&(Mee(f,u),a.appendChild(f))}),is=!0}if(!i)if(is||lw(),Ne.length>1){var d=aw;o._showClone(r),o.options.animation&&!aw&&d&&Ss.forEach(function(f){o.addAnimationState({target:f,rect:Gy}),f.fromRect=Gy,f.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(Ne.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Gy=Ho({},r);var o=Nh(xt,!0);Gy.top-=o.f,Gy.left-=o.e}},dragOverAnimationComplete:function(){is&&(is=!1,lw())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,a=t.dispatchSortableEvent,l=t.oldIndex,c=t.putSortable,u=c||this.sortable;if(r){var d=this.options,f=s.children;if(!im)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Bt(xt,d.selectedClass,!~Ne.indexOf(xt)),~Ne.indexOf(xt))Ne.splice(Ne.indexOf(xt),1),Hy=null,pv({sortable:o,rootEl:i,name:"deselect",targetEl:xt,originalEvent:r});else{if(Ne.push(xt),pv({sortable:o,rootEl:i,name:"select",targetEl:xt,originalEvent:r}),r.shiftKey&&Hy&&o.el.contains(Hy)){var h=vn(Hy),p=vn(xt);if(~h&&~p&&h!==p){var m,g;for(p>h?(g=h,m=p):(g=p,m=h+1);g<m;g++)~Ne.indexOf(f[g])||(Bt(f[g],d.selectedClass,!0),Ne.push(f[g]),pv({sortable:o,rootEl:i,name:"select",targetEl:f[g],originalEvent:r}))}}else Hy=xt;ia=u}if(im&&this.isMultiDrag){if(is=!1,(s[_r].options.sort||s!==i)&&Ne.length>1){var y=Ot(xt),k=vn(xt,":not(."+this.options.selectedClass+")");if(!Wy&&d.animation&&(xt.thisAnimationDuration=null),u.captureAnimationState(),!Wy&&(d.animation&&(xt.fromRect=y,Ne.forEach(function(S){if(S.thisAnimationDuration=null,S!==xt){var w=is?Ot(S):y;S.fromRect=w,u.addAnimationState({target:S,rect:w})}})),lw(),Ne.forEach(function(S){f[k]?s.insertBefore(S,f[k]):s.appendChild(S),k++}),l===vn(xt))){var b=!1;Ne.forEach(function(S){if(S.sortableIndex!==vn(S)){b=!0;return}}),b&&a("update")}Ne.forEach(function(S){oD(S)}),u.animateAll()}ia=u}(i===s||c&&c.lastPutMode!=="clone")&&Ss.forEach(function(S){S.parentNode&&S.parentNode.removeChild(S)})}},nullingGlobal:function(){this.isMultiDrag=im=!1,Ss.length=0},destroyGlobal:function(){this._deselectMultiDrag(),He(document,"pointerup",this._deselectMultiDrag),He(document,"mouseup",this._deselectMultiDrag),He(document,"touchend",this._deselectMultiDrag),He(document,"keydown",this._checkKeyDown),He(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof im<"u"&&im)&&ia===this.sortable&&!(t&&la(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;Ne.length;){var r=Ne[0];Bt(r,this.options.selectedClass,!1),Ne.shift(),pv({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Ho(n,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[_r];!r||!r.options.multiDrag||~Ne.indexOf(t)||(ia&&ia!==r&&(ia.multiDrag._deselectMultiDrag(),ia=r),Bt(t,r.options.selectedClass,!0),Ne.push(t))},deselect:function(t){var r=t.parentNode[_r],i=Ne.indexOf(t);!r||!r.options.multiDrag||!~i||(Bt(t,r.options.selectedClass,!1),Ne.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return Ne.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;is&&s!==xt?o=-1:is?o=vn(s,":not(."+t.options.selectedClass+")"):o=vn(s),i.push({multiDragElement:s,index:o})}),{items:xwn(Ne),clones:[].concat(Ss),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function Ywn(n,e){Ne.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function Ree(n,e){Ss.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function lw(){Ne.forEach(function(n){n!==xt&&n.parentNode&&n.parentNode.removeChild(n)})}Ie.mount(new Wwn);Ie.mount(pj,hj);const Xwn=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Qwn,Sortable:Ie,Swap:Gwn,default:Ie},Symbol.toStringTag,{value:"Module"})),Zwn=zL(Xwn);var V1e={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if(o==="object")if(s.toString===Object.prototype.toString)for(var l in s)e.call(s,l)&&s[l]&&r.push(l);else r.push(s.toString())}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(V1e);var e$n=V1e.exports,t$n="Invariant failed";function n$n(n,e){if(!n)throw new Error(t$n)}const r$n=Object.freeze(Object.defineProperty({__proto__:null,default:n$n},Symbol.toStringTag,{value:"Module"})),i$n=zL(r$n);(function(n){var e=Zwn,t=e$n,r=v,i=i$n;function s(x){return x&&x.__esModule?x.default:x}function o(x,$,E,C){Object.defineProperty(x,$,{get:E,set:C,enumerable:!0,configurable:!0})}function a(x,$){return Object.keys($).forEach(function(E){E==="default"||E==="__esModule"||x.hasOwnProperty(E)||Object.defineProperty(x,E,{enumerable:!0,get:function(){return $[E]}})}),x}o(n.exports,"Sortable",()=>$882b6d93070905b3$re_export$Sortable),o(n.exports,"Direction",()=>$882b6d93070905b3$re_export$Direction),o(n.exports,"DOMRect",()=>$882b6d93070905b3$re_export$DOMRect),o(n.exports,"GroupOptions",()=>$882b6d93070905b3$re_export$GroupOptions),o(n.exports,"MoveEvent",()=>$882b6d93070905b3$re_export$MoveEvent),o(n.exports,"Options",()=>$882b6d93070905b3$re_export$Options),o(n.exports,"PullResult",()=>$882b6d93070905b3$re_export$PullResult),o(n.exports,"PutResult",()=>$882b6d93070905b3$re_export$PutResult),o(n.exports,"SortableEvent",()=>$882b6d93070905b3$re_export$SortableEvent),o(n.exports,"SortableOptions",()=>$882b6d93070905b3$re_export$SortableOptions),o(n.exports,"Utils",()=>$882b6d93070905b3$re_export$Utils),o(n.exports,"ReactSortable",()=>S);function l(x){x.parentElement!==null&&x.parentElement.removeChild(x)}function c(x,$,E){const C=x.children[E]||null;x.insertBefore($,C)}function u(x){x.forEach($=>l($.element))}function d(x){x.forEach($=>{c($.parentElement,$.element,$.oldIndex)})}function f(x,$){const E=g(x),C={parentElement:x.from};let M=[];switch(E){case"normal":M=[{element:x.item,newIndex:x.newIndex,oldIndex:x.oldIndex,parentElement:x.from}];break;case"swap":const N={element:x.item,oldIndex:x.oldIndex,newIndex:x.newIndex,...C},T={element:x.swapItem,oldIndex:x.newIndex,newIndex:x.oldIndex,...C};M=[N,T];break;case"multidrag":M=x.oldIndicies.map((R,A)=>({element:R.multiDragElement,oldIndex:R.index,newIndex:x.newIndicies[A].index,...C}));break}return y(M,$)}function h(x,$){const E=p(x,$);return m(x,E)}function p(x,$){const E=[...$];return x.concat().reverse().forEach(C=>E.splice(C.oldIndex,1)),E}function m(x,$,E,C){const M=[...$];return x.forEach(P=>{const I=C&&E&&C(P.item,E);M.splice(P.newIndex,0,I||P.item)}),M}function g(x){return x.oldIndicies&&x.oldIndicies.length>0?"multidrag":x.swapItem?"swap":"normal"}function y(x,$){return x.map(C=>({...C,item:$[C.oldIndex]})).sort((C,M)=>C.oldIndex-M.oldIndex)}function k(x){const{list:$,setList:E,children:C,tag:M,style:P,className:I,clone:N,onAdd:T,onChange:R,onChoose:A,onClone:L,onEnd:F,onFilter:O,onRemove:z,onSort:j,onStart:K,onUnchoose:Z,onUpdate:te,onMove:pe,onSpill:he,onSelect:se,onDeselect:ke,...xe}=x;return xe}const b={dragging:null};class S extends r.Component{constructor($){super($),this.ref=(0,r.createRef)();const E=[...$.list].map(C=>Object.assign(C,{chosen:!1,selected:!1}));$.setList(E,this.sortable,b),s(i)(!$.plugins,`
Plugins prop is no longer supported.
Instead, mount it with "Sortable.mount(new MultiDrag())"
Please read the updated README.md at https://github.com/SortableJS/react-sortablejs.
      `)}componentDidMount(){if(this.ref.current===null)return;const $=this.makeOptions();s(e).create(this.ref.current,$)}componentDidUpdate($){$.disabled!==this.props.disabled&&this.sortable&&this.sortable.option("disabled",this.props.disabled)}render(){const{tag:$,style:E,className:C,id:M}=this.props,P={style:E,className:C,id:M},I=!$||$===null?"div":$;return(0,r.createElement)(I,{ref:this.ref,...P},this.getChildren())}getChildren(){const{children:$,dataIdAttr:E,selectedClass:C="sortable-selected",chosenClass:M="sortable-chosen",dragClass:P="sortable-drag",fallbackClass:I="sortable-falback",ghostClass:N="sortable-ghost",swapClass:T="sortable-swap-highlight",filter:R="sortable-filter",list:A}=this.props;if(!$||$==null)return null;const L=E||"data-id";return r.Children.map($,(F,O)=>{if(F===void 0)return;const z=A[O]||{},{className:j}=F.props,K=typeof R=="string"&&{[R.replace(".","")]:!!z.filtered},Z=s(t)(j,{[C]:z.selected,[M]:z.chosen,...K});return(0,r.cloneElement)(F,{[L]:F.key,className:Z})})}get sortable(){const $=this.ref.current;if($===null)return null;const E=Object.keys($).find(C=>C.includes("Sortable"));return E?$[E]:null}makeOptions(){const $=["onAdd","onChoose","onDeselect","onEnd","onRemove","onSelect","onSpill","onStart","onUnchoose","onUpdate"],E=["onChange","onClone","onFilter","onSort"],C=k(this.props);return $.forEach(P=>C[P]=this.prepareOnHandlerPropAndDOM(P)),E.forEach(P=>C[P]=this.prepareOnHandlerProp(P)),{...C,onMove:(P,I)=>{const{onMove:N}=this.props,T=P.willInsertAfter||-1;if(!N)return T;const R=N(P,I,this.sortable,b);return typeof R>"u"?!1:R}}}prepareOnHandlerPropAndDOM($){return E=>{this.callOnHandlerProp(E,$),this[$](E)}}prepareOnHandlerProp($){return E=>{this.callOnHandlerProp(E,$)}}callOnHandlerProp($,E){const C=this.props[E];C&&C($,this.sortable,b)}onAdd($){const{list:E,setList:C,clone:M}=this.props,P=[...b.dragging.props.list],I=f($,P);u(I);const N=m(I,E,$,M).map(T=>Object.assign(T,{selected:!1}));C(N,this.sortable,b)}onRemove($){const{list:E,setList:C}=this.props,M=g($),P=f($,E);d(P);let I=[...E];if($.pullMode!=="clone")I=p(P,I);else{let N=P;switch(M){case"multidrag":N=P.map((T,R)=>({...T,element:$.clones[R]}));break;case"normal":N=P.map(T=>({...T,element:$.clone}));break;case"swap":default:s(i)(!0,`mode "${M}" cannot clone. Please remove "props.clone" from <ReactSortable/> when using the "${M}" plugin`)}u(N),P.forEach(T=>{const R=T.oldIndex,A=this.props.clone(T.item,$);I.splice(R,1,A)})}I=I.map(N=>Object.assign(N,{selected:!1})),C(I,this.sortable,b)}onUpdate($){const{list:E,setList:C}=this.props,M=f($,E);u(M),d(M);const P=h(M,E);return C(P,this.sortable,b)}onStart(){b.dragging=this}onEnd(){b.dragging=null}onChoose($){const{list:E,setList:C}=this.props,M=E.map((P,I)=>{let N=P;return I===$.oldIndex&&(N=Object.assign(P,{chosen:!0})),N});C(M,this.sortable,b)}onUnchoose($){const{list:E,setList:C}=this.props,M=E.map((P,I)=>{let N=P;return I===$.oldIndex&&(N=Object.assign(N,{chosen:!1})),N});C(M,this.sortable,b)}onSpill($){const{removeOnSpill:E,revertOnSpill:C}=this.props;E&&!C&&l($.item)}onSelect($){const{list:E,setList:C}=this.props,M=E.map(P=>Object.assign(P,{selected:!1}));$.newIndicies.forEach(P=>{const I=P.index;if(I===-1){console.log(`"${$.type}" had indice of "${P.index}", which is probably -1 and doesn't usually happen here.`),console.log($);return}M[I].selected=!0}),C(M,this.sortable,b)}onDeselect($){const{list:E,setList:C}=this.props,M=E.map(P=>Object.assign(P,{selected:!1}));$.newIndicies.forEach(P=>{const I=P.index;I!==-1&&(M[I].selected=!0)}),C(M,this.sortable,b)}}Oj(S,"defaultProps",{clone:$=>$});var w={};a(n.exports,w)})(_1e);var mj=_1e.exports;const q1e=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"NewTaskCardCreateTaskMutation",selections:[{alias:null,args:e,concreteType:"Task",kind:"LinkedField",name:"createTask",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"TaskCard_task"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"NewTaskCardCreateTaskMutation",selections:[{alias:null,args:e,concreteType:"Task",kind:"LinkedField",name:"createTask",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"c18b24e22e937c09d4e0a3368616f099",id:null,metadata:{},name:"NewTaskCardCreateTaskMutation",operationKind:"mutation",text:`mutation NewTaskCardCreateTaskMutation(
  $input: MutationCreateTaskInput!
) {
  createTask(input: $input) {
    ...TaskCard_task
    id
  }
}

fragment RenderTaskCardActions_task on Task {
  id
  status
  durationInMinutes
  item {
    id
    isRelevant
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderTaskCardDetails_task on Task {
  durationInMinutes
  item {
    id
    scheduledAt
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment TaskCardActions_task on Task {
  status
  id
  item {
    id
    isRelevant
  }
  ...TaskCardDurationButton_task
  ...RenderTaskCardActions_task
}

fragment TaskCardDurationButton_task on Task {
  id
  durationInMinutes
}

fragment TaskCard_task on Task {
  id
  date
  title
  status
  completedAt
  ...RenderTaskCardDetails_task
  ...TaskCardActions_task
  ...TaskTitle_task
}

fragment TaskTitle_task on Task {
  id
  title
}
`}}}();q1e.hash="79e8757a0d2a56e149625c9c5fbfbd43";const s$n=n=>{const[e]=Ga(q1e);return de("div",{className:"bg-background-50 group flex cursor-pointer flex-col gap-1 rounded-md p-3 shadow-sm hover:shadow-md",children:[_(ej,{autoFocus:!0,onSave:r=>{var i;(i=n.onSave)==null||i.call(n),e({variables:{input:{title:r,date:n.date,status:"TODO"}},optimisticResponse:{createTask:{__typename:"Task",id:`Task_${Math.random()}`,title:r,createdAt:new Date().toISOString(),status:"TODO",completedAt:null,date:n.date,item:null,durationInMinutes:null,tags:[],pluginDatas:[]}},optimisticUpdater:s=>{const o=s.get(`Day_${n.date}`),a=o==null?void 0:o.getLinkedRecords("tasks"),l=s.getRootField("createTask");o==null||o.setLinkedRecords([l,...a??[]],"tasks")},updater:s=>{const o=s.get(`Day_${n.date}`),a=o==null?void 0:o.getLinkedRecords("tasks"),l=s.getRootField("createTask");o==null||o.setLinkedRecords([l,...a??[]],"tasks")}})},onCancel:n.onCancel}),de("div",{className:"flex gap-2",children:[_("button",{className:"bg-background-200 text-foreground-700 hover:bg-background-300 active:bg-background-300 flex h-6 w-6 items-center justify-center rounded-full bg-opacity-50 text-sm hover:bg-opacity-70 active:bg-opacity-100 ",children:_(Wh,{})}),_("button",{className:"bg-background-200 text-foreground-700 hover:bg-background-300 active:bg-background-300 hidden h-6 w-6 items-center justify-center rounded-full bg-opacity-50 text-sm hover:bg-opacity-70 active:bg-opacity-100 group-hover:flex ",children:_(rE,{size:20})})]})]})},K1e=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},c=[r];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"OnCreateTaskCreateTaskFromItemMutation",selections:[{alias:null,args:e,concreteType:"Task",kind:"LinkedField",name:"createTask",plural:!1,selections:[t,r,i,{args:null,kind:"FragmentSpread",name:"TaskCard_task"},{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ItemCard_item"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"OnCreateTaskCreateTaskFromItemMutation",selections:[{alias:null,args:e,concreteType:"Task",kind:"LinkedField",name:"createTask",plural:!1,selections:[t,r,i,{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null},o,{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},s,o,{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[a,l,r],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:c,storageKey:null},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:c,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[r,a,l],storageKey:null}],storageKey:null}]},params:{cacheID:"ee6be0291001ac4a9a2491de1e41bfd4",id:null,metadata:{},name:"OnCreateTaskCreateTaskFromItemMutation",operationKind:"mutation",text:`mutation OnCreateTaskCreateTaskFromItemMutation(
  $input: MutationCreateTaskInput!
) {
  createTask(input: $input) {
    __typename
    id
    status
    ...TaskCard_task
    item {
      ...ItemCard_item
      id
    }
  }
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}

fragment RenderTaskCardActions_task on Task {
  id
  status
  durationInMinutes
  item {
    id
    isRelevant
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderTaskCardDetails_task on Task {
  durationInMinutes
  item {
    id
    scheduledAt
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment TaskCardActions_task on Task {
  status
  id
  item {
    id
    isRelevant
  }
  ...TaskCardDurationButton_task
  ...RenderTaskCardActions_task
}

fragment TaskCardDurationButton_task on Task {
  id
  durationInMinutes
}

fragment TaskCard_task on Task {
  id
  date
  title
  status
  completedAt
  ...RenderTaskCardDetails_task
  ...TaskCardActions_task
  ...TaskTitle_task
}

fragment TaskTitle_task on Task {
  id
  title
}
`}}}();K1e.hash="79cf353f2a5e0428fe06b4529026c20f";const U1e=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"Item",kind:"LinkedField",name:"dismissItemFromInbox",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"OnCreateTaskDismissItemFromInboxMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"OnCreateTaskDismissItemFromInboxMutation",selections:e},params:{cacheID:"ce6d2c70f0e8429443fccd77d8a058ae",id:null,metadata:{},name:"OnCreateTaskDismissItemFromInboxMutation",operationKind:"mutation",text:`mutation OnCreateTaskDismissItemFromInboxMutation(
  $input: MutationDismissItemFromInboxInput!
) {
  dismissItemFromInbox(input: $input) {
    id
    inboxPoints
  }
}
`}}}();U1e.hash="f3246bcf212fdb371bd29fc0ebc5c35e";function Wo(){return Wo=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wo.apply(this,arguments)}const H1e="Dialog",[W1e,q2n]=Jo(H1e),[o$n,kc]=W1e(H1e),a$n=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=v.useRef(null),l=v.useRef(null),[c=!1,u]=Qc({prop:r,defaultProp:i,onChange:s});return v.createElement(o$n,{scope:e,triggerRef:a,contentRef:l,contentId:Qs(),titleId:Qs(),descriptionId:Qs(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(d=>!d),[u]),modal:o},t)},G1e="DialogPortal",[l$n,J1e]=W1e(G1e,{forceMount:void 0}),c$n=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=kc(G1e,e);return v.createElement(l$n,{scope:e,forceMount:t},v.Children.map(r,o=>v.createElement(Qo,{present:t||s.open},v.createElement(i8,{asChild:!0,container:i},o))))},TL="DialogOverlay",u$n=v.forwardRef((n,e)=>{const t=J1e(TL,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=kc(TL,n.__scopeDialog);return s.modal?v.createElement(Qo,{present:r||s.open},v.createElement(d$n,Wo({},i,{ref:e}))):null}),d$n=v.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=kc(TL,t);return v.createElement(BA,{as:Cd,allowPinchZoom:!0,shards:[i.contentRef]},v.createElement(qe.div,Wo({"data-state":Y1e(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),Ok="DialogContent",f$n=v.forwardRef((n,e)=>{const t=J1e(Ok,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=kc(Ok,n.__scopeDialog);return v.createElement(Qo,{present:r||s.open},s.modal?v.createElement(h$n,Wo({},i,{ref:e})):v.createElement(p$n,Wo({},i,{ref:e})))}),h$n=v.forwardRef((n,e)=>{const t=kc(Ok,n.__scopeDialog),r=v.useRef(null),i=at(e,t.contentRef,r);return v.useEffect(()=>{const s=r.current;if(s)return C1(s)},[]),v.createElement(Q1e,Wo({},n,{ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:me(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:me(n.onFocusOutside,s=>s.preventDefault())}))}),p$n=v.forwardRef((n,e)=>{const t=kc(Ok,n.__scopeDialog),r=v.useRef(!1),i=v.useRef(!1);return v.createElement(Q1e,Wo({},n,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=n.onCloseAutoFocus)===null||o===void 0||o.call(n,s),!s.defaultPrevented){var a;r.current||(a=t.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=n.onInteractOutside)===null||o===void 0||o.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=t.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),Q1e=v.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=kc(Ok,t),l=v.useRef(null),c=at(e,l);return LA(),v.createElement(v.Fragment,null,v.createElement(rj,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},v.createElement(B_,Wo({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Y1e(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),m$n="DialogTitle",g$n=v.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=kc(m$n,t);return v.createElement(qe.h2,Wo({id:i.titleId},r,{ref:e}))}),y$n="DialogDescription",v$n=v.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=kc(y$n,t);return v.createElement(qe.p,Wo({id:i.descriptionId},r,{ref:e}))}),b$n="DialogClose",k$n=v.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=kc(b$n,t);return v.createElement(qe.button,Wo({type:"button"},r,{ref:e,onClick:me(n.onClick,()=>i.onOpenChange(!1))}))});function Y1e(n){return n?"open":"closed"}const x$n=a$n,S$n=c$n,w$n=u$n,$$n=f$n,E$n=g$n,C$n=v$n,M$n=k$n,T$n=n=>typeof n=="object"&&typeof n.then=="function",cw=[];function _$n(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function A$n(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of cw)if(_$n(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=cw.indexOf(i);s!==-1&&cw.splice(s,1)},promise:(T$n(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(cw.push(i),!t)throw i.promise}const I$n=(n,e,t)=>A$n(n,e,!1,t),Oee=82,X1e=n=>{const e=n.maxProgress&&n.maxProgress>=60?n.maxProgress:60,t=n.duration??2,r=n.minProgress&&n.minProgress<=40?96-n.minProgress/100*113:96,i=113,s=96-e/100*i;return _("div",{className:"ring-primary-500/10 ring-5 rounded-full p-1",children:de("div",{className:"relative h-24 w-24 overflow-clip rounded-full",children:[de(Xu.svg,{width:"246",height:"113",viewBox:"0 0 246 113",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute right-0 transform translate-y-24",animate:{transition:{duration:t,ease:"linear",times:[0,.1,.8,1]},y:[r,60,30,s]},children:[_(Xu.path,{d:"M41 14.6066C27.3331 14.6066 13.6669 0.0610556 0 0.0205112V113H246V0.0205112L245.998 0.0214844C232.332 8.44216 218.666 16.8624 205 14.6066C191.333 12.3498 177.667 -0.58383 164 0.0205112C150.333 0.624852 136.667 14.7672 123 14.6066C109.333 14.4451 95.6669 -0.0200333 82 0.0205112C68.3331 0.0610556 54.6669 14.6066 41 14.6066Z",fill:"url(#bg-wave-gradient)",animate:{transition:{repeat:1/0,duration:.9,delay:.1,ease:"linear"},x:[0,Oee]}}),_("defs",{children:de("linearGradient",{id:"bg-wave-gradient",x1:"0",y1:"0",x2:"0",y2:"50",gradientUnits:"userSpaceOnUse",children:[_("stop",{stopColor:"currentColor",className:"text-primary-300"}),_("stop",{offset:"1",stopColor:"currentColor",className:"text-primary-400"})]})})]}),de(Xu.svg,{width:"246",height:"113",viewBox:"0 0 246 113",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute left-0 transform translate-y-24",animate:{transition:{duration:t,ease:"linear",times:[0,.1,.8,1]},y:[r,60,30,s]},children:[_(Xu.path,{d:"M41 14.6066C27.3331 14.6066 13.6669 0.0610556 0 0.0205112V113H246V0.0205112L245.998 0.0214844C232.332 8.44216 218.666 16.8624 205 14.6066C191.333 12.3498 177.667 -0.58383 164 0.0205112C150.333 0.624852 136.667 14.7672 123 14.6066C109.333 14.4451 95.6669 -0.0200333 82 0.0205112C68.3331 0.0610556 54.6669 14.6066 41 14.6066Z",fill:"url(#fg-wave-gradient)",animate:{transition:{repeat:1/0,duration:.9,ease:"linear"},x:[0,-Oee]}}),_("defs",{children:de("linearGradient",{id:"fg-wave-gradient",x1:"0",y1:"0",x2:"0",y2:"113",gradientUnits:"userSpaceOnUse",children:[_("stop",{stopColor:"currentColor",className:"text-primary-200"}),_("stop",{offset:"1",stopColor:"currentColor",className:"text-primary-400"})]})})]})]})})},Z1e=()=>_(Xu.div,{className:"flex h-screen w-full items-center justify-center",transition:{duration:.3},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:_(X1e,{minProgress:40,maxProgress:60})}),R$n=n=>new Promise(e=>setTimeout(()=>e(!0),n)),O$n=({waitFor:n=500})=>(I$n(R$n(n),[n]),null),Pee=n=>_(sde,{mode:"wait",children:de(v.Suspense,{fallback:_(Z1e,{}),children:[_(O$n,{waitFor:500}),n.children]})}),P$n=n=>_(x$n,{...n,onOpenChange:e=>{var t,r;!e&&((t=n.onClose)==null||t.call(n)),(r=n.onOpenChange)==null||r.call(n,e)}}),D$n=({...n})=>_(S$n,{...n}),N$n=v.forwardRef(({className:n,...e},t)=>_(w$n,{ref:t,className:Ce("data-[state=open]:animate-fade-in data-[state=open]:animate-duration-100 data-[state=closed]:animate-fade-out data-[state=closed]:animate-duration-200 fixed inset-0 z-50 bg-gray-400/30 backdrop-blur-sm duration-200",n),...e})),F$n=v.forwardRef(({className:n,children:e,...t},r)=>de(D$n,{children:[_(N$n,{}),de($$n,{ref:r,className:Ce("bg-background-50 ring-0.5 ring-primary-100 data-[state=open]:animate-duration-100 data-[state=open]:animate-fade-in data-[state=open]:animate-duration-100 data-[state=closed]:animate-fade-out data-[state=closed]:animate-duration-200 fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg md:w-full",n),...t,children:[e,de(M$n,{className:"ring-offset-background-50 focus:ring-primary-300 data-[state=open]:bg-background-100 data-[state=open]:text-foreground-700 absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[_(rE,{size:"24"}),_("span",{className:"sr-only",children:"Close"})]})]})]}));v.forwardRef(({className:n,...e},t)=>_(E$n,{ref:t,className:Ce("text-lg font-semibold leading-none tracking-tight",n),...e}));v.forwardRef(({className:n,...e},t)=>_(C$n,{ref:t,className:Ce("text-foreground-700 text-sm",n),...e}));const L$n=()=>_("div",{className:"flex h-96 items-center justify-center",children:_(X1e,{})}),z$n=n=>{const e=v.useRef(!1),[t,r]=v.useState(!1),[i,s]=v.useState(null),[o,a]=v.useState(null),l=v.useRef(n.task),[c,u]=v.useState(!0),[d,f]=v.useState({}),[h]=Y$(K1e),[p]=Ga(U1e);Tp(async()=>{e.current||(e.current=!0,await m({steps:n.steps}),r(!0))},[n.steps]);const m=async S=>{u(!0);for(let w=0;w<S.steps.length;w++){const x=S.steps[w],$=await x.onCreateTask({task:l.current}).catch(E=>(console.log(`Error plugin.onCreateTask from plugin ${x.pluginSlug}`,E),null));if($&&"dialogContent"in $){a(i),s({pluginSlug:x.pluginSlug,dialogContent:$.dialogContent,index:w}),u(!1);return}else{if($===null)continue;if(f(E=>({...E,[x.pluginSlug]:$})),!$.taskOverrides)continue;l.current={title:{value:$.taskOverrides.title??l.current.title.value,overriden:$.taskOverrides.title!==void 0||l.current.title.overriden},status:{value:$.taskOverrides.status??l.current.status.value,overriden:$.taskOverrides.status!==void 0||l.current.status.overriden},durationInMinutes:{value:$.taskOverrides.durationInMinutes??l.current.durationInMinutes.value,overriden:$.taskOverrides.durationInMinutes!==void 0||l.current.durationInMinutes.overriden},date:{value:$.taskOverrides.date??l.current.date.value,overriden:$.taskOverrides.date!==void 0||l.current.date.overriden},item:l.current.item}}}await g()},g=async()=>{var w,x;n.onClose();const S=h({variables:{input:{date:l.current.date.value,title:l.current.title.value,status:l.current.status.value??"TODO",durationInMinutes:l.current.durationInMinutes.value??null,itemId:((w=l.current.item)==null?void 0:w.id)??null,atIndex:n.atIndex??null,pluginDatas:Object.entries(d).map(([$,E])=>{var C,M,P;return{pluginSlug:$,originalId:((C=E.pluginData)==null?void 0:C.originalId)??null,min:((M=E.pluginData)==null?void 0:M.min)??null,full:((P=E.pluginData)==null?void 0:P.full)??null}}),actionDatas:Object.entries(d).map(([$,E])=>({pluginSlug:$,data:E.actionData??null}))}},updater:$=>{if(!l.current.item)return;const E=$.get(`Day_${l.current.date.value}`),C=(E==null?void 0:E.getLinkedRecords("tasks"))??[],M=$.getRootField("createTask");E==null||E.setLinkedRecords([...(C??[]).slice(0,n.atIndex),M,...(C??[]).slice(n.atIndex)],"tasks")}});await Ar.promise(S,{loading:"Creating task...",error:"Failed to create task",success:"Task created"}),(x=l.current.item)!=null&&x.willBeDimissedFromInbox&&p({variables:{input:{id:l.current.item.id}},optimisticUpdater:$=>{if(!l.current.item)return;const E=$.get(l.current.item.id);E==null||E.setValue(0,"inboxPoints")}}),n.onClose()},y=async S=>{var $,E,C,M,P,I,N,T;if(!i)return;f(R=>({...R,[i.pluginSlug]:S??{}})),l.current={title:{value:(($=S==null?void 0:S.taskOverrides)==null?void 0:$.title)??l.current.title.value,overriden:((E=S==null?void 0:S.taskOverrides)==null?void 0:E.title)!==void 0||l.current.title.overriden},status:{value:((C=S==null?void 0:S.taskOverrides)==null?void 0:C.status)??l.current.status.value,overriden:((M=S==null?void 0:S.taskOverrides)==null?void 0:M.status)!==void 0||l.current.status.overriden},durationInMinutes:{value:((P=S==null?void 0:S.taskOverrides)==null?void 0:P.durationInMinutes)??l.current.durationInMinutes.value,overriden:((I=S==null?void 0:S.taskOverrides)==null?void 0:I.durationInMinutes)!==void 0||l.current.durationInMinutes.overriden},date:{value:((N=S==null?void 0:S.taskOverrides)==null?void 0:N.date)??l.current.date.value,overriden:((T=S==null?void 0:S.taskOverrides)==null?void 0:T.date)!==void 0||l.current.date.overriden},item:l.current.item},a(i);const w=i.index+1;if(w>=n.steps.length){await g();return}const x=n.steps.slice(w);m({steps:x})},k=async S=>{var x,$,E,C,M,P,I,N;if(!i)return;if(i.index-1<0){n.onClose();return}f(T=>({...T,[i.pluginSlug]:S??{}})),l.current={title:{value:((x=S==null?void 0:S.taskOverrides)==null?void 0:x.title)??l.current.title.value,overriden:(($=S==null?void 0:S.taskOverrides)==null?void 0:$.title)!==void 0||l.current.title.overriden},status:{value:((E=S==null?void 0:S.taskOverrides)==null?void 0:E.status)??l.current.status.value,overriden:((C=S==null?void 0:S.taskOverrides)==null?void 0:C.status)!==void 0||l.current.status.overriden},durationInMinutes:{value:((M=S==null?void 0:S.taskOverrides)==null?void 0:M.durationInMinutes)??l.current.durationInMinutes.value,overriden:((P=S==null?void 0:S.taskOverrides)==null?void 0:P.durationInMinutes)!==void 0||l.current.durationInMinutes.overriden},date:{value:((I=S==null?void 0:S.taskOverrides)==null?void 0:I.date)??l.current.date.value,overriden:((N=S==null?void 0:S.taskOverrides)==null?void 0:N.date)!==void 0||l.current.date.overriden},item:l.current.item},s(o)},b=i==null?void 0:i.dialogContent;return _(P$n,{open:t,onClose:n.onClose,children:_(F$n,{children:b&&!c?_(b,{initialMetdata:d[i.pluginSlug],onNext:y,onBack:k,onClose:n.onClose,NextButton:S=>_(Kl,{...S,children:i.pluginSlug===n.steps[n.steps.length-1].pluginSlug?"Create task":"Next"}),BackButton:S=>_(Kl,{...S,secondary:!0,children:i.pluginSlug===n.steps[0].pluginSlug?"Cancel":"Back"})}):_(L$n,{})})})},B$n=n=>{const e=ot.useFragment(uke,n.day),t=v.useRef(null);return v.useEffect(()=>{const r=Qn().format("YYYY-MM-DD");e.date===r&&t.current&&t.current.scrollIntoView({inline:"start",behavior:"auto"})},[t]),de("div",{className:"relative flex h-full w-64 flex-col",children:[_("div",{ref:t,className:"absolute -left-2"}),de("div",{className:"mb-3 px-2",children:[_("button",{className:"hover:text-primary-400 active:text-primary-600 text-xl font-semibold",onClick:()=>{var r;return(r=t.current)==null?void 0:r.scrollIntoView({inline:"start",behavior:"smooth"})},disabled:!!n.label,children:n.label??j$n[Qn(e.date).day()]}),_("div",{className:"text-foreground-800 text-sm",children:Qn(e.date).format("MMMM D")})]}),_(V$n,{day:e}),_(exe,{day:e})]})},exe=n=>{const[e,t]=v.useState(null),r=ot.useFragment(dke,n.day),[i]=Ga(fke),[s,o]=v.useState(structuredClone(Array.from(r.tasks))),[a,l]=v.useState(null),c=d=>{l({htmlParent:d.to,movedTaskId:d.item.id})},u=async d=>{o(d.filter(S=>S.__typename==="Task"));const f=d.find(S=>S.__typename!=="Task");if(!f)return;const h=Ja.getStore().getSource(),p=h.get(f.id);if(!p)return;const m=p.pluginDatas.__refs.map(S=>h.get(S)),g=!!((p.inboxPoints??0)>0&&p.list),y=await p_n(),k=[];for(const[S,w]of Object.entries(y))w.onCreateTask&&k.push({pluginSlug:S,onCreateTask:w.onCreateTask});const b=d.findIndex(S=>S.id===f.id);t({atIndex:b,steps:k,task:{title:{value:p.title,overriden:!1},status:{value:"TODO",overriden:!1},durationInMinutes:{value:null,overriden:!1},date:{value:r.date,overriden:!1},item:{...p,willBeDimissedFromInbox:g,pluginDatas:m}}})};return v.useEffect(()=>{o(structuredClone(Array.from(r.tasks)))},[r.tasks]),v.useEffect(()=>{if(a){const d=Array.from(a.htmlParent.children).map(f=>f.id);i({variables:{input:{id:a.movedTaskId,date:a.htmlParent.id,newTasksOrder:d}}}),l(null)}},[a]),de(ls,{children:[e&&_(z$n,{...e,onClose:()=>t(null)}),_(mj.ReactSortable,{id:r.date,className:"no-scrollbar mt-4 flex flex-auto flex-col overflow-y-scroll px-2",list:s,setList:u,animation:150,delayOnTouchOnly:!0,delay:100,group:"shared",onEnd:c,children:s.map(d=>_("div",{id:d.id,className:"pb-4",children:_(M1e,{task:d})},d.id))})]})},j$n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],V$n=n=>{const e=ot.useFragment(hke,n.day),[t,r]=v.useState(!1);return de("div",{className:"flex flex-col gap-4 px-2",children:[_(Kl,{secondary:!0,sm:!0,className:"bg-background-300/50 text-foreground-900 hover:bg-background-300/70 active:bg-background-300/100 w-full",onClick:()=>r(!0),children:"Add task"}),t&&_(s$n,{date:e.date,onSave:()=>r(!1),onCancel:()=>r(!1)})]})},txe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ItemCard_item",selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{args:null,kind:"FragmentSpread",name:"ItemTitle_item"},{args:null,kind:"FragmentSpread",name:"RenderItemCardDetails_item"},{args:null,kind:"FragmentSpread",name:"ItemCardActions_item"},{args:null,kind:"FragmentSpread",name:"OnCreateTaskItemRecordToCreateTaskFrom_item"}],type:"Item",abstractKey:null};txe.hash="e53a175334a7951a0a35a224ea239b19";const nxe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ItemCardActions_item",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"RenderItemCardActions_item"}],type:"Item",abstractKey:null};nxe.hash="18905a9ed595ada33a2e8bcbc6acaba0";const rxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},i=[t];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"ItemCardUpdateItemMutation",selections:[{alias:null,args:e,concreteType:"Item",kind:"LinkedField",name:"updateItem",plural:!1,selections:[t,r,{args:null,kind:"FragmentSpread",name:"ItemCard_item"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"ItemCardUpdateItemMutation",selections:[{alias:null,args:e,concreteType:"Item",kind:"LinkedField",name:"updateItem",plural:!1,selections:[t,r,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:i,storageKey:null}],storageKey:null}]},params:{cacheID:"b0b39c5a5fcb5d6a08f9004415c2b751",id:null,metadata:{},name:"ItemCardUpdateItemMutation",operationKind:"mutation",text:`mutation ItemCardUpdateItemMutation(
  $input: MutationUpdateItemInput!
) {
  updateItem(input: $input) {
    id
    isRelevant
    ...ItemCard_item
  }
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}
`}}}();rxe.hash="28c30184d98d39540c2d8ccb418859f3";const ixe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},i=[t];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"ItemCardDismissFromInboxMutation",selections:[{alias:null,args:e,concreteType:"Item",kind:"LinkedField",name:"dismissItemFromInbox",plural:!1,selections:[t,r,{args:null,kind:"FragmentSpread",name:"ItemCard_item"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"ItemCardDismissFromInboxMutation",selections:[{alias:null,args:e,concreteType:"Item",kind:"LinkedField",name:"dismissItemFromInbox",plural:!1,selections:[t,r,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:i,storageKey:null}],storageKey:null}]},params:{cacheID:"0bcdab0f6165b748a8390c7ddb4dfc36",id:null,metadata:{},name:"ItemCardDismissFromInboxMutation",operationKind:"mutation",text:`mutation ItemCardDismissFromInboxMutation(
  $input: MutationDismissItemFromInboxInput!
) {
  dismissItemFromInbox(input: $input) {
    id
    inboxPoints
    ...ItemCard_item
  }
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}
`}}}();ixe.hash="03aacbfb071a9cd814cffda1752ecfcc";const sxe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ItemTitle_item",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"Item",abstractKey:null};sxe.hash="0db0ee41ccd08eadee493453c1e4cd34";const oxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"Item",kind:"LinkedField",name:"updateItem",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"ItemTitleUpdateItemTitleMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"ItemTitleUpdateItemTitleMutation",selections:e},params:{cacheID:"51f8c6f66d71d9570a119ecbe9b1820e",id:null,metadata:{},name:"ItemTitleUpdateItemTitleMutation",operationKind:"mutation",text:`mutation ItemTitleUpdateItemTitleMutation(
  $input: MutationUpdateItemInput!
) {
  updateItem(input: $input) {
    id
    title
  }
}
`}}}();oxe.hash="a0bf17fb7119b8232f9d02b04ebd4281";const q$n=n=>{const e=ot.useFragment(sxe,n.item),[t]=Ga(oxe),r=i=>{console.log("saving",e.id),t({variables:{input:{id:e.id,title:i}},optimisticResponse:{updateItem:{id:e.id,title:i}}})};return _(axe,{initialValue:e.title,onSave:r})},axe=n=>{const e=v.useRef(null),[t,r]=v.useState(n.toCreate??!1),i=v.useCallback(()=>{var a,l,c;if(r(!1),!e.current)return;if(e.current.isEmpty){(a=n.onCancel)==null||a.call(n);return}if(!e.current.isEditable)return;const o=e.current.getHTML();if(o===n.initialValue){(l=n.onCancel)==null||l.call(n);return}(c=n.onSave)==null||c.call(n,o)},[e.current]);e.current=m1({extensions:[X9,Y9(()=>{var o;(o=e.current)==null||o.commands.blur()}),E9.configure({suggestion:{char:"#"}})],content:n.initialValue??"",onBlur:i});const s=()=>{setTimeout(()=>{r(!0)},1)};return v.useEffect(()=>{var o,a;(o=e.current)==null||o.setEditable(t),t&&((a=e.current)==null||a.commands.focus("end"))},[t,e.current]),_(p1,{className:"CardEditorInput w-full cursor-text p-0",editor:e.current,onClick:s})},lxe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RenderItemCardDetails_item",selections:[{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Item",abstractKey:null};lxe.hash="c4b9a5974de360c0d07d7239935d8e07";const mD=(n,e)=>e===1?n:n+"s",K$n=n=>{const e=ot.useFragment(lxe,n.item),t=de(ls,{children:[n.inInbox&&e.inboxPoints&&de(Jh,{children:[_(Qh,{children:de(NT,{children:["+",e.inboxPoints]})}),de(Yh,{side:"bottom",children:[e.inboxPoints," inbox ",mD("point",e.inboxPoints)]})]}),!!e.tasks.length&&de(Jh,{children:[_(Qh,{children:de(NT,{children:[e.tasks.length," ",mD("task",e.tasks.length)]})}),de(Yh,{side:"bottom",children:[e.tasks.length," ",mD("task",e.tasks.length)," linked to this item"]})]}),e.durationInMinutes&&_(E1e,{durationInMinutes:e.durationInMinutes}),e.scheduledAt&&_("div",{children:e.scheduledAt})]});return _(v.Suspense,{fallback:_("div",{className:"flex flex-wrap gap-2",children:t}),children:_(U$n,{item:e,nativeDetails:t})})},U$n=n=>{const{plugins:e}=ZA(),[t,r]=v.useState([]),[i,s]=v.useState([]);return Tp(async()=>{const o=[];for(const a of Object.values(e)){if(!a.renderItemCardDetails)continue;const l=await a.renderItemCardDetails({item:n.item});l&&o.push(...l)}r(o.filter(a=>a.fullWidth)),s(o.filter(a=>!a.fullWidth))},[e,n.item]),de("div",{className:"flex w-full flex-col gap-2",children:[t.map(({component:o},a)=>_(o,{},a)),de("div",{className:"flex flex-wrap gap-2",children:[n.nativeDetails,i.map(({component:o},a)=>_(o,{},a))]})]})},cxe=function(){var n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RenderItemCardActions_item",selections:[n,{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null}],storageKey:null}],type:"Item",abstractKey:null}}();cxe.hash="611a6fe9d893cfd32be8ca1064608299";const H$n=n=>{const e=ot.useFragment(cxe,n.item);return _(v.Suspense,{children:_(W$n,{item:e})})},W$n=n=>{const{plugins:e}=ZA(),[t,r]=v.useState([]);return Tp(async()=>{const i=[];for(const s of Object.values(e)){if(!s.renderItemCardActions)continue;const o=await s.renderItemCardActions({item:n.item});o&&i.push(...o)}r(i)},[e]),_(ls,{children:t.map(({component:i},s)=>_(i,{},s))})},gj=n=>{const e=ot.useFragment(txe,n.item);return de("div",{className:"bg-background-50 group flex cursor-pointer flex-col gap-1 rounded-lg p-3 shadow-sm hover:shadow-md",children:[_(q$n,{item:e}),_(K$n,{item:e,inInbox:n.inInbox}),_(G$n,{item:e,inInbox:n.inInbox})]})},G$n=n=>{const e=ot.useFragment(nxe,n.item),[t]=Ga(rxe),r=()=>{t({variables:{input:{id:e.id,isRelevant:!1}},optimisticUpdater:o=>{const a=o.get(e.id);a&&a.setValue(!1,"isRelevant")}})},[i]=Ga(ixe),s=()=>{i({variables:{input:{id:e.id}},optimisticUpdater:o=>{const a=o.get(e.id);a&&a.setValue(null,"inboxPoints")}})};return de("div",{className:"flex gap-1",children:[de(Jh,{children:[_(Qh,{children:_("button",{className:"bg-background-200 text-foreground-700 hover:bg-background-300 active:bg-background-300 flex h-6 w-6 items-center justify-center rounded-full bg-opacity-50 text-sm hover:bg-opacity-70 active:bg-opacity-100",onClick:r,children:_(s3,{})})}),_(Yh,{side:"bottom",children:"Mark this item as done"})]}),n.inInbox&&de(Jh,{children:[_(Qh,{children:_("button",{className:"bg-background-200 text-foreground-700 hover:bg-background-300 active:bg-background-300 flex h-6 w-6 items-center justify-center rounded-full bg-opacity-50 text-sm hover:bg-opacity-70 active:bg-opacity-100",onClick:s,children:_(Sqe,{size:16})})}),_(Yh,{side:"bottom",children:"Archive this item."})]}),_(H$n,{item:e})]})},uxe={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"dayIdInFocus"}],kind:"Fragment",metadata:null,name:"Lists_data",selections:[{args:[{kind:"Variable",name:"dayIdInFocus",variableName:"dayIdInFocus"}],kind:"FragmentSpread",name:"CalendarList_data"},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"lists",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"Query",abstractKey:null};uxe.hash="fcda518dbe38f45749413b37fb4502e7";const dxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"listId"}],e=[{kind:"Variable",name:"id",variableName:"listId"}],t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i=[r];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"ListSubscription",selections:[{alias:null,args:e,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:[t,{args:null,kind:"FragmentSpread",name:"ListItems_list"}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"ListSubscription",selections:[{alias:null,args:e,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:[t,{alias:null,args:[{kind:"Literal",name:"where",value:{isRelevant:!0}}],concreteType:"ListItemsConnection",kind:"LinkedField",name:"items",plural:!1,selections:[{alias:null,args:null,concreteType:"ListItemsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},r],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:i,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'items(where:{"isRelevant":true})'},r],storageKey:null}]},params:{cacheID:"374952f740e8a5483bda8ff512ab571c",id:null,metadata:{},name:"ListSubscription",operationKind:"subscription",text:`subscription ListSubscription(
  $listId: ID!
) {
  list(id: $listId) {
    name
    ...ListItems_list
    id
  }
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment ListItems_list on List {
  name
  items(where: {isRelevant: true}) {
    edges {
      cursor
      node {
        id
        title
        ...ItemCard_item
      }
    }
  }
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}
`}}}();dxe.hash="77ea645e12236767ae1a656446587098";const fxe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ListItems_list",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"where",value:{isRelevant:!0}}],concreteType:"ListItemsConnection",kind:"LinkedField",name:"items",plural:!1,selections:[{alias:null,args:null,concreteType:"ListItemsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{args:null,kind:"FragmentSpread",name:"ItemCard_item"}],storageKey:null}],storageKey:null}],storageKey:'items(where:{"isRelevant":true})'}],type:"List",abstractKey:null};fxe.hash="2800392cd15b30cae0c62b1d34ce04f6";const J$n=n=>{const[e]=Lz(dxe,{listId:n.listId});return e?e.list?de("div",{className:"bg-background-100 flex h-full flex-col",children:[_("div",{className:"p-3 text-xl font-semibold",children:e.list.name}),_(Q$n,{list:e.list})]}):_("div",{children:"No list found. Try refreshing the page or toggling to another list and back."}):_(Y$n,{})},Q$n=n=>{const e=ot.useFragment(fxe,n.list),t=v.useMemo(()=>structuredClone(e.items.edges.map(r=>r.node)),[e.items.edges]);return _(mj.ReactSortable,{list:t,setList:()=>{},group:"shared",className:"no-scrollbar h-full flex-1 overflow-y-scroll px-4",children:e.items.edges.map(r=>_("div",{id:r.node.id,className:"pb-4",children:_(gj,{item:r.node})},r.node.id))})},Y$n=()=>de("div",{className:"bg-background-100 flex h-full flex-col",children:[_("div",{className:"p-3 text-xl font-semibold",children:"Loading list..."}),_("div",{className:"no-scrollbar h-full flex-1 overflow-y-scroll px-4",children:[...Array(10)].map((n,e)=>_("div",{className:"bg-background-200 mb-4 h-24 w-full animate-pulse rounded-lg shadow-sm"},e))})]}),hxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"dayIdInFocus"}],e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"CalendarListRefetchableQuery",selections:[{args:[{kind:"Variable",name:"dayIdInFocus",variableName:"dayIdInFocus"}],kind:"FragmentSpread",name:"CalendarList_data"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"CalendarListRefetchableQuery",selections:[{alias:"day",args:[{kind:"Variable",name:"id",variableName:"dayIdInFocus"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null}],storageKey:null}],type:"Day",abstractKey:null},e],storageKey:null}]},params:{cacheID:"f83887b8e17ff459a1193508638542be",id:null,metadata:{},name:"CalendarListRefetchableQuery",operationKind:"query",text:`query CalendarListRefetchableQuery(
  $dayIdInFocus: ID!
) {
  ...CalendarList_data_44J8Us
}

fragment CalendarList_data_44J8Us on Query {
  day: node(id: $dayIdInFocus) {
    __typename
    ... on Day {
      tasks {
        id
        completedAt
      }
    }
    id
  }
}
`}}}();hxe.hash="8aab9104abbabb1b0b8a8c04335767f1";const pxe={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"dayIdInFocus"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:[],operation:hxe}},name:"CalendarList_data",selections:[{alias:"day",args:[{kind:"Variable",name:"id",variableName:"dayIdInFocus"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null}],storageKey:null}],type:"Day",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null};pxe.hash="8aab9104abbabb1b0b8a8c04335767f1";const mxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"scheduledAt"}],e=[{alias:"events",args:[{fields:[{kind:"Literal",name:"isRelevant",value:!0},{kind:"Variable",name:"scheduledAt",variableName:"scheduledAt"}],kind:"ObjectValue",name:"where"}],concreteType:"QueryItemsConnection",kind:"LinkedField",name:"items",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryItemsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAllDay",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"CalendarListSubscription",selections:e,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"CalendarListSubscription",selections:e},params:{cacheID:"114dfbcc5363c67060d533e5ddf0ef2a",id:null,metadata:{},name:"CalendarListSubscription",operationKind:"subscription",text:`subscription CalendarListSubscription(
  $scheduledAt: PrismaDateTimeFilter!
) {
  events: items(where: {isRelevant: true, scheduledAt: $scheduledAt}) {
    edges {
      node {
        id
        title
        scheduledAt
        durationInMinutes
        isAllDay
        color
      }
    }
  }
}
`}}}();mxe.hash="47ef1adfe4193f71352f968a92c168af";const X$n=n=>{var d;const e=n.startHour??0,t=n.heightOf1Hour??96,r=Array.from({length:25}).map((f,h)=>(h+e)%24),i=v.useRef(null),[s,o]=v.useState(new Date);v.useEffect(()=>{const f=setInterval(()=>{o(new Date)},6e4);return()=>clearInterval(f)},[]);const{events:a,allDayEvents:l,yOffset:c}=v.useMemo(()=>{const f=n.events.reduce((p,m)=>{if("isAllDay"in m)return{eventsMap:p.eventsMap,allDayEvents:[...p.allDayEvents,m]};const g=Array.from(p.eventsMap.values()).filter(b=>b===m?!1:b.scheduledAt<=m.scheduledAt&&b.end>m.scheduledAt||b.scheduledAt<b.end&&b.end>=b.end),y=g[g.length-1],k=new Date(m.scheduledAt);return k.setMinutes(k.getMinutes()+m.durationInMinutes),{eventsMap:p.eventsMap.set(m.id,{...m,end:k,height:m.durationInMinutes/60*t,widthPercentage:y?y.widthPercentage*.75:100}),allDayEvents:p.allDayEvents}},{eventsMap:new Map,allDayEvents:new Array}),h=30*f.allDayEvents.length+4;return{events:Array.from(f.eventsMap.values()),allDayEvents:f.allDayEvents,yOffset:h}},[JSON.stringify(n.events)]),u=v.useCallback(f=>((f.getHours()+24-e)%24+f.getMinutes()/60)*t+c,[]);return de("div",{className:"flex gap-1",children:[_("div",{className:"flex flex-col",style:{marginTop:c},children:r.map((f,h)=>_("div",{className:"relative w-[4ch]",style:{height:t},children:de("span",{className:"text-foreground-600 absolute left-0 top-0 -translate-y-1/2 transform text-xs",children:[gD(f),":00"]})},h))}),de("div",{className:"relative w-full",children:[_("div",{className:"mb-1",children:l.map(f=>_("div",{className:"border-background-50 overflow-hidden overflow-ellipsis whitespace-nowrap rounded-md border px-2 py-1 text-sm",style:{color:f.textColor??Hn.blue[900],backgroundColor:f.backgroundColor??Hn.blue[100]},children:f.title},f.id))}),_("div",{className:"w-full flex-col",children:r.map((f,h)=>_("div",{className:"border-background-300 border-0 border-l border-t",style:{height:t}},h))}),_("div",{ref:i,className:"absolute z-20 h-[2px] w-full bg-[#ef4444]",style:{top:u(s)}}),(d=n.artifacts)==null?void 0:d.map(f=>_("div",{className:"absolute z-10",style:{top:u(f.at),left:`${f.leftPercentageOffset??0}%`},children:f.element},f.id)),a.map(f=>de("div",{className:`absolute overflow-hidden rounded-md border border-white p-2 ${f.height<Dee?"py-0":""}`,style:{top:u(f.scheduledAt),height:f.height,color:f.textColor??Hn.blue[900],backgroundColor:f.backgroundColor??Hn.blue[100],width:`calc(${f.widthPercentage}% - 2%)`,left:`calc(${100-f.widthPercentage}% + 2%)`},onClick:()=>{var h;return(h=n.onEventClick)==null?void 0:h.call(n,f)},children:[_("div",{className:`w-full overflow-hidden overflow-ellipsis whitespace-nowrap ${f.height<Dee?"text-sm":"text-base"}`,children:f.title}),de("div",{className:"text-sm",children:[f.scheduledAt.getHours(),":",gD(f.scheduledAt.getMinutes())," -"," ",f.end.getHours(),":",gD(f.end.getMinutes())]})]},f.id))]})]})},Dee=32,gD=(n,e=2)=>n.toLocaleString("en-US",{minimumIntegerDigits:e}),Z$n=n=>{var o;const e=v.useRef(Qn().startOf("day").add(4,"hours")),[t]=ot.useRefetchableFragment(pxe,n.data),[r]=Lz(mxe,{scheduledAt:{gte:e.current.toISOString(),lt:e.current.add(1,"day").toISOString()}}),i=v.useMemo(()=>(r==null?void 0:r.events.edges.reduce((a,l)=>{if(!l.node.scheduledAt)return a;const c=l.node.color;return a.push({id:l.node.id,title:l.node.title,scheduledAt:new Date(l.node.scheduledAt),textColor:c?Hn[l.node.color][900]:void 0,backgroundColor:c?Hn[l.node.color][100]:void 0,durationInMinutes:l.node.durationInMinutes??0,...l.node.isAllDay?{isAllDay:!0}:{}}),a},[]))??[],[r==null?void 0:r.events.edges]),s=v.useMemo(()=>{var a,l;return(l=(a=t.day)==null?void 0:a.tasks)==null?void 0:l.reduce((c,u)=>(u.completedAt&&c.push({id:u.id,at:new Date(u.completedAt),element:_("div",{className:"h-6 w-6 -translate-x-1/2 -translate-y-1/2 transform rounded-full bg-green-500"})}),c),[])},[(o=t.day)==null?void 0:o.tasks]);return de("div",{className:"flex h-full flex-col",children:[_("div",{className:"p-3 text-xl font-semibold",children:"Calendar"}),_("div",{className:"no-scrollbar h-full overflow-y-scroll pl-3 pt-0.5 pt-3",children:_(X$n,{events:i,artifacts:s,startHour:4})})]})},gxe=function(){var n=[{kind:"Literal",name:"orderBy",value:{inboxPoints:"Desc"}},{kind:"Literal",name:"where",value:{inboxPoints:{gte:1},isRelevant:!0,tasks:{none:{status:{equals:"TODO"}}}}}],e={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InboxListSubscription",selections:[{alias:null,args:n,concreteType:"QueryItemsConnection",kind:"LinkedField",name:"items",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryItemsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"InboxListItemToBeInList_item"}],storageKey:null}],storageKey:null},e],storageKey:'items(orderBy:{"inboxPoints":"Desc"},where:{"inboxPoints":{"gte":1},"isRelevant":true,"tasks":{"none":{"status":{"equals":"TODO"}}}})'}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"InboxListSubscription",selections:[{alias:null,args:n,concreteType:"QueryItemsConnection",kind:"LinkedField",name:"items",plural:!1,selections:[{alias:null,args:null,concreteType:"QueryItemsConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"node",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:[t],storageKey:null}],storageKey:null}],storageKey:null},e],storageKey:'items(orderBy:{"inboxPoints":"Desc"},where:{"inboxPoints":{"gte":1},"isRelevant":true,"tasks":{"none":{"status":{"equals":"TODO"}}}})'}]},params:{cacheID:"d27ca5965a5514152eedaecb0548d337",id:null,metadata:{},name:"InboxListSubscription",operationKind:"subscription",text:`subscription InboxListSubscription {
  items(where: {isRelevant: true, inboxPoints: {gte: 1}, tasks: {none: {status: {equals: TODO}}}}, orderBy: {inboxPoints: Desc}) {
    edges {
      node {
        ...InboxListItemToBeInList_item
        id
      }
    }
  }
}

fragment InboxListItemToBeInList_item on Item {
  id
  isRelevant
  inboxPoints
  tasks {
    status
    id
  }
  ...ItemCard_item
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}
`}}}();gxe.hash="cb986a3b80568021d2f813b434cd5f88";const yxe={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"InboxListItemToBeInList_item",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ItemCard_item"}],type:"Item",abstractKey:null};yxe.hash="3dd60b86fa9601077480ee6dd4ebabfc";const vxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"NewItemCardCreateItemMutation",selections:[{alias:null,args:e,concreteType:"Item",kind:"LinkedField",name:"createItem",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ItemCard_item"},{args:null,kind:"FragmentSpread",name:"InboxListItemToBeInList_item"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"NewItemCardCreateItemMutation",selections:[{alias:null,args:e,concreteType:"Item",kind:"LinkedField",name:"createItem",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:[t],storageKey:null}],storageKey:null}]},params:{cacheID:"ff255033c0216299f33310a681d3ddba",id:null,metadata:{},name:"NewItemCardCreateItemMutation",operationKind:"mutation",text:`mutation NewItemCardCreateItemMutation(
  $input: MutationCreateItemInput!
) {
  createItem(input: $input) {
    ...ItemCard_item
    ...InboxListItemToBeInList_item
    id
  }
}

fragment InboxListItemToBeInList_item on Item {
  id
  isRelevant
  inboxPoints
  tasks {
    status
    id
  }
  ...ItemCard_item
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}
`}}}();vxe.hash="063f8fb7b76dd84ee45485e3291c33b7";const eEn=n=>{const[e]=Ga(vxe);return _("div",{className:"bg-background-50 flex cursor-pointer flex-col gap-1 rounded-lg p-3 shadow-sm hover:shadow-md",children:_(axe,{toCreate:!0,onSave:r=>{n.onSave(),e({variables:{input:{title:r,inboxPoints:1}},updater:i=>{const s=i.get(n.itemsConnectionId);if(!s)return;const o=i.getRootField("createItem"),a=ot.ConnectionHandler.createEdge(i,s,o,"QueryItemsConnectionEdge");ot.ConnectionHandler.insertEdgeBefore(s,a)}})},onCancel:n.onCancel})})},tEn=n=>{const[e,t]=v.useState(!1),[r]=Lz(gxe),i=ot.useFragment(yxe,(r==null?void 0:r.items.edges.map(o=>o.node))??[]),s=structuredClone(i.filter(o=>{const a=!!o.isRelevant&&(o.inboxPoints??0)>0,l=o.tasks.some(c=>c.status==="TODO");return a&&!l})??[]);return r?de("div",{className:"bg-background-100 flex h-full flex-col gap-4 pt-3",children:[de("div",{className:"flex flex-col gap-2 px-4",children:[_("div",{className:"text-xl font-semibold",children:"Inbox"}),_("div",{className:"text-foreground-700",children:"Quickly add items to your inbox so you can triage them later."}),de("div",{className:"flex flex-col gap-4",children:[_(Kl,{secondary:!0,sm:!0,className:"bg-background-300/50 text-foreground-900 hover:bg-background-300/70 active:bg-background-300/100 w-full",onClick:()=>t(!0),children:"Add item"}),e&&_(eEn,{itemsConnectionId:r.items.__id,onSave:()=>t(!1),onCancel:()=>t(!1)})]})]}),_(mj.ReactSortable,{list:s,setList:()=>{},group:"shared",className:"no-scrollbar flex h-full flex-col overflow-y-scroll px-4",children:s.map(o=>_("div",{id:o.id,className:"pb-4",children:_(gj,{item:o,inInbox:!0},o.id)},o.id))})]}):null},nEn=n=>{const e=ot.useFragment(uxe,n.data),[t,r]=v.useState("inbox");return de("div",{className:"bg-background-50 z-10 flex h-full shadow-xl",children:[_("div",{className:"h-full w-72 flex-1",children:t==="inbox"?_(tEn,{}):t==="calendar"?_(Z$n,{data:e}):_(J$n,{listId:t})}),de("div",{className:"border-l-background-300 flex h-full flex-col gap-3 overflow-y-scroll border-l p-2",children:[_(yD,{listId:"inbox",tooltip:"Inbox",isSelected:t==="inbox",onClick:()=>r("inbox"),children:_(_qe,{})}),_(yD,{listId:"calendar",tooltip:"Calendar",isSelected:t==="calendar",onClick:()=>r("calendar"),children:_(Eqe,{size:18})}),e.lists.map(i=>_(yD,{listId:i.id,tooltip:i.name,isSelected:t===i.id,onClick:()=>r(i.id),children:_(Rqe,{})},i.id))]})]})},yD=n=>de(Jh,{children:[_(Qh,{children:_("button",{className:Ce("flex h-11 w-11 items-center justify-center rounded-full",n.isSelected?"bg-primary-100 text-primary-600":"hover:bg-background-200 text-foreground-700 bg-transparent"),onClick:n.onClick,children:n.children})}),_(Yh,{side:"left",children:n.tooltip})]}),rEn=(n,e,t)=>{const r=v.useRef(),[i,s]=v.useState(n),[o,a]=v.useState(!1),l=()=>{clearTimeout(r.current)},c=JSON.stringify(n instanceof Set?Array.from(n):n instanceof Map?Object.fromEntries(n.entries()):n);return v.useEffect(()=>(a(!0),r.current=setTimeout(()=>{s(n),a(!1),t==null||t(n)},e),()=>{l()}),[c,e]),[i,o,l]},bxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"isAllDay",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},h=[t];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"createItemMutation",selections:[{alias:null,args:e,concreteType:"Item",kind:"LinkedField",name:"createItem",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ItemCard_item"},t,r,i,s,o,a,l,c,{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[t,r,u,d,f],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"createItemMutation",selections:[{alias:null,args:e,concreteType:"Item",kind:"LinkedField",name:"createItem",plural:!1,selections:[i,a,t,o,{alias:null,args:null,kind:"ScalarField",name:"inboxPoints",storageKey:null},{alias:null,args:null,concreteType:"ItemPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[d,f,t,r,u],storageKey:null},{alias:null,args:null,concreteType:"Task",kind:"LinkedField",name:"tasks",plural:!0,selections:h,storageKey:null},s,{alias:null,args:null,concreteType:"List",kind:"LinkedField",name:"list",plural:!1,selections:h,storageKey:null},r,l,c],storageKey:null}]},params:{cacheID:"8bf45611f8f0a9b0741aab0a520b6bba",id:null,metadata:{},name:"createItemMutation",operationKind:"mutation",text:`mutation createItemMutation(
  $input: MutationCreateItemInput!
) {
  createItem(input: $input) {
    ...ItemCard_item
    id
    createdAt
    title
    isRelevant
    scheduledAt
    durationInMinutes
    isAllDay
    color
    pluginDatas {
      id
      createdAt
      updatedAt
      pluginSlug
      min
    }
  }
}

fragment ItemCardActions_item on Item {
  id
  pluginDatas {
    pluginSlug
    min
    id
  }
  ...RenderItemCardActions_item
}

fragment ItemCard_item on Item {
  title
  durationInMinutes
  ...ItemTitle_item
  ...RenderItemCardDetails_item
  ...ItemCardActions_item
  ...OnCreateTaskItemRecordToCreateTaskFrom_item
}

fragment ItemTitle_item on Item {
  id
  title
}

fragment OnCreateTaskItemRecordToCreateTaskFrom_item on Item {
  id
  title
  inboxPoints
  list {
    id
  }
  pluginDatas {
    pluginSlug
    min
    id
  }
}

fragment RenderItemCardActions_item on Item {
  id
  isRelevant
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderItemCardDetails_item on Item {
  scheduledAt
  inboxPoints
  durationInMinutes
  pluginDatas {
    pluginSlug
    min
    id
  }
  tasks {
    id
  }
}
`}}}();bxe.hash="1295ac554aac1ab0b5cb16bd134943a3";const iEn=async n=>{const{createItem:e}=await Fz(Ja,{mutation:bxe,variables:{input:n}});return e},kxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"completedAt",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"durationInMinutes",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"pluginSlug",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"createTaskMutation",selections:[{alias:null,args:e,concreteType:"Task",kind:"LinkedField",name:"createTask",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"TaskCard_task"},t,r,i,s,o,a,{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[t,l,r,c,u],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"createTaskMutation",selections:[{alias:null,args:e,concreteType:"Task",kind:"LinkedField",name:"createTask",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"date",storageKey:null},i,s,o,a,{alias:null,args:null,concreteType:"Item",kind:"LinkedField",name:"item",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"scheduledAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRelevant",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TaskPluginData",kind:"LinkedField",name:"pluginDatas",plural:!0,selections:[t,l,u,r,c],storageKey:null},r],storageKey:null}]},params:{cacheID:"8d515286f977d3968b2bc7168f920b1c",id:null,metadata:{},name:"createTaskMutation",operationKind:"mutation",text:`mutation createTaskMutation(
  $input: MutationCreateTaskInput!
) {
  createTask(input: $input) {
    ...TaskCard_task
    id
    createdAt
    title
    status
    completedAt
    durationInMinutes
    pluginDatas {
      id
      pluginSlug
      createdAt
      updatedAt
      min
    }
  }
}

fragment RenderTaskCardActions_task on Task {
  id
  status
  durationInMinutes
  item {
    id
    isRelevant
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment RenderTaskCardDetails_task on Task {
  durationInMinutes
  item {
    id
    scheduledAt
  }
  pluginDatas {
    id
    pluginSlug
    min
  }
}

fragment TaskCardActions_task on Task {
  status
  id
  item {
    id
    isRelevant
  }
  ...TaskCardDurationButton_task
  ...RenderTaskCardActions_task
}

fragment TaskCardDurationButton_task on Task {
  id
  durationInMinutes
}

fragment TaskCard_task on Task {
  id
  date
  title
  status
  completedAt
  ...RenderTaskCardDetails_task
  ...TaskCardActions_task
  ...TaskTitle_task
}

fragment TaskTitle_task on Task {
  id
  title
}
`}}}();kxe.hash="7b60e1b08b0b1874be6ba384f838449b";const sEn=async n=>{const{createTask:e}=await Fz(Ja,{mutation:kxe,variables:{input:n}});return e},xxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"where"}],e=[{kind:"Variable",name:"where",variableName:"where"}],t={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null};return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"getStoreUtilsGetQuery",selections:[{alias:null,args:e,concreteType:"Store",kind:"LinkedField",name:"storeItems",plural:!0,selections:[t,r],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"getStoreUtilsGetQuery",selections:[{alias:null,args:e,concreteType:"Store",kind:"LinkedField",name:"storeItems",plural:!0,selections:[t,r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"b0704c2abb6395d7ae3f529634359a23",id:null,metadata:{},name:"getStoreUtilsGetQuery",operationKind:"query",text:`query getStoreUtilsGetQuery(
  $where: QueryStoreItemsInput!
) {
  storeItems(where: $where) {
    key
    value
    id
  }
}
`}}}();xxe.hash="8814b08a7a4befc7b7751c8ccef3777a";const oEn=n=>{const e=async(t,r)=>{const i=await $0(Ja,xxe,{where:{keys:t,pluginSlug:r===void 0?n:r}}).toPromise();return Object.fromEntries((i==null?void 0:i.storeItems.map(s=>[s.key,s.value]))??[])};return{get:e,useStore:(t,r)=>l8(async()=>e(t,r))}},Sxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"PluginOperation",kind:"LinkedField",name:"pluginOperation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"pluginOperationQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"pluginOperationQuery",selections:e},params:{cacheID:"5c4944cc85225f03cd6dcb023ad13004",id:null,metadata:{},name:"pluginOperationQuery",operationKind:"query",text:`query pluginOperationQuery(
  $input: QueryPluginOperationInput!
) {
  pluginOperation(input: $input) {
    id
    data
  }
}
`}}}();Sxe.hash="0b211917bb5cf26f0613bf601ceeb1ed";const wxe=function(){var n=[{defaultValue:null,kind:"LocalArgument",name:"input"}],e=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"PluginOperation",kind:"LinkedField",name:"pluginOperation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"pluginOperationMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"pluginOperationMutation",selections:e},params:{cacheID:"adbba4e5a75b116417ce023c11d328d5",id:null,metadata:{},name:"pluginOperationMutation",operationKind:"mutation",text:`mutation pluginOperationMutation(
  $input: MutationPluginOperationInput!
) {
  pluginOperation(input: $input) {
    id
    data
  }
}
`}}}();wxe.hash="c213ac26a175e960bcdcb4b05e559abd";const Nee=Sxe,aEn=n=>({query:async e=>{try{const t=await $0(Ja,Nee,{input:{pluginSlug:n,operationName:e.operationName,data:e.input??{}}}).toPromise();return t!=null&&t.pluginOperation?{id:t.pluginOperation.id,data:t.pluginOperation.data}:null}catch(t){return console.error(t),null}},useLazyQuery:e=>{const t=ot.useLazyLoadQuery(Nee,{input:{pluginSlug:n,operationName:e.operationName,data:e.input??{}}});return t.pluginOperation?{id:t.pluginOperation.id,data:t.pluginOperation.data}:null},mutation:async e=>{try{const t=await Fz(Ja,{mutation:wxe,variables:{input:{pluginSlug:n,operationName:e.operationName,data:e.input??{}}},onError:r=>{throw r}});return t!=null&&t.pluginOperation?{id:t.pluginOperation.id,data:t.pluginOperation.data}:null}catch(t){return console.error(t),null}}}),$xe=ee.forwardRef((n,e)=>_(nE.Provider,{value:{size:"16px"},children:de("div",{className:Ce("text-foreground-700 relative flex items-center",n.fullWidth&&"w-full",n.hasError&&"text-negative-600"),children:[n.leftIcon&&_("div",{className:"absolute pl-3",children:n.leftIcon}),_("input",{...n,ref:e,className:Ce("ring-primary-200 placeholder:text-foreground-700 text-foreground-900 disabled:bg-background-300/50 disabled:ring-none hover:ring-primary-300 focus:ring-primary-500 w-full rounded-md px-3 py-2 text-sm outline-none ring transition-colors duration-300 ease-in-out",n.leftIcon&&"pl-10",n.rightIcon&&"pr-10",n.hasError&&"ring-negative-600 hover:ring-negative-600 focus:ring-negative-600 placeholder:text-negative-600",n.className)}),n.rightIcon&&_("div",{className:"absolute right-0 pr-3",children:n.rightIcon})]})})),lEn=v.forwardRef((n,e)=>{const t=typeof n.error=="object"?n.error.message:n.error;return de("label",{className:Ce("flex flex-col gap-1",n.fullWidth&&"w-full"),children:[n.label&&_("div",{className:"text-foreground-900 text-base font-medium",children:n.label}),typeof n.description=="string"?_("div",{className:"text-foreground-700 text-sm",children:n.description}):n.description,_($xe,{...n,ref:e,hasError:!!t||n.hasError}),t&&_("div",{className:"text-negative-600 text-sm",children:t})]})});function Dt(){return Dt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dt.apply(this,arguments)}function Fee(n,[e,t]){return Math.min(t,Math.max(e,n))}const _L="dismissableLayer.update",cEn="dismissableLayer.pointerDownOutside",uEn="dismissableLayer.focusOutside";let Lee;const dEn=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fEn=v.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=v.useContext(dEn),[d,f]=v.useState(null),h=(t=d==null?void 0:d.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,p]=v.useState({}),m=at(e,E=>f(E)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),k=g.indexOf(y),b=d?g.indexOf(d):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,w=b>=k,x=hEn(E=>{const C=E.target,M=[...u.branches].some(P=>P.contains(C));!w||M||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},h),$=pEn(E=>{const C=E.target;[...u.branches].some(P=>P.contains(C))||(o==null||o(E),a==null||a(E),E.defaultPrevented||l==null||l())},h);return qle(E=>{b===u.layers.size-1&&(i==null||i(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},h),v.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Lee=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),zee(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Lee)}},[d,h,r,u]),v.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),zee())},[d,u]),v.useEffect(()=>{const E=()=>p({});return document.addEventListener(_L,E),()=>document.removeEventListener(_L,E)},[]),v.createElement(qe.div,Dt({},c,{ref:m,style:{pointerEvents:S?w?"auto":"none":void 0,...n.style},onFocusCapture:me(n.onFocusCapture,$.onFocusCapture),onBlurCapture:me(n.onBlurCapture,$.onBlurCapture),onPointerDownCapture:me(n.onPointerDownCapture,x.onPointerDownCapture)}))});function hEn(n,e=globalThis==null?void 0:globalThis.document){const t=Bn(n),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){Exe(cEn,t,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function pEn(n,e=globalThis==null?void 0:globalThis.document){const t=Bn(n),r=v.useRef(!1);return v.useEffect(()=>{const i=s=>{s.target&&!r.current&&Exe(uEn,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function zee(){const n=new CustomEvent(_L);document.dispatchEvent(n)}function Exe(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Gz(i,s):i.dispatchEvent(s)}const vD="focusScope.autoFocusOnMount",bD="focusScope.autoFocusOnUnmount",Bee={bubbles:!1,cancelable:!0},mEn=v.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=v.useState(null),c=Bn(i),u=Bn(s),d=v.useRef(null),f=at(e,m=>l(m)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let m=function(b){if(h.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:Mu(d.current,{select:!0})},g=function(b){if(h.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||Mu(d.current,{select:!0}))},y=function(b){const S=document.activeElement;for(const w of b)w.removedNodes.length>0&&(a!=null&&a.contains(S)||Mu(a))};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const k=new MutationObserver(y);return a&&k.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),k.disconnect()}}},[r,a,h.paused]),v.useEffect(()=>{if(a){Vee.add(h);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(vD,Bee);a.addEventListener(vD,c),a.dispatchEvent(y),y.defaultPrevented||(gEn(xEn(Cxe(a)),{select:!0}),document.activeElement===m&&Mu(a))}return()=>{a.removeEventListener(vD,c),setTimeout(()=>{const y=new CustomEvent(bD,Bee);a.addEventListener(bD,u),a.dispatchEvent(y),y.defaultPrevented||Mu(m??document.body,{select:!0}),a.removeEventListener(bD,u),Vee.remove(h)},0)}}},[a,c,u,h]);const p=v.useCallback(m=>{if(!t&&!r||h.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const k=m.currentTarget,[b,S]=yEn(k);b&&S?!m.shiftKey&&y===S?(m.preventDefault(),t&&Mu(b,{select:!0})):m.shiftKey&&y===b&&(m.preventDefault(),t&&Mu(S,{select:!0})):y===k&&m.preventDefault()}},[t,r,h.paused]);return v.createElement(qe.div,Dt({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function gEn(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Mu(r,{select:e}),document.activeElement!==t)return}function yEn(n){const e=Cxe(n),t=jee(e,n),r=jee(e.reverse(),n);return[t,r]}function Cxe(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function jee(n,e){for(const t of n)if(!vEn(t,{upTo:e}))return t}function vEn(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function bEn(n){return n instanceof HTMLInputElement&&"select"in n}function Mu(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&bEn(n)&&e&&n.select()}}const Vee=kEn();function kEn(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=qee(n,e),n.unshift(e)},remove(e){var t;n=qee(n,e),(t=n[0])===null||t===void 0||t.resume()}}}function qee(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function xEn(n){return n.filter(e=>e.tagName!=="A")}const Mxe="Popper",[Txe,_xe]=Jo(Mxe),[SEn,Axe]=Txe(Mxe),wEn=n=>{const{__scopePopper:e,children:t}=n,[r,i]=v.useState(null);return v.createElement(SEn,{scope:e,anchor:r,onAnchorChange:i},t)},$En="PopperAnchor",EEn=v.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Axe($En,t),o=v.useRef(null),a=at(e,o);return v.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:v.createElement(qe.div,Dt({},i,{ref:a}))}),Ixe="PopperContent",[CEn,K2n]=Txe(Ixe),MEn=v.forwardRef((n,e)=>{var t,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:m=0,collisionBoundary:g=[],collisionPadding:y=0,sticky:k="partial",hideWhenDetached:b=!1,avoidCollisions:S=!0,onPlaced:w,...x}=n,$=Axe(Ixe,u),[E,C]=v.useState(null),M=at(e,nt=>C(nt)),[P,I]=v.useState(null),N=t8(P),T=(t=N==null?void 0:N.width)!==null&&t!==void 0?t:0,R=(r=N==null?void 0:N.height)!==null&&r!==void 0?r:0,A=d+(h!=="center"?"-"+h:""),L=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},F=Array.isArray(g)?g:[g],O=F.length>0,z={padding:L,boundary:F.filter(TEn),altBoundary:O},{refs:j,floatingStyles:K,placement:Z,isPositioned:te,middlewareData:pe}=lce({strategy:"fixed",placement:A,whileElementsMounted:sce,elements:{reference:$.anchor},middleware:[Gle({mainAxis:f+R,alignmentAxis:p}),S&&Jle({mainAxis:!0,crossAxis:!1,limiter:k==="partial"?Qle():void 0,...z}),S&&Hle({...z}),Yle({...z,apply:({elements:nt,rects:Ft,availableWidth:ts,availableHeight:ys})=>{const{width:B,height:U}=Ft.reference,J=nt.floating.style;J.setProperty("--radix-popper-available-width",`${ts}px`),J.setProperty("--radix-popper-available-height",`${ys}px`),J.setProperty("--radix-popper-anchor-width",`${B}px`),J.setProperty("--radix-popper-anchor-height",`${U}px`)}}),P&&oce({element:P,padding:m}),_En({arrowWidth:T,arrowHeight:R}),b&&Wle({strategy:"referenceHidden"})]}),[he,se]=Rxe(Z),ke=Bn(w);to(()=>{te&&(ke==null||ke())},[te,ke]);const xe=(i=pe.arrow)===null||i===void 0?void 0:i.x,be=(s=pe.arrow)===null||s===void 0?void 0:s.y,ye=((o=pe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Re,ft]=v.useState();return to(()=>{E&&ft(window.getComputedStyle(E).zIndex)},[E]),v.createElement("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:te?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(a=pe.transformOrigin)===null||a===void 0?void 0:a.x,(l=pe.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},v.createElement(CEn,{scope:u,placedSide:he,onArrowChange:I,arrowX:xe,arrowY:be,shouldHideArrow:ye},v.createElement(qe.div,Dt({"data-side":he,"data-align":se},x,{ref:M,style:{...x.style,animation:te?void 0:"none",opacity:(c=pe.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function TEn(n){return n!==null}const _En=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,f=d?0:n.arrowWidth,h=d?0:n.arrowHeight,[p,m]=Rxe(a),g={start:"0%",center:"50%",end:"100%"}[m],y=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,k=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let b="",S="";return p==="bottom"?(b=d?g:`${y}px`,S=`${-h}px`):p==="top"?(b=d?g:`${y}px`,S=`${l.floating.height+h}px`):p==="right"?(b=`${-h}px`,S=d?g:`${k}px`):p==="left"&&(b=`${l.floating.width+h}px`,S=d?g:`${k}px`),{data:{x:b,y:S}}}});function Rxe(n){const[e,t="center"]=n.split("-");return[e,t]}const AEn=wEn,IEn=EEn,REn=MEn,OEn=v.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?Vk.createPortal(v.createElement(qe.div,Dt({},i,{ref:e})),r):null});function Oxe(n){const e=v.useRef({value:n,previous:n});return v.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}const PEn=[" ","Enter","ArrowUp","ArrowDown"],DEn=[" ","Enter"],UA="Select",[HA,yj,NEn]=tj(UA),[ry,U2n]=Jo(UA,[NEn,_xe]),vj=_xe(),[FEn,_p]=ry(UA),[LEn,zEn]=ry(UA),BEn=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h}=n,p=vj(e),[m,g]=v.useState(null),[y,k]=v.useState(null),[b,S]=v.useState(!1),w=nj(c),[x=!1,$]=Qc({prop:r,defaultProp:i,onChange:s}),[E,C]=Qc({prop:o,defaultProp:a,onChange:l}),M=v.useRef(null),P=m?!!m.closest("form"):!0,[I,N]=v.useState(new Set),T=Array.from(I).map(R=>R.props.value).join(";");return v.createElement(AEn,p,v.createElement(FEn,{required:h,scope:e,trigger:m,onTriggerChange:g,valueNode:y,onValueNodeChange:k,valueNodeHasChildren:b,onValueNodeHasChildrenChange:S,contentId:Qs(),value:E,onValueChange:C,open:x,onOpenChange:$,dir:w,triggerPointerDownPosRef:M,disabled:f},v.createElement(HA.Provider,{scope:e},v.createElement(LEn,{scope:n.__scopeSelect,onNativeOptionAdd:v.useCallback(R=>{N(A=>new Set(A).add(R))},[]),onNativeOptionRemove:v.useCallback(R=>{N(A=>{const L=new Set(A);return L.delete(R),L})},[])},t)),P?v.createElement(Nxe,{key:T,"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:E,onChange:R=>C(R.target.value),disabled:f},E===void 0?v.createElement("option",{value:""}):null,Array.from(I)):null))},jEn="SelectTrigger",VEn=v.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,s=vj(t),o=_p(jEn,t),a=o.disabled||r,l=at(e,o.onTriggerChange),c=yj(t),[u,d,f]=Fxe(p=>{const m=c().filter(k=>!k.disabled),g=m.find(k=>k.value===o.value),y=Lxe(m,p,g);y!==void 0&&o.onValueChange(y.value)}),h=()=>{a||(o.onOpenChange(!0),f())};return v.createElement(IEn,Dt({asChild:!0},s),v.createElement(qe.button,Dt({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},i,{ref:l,onClick:me(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:me(i.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(h(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:me(i.onKeyDown,p=>{const m=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&PEn.includes(p.key)&&(h(),p.preventDefault())})})))}),qEn="SelectValue",KEn=v.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:s,placeholder:o,...a}=n,l=_p(qEn,t),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=at(e,l.onValueNodeChange);return to(()=>{c(u)},[c,u]),v.createElement(qe.span,Dt({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),UEn=v.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return v.createElement(qe.span,Dt({"aria-hidden":!0},i,{ref:e}),r||"")}),HEn=n=>v.createElement(OEn,Dt({asChild:!0},n)),f0="SelectContent",WEn=v.forwardRef((n,e)=>{const t=_p(f0,n.__scopeSelect),[r,i]=v.useState();if(to(()=>{i(new DocumentFragment)},[]),!t.open){const s=r;return s?Za.createPortal(v.createElement(Pxe,{scope:n.__scopeSelect},v.createElement(HA.Slot,{scope:n.__scopeSelect},v.createElement("div",null,n.children))),s):null}return v.createElement(GEn,Dt({},n,{ref:e}))}),_c=10,[Pxe,WA]=ry(f0),GEn=v.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:g,...y}=n,k=_p(f0,t),[b,S]=v.useState(null),[w,x]=v.useState(null),$=at(e,se=>S(se)),[E,C]=v.useState(null),[M,P]=v.useState(null),I=yj(t),[N,T]=v.useState(!1),R=v.useRef(!1);v.useEffect(()=>{if(b)return C1(b)},[b]),LA();const A=v.useCallback(se=>{const[ke,...xe]=I().map(Re=>Re.ref.current),[be]=xe.slice(-1),ye=document.activeElement;for(const Re of se)if(Re===ye||(Re==null||Re.scrollIntoView({block:"nearest"}),Re===ke&&w&&(w.scrollTop=0),Re===be&&w&&(w.scrollTop=w.scrollHeight),Re==null||Re.focus(),document.activeElement!==ye))return},[I,w]),L=v.useCallback(()=>A([E,b]),[A,E,b]);v.useEffect(()=>{N&&L()},[N,L]);const{onOpenChange:F,triggerPointerDownPosRef:O}=k;v.useEffect(()=>{if(b){let se={x:0,y:0};const ke=be=>{var ye,Re,ft,nt;se={x:Math.abs(Math.round(be.pageX)-((ye=(Re=O.current)===null||Re===void 0?void 0:Re.x)!==null&&ye!==void 0?ye:0)),y:Math.abs(Math.round(be.pageY)-((ft=(nt=O.current)===null||nt===void 0?void 0:nt.y)!==null&&ft!==void 0?ft:0))}},xe=be=>{se.x<=10&&se.y<=10?be.preventDefault():b.contains(be.target)||F(!1),document.removeEventListener("pointermove",ke),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",ke),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ke),document.removeEventListener("pointerup",xe,{capture:!0})}}},[b,F,O]),v.useEffect(()=>{const se=()=>F(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[F]);const[z,j]=Fxe(se=>{const ke=I().filter(ye=>!ye.disabled),xe=ke.find(ye=>ye.ref.current===document.activeElement),be=Lxe(ke,se,xe);be&&setTimeout(()=>be.ref.current.focus())}),K=v.useCallback((se,ke,xe)=>{const be=!R.current&&!xe;(k.value!==void 0&&k.value===ke||be)&&(C(se),be&&(R.current=!0))},[k.value]),Z=v.useCallback(()=>b==null?void 0:b.focus(),[b]),te=v.useCallback((se,ke,xe)=>{const be=!R.current&&!xe;(k.value!==void 0&&k.value===ke||be)&&P(se)},[k.value]),pe=r==="popper"?Kee:JEn,he=pe===Kee?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:g}:{};return v.createElement(Pxe,{scope:t,content:b,viewport:w,onViewportChange:x,itemRefCallback:K,selectedItem:E,onItemLeave:Z,itemTextRefCallback:te,focusSelectedItem:L,selectedItemText:M,position:r,isPositioned:N,searchRef:z},v.createElement(BA,{as:Cd,allowPinchZoom:!0},v.createElement(mEn,{asChild:!0,trapped:k.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:me(i,se=>{var ke;(ke=k.trigger)===null||ke===void 0||ke.focus({preventScroll:!0}),se.preventDefault()})},v.createElement(fEn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>k.onOpenChange(!1)},v.createElement(pe,Dt({role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:se=>se.preventDefault()},y,he,{onPlaced:()=>T(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:me(y.onKeyDown,se=>{const ke=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!ke&&se.key.length===1&&j(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let be=I().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(se.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const ye=se.target,Re=be.indexOf(ye);be=be.slice(Re+1)}setTimeout(()=>A(be)),se.preventDefault()}})}))))))}),JEn=v.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,s=_p(f0,t),o=WA(f0,t),[a,l]=v.useState(null),[c,u]=v.useState(null),d=at(e,$=>u($)),f=yj(t),h=v.useRef(!1),p=v.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:y,focusSelectedItem:k}=o,b=v.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&g&&y){const $=s.trigger.getBoundingClientRect(),E=c.getBoundingClientRect(),C=s.valueNode.getBoundingClientRect(),M=y.getBoundingClientRect();if(s.dir!=="rtl"){const ye=M.left-E.left,Re=C.left-ye,ft=$.left-Re,nt=$.width+ft,Ft=Math.max(nt,E.width),ts=window.innerWidth-_c,ys=Fee(Re,[_c,ts-Ft]);a.style.minWidth=nt+"px",a.style.left=ys+"px"}else{const ye=E.right-M.right,Re=window.innerWidth-C.right-ye,ft=window.innerWidth-$.right-Re,nt=$.width+ft,Ft=Math.max(nt,E.width),ts=window.innerWidth-_c,ys=Fee(Re,[_c,ts-Ft]);a.style.minWidth=nt+"px",a.style.right=ys+"px"}const P=f(),I=window.innerHeight-_c*2,N=m.scrollHeight,T=window.getComputedStyle(c),R=parseInt(T.borderTopWidth,10),A=parseInt(T.paddingTop,10),L=parseInt(T.borderBottomWidth,10),F=parseInt(T.paddingBottom,10),O=R+A+N+F+L,z=Math.min(g.offsetHeight*5,O),j=window.getComputedStyle(m),K=parseInt(j.paddingTop,10),Z=parseInt(j.paddingBottom,10),te=$.top+$.height/2-_c,pe=I-te,he=g.offsetHeight/2,se=g.offsetTop+he,ke=R+A+se,xe=O-ke;if(ke<=te){const ye=g===P[P.length-1].ref.current;a.style.bottom="0px";const Re=c.clientHeight-m.offsetTop-m.offsetHeight,ft=Math.max(pe,he+(ye?Z:0)+Re+L),nt=ke+ft;a.style.height=nt+"px"}else{const ye=g===P[0].ref.current;a.style.top="0px";const ft=Math.max(te,R+m.offsetTop+(ye?K:0)+he)+xe;a.style.height=ft+"px",m.scrollTop=ke-te+m.offsetTop}a.style.margin=`${_c}px 0`,a.style.minHeight=z+"px",a.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,g,y,s.dir,r]);to(()=>b(),[b]);const[S,w]=v.useState();to(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);const x=v.useCallback($=>{$&&p.current===!0&&(b(),k==null||k(),p.current=!1)},[b,k]);return v.createElement(QEn,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:x},v.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S}},v.createElement(qe.div,Dt({},i,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),Kee=v.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=_c,...s}=n,o=vj(t);return v.createElement(REn,Dt({},o,s,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[QEn,YEn]=ry(f0,{}),Uee="SelectViewport",XEn=v.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=WA(Uee,t),s=YEn(Uee,t),o=at(e,i.onViewportChange),a=v.useRef(0);return v.createElement(v.Fragment,null,v.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),v.createElement(HA.Slot,{scope:t},v.createElement(qe.div,Dt({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:me(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const h=window.innerHeight-_c*2,p=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),g=Math.max(p,m);if(g<h){const y=g+f,k=Math.min(h,y),b=y-k;u.style.height=k+"px",u.style.bottom==="0px"&&(c.scrollTop=b>0?b:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),ZEn="SelectGroup",[eCn,tCn]=ry(ZEn),nCn=v.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Qs();return v.createElement(eCn,{scope:t,id:i},v.createElement(qe.div,Dt({role:"group","aria-labelledby":i},r,{ref:e})))}),rCn="SelectLabel",iCn=v.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=tCn(rCn,t);return v.createElement(qe.div,Dt({id:i.id},r,{ref:e}))}),AL="SelectItem",[sCn,Dxe]=ry(AL),oCn=v.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:s,...o}=n,a=_p(AL,t),l=WA(AL,t),c=a.value===r,[u,d]=v.useState(s??""),[f,h]=v.useState(!1),p=at(e,y=>{var k;return(k=l.itemRefCallback)===null||k===void 0?void 0:k.call(l,y,r,i)}),m=Qs(),g=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};return v.createElement(sCn,{scope:t,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:v.useCallback(y=>{d(k=>{var b;return k||((b=y==null?void 0:y.textContent)!==null&&b!==void 0?b:"").trim()})},[])},v.createElement(HA.ItemSlot,{scope:t,value:r,disabled:i,textValue:u},v.createElement(qe.div,Dt({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:p,onFocus:me(o.onFocus,()=>h(!0)),onBlur:me(o.onBlur,()=>h(!1)),onPointerUp:me(o.onPointerUp,g),onPointerMove:me(o.onPointerMove,y=>{if(i){var k;(k=l.onItemLeave)===null||k===void 0||k.call(l)}else y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,y=>{if(y.currentTarget===document.activeElement){var k;(k=l.onItemLeave)===null||k===void 0||k.call(l)}}),onKeyDown:me(o.onKeyDown,y=>{var k;((k=l.searchRef)===null||k===void 0?void 0:k.current)!==""&&y.key===" "||(DEn.includes(y.key)&&g(),y.key===" "&&y.preventDefault())})}))))}),uw="SelectItemText",aCn=v.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...s}=n,o=_p(uw,t),a=WA(uw,t),l=Dxe(uw,t),c=zEn(uw,t),[u,d]=v.useState(null),f=at(e,y=>d(y),l.onItemTextChange,y=>{var k;return(k=a.itemTextRefCallback)===null||k===void 0?void 0:k.call(a,y,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=v.useMemo(()=>v.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},h),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=c;return to(()=>(m(p),()=>g(p)),[m,g,p]),v.createElement(v.Fragment,null,v.createElement(qe.span,Dt({id:l.textId},s,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Za.createPortal(s.children,o.valueNode):null)}),lCn="SelectItemIndicator",cCn=v.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return Dxe(lCn,t).isSelected?v.createElement(qe.span,Dt({"aria-hidden":!0},r,{ref:e})):null}),uCn=v.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return v.createElement(qe.div,Dt({"aria-hidden":!0},r,{ref:e}))}),Nxe=v.forwardRef((n,e)=>{const{value:t,...r}=n,i=v.useRef(null),s=at(e,i),o=Oxe(t);return v.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&u){const d=new Event("change",{bubbles:!0});u.call(a,t),a.dispatchEvent(d)}},[o,t]),v.createElement(pce,{asChild:!0},v.createElement("select",Dt({},r,{ref:s,defaultValue:t})))});Nxe.displayName="BubbleSelect";function Fxe(n){const e=Bn(n),t=v.useRef(""),r=v.useRef(0),i=v.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=v.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,s]}function Lxe(n,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=dCn(n,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function dCn(n,e){return n.map((t,r)=>n[(e+r)%n.length])}const fCn=BEn,hCn=VEn,pCn=KEn,mCn=UEn,gCn=HEn,yCn=WEn,vCn=XEn,bCn=nCn,kCn=iCn,xCn=oCn,SCn=aCn,wCn=cCn,$Cn=uCn,zxe=fCn,ECn=bCn,CCn=pCn,MCn=v.forwardRef(({className:n,children:e,...t},r)=>de(hCn,{ref:r,className:Ce("bg-background-50 ring-primary-200 placeholder:text-foreground-700 text-foreground-900 hover:ring-primary-300 disabled:bg-background-300/50 focus:ring-primary-500 disabled:ring-none flex h-9 w-full items-center justify-between rounded-md border px-3 py-2 text-sm shadow-sm ring focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-50",n),...t,children:[e,_(mCn,{asChild:!0,children:_(Pqe,{className:"text-foreground-700 h-4 w-4"})})]})),TCn=v.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>_(gCn,{children:_(yCn,{ref:i,className:Ce("bg-background-50 text-foreground-900 data-[state=open]:animate-fade-in data-[state=open]:animate-duration-100 data-[state=closed]:animate-fade-out data-[state=closed]:animate-duration-100 min-w-32 relative z-50 overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:_(vCn,{className:Ce("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})})),_Cn=v.forwardRef(({className:n,...e},t)=>_(kCn,{ref:t,className:Ce("px-2 py-1.5 text-sm font-semibold",n),...e})),ACn=v.forwardRef(({className:n,children:e,...t},r)=>de(xCn,{...t,ref:r,className:Ce("focus:bg-primary-100/70 focus:text-primary-500 relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),children:[_("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:_(wCn,{children:_(Wh,{className:"h-4 w-4"})})}),_(SCn,{children:e})]})),ICn=v.forwardRef(({className:n,...e},t)=>_($Cn,{ref:t,className:Ce("bg-primary-100 -mx-1 my-1 h-px",n),...e}));var A1=n=>n.type==="checkbox",kg=n=>n instanceof Date,Fi=n=>n==null;const Bxe=n=>typeof n=="object";var Pn=n=>!Fi(n)&&!Array.isArray(n)&&Bxe(n)&&!kg(n),jxe=n=>Pn(n)&&n.target?A1(n.target)?n.target.checked:n.target.value:n,RCn=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,Vxe=(n,e)=>n.has(RCn(e)),OCn=n=>{const e=n.constructor&&n.constructor.prototype;return Pn(e)&&e.hasOwnProperty("isPrototypeOf")},bj=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Fn(n){let e;const t=Array.isArray(n);if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(bj&&(n instanceof Blob||n instanceof FileList))&&(t||Pn(n)))if(e=t?[]:{},!t&&!OCn(n))e=n;else for(const r in n)n.hasOwnProperty(r)&&(e[r]=Fn(n[r]));else return n;return e}var iy=n=>Array.isArray(n)?n.filter(Boolean):[],St=n=>n===void 0,le=(n,e,t)=>{if(!e||!Pn(n))return t;const r=iy(e.split(/[,[\].]+?/)).reduce((i,s)=>Fi(i)?i:i[s],n);return St(r)||r===n?St(n[e])?t:n[e]:r},fa=n=>typeof n=="boolean";const VT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Io={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$c={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},PCn=ee.createContext(null),I1=()=>ee.useContext(PCn);var qxe=(n,e,t,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in n)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Io.all&&(e._proxyFormState[o]=!r||Io.all),t&&(t[o]=!0),n[o]}});return i},Es=n=>Pn(n)&&!Object.keys(n).length,Kxe=(n,e,t,r)=>{t(n);const{name:i,...s}=n;return Es(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Io.all))},Gs=n=>Array.isArray(n)?n:[n],Uxe=(n,e,t)=>!n||!e||n===e||Gs(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r)));function GA(n){const e=ee.useRef(n);e.current=n,ee.useEffect(()=>{const t=!n.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[n.disabled])}function Hxe(n){const e=I1(),{control:t=e.control,disabled:r,name:i,exact:s}=n||{},[o,a]=ee.useState(t._formState),l=ee.useRef(!0),c=ee.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=ee.useRef(i);return u.current=i,GA({disabled:r,next:d=>l.current&&Uxe(u.current,d.name,s)&&Kxe(d,c.current,t._updateFormState)&&a({...t._formState,...d}),subject:t._subjects.state}),ee.useEffect(()=>(l.current=!0,c.current.isValid&&t._updateValid(!0),()=>{l.current=!1}),[t]),qxe(o,t,c.current,!1)}var Xl=n=>typeof n=="string",Wxe=(n,e,t,r,i)=>Xl(n)?(r&&e.watch.add(n),le(t,n,i)):Array.isArray(n)?n.map(s=>(r&&e.watch.add(s),le(t,s))):(r&&(e.watchAll=!0),t);function Gxe(n){const e=I1(),{control:t=e.control,name:r,defaultValue:i,disabled:s,exact:o}=n||{},a=ee.useRef(r);a.current=r,GA({disabled:s,subject:t._subjects.values,next:u=>{Uxe(a.current,u.name,o)&&c(Fn(Wxe(a.current,t._names,u.values||t._formValues,!1,i)))}});const[l,c]=ee.useState(t._getWatch(r,i));return ee.useEffect(()=>t._removeUnmounted()),l}var kj=n=>/^\w*$/.test(n),Jxe=n=>iy(n.replace(/["|']|\]/g,"").split(/\.|\[/)),gt=(n,e,t)=>{let r=-1;const i=kj(e)?[e]:Jxe(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=t;if(r!==o){const c=n[a];l=Pn(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}n[a]=l,n=n[a]}return n};function Qxe(n){const e=I1(),{name:t,disabled:r,control:i=e.control,shouldUnregister:s}=n,o=Vxe(i._names.array,t),a=Gxe({control:i,name:t,defaultValue:le(i._formValues,t,le(i._defaultValues,t,n.defaultValue)),exact:!0}),l=Hxe({control:i,name:t}),c=ee.useRef(i.register(t,{...n.rules,value:a,...fa(n.disabled)?{disabled:n.disabled}:{}}));return ee.useEffect(()=>{const u=i._options.shouldUnregister||s,d=(f,h)=>{const p=le(i._fields,f);p&&(p._f.mount=h)};if(d(t,!0),u){const f=Fn(le(i._options.defaultValues,t));gt(i._defaultValues,t,f),St(le(i._formValues,t))&&gt(i._formValues,t,f)}return()=>{(o?u&&!i._state.action:u)?i.unregister(t):d(t,!1)}},[t,i,o,s]),ee.useEffect(()=>{le(i._fields,t)&&i._updateDisabledField({disabled:r,fields:i._fields,name:t,value:le(i._fields,t)._f.value})},[r,t,i]),{field:{name:t,value:a,...fa(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:ee.useCallback(u=>c.current.onChange({target:{value:jxe(u),name:t},type:VT.CHANGE}),[t]),onBlur:ee.useCallback(()=>c.current.onBlur({target:{value:le(i._formValues,t),name:t},type:VT.BLUR}),[t,i]),ref:u=>{const d=le(i._fields,t);d&&u&&(d._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:f=>u.setCustomValidity(f),reportValidity:()=>u.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!le(l.errors,t)},isDirty:{enumerable:!0,get:()=>!!le(l.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!le(l.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!le(l.validatingFields,t)},error:{enumerable:!0,get:()=>le(l.errors,t)}})}}const JA=n=>n.render(Qxe(n));var DCn=(n,e,t,r,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:i||!0}}:{},bu=()=>{const n=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(Math.random()*16+n)%16|0;return(e=="x"?t:t&3|8).toString(16)})},kD=(n,e,t={})=>t.shouldFocus||St(t.shouldFocus)?t.focusName||`${n}.${St(t.focusIndex)?e:t.focusIndex}.`:"",Ib=n=>({isOnSubmit:!n||n===Io.onSubmit,isOnBlur:n===Io.onBlur,isOnChange:n===Io.onChange,isOnAll:n===Io.all,isOnTouch:n===Io.onTouched}),IL=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const Lg=(n,e,t,r)=>{for(const i of t||Object.keys(n)){const s=le(n,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)break;if(o.ref&&e(o.ref,o.name)&&!r)break;Lg(a,e)}else Pn(a)&&Lg(a,e)}}};var Yxe=(n,e,t)=>{const r=iy(le(n,t));return gt(r,"root",e[t]),gt(n,t,r),n},xj=n=>n.type==="file",od=n=>typeof n=="function",qT=n=>{if(!bj)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},k$=n=>Xl(n),Sj=n=>n.type==="radio",KT=n=>n instanceof RegExp;const Hee={value:!1,isValid:!1},Wee={value:!0,isValid:!0};var Xxe=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!St(n[0].attributes.value)?St(n[0].value)||n[0].value===""?Wee:{value:n[0].value,isValid:!0}:Wee:Hee}return Hee};const Gee={isValid:!1,value:null};var Zxe=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Gee):Gee;function Jee(n,e,t="validate"){if(k$(n)||Array.isArray(n)&&n.every(k$)||fa(n)&&!n)return{type:t,message:k$(n)?n:"",ref:e}}var sm=n=>Pn(n)&&!KT(n)?n:{value:n,message:""},RL=async(n,e,t,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:c,min:u,max:d,pattern:f,validate:h,name:p,valueAsNumber:m,mount:g,disabled:y}=n._f,k=le(e,p);if(!g||y)return{};const b=o?o[0]:s,S=I=>{r&&b.reportValidity&&(b.setCustomValidity(fa(I)?"":I||""),b.reportValidity())},w={},x=Sj(s),$=A1(s),E=x||$,C=(m||xj(s))&&St(s.value)&&St(k)||qT(s)&&s.value===""||k===""||Array.isArray(k)&&!k.length,M=DCn.bind(null,p,t,w),P=(I,N,T,R=$c.maxLength,A=$c.minLength)=>{const L=I?N:T;w[p]={type:I?R:A,message:L,ref:s,...M(I?R:A,L)}};if(i?!Array.isArray(k)||!k.length:a&&(!E&&(C||Fi(k))||fa(k)&&!k||$&&!Xxe(o).isValid||x&&!Zxe(o).isValid)){const{value:I,message:N}=k$(a)?{value:!!a,message:a}:sm(a);if(I&&(w[p]={type:$c.required,message:N,ref:b,...M($c.required,N)},!t))return S(N),w}if(!C&&(!Fi(u)||!Fi(d))){let I,N;const T=sm(d),R=sm(u);if(!Fi(k)&&!isNaN(k)){const A=s.valueAsNumber||k&&+k;Fi(T.value)||(I=A>T.value),Fi(R.value)||(N=A<R.value)}else{const A=s.valueAsDate||new Date(k),L=z=>new Date(new Date().toDateString()+" "+z),F=s.type=="time",O=s.type=="week";Xl(T.value)&&k&&(I=F?L(k)>L(T.value):O?k>T.value:A>new Date(T.value)),Xl(R.value)&&k&&(N=F?L(k)<L(R.value):O?k<R.value:A<new Date(R.value))}if((I||N)&&(P(!!I,T.message,R.message,$c.max,$c.min),!t))return S(w[p].message),w}if((l||c)&&!C&&(Xl(k)||i&&Array.isArray(k))){const I=sm(l),N=sm(c),T=!Fi(I.value)&&k.length>+I.value,R=!Fi(N.value)&&k.length<+N.value;if((T||R)&&(P(T,I.message,N.message),!t))return S(w[p].message),w}if(f&&!C&&Xl(k)){const{value:I,message:N}=sm(f);if(KT(I)&&!k.match(I)&&(w[p]={type:$c.pattern,message:N,ref:s,...M($c.pattern,N)},!t))return S(N),w}if(h){if(od(h)){const I=await h(k,e),N=Jee(I,b);if(N&&(w[p]={...N,...M($c.validate,N.message)},!t))return S(N.message),w}else if(Pn(h)){let I={};for(const N in h){if(!Es(I)&&!t)break;const T=Jee(await h[N](k,e),b,N);T&&(I={...T,...M(N,T.message)},S(T.message),t&&(w[p]=I))}if(!Es(I)&&(w[p]={ref:b,...I},!t))return w}}return S(!0),w},xD=(n,e)=>[...n,...Gs(e)],SD=n=>Array.isArray(n)?n.map(()=>{}):void 0;function wD(n,e,t){return[...n.slice(0,e),...Gs(t),...n.slice(e)]}var $D=(n,e,t)=>Array.isArray(n)?(St(n[t])&&(n[t]=void 0),n.splice(t,0,n.splice(e,1)[0]),n):[],ED=(n,e)=>[...Gs(e),...Gs(n)];function NCn(n,e){let t=0;const r=[...n];for(const i of e)r.splice(i-t,1),t++;return iy(r).length?r:[]}var CD=(n,e)=>St(e)?[]:NCn(n,Gs(e).sort((t,r)=>t-r)),MD=(n,e,t)=>{[n[e],n[t]]=[n[t],n[e]]};function FCn(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=St(n)?r++:n[e[r++]];return n}function LCn(n){for(const e in n)if(n.hasOwnProperty(e)&&!St(n[e]))return!1;return!0}function Dn(n,e){const t=Array.isArray(e)?e:kj(e)?[e]:Jxe(e),r=t.length===1?n:FCn(n,t),i=t.length-1,s=t[i];return r&&delete r[s],i!==0&&(Pn(r)&&Es(r)||Array.isArray(r)&&LCn(r))&&Dn(n,t.slice(0,-1)),n}var Qee=(n,e,t)=>(n[e]=t,n);function zCn(n){const e=I1(),{control:t=e.control,name:r,keyName:i="id",shouldUnregister:s}=n,[o,a]=ee.useState(t._getFieldArray(r)),l=ee.useRef(t._getFieldArray(r).map(bu)),c=ee.useRef(o),u=ee.useRef(r),d=ee.useRef(!1);u.current=r,c.current=o,t._names.array.add(r),n.rules&&t.register(r,n.rules),GA({next:({values:w,name:x})=>{if(x===u.current||!x){const $=le(w,u.current);Array.isArray($)&&(a($),l.current=$.map(bu))}},subject:t._subjects.array});const f=ee.useCallback(w=>{d.current=!0,t._updateFieldArray(r,w)},[t,r]),h=(w,x)=>{const $=Gs(Fn(w)),E=xD(t._getFieldArray(r),$);t._names.focus=kD(r,E.length-1,x),l.current=xD(l.current,$.map(bu)),f(E),a(E),t._updateFieldArray(r,E,xD,{argA:SD(w)})},p=(w,x)=>{const $=Gs(Fn(w)),E=ED(t._getFieldArray(r),$);t._names.focus=kD(r,0,x),l.current=ED(l.current,$.map(bu)),f(E),a(E),t._updateFieldArray(r,E,ED,{argA:SD(w)})},m=w=>{const x=CD(t._getFieldArray(r),w);l.current=CD(l.current,w),f(x),a(x),t._updateFieldArray(r,x,CD,{argA:w})},g=(w,x,$)=>{const E=Gs(Fn(x)),C=wD(t._getFieldArray(r),w,E);t._names.focus=kD(r,w,$),l.current=wD(l.current,w,E.map(bu)),f(C),a(C),t._updateFieldArray(r,C,wD,{argA:w,argB:SD(x)})},y=(w,x)=>{const $=t._getFieldArray(r);MD($,w,x),MD(l.current,w,x),f($),a($),t._updateFieldArray(r,$,MD,{argA:w,argB:x},!1)},k=(w,x)=>{const $=t._getFieldArray(r);$D($,w,x),$D(l.current,w,x),f($),a($),t._updateFieldArray(r,$,$D,{argA:w,argB:x},!1)},b=(w,x)=>{const $=Fn(x),E=Qee(t._getFieldArray(r),w,$);l.current=[...E].map((C,M)=>!C||M===w?bu():l.current[M]),f(E),a([...E]),t._updateFieldArray(r,E,Qee,{argA:w,argB:$},!0,!1)},S=w=>{const x=Gs(Fn(w));l.current=x.map(bu),f([...x]),a([...x]),t._updateFieldArray(r,[...x],$=>$,{},!0,!1)};return ee.useEffect(()=>{if(t._state.action=!1,IL(r,t._names)&&t._subjects.state.next({...t._formState}),d.current&&(!Ib(t._options.mode).isOnSubmit||t._formState.isSubmitted))if(t._options.resolver)t._executeSchema([r]).then(w=>{const x=le(w.errors,r),$=le(t._formState.errors,r);($?!x&&$.type||x&&($.type!==x.type||$.message!==x.message):x&&x.type)&&(x?gt(t._formState.errors,r,x):Dn(t._formState.errors,r),t._subjects.state.next({errors:t._formState.errors}))});else{const w=le(t._fields,r);w&&w._f&&!(Ib(t._options.reValidateMode).isOnSubmit&&Ib(t._options.mode).isOnSubmit)&&RL(w,t._formValues,t._options.criteriaMode===Io.all,t._options.shouldUseNativeValidation,!0).then(x=>!Es(x)&&t._subjects.state.next({errors:Yxe(t._formState.errors,x,r)}))}t._subjects.values.next({name:r,values:{...t._formValues}}),t._names.focus&&Lg(t._fields,(w,x)=>{if(t._names.focus&&x.startsWith(t._names.focus)&&w.focus)return w.focus(),1}),t._names.focus="",t._updateValid(),d.current=!1},[o,r,t]),ee.useEffect(()=>(!le(t._formValues,r)&&t._updateFieldArray(r),()=>{(t._options.shouldUnregister||s)&&t.unregister(r)}),[r,t,i,s]),{swap:ee.useCallback(y,[f,r,t]),move:ee.useCallback(k,[f,r,t]),prepend:ee.useCallback(p,[f,r,t]),append:ee.useCallback(h,[f,r,t]),remove:ee.useCallback(m,[f,r,t]),insert:ee.useCallback(g,[f,r,t]),update:ee.useCallback(b,[f,r,t]),replace:ee.useCallback(S,[f,r,t]),fields:ee.useMemo(()=>o.map((w,x)=>({...w,[i]:l.current[x]||bu()})),[o,i])}}var TD=()=>{let n=[];return{get observers(){return n},next:i=>{for(const s of n)s.next&&s.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(s=>s!==i)}}),unsubscribe:()=>{n=[]}}},UT=n=>Fi(n)||!Bxe(n);function kh(n,e){if(UT(n)||UT(e))return n===e;if(kg(n)&&kg(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t){const s=n[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(kg(s)&&kg(o)||Pn(s)&&Pn(o)||Array.isArray(s)&&Array.isArray(o)?!kh(s,o):s!==o)return!1}}return!0}var eSe=n=>n.type==="select-multiple",BCn=n=>Sj(n)||A1(n),_D=n=>qT(n)&&n.isConnected,jCn=n=>Pn(n)&&Object.values(n).some(e=>e),tSe=n=>{for(const e in n)if(od(n[e]))return!0;return!1};function HT(n,e={}){const t=Array.isArray(n);if(Pn(n)||t)for(const r in n)Array.isArray(n[r])||Pn(n[r])&&!tSe(n[r])?(e[r]=Array.isArray(n[r])?[]:{},HT(n[r],e[r])):Fi(n[r])||(e[r]=!0);return e}function nSe(n,e,t){const r=Array.isArray(n);if(Pn(n)||r)for(const i in n)Array.isArray(n[i])||Pn(n[i])&&!tSe(n[i])?St(e)||UT(t[i])?t[i]=Array.isArray(n[i])?HT(n[i],[]):{...HT(n[i])}:nSe(n[i],Fi(e)?{}:e[i],t[i]):t[i]=!kh(n[i],e[i]);return t}var dw=(n,e)=>nSe(n,e,HT(e)),rSe=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>St(n)?n:e?n===""?NaN:n&&+n:t&&Xl(n)?new Date(n):r?r(n):n;function AD(n){const e=n.ref;if(!(n.refs?n.refs.every(t=>t.disabled):e.disabled))return xj(e)?e.files:Sj(e)?Zxe(n.refs).value:eSe(e)?[...e.selectedOptions].map(({value:t})=>t):A1(e)?Xxe(n.refs).value:rSe(St(e.value)?n.ref.value:e.value,n)}var VCn=(n,e,t,r)=>{const i={};for(const s of n){const o=le(e,s);o&&gt(i,s,o._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:r}},Jy=n=>St(n)?n:KT(n)?n.source:Pn(n)?KT(n.value)?n.value.source:n.value:n,qCn=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate);function Yee(n,e,t){const r=le(n,t);if(r||kj(t))return{error:r,name:t};const i=t.split(".");for(;i.length;){const s=i.join("."),o=le(e,s),a=le(n,s);if(o&&!Array.isArray(o)&&t!==s)return{name:t};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:t}}var KCn=(n,e,t,r,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?r.isOnBlur:i.isOnBlur)?!n:(t?r.isOnChange:i.isOnChange)?n:!0,UCn=(n,e)=>!iy(le(n,e)).length&&Dn(n,e);const HCn={mode:Io.onSubmit,reValidateMode:Io.onChange,shouldFocusError:!0};function WCn(n={}){let e={...HCn,...n},t={submitCount:0,isDirty:!1,isLoading:od(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Pn(e.defaultValues)||Pn(e.values)?Fn(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Fn(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:TD(),array:TD(),state:TD()},f=Ib(e.mode),h=Ib(e.reValidateMode),p=e.criteriaMode===Io.all,m=B=>U=>{clearTimeout(c),c=setTimeout(B,U)},g=async B=>{if(u.isValid||B){const U=e.resolver?Es((await E()).errors):await M(r,!0);U!==t.isValid&&d.state.next({isValid:U})}},y=(B,U)=>{(u.isValidating||u.validatingFields)&&(U.forEach(J=>{gt(t.validatingFields,J,B)}),t.isValidating=jCn(t.validatingFields),d.state.next({validatingFields:t.validatingFields,isValidating:t.isValidating}))},k=(B,U=[],J,ue,oe=!0,ie=!0)=>{if(ue&&J){if(o.action=!0,ie&&Array.isArray(le(r,B))){const ge=J(le(r,B),ue.argA,ue.argB);oe&&gt(r,B,ge)}if(ie&&Array.isArray(le(t.errors,B))){const ge=J(le(t.errors,B),ue.argA,ue.argB);oe&&gt(t.errors,B,ge),UCn(t.errors,B)}if(u.touchedFields&&ie&&Array.isArray(le(t.touchedFields,B))){const ge=J(le(t.touchedFields,B),ue.argA,ue.argB);oe&&gt(t.touchedFields,B,ge)}u.dirtyFields&&(t.dirtyFields=dw(i,s)),d.state.next({name:B,isDirty:I(B,U),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else gt(s,B,U)},b=(B,U)=>{gt(t.errors,B,U),d.state.next({errors:t.errors})},S=B=>{t.errors=B,d.state.next({errors:t.errors,isValid:!1})},w=(B,U,J,ue)=>{const oe=le(r,B);if(oe){const ie=le(s,B,St(J)?le(i,B):J);St(ie)||ue&&ue.defaultChecked||U?gt(s,B,U?ie:AD(oe._f)):R(B,ie),o.mount&&g()}},x=(B,U,J,ue,oe)=>{let ie=!1,ge=!1;const Ke={name:B},It=!!(le(r,B)&&le(r,B)._f.disabled);if(!J||ue){u.isDirty&&(ge=t.isDirty,t.isDirty=Ke.isDirty=I(),ie=ge!==Ke.isDirty);const Sn=It||kh(le(i,B),U);ge=!!(!It&&le(t.dirtyFields,B)),Sn||It?Dn(t.dirtyFields,B):gt(t.dirtyFields,B,!0),Ke.dirtyFields=t.dirtyFields,ie=ie||u.dirtyFields&&ge!==!Sn}if(J){const Sn=le(t.touchedFields,B);Sn||(gt(t.touchedFields,B,J),Ke.touchedFields=t.touchedFields,ie=ie||u.touchedFields&&Sn!==J)}return ie&&oe&&d.state.next(Ke),ie?Ke:{}},$=(B,U,J,ue)=>{const oe=le(t.errors,B),ie=u.isValid&&fa(U)&&t.isValid!==U;if(n.delayError&&J?(l=m(()=>b(B,J)),l(n.delayError)):(clearTimeout(c),l=null,J?gt(t.errors,B,J):Dn(t.errors,B)),(J?!kh(oe,J):oe)||!Es(ue)||ie){const ge={...ue,...ie&&fa(U)?{isValid:U}:{},errors:t.errors,name:B};t={...t,...ge},d.state.next(ge)}y(!1,Object.keys(t.validatingFields).filter(ge=>ge===B))},E=async B=>e.resolver(s,e.context,VCn(B||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation)),C=async B=>{const{errors:U}=await E(B);if(B)for(const J of B){const ue=le(U,J);ue?gt(t.errors,J,ue):Dn(t.errors,J)}else t.errors=U;return U},M=async(B,U,J={valid:!0})=>{for(const ue in B){const oe=B[ue];if(oe){const{_f:ie,...ge}=oe;if(ie){const Ke=a.array.has(ie.name),It=await RL(oe,s,p,e.shouldUseNativeValidation&&!U,Ke);if(It[ie.name]&&(J.valid=!1,U))break;!U&&(le(It,ie.name)?Ke?Yxe(t.errors,It,ie.name):gt(t.errors,ie.name,It[ie.name]):Dn(t.errors,ie.name))}ge&&await M(ge,U,J)}}return J.valid},P=()=>{for(const B of a.unMount){const U=le(r,B);U&&(U._f.refs?U._f.refs.every(J=>!_D(J)):!_D(U._f.ref))&&he(B)}a.unMount=new Set},I=(B,U)=>(B&&U&&gt(s,B,U),!kh(j(),i)),N=(B,U,J)=>Wxe(B,a,{...o.mount?s:St(U)?i:Xl(B)?{[B]:U}:U},J,U),T=B=>iy(le(o.mount?s:i,B,n.shouldUnregister?le(i,B,[]):[])),R=(B,U,J={})=>{const ue=le(r,B);let oe=U;if(ue){const ie=ue._f;ie&&(!ie.disabled&&gt(s,B,rSe(U,ie)),oe=qT(ie.ref)&&Fi(U)?"":U,eSe(ie.ref)?[...ie.ref.options].forEach(ge=>ge.selected=oe.includes(ge.value)):ie.refs?A1(ie.ref)?ie.refs.length>1?ie.refs.forEach(ge=>(!ge.defaultChecked||!ge.disabled)&&(ge.checked=Array.isArray(oe)?!!oe.find(Ke=>Ke===ge.value):oe===ge.value)):ie.refs[0]&&(ie.refs[0].checked=!!oe):ie.refs.forEach(ge=>ge.checked=ge.value===oe):xj(ie.ref)?ie.ref.value="":(ie.ref.value=oe,ie.ref.type||d.values.next({name:B,values:{...s}})))}(J.shouldDirty||J.shouldTouch)&&x(B,oe,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&z(B)},A=(B,U,J)=>{for(const ue in U){const oe=U[ue],ie=`${B}.${ue}`,ge=le(r,ie);(a.array.has(B)||!UT(oe)||ge&&!ge._f)&&!kg(oe)?A(ie,oe,J):R(ie,oe,J)}},L=(B,U,J={})=>{const ue=le(r,B),oe=a.array.has(B),ie=Fn(U);gt(s,B,ie),oe?(d.array.next({name:B,values:{...s}}),(u.isDirty||u.dirtyFields)&&J.shouldDirty&&d.state.next({name:B,dirtyFields:dw(i,s),isDirty:I(B,ie)})):ue&&!ue._f&&!Fi(ie)?A(B,ie,J):R(B,ie,J),IL(B,a)&&d.state.next({...t}),d.values.next({name:o.mount?B:void 0,values:{...s}})},F=async B=>{const U=B.target;let J=U.name,ue=!0;const oe=le(r,J),ie=()=>U.type?AD(oe._f):jxe(B),ge=Ke=>{ue=Number.isNaN(Ke)||Ke===le(s,J,Ke)};if(oe){let Ke,It;const Sn=ie(),Xo=B.type===VT.BLUR||B.type===VT.FOCUS_OUT,wn=!qCn(oe._f)&&!e.resolver&&!le(t.errors,J)&&!oe._f.deps||KCn(Xo,le(t.touchedFields,J),t.isSubmitted,h,f),Rp=IL(J,a,Xo);gt(s,J,Sn),Xo?(oe._f.onBlur&&oe._f.onBlur(B),l&&l(0)):oe._f.onChange&&oe._f.onChange(B);const Op=x(J,Sn,Xo,!1),D1=!Es(Op)||Rp;if(!Xo&&d.values.next({name:J,type:B.type,values:{...s}}),wn)return u.isValid&&g(),D1&&d.state.next({name:J,...Rp?{}:Op});if(!Xo&&Rp&&d.state.next({...t}),y(!0,[J]),e.resolver){const{errors:N1}=await E([J]);if(ge(Sn),ue){const F1=Yee(t.errors,r,J),vf=Yee(N1,r,F1.name||J);Ke=vf.error,J=vf.name,It=Es(N1)}}else Ke=(await RL(oe,s,p,e.shouldUseNativeValidation))[J],ge(Sn),ue&&(Ke?It=!1:u.isValid&&(It=await M(r,!0)));ue&&(oe._f.deps&&z(oe._f.deps),$(J,It,Ke,Op))}},O=(B,U)=>{if(le(t.errors,U)&&B.focus)return B.focus(),1},z=async(B,U={})=>{let J,ue;const oe=Gs(B);if(y(!0,oe),e.resolver){const ie=await C(St(B)?B:oe);J=Es(ie),ue=B?!oe.some(ge=>le(ie,ge)):J}else B?(ue=(await Promise.all(oe.map(async ie=>{const ge=le(r,ie);return await M(ge&&ge._f?{[ie]:ge}:ge)}))).every(Boolean),!(!ue&&!t.isValid)&&g()):ue=J=await M(r);return d.state.next({...!Xl(B)||u.isValid&&J!==t.isValid?{}:{name:B},...e.resolver||!B?{isValid:J}:{},errors:t.errors,isValidating:!1}),U.shouldFocus&&!ue&&Lg(r,O,B?oe:a.mount),ue},j=B=>{const U={...i,...o.mount?s:{}};return St(B)?U:Xl(B)?le(U,B):B.map(J=>le(U,J))},K=(B,U)=>({invalid:!!le((U||t).errors,B),isDirty:!!le((U||t).dirtyFields,B),isTouched:!!le((U||t).touchedFields,B),isValidating:!!le((U||t).validatingFields,B),error:le((U||t).errors,B)}),Z=B=>{B&&Gs(B).forEach(U=>Dn(t.errors,U)),d.state.next({errors:B?t.errors:{}})},te=(B,U,J)=>{const ue=(le(r,B,{_f:{}})._f||{}).ref;gt(t.errors,B,{...U,ref:ue}),d.state.next({name:B,errors:t.errors,isValid:!1}),J&&J.shouldFocus&&ue&&ue.focus&&ue.focus()},pe=(B,U)=>od(B)?d.values.subscribe({next:J=>B(N(void 0,U),J)}):N(B,U,!0),he=(B,U={})=>{for(const J of B?Gs(B):a.mount)a.mount.delete(J),a.array.delete(J),U.keepValue||(Dn(r,J),Dn(s,J)),!U.keepError&&Dn(t.errors,J),!U.keepDirty&&Dn(t.dirtyFields,J),!U.keepTouched&&Dn(t.touchedFields,J),!U.keepIsValidating&&Dn(t.validatingFields,J),!e.shouldUnregister&&!U.keepDefaultValue&&Dn(i,J);d.values.next({values:{...s}}),d.state.next({...t,...U.keepDirty?{isDirty:I()}:{}}),!U.keepIsValid&&g()},se=({disabled:B,name:U,field:J,fields:ue,value:oe})=>{if(fa(B)){const ie=B?void 0:St(oe)?AD(J?J._f:le(ue,U)._f):oe;gt(s,U,ie),x(U,ie,!1,!1,!0)}},ke=(B,U={})=>{let J=le(r,B);const ue=fa(U.disabled);return gt(r,B,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:B}},name:B,mount:!0,...U}}),a.mount.add(B),J?se({field:J,disabled:U.disabled,name:B,value:U.value}):w(B,!0,U.value),{...ue?{disabled:U.disabled}:{},...e.progressive?{required:!!U.required,min:Jy(U.min),max:Jy(U.max),minLength:Jy(U.minLength),maxLength:Jy(U.maxLength),pattern:Jy(U.pattern)}:{},name:B,onChange:F,onBlur:F,ref:oe=>{if(oe){ke(B,U),J=le(r,B);const ie=St(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,ge=BCn(ie),Ke=J._f.refs||[];if(ge?Ke.find(It=>It===ie):ie===J._f.ref)return;gt(r,B,{_f:{...J._f,...ge?{refs:[...Ke.filter(_D),ie,...Array.isArray(le(i,B))?[{}]:[]],ref:{type:ie.type,name:B}}:{ref:ie}}}),w(B,!1,void 0,ie)}else J=le(r,B,{}),J._f&&(J._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(Vxe(a.array,B)&&o.action)&&a.unMount.add(B)}}},xe=()=>e.shouldFocusError&&Lg(r,O,a.mount),be=B=>{fa(B)&&(d.state.next({disabled:B}),Lg(r,(U,J)=>{let ue=B;const oe=le(r,J);oe&&fa(oe._f.disabled)&&(ue||(ue=oe._f.disabled)),U.disabled=ue},0,!1))},ye=(B,U)=>async J=>{let ue;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let oe=Fn(s);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:ie,values:ge}=await E();t.errors=ie,oe=ge}else await M(r);if(Dn(t.errors,"root"),Es(t.errors)){d.state.next({errors:{}});try{await B(oe,J)}catch(ie){ue=ie}}else U&&await U({...t.errors},J),xe(),setTimeout(xe);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Es(t.errors)&&!ue,submitCount:t.submitCount+1,errors:t.errors}),ue)throw ue},Re=(B,U={})=>{le(r,B)&&(St(U.defaultValue)?L(B,Fn(le(i,B))):(L(B,U.defaultValue),gt(i,B,Fn(U.defaultValue))),U.keepTouched||Dn(t.touchedFields,B),U.keepDirty||(Dn(t.dirtyFields,B),t.isDirty=U.defaultValue?I(B,Fn(le(i,B))):I()),U.keepError||(Dn(t.errors,B),u.isValid&&g()),d.state.next({...t}))},ft=(B,U={})=>{const J=B?Fn(B):i,ue=Fn(J),oe=Es(B),ie=oe?i:ue;if(U.keepDefaultValues||(i=J),!U.keepValues){if(U.keepDirtyValues)for(const ge of a.mount)le(t.dirtyFields,ge)?gt(ie,ge,le(s,ge)):L(ge,le(ie,ge));else{if(bj&&St(B))for(const ge of a.mount){const Ke=le(r,ge);if(Ke&&Ke._f){const It=Array.isArray(Ke._f.refs)?Ke._f.refs[0]:Ke._f.ref;if(qT(It)){const Sn=It.closest("form");if(Sn){Sn.reset();break}}}}r={}}s=n.shouldUnregister?U.keepDefaultValues?Fn(i):{}:Fn(ie),d.array.next({values:{...ie}}),d.values.next({values:{...ie}})}a={mount:U.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!U.keepIsValid||!!U.keepDirtyValues,o.watch=!!n.shouldUnregister,d.state.next({submitCount:U.keepSubmitCount?t.submitCount:0,isDirty:oe?!1:U.keepDirty?t.isDirty:!!(U.keepDefaultValues&&!kh(B,i)),isSubmitted:U.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:oe?[]:U.keepDirtyValues?U.keepDefaultValues&&s?dw(i,s):t.dirtyFields:U.keepDefaultValues&&B?dw(i,B):{},touchedFields:U.keepTouched?t.touchedFields:{},errors:U.keepErrors?t.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},nt=(B,U)=>ft(od(B)?B(s):B,U);return{control:{register:ke,unregister:he,getFieldState:K,handleSubmit:ye,setError:te,_executeSchema:E,_getWatch:N,_getDirty:I,_updateValid:g,_removeUnmounted:P,_updateFieldArray:k,_updateDisabledField:se,_getFieldArray:T,_reset:ft,_resetDefaultValues:()=>od(e.defaultValues)&&e.defaultValues().then(B=>{nt(B,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:B=>{t={...t,...B}},_disableForm:be,_subjects:d,_proxyFormState:u,_setErrors:S,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(B){o=B},get _defaultValues(){return i},get _names(){return a},set _names(B){a=B},get _formState(){return t},set _formState(B){t=B},get _options(){return e},set _options(B){e={...e,...B}}},trigger:z,register:ke,handleSubmit:ye,watch:pe,setValue:L,getValues:j,reset:nt,resetField:Re,clearErrors:Z,unregister:he,setError:te,setFocus:(B,U={})=>{const J=le(r,B),ue=J&&J._f;if(ue){const oe=ue.refs?ue.refs[0]:ue.ref;oe.focus&&(oe.focus(),U.shouldSelect&&oe.select())}},getFieldState:K}}function GCn(n={}){const e=ee.useRef(),t=ee.useRef(),[r,i]=ee.useState({isDirty:!1,isValidating:!1,isLoading:od(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:od(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...WCn(n),formState:r});const s=e.current.control;return s._options=n,GA({subject:s._subjects.state,next:o=>{Kxe(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),ee.useEffect(()=>s._disableForm(n.disabled),[s,n.disabled]),ee.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),ee.useEffect(()=>{n.values&&!kh(n.values,t.current)?(s._reset(n.values,s._options.resetOptions),t.current=n.values,i(o=>({...o}))):s._resetDefaultValues()},[n.values,s]),ee.useEffect(()=>{n.errors&&s._setErrors(n.errors)},[n.errors,s]),ee.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),ee.useEffect(()=>{n.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[n.shouldUnregister,s]),e.current.formState=qxe(r,s),e.current}const JCn=n=>{const e=typeof n.error=="object"?n.error.message:n.error;return de("label",{className:Ce("flex flex-col gap-1",n.fullWidth&&"w-full"),children:[n.label&&_("div",{className:"text-foreground-900 text-base font-medium",children:n.label}),n.description&&_("div",{className:"text-foreground-700 text-sm",children:n.description}),_(JA,{...n,render:({field:t})=>{var r,i;return _(zxe,{...n.selectProps,value:t.value,onValueChange:s=>{var o,a;t.onChange(s),(a=(o=n.selectProps)==null?void 0:o.onValueChange)==null||a.call(o,s)},onOpenChange:s=>{var o,a;!s&&t.onBlur(),(a=(o=n.selectProps)==null?void 0:o.onOpenChange)==null||a.call(o,s)},name:t.name,disabled:n.disabled||((r=n.selectProps)==null?void 0:r.disabled),required:n.required||((i=n.selectProps)==null?void 0:i.required),children:n.children})}}),e&&_("div",{className:"text-negative-600 text-sm",children:e})]})};function eu(){return eu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eu.apply(this,arguments)}const iSe="Popover",[sSe,H2n]=Jo(iSe,[_0]),wj=_0(),[QCn,sy]=sSe(iSe),YCn=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=n,a=wj(e),l=v.useRef(null),[c,u]=v.useState(!1),[d=!1,f]=Qc({prop:r,defaultProp:i,onChange:s});return v.createElement(q_,a,v.createElement(QCn,{scope:e,contentId:Qs(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:v.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:v.useCallback(()=>u(!0),[]),onCustomAnchorRemove:v.useCallback(()=>u(!1),[]),modal:o},t))},XCn="PopoverTrigger",ZCn=v.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,i=sy(XCn,t),s=wj(t),o=at(e,i.triggerRef),a=v.createElement(qe.button,eu({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":lSe(i.open)},r,{ref:o,onClick:me(n.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:v.createElement(n8,eu({asChild:!0},s),a)}),oSe="PopoverPortal",[eMn,tMn]=sSe(oSe,{forceMount:void 0}),nMn=n=>{const{__scopePopover:e,forceMount:t,children:r,container:i}=n,s=sy(oSe,e);return v.createElement(eMn,{scope:e,forceMount:t},v.createElement(Qo,{present:t||s.open},v.createElement(i8,{asChild:!0,container:i},r)))},Pk="PopoverContent",rMn=v.forwardRef((n,e)=>{const t=tMn(Pk,n.__scopePopover),{forceMount:r=t.forceMount,...i}=n,s=sy(Pk,n.__scopePopover);return v.createElement(Qo,{present:r||s.open},s.modal?v.createElement(iMn,eu({},i,{ref:e})):v.createElement(sMn,eu({},i,{ref:e})))}),iMn=v.forwardRef((n,e)=>{const t=sy(Pk,n.__scopePopover),r=v.useRef(null),i=at(e,r),s=v.useRef(!1);return v.useEffect(()=>{const o=r.current;if(o)return C1(o)},[]),v.createElement(BA,{as:Cd,allowPinchZoom:!0},v.createElement(aSe,eu({},n,{ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(n.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=t.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:me(n.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:me(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),sMn=v.forwardRef((n,e)=>{const t=sy(Pk,n.__scopePopover),r=v.useRef(!1),i=v.useRef(!1);return v.createElement(aSe,eu({},n,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=n.onCloseAutoFocus)===null||o===void 0||o.call(n,s),!s.defaultPrevented){var a;r.current||(a=t.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=n.onInteractOutside)===null||o===void 0||o.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=t.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),aSe=v.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=n,f=sy(Pk,t),h=wj(t);return LA(),v.createElement(rj,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},v.createElement(B_,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1)},v.createElement(r8,eu({"data-state":lSe(f.open),role:"dialog",id:f.contentId},h,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function lSe(n){return n?"open":"closed"}const oMn=YCn,aMn=ZCn,lMn=nMn,cMn=rMn,uMn=oMn,dMn=aMn,fMn=v.forwardRef((n,e)=>_(lMn,{children:_(cMn,{...n,ref:e,className:Ce("bg-background-50 ring-0.5 ring-primary-100 animate-fade-in animate-duration-100 z-50 rounded-md p-2 shadow-md outline-none",n.className)})}));function Ui(){return Ui=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ui.apply(this,arguments)}function zg(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function hMn(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function cSe(...n){return e=>n.forEach(t=>hMn(t,e))}function R1(...n){return v.useCallback(cSe(...n),n)}function pMn(n,e=[]){let t=[];function r(s,o){const a=v.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[n][l])||a,g=v.useMemo(()=>p,Object.values(p));return v.createElement(m.Provider,{value:g},h)}function u(d,f){const h=(f==null?void 0:f[n][l])||a,p=v.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>v.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return v.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,mMn(i,...e)]}function mMn(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}const gMn=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},yMn=KL["useId".toString()]||(()=>{});let vMn=0;function ID(n){const[e,t]=v.useState(yMn());return gMn(()=>{n||t(r=>r??String(vMn++))},[n]),n||(e?`radix-${e}`:"")}function uSe(n){const e=v.useRef(n);return v.useEffect(()=>{e.current=n}),v.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function bMn({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=kMn({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=uSe(t),l=v.useCallback(c=>{if(s){const d=typeof c=="function"?c(n):c;d!==n&&a(d)}else i(c)},[s,n,i,a]);return[o,l]}function kMn({defaultProp:n,onChange:e}){const t=v.useState(n),[r]=t,i=v.useRef(r),s=uSe(e);return v.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const $j=v.forwardRef((n,e)=>{const{children:t,...r}=n,i=v.Children.toArray(t),s=i.find(SMn);if(s){const o=s.props.children,a=i.map(l=>l===s?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:l);return v.createElement(OL,Ui({},r,{ref:e}),v.isValidElement(o)?v.cloneElement(o,void 0,a):null)}return v.createElement(OL,Ui({},r,{ref:e}),t)});$j.displayName="Slot";const OL=v.forwardRef((n,e)=>{const{children:t,...r}=n;return v.isValidElement(t)?v.cloneElement(t,{...wMn(r,t.props),ref:cSe(e,t.ref)}):v.Children.count(t)>1?v.Children.only(null):null});OL.displayName="SlotClone";const xMn=({children:n})=>v.createElement(v.Fragment,null,n);function SMn(n){return v.isValidElement(n)&&n.type===xMn}function wMn(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?t[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const $Mn=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],QA=$Mn.reduce((n,e)=>{const t=v.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?$j:e;return v.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),v.createElement(a,Ui({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function EMn(n,e){n&&Za.flushSync(()=>n.dispatchEvent(e))}function Ej(n){const e=v.useRef(n);return v.useEffect(()=>{e.current=n}),v.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function CMn(n){const e=Ej(n);v.useEffect(()=>{const t=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}const PL="dismissableLayer.update",MMn="dismissableLayer.pointerDownOutside",TMn="dismissableLayer.focusOutside";let Xee;const _Mn=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),AMn=v.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=v.useContext(_Mn),[u,d]=v.useState(null),[,f]=v.useState({}),h=R1(e,x=>d(x)),p=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=p.indexOf(m),y=u?p.indexOf(u):-1,k=c.layersWithOutsidePointerEventsDisabled.size>0,b=y>=g,S=IMn(x=>{const $=x.target,E=[...c.branches].some(C=>C.contains($));!b||E||(i==null||i(x),o==null||o(x),x.defaultPrevented||a==null||a())}),w=RMn(x=>{const $=x.target;[...c.branches].some(C=>C.contains($))||(s==null||s(x),o==null||o(x),x.defaultPrevented||a==null||a())});return CMn(x=>{y===c.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))}),v.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Xee=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Zee(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=Xee)}},[u,t,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Zee())},[u,c]),v.useEffect(()=>{const x=()=>f({});return document.addEventListener(PL,x),()=>document.removeEventListener(PL,x)},[]),v.createElement(QA.div,Ui({},l,{ref:h,style:{pointerEvents:k?b?"auto":"none":void 0,...n.style},onFocusCapture:zg(n.onFocusCapture,w.onFocusCapture),onBlurCapture:zg(n.onBlurCapture,w.onBlurCapture),onPointerDownCapture:zg(n.onPointerDownCapture,S.onPointerDownCapture)}))});function IMn(n){const e=Ej(n),t=v.useRef(!1),r=v.useRef(()=>{});return v.useEffect(()=>{const i=o=>{if(o.target&&!t.current){let l=function(){dSe(MMn,e,a,{discrete:!0})};const a={originalEvent:o};o.pointerType==="touch"?(document.removeEventListener("click",r.current),r.current=l,document.addEventListener("click",r.current,{once:!0})):l()}t.current=!1},s=window.setTimeout(()=>{document.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),document.removeEventListener("pointerdown",i),document.removeEventListener("click",r.current)}},[e]),{onPointerDownCapture:()=>t.current=!0}}function RMn(n){const e=Ej(n),t=v.useRef(!1);return v.useEffect(()=>{const r=i=>{i.target&&!t.current&&dSe(TMn,e,{originalEvent:i},{discrete:!1})};return document.addEventListener("focusin",r),()=>document.removeEventListener("focusin",r)},[e]),{onFocusCapture:()=>t.current=!0,onBlurCapture:()=>t.current=!1}}function Zee(){const n=new CustomEvent(PL);document.dispatchEvent(n)}function dSe(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?EMn(i,s):i.dispatchEvent(s)}function ete(n){const e=v.useRef(n);return v.useEffect(()=>{e.current=n}),v.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}const RD="focusScope.autoFocusOnMount",OD="focusScope.autoFocusOnUnmount",tte={bubbles:!1,cancelable:!0},OMn=v.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=v.useState(null),c=ete(i),u=ete(s),d=v.useRef(null),f=R1(e,m=>l(m)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let m=function(y){if(h.paused||!a)return;const k=y.target;a.contains(k)?d.current=k:Rf(d.current,{select:!0})},g=function(y){h.paused||!a||a.contains(y.relatedTarget)||Rf(d.current,{select:!0})};return document.addEventListener("focusin",m),document.addEventListener("focusout",g),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g)}}},[r,a,h.paused]),v.useEffect(()=>{if(a){rte.add(h);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(RD,tte);a.addEventListener(RD,c),a.dispatchEvent(y),y.defaultPrevented||(PMn(zMn(fSe(a)),{select:!0}),document.activeElement===m&&Rf(a))}return()=>{a.removeEventListener(RD,c),setTimeout(()=>{const y=new CustomEvent(OD,tte);a.addEventListener(OD,u),a.dispatchEvent(y),y.defaultPrevented||Rf(m??document.body,{select:!0}),a.removeEventListener(OD,u),rte.remove(h)},0)}}},[a,c,u,h]);const p=v.useCallback(m=>{if(!t&&!r||h.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const k=m.currentTarget,[b,S]=DMn(k);b&&S?!m.shiftKey&&y===S?(m.preventDefault(),t&&Rf(b,{select:!0})):m.shiftKey&&y===b&&(m.preventDefault(),t&&Rf(S,{select:!0})):y===k&&m.preventDefault()}},[t,r,h.paused]);return v.createElement(QA.div,Ui({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function PMn(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Rf(r,{select:e}),document.activeElement!==t)return}function DMn(n){const e=fSe(n),t=nte(e,n),r=nte(e.reverse(),n);return[t,r]}function fSe(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function nte(n,e){for(const t of n)if(!NMn(t,{upTo:e}))return t}function NMn(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function FMn(n){return n instanceof HTMLInputElement&&"select"in n}function Rf(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&FMn(n)&&e&&n.select()}}const rte=LMn();function LMn(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=ite(n,e),n.unshift(e)},remove(e){var t;n=ite(n,e),(t=n[0])===null||t===void 0||t.resume()}}}function ite(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function zMn(n){return n.filter(e=>e.tagName!=="A")}const BMn=v.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?Vk.createPortal(v.createElement(QA.div,Ui({},i,{ref:e})),r):null}),ste=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{};function jMn(n,e){return v.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const YA=n=>{const{present:e,children:t}=n,r=VMn(e),i=typeof t=="function"?t({present:r.isPresent}):v.Children.only(t),s=R1(r.ref,i.ref);return typeof t=="function"||r.isPresent?v.cloneElement(i,{ref:s}):null};YA.displayName="Presence";function VMn(n){const[e,t]=v.useState(),r=v.useRef({}),i=v.useRef(n),s=v.useRef("none"),o=n?"mounted":"unmounted",[a,l]=jMn(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=fw(r.current);s.current=a==="mounted"?c:"none"},[a]),ste(()=>{const c=r.current,u=i.current;if(u!==n){const f=s.current,h=fw(c);n?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),ste(()=>{if(e){const c=d=>{const h=fw(r.current).includes(d.animationName);d.target===e&&h&&Za.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=fw(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function fw(n){return(n==null?void 0:n.animationName)||"none"}let PD=0;function qMn(){v.useEffect(()=>{var n,e;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(n=t[0])!==null&&n!==void 0?n:ote()),document.body.insertAdjacentElement("beforeend",(e=t[1])!==null&&e!==void 0?e:ote()),PD++,()=>{PD===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),PD--}},[])}function ote(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var hSe=Ake(),DD=function(){},XA=v.forwardRef(function(n,e){var t=v.useRef(null),r=v.useState({onScrollCapture:DD,onWheelCapture:DD,onTouchMoveCapture:DD}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,d=n.shards,f=n.sideCar,h=n.noIsolation,p=n.inert,m=n.allowPinchZoom,g=n.as,y=g===void 0?"div":g,k=sj(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=f,S=_ke([t,e]),w=Tr(Tr({},k),i);return v.createElement(v.Fragment,null,u&&v.createElement(b,{sideCar:hSe,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:t}),o?v.cloneElement(v.Children.only(a),Tr(Tr({},w),{ref:S})):v.createElement(y,Tr({},w,{className:l,ref:S}),a))});XA.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};XA.classNames={fullWidth:Eb,zeroRight:$b};var DL=!1;if(typeof window<"u")try{var hw=Object.defineProperty({},"passive",{get:function(){return DL=!0,!0}});window.addEventListener("test",hw,hw),window.removeEventListener("test",hw,hw)}catch{DL=!1}var om=DL?{passive:!1}:!1,KMn=function(n){var e=window.getComputedStyle(n);return e.overflowY!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowY==="visible")},UMn=function(n){var e=window.getComputedStyle(n);return e.overflowX!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowX==="visible")},ate=function(n,e){var t=e;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var r=pSe(n,t);if(r){var i=mSe(n,t),s=i[1],o=i[2];if(s>o)return!0}t=t.parentNode}while(t&&t!==document.body);return!1},HMn=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},WMn=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},pSe=function(n,e){return n==="v"?KMn(e):UMn(e)},mSe=function(n,e){return n==="v"?HMn(e):WMn(e)},GMn=function(n,e){return n==="h"&&e==="rtl"?-1:1},JMn=function(n,e,t,r,i){var s=GMn(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=mSe(n,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&pSe(n,a)&&(d+=y,f+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&d===0||!i&&o>d)||!u&&(i&&f===0||!i&&-o>f))&&(c=!0),c},pw=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},lte=function(n){return[n.deltaX,n.deltaY]},cte=function(n){return n&&"current"in n?n.current:n},QMn=function(n,e){return n[0]===e[0]&&n[1]===e[1]},YMn=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},XMn=0,am=[];function ZMn(n){var e=v.useRef([]),t=v.useRef([0,0]),r=v.useRef(),i=v.useState(XMn++)[0],s=v.useState(function(){return oj()})[0],o=v.useRef(n);v.useEffect(function(){o.current=n},[n]),v.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Tke([n.lockRef.current],(n.shards||[]).map(cte),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=v.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=pw(m),k=t.current,b="deltaX"in m?m.deltaX:k[0]-y[0],S="deltaY"in m?m.deltaY:k[1]-y[1],w,x=m.target,$=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in m&&$==="h"&&x.type==="range")return!1;var E=ate($,x);if(!E)return!0;if(E?w=$:(w=$==="v"?"h":"v",E=ate($,x)),!E)return!1;if(!r.current&&"changedTouches"in m&&(b||S)&&(r.current=w),!w)return!0;var C=r.current||w;return JMn(C,g,m,C==="h"?b:S,!0)},[]),l=v.useCallback(function(m){var g=m;if(!(!am.length||am[am.length-1]!==s)){var y="deltaY"in g?lte(g):pw(g),k=e.current.filter(function(w){return w.name===g.type&&w.target===g.target&&QMn(w.delta,y)})[0];if(k&&k.should){g.preventDefault();return}if(!k){var b=(o.current.shards||[]).map(cte).filter(Boolean).filter(function(w){return w.contains(g.target)}),S=b.length>0?a(g,b[0]):!o.current.noIsolation;S&&g.preventDefault()}}},[]),c=v.useCallback(function(m,g,y,k){var b={name:m,delta:g,target:y,should:k};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=v.useCallback(function(m){t.current=pw(m),r.current=void 0},[]),d=v.useCallback(function(m){c(m.type,lte(m),m.target,a(m,n.lockRef.current))},[]),f=v.useCallback(function(m){c(m.type,pw(m),m.target,a(m,n.lockRef.current))},[]);v.useEffect(function(){return am.push(s),n.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,om),document.addEventListener("touchmove",l,om),document.addEventListener("touchstart",u,om),function(){am=am.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,om),document.removeEventListener("touchmove",l,om),document.removeEventListener("touchstart",u,om)}},[]);var h=n.removeScrollBar,p=n.inert;return v.createElement(v.Fragment,null,p?v.createElement(s,{styles:YMn(i)}):null,h?v.createElement(Pke,{gapMode:"margin"}):null)}const eTn=Rke(hSe,ZMn);var gSe=v.forwardRef(function(n,e){return v.createElement(XA,Tr({},n,{ref:e,sideCar:eTn}))});gSe.classNames=XA.classNames;const tTn=gSe,ySe="Dialog",[vSe,W2n]=pMn(ySe),[nTn,Ap]=vSe(ySe),rTn=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=v.useRef(null),l=v.useRef(null),[c=!1,u]=bMn({prop:r,defaultProp:i,onChange:s});return v.createElement(nTn,{scope:e,triggerRef:a,contentRef:l,contentId:ID(),titleId:ID(),descriptionId:ID(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(d=>!d),[u]),modal:o},t)},bSe="DialogPortal",[iTn,kSe]=vSe(bSe,{forceMount:void 0}),sTn=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=Ap(bSe,e);return v.createElement(iTn,{scope:e,forceMount:t},v.Children.map(r,o=>v.createElement(YA,{present:t||s.open},v.createElement(BMn,{asChild:!0,container:i},o))))},NL="DialogOverlay",oTn=v.forwardRef((n,e)=>{const t=kSe(NL,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Ap(NL,n.__scopeDialog);return s.modal?v.createElement(YA,{present:r||s.open},v.createElement(aTn,Ui({},i,{ref:e}))):null}),aTn=v.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Ap(NL,t);return v.createElement(tTn,{as:$j,allowPinchZoom:!0,shards:[i.contentRef]},v.createElement(QA.div,Ui({"data-state":SSe(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),Dk="DialogContent",lTn=v.forwardRef((n,e)=>{const t=kSe(Dk,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Ap(Dk,n.__scopeDialog);return v.createElement(YA,{present:r||s.open},s.modal?v.createElement(cTn,Ui({},i,{ref:e})):v.createElement(uTn,Ui({},i,{ref:e})))}),cTn=v.forwardRef((n,e)=>{const t=Ap(Dk,n.__scopeDialog),r=v.useRef(null),i=R1(e,t.contentRef,r);return v.useEffect(()=>{const s=r.current;if(s)return C1(s)},[]),v.createElement(xSe,Ui({},n,{ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zg(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:zg(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:zg(n.onFocusOutside,s=>s.preventDefault())}))}),uTn=v.forwardRef((n,e)=>{const t=Ap(Dk,n.__scopeDialog),r=v.useRef(!1);return v.createElement(xSe,Ui({},n,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s;if((s=n.onCloseAutoFocus)===null||s===void 0||s.call(n,i),!i.defaultPrevented){var o;r.current||(o=t.triggerRef.current)===null||o===void 0||o.focus(),i.preventDefault()}r.current=!1},onInteractOutside:i=>{var s,o;(s=n.onInteractOutside)===null||s===void 0||s.call(n,i),i.defaultPrevented||(r.current=!0);const a=i.target;((o=t.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&i.preventDefault()}}))}),xSe=v.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=Ap(Dk,t),l=v.useRef(null),c=R1(e,l);return qMn(),v.createElement(v.Fragment,null,v.createElement(OMn,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},v.createElement(AMn,Ui({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":SSe(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function SSe(n){return n?"open":"closed"}const dTn=rTn,fTn=sTn,hTn=oTn,pTn=lTn;var ute=1,mTn=.9,gTn=.3,ND=.1,yTn=0,FD=.999,vTn=.9999,bTn=.99,dte=/[\\\/\-_+.# \t"@\[\(\{&]/,kTn=/[\\\/\-_+.# \t"@\[\(\{&]/g;function FL(n,e,t,r,i,s){if(s===e.length)return i===n.length?ute:bTn;for(var o=r.charAt(s),a=t.indexOf(o,i),l=0,c,u,d;a>=0;)c=FL(n,e,t,r,a+1,s+1),c>l&&(a===i?c*=ute:dte.test(n.charAt(a-1))?(c*=mTn,d=n.slice(i,a-1).match(kTn),d&&i>0&&(c*=Math.pow(FD,d.length))):dte.test(n.slice(i,a-1))?(c*=yTn,i>0&&(c*=Math.pow(FD,a-i))):(c*=gTn,i>0&&(c*=Math.pow(FD,a-i))),n.charAt(a)!==e.charAt(s)&&(c*=vTn)),c<ND&&t.charAt(a-1)===r.charAt(s+1)&&t.charAt(a-1)!==r.charAt(s)&&(u=FL(n,e,t,r,a+1,s+2),u*ND>c&&(c=u*ND)),c>l&&(l=c),a=t.indexOf(o,a+1);return l}function xTn(n,e){return FL(n,e,n.toLowerCase(),e.toLowerCase(),0,0)}var STn=xTn;const wTn=tu(STn);var $Tn='[cmdk-list-sizer=""]',Qy='[cmdk-group=""]',LD='[cmdk-group-items=""]',ETn='[cmdk-group-heading=""]',wSe='[cmdk-item=""]',fte=`${wSe}:not([aria-disabled="true"])`,LL="cmdk-item-select",Tu="data-value",CTn=(n,e)=>wTn(n,e),$Se=v.createContext(void 0),O1=()=>v.useContext($Se),ESe=v.createContext(void 0),Cj=()=>v.useContext(ESe),CSe=v.createContext(void 0),MSe=v.forwardRef((n,e)=>{let t=v.useRef(null),r=Jm(()=>({search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}})),i=Jm(()=>new Set),s=Jm(()=>new Map),o=Jm(()=>new Map),a=Jm(()=>new Set),l=TSe(n),{label:c,children:u,value:d,onValueChange:f,filter:h,shouldFilter:p,...m}=n,g=v.useId(),y=v.useId(),k=v.useId(),b=FTn();oy(()=>{if(d!==void 0){let O=d.trim();r.current.value=O,b(6,M),S.emit()}},[d]);let S=v.useMemo(()=>({subscribe:O=>(a.current.add(O),()=>a.current.delete(O)),snapshot:()=>r.current,setState:(O,z,j)=>{var K,Z,te;if(!Object.is(r.current[O],z)){if(r.current[O]=z,O==="search")C(),$(),b(1,E);else if(O==="value")if(((K=l.current)==null?void 0:K.value)!==void 0){(te=(Z=l.current).onValueChange)==null||te.call(Z,z);return}else j||b(5,M);S.emit()}},emit:()=>{a.current.forEach(O=>O())}}),[]),w=v.useMemo(()=>({value:(O,z)=>{z!==o.current.get(O)&&(o.current.set(O,z),r.current.filtered.items.set(O,x(z)),b(2,()=>{$(),S.emit()}))},item:(O,z)=>(i.current.add(O),z&&(s.current.has(z)?s.current.get(z).add(O):s.current.set(z,new Set([O]))),b(3,()=>{C(),$(),r.current.value||E(),S.emit()}),()=>{o.current.delete(O),i.current.delete(O),r.current.filtered.items.delete(O),b(4,()=>{C(),E(),S.emit()})}),group:O=>(s.current.has(O)||s.current.set(O,new Set),()=>{o.current.delete(O),s.current.delete(O)}),filter:()=>l.current.shouldFilter,label:c||n["aria-label"],listId:g,inputId:k,labelId:y}),[]);function x(O){var z;let j=((z=l.current)==null?void 0:z.filter)??CTn;return O?j(O,r.current.search):0}function $(){if(!t.current||!r.current.search||l.current.shouldFilter===!1)return;let O=r.current.filtered.items,z=[];r.current.filtered.groups.forEach(K=>{let Z=s.current.get(K),te=0;Z.forEach(pe=>{let he=O.get(pe);te=Math.max(he,te)}),z.push([K,te])});let j=t.current.querySelector($Tn);I().sort((K,Z)=>{let te=K.getAttribute(Tu),pe=Z.getAttribute(Tu);return(O.get(pe)??0)-(O.get(te)??0)}).forEach(K=>{let Z=K.closest(LD);Z?Z.appendChild(K.parentElement===Z?K:K.closest(`${LD} > *`)):j.appendChild(K.parentElement===j?K:K.closest(`${LD} > *`))}),z.sort((K,Z)=>Z[1]-K[1]).forEach(K=>{let Z=t.current.querySelector(`${Qy}[${Tu}="${K[0]}"]`);Z==null||Z.parentElement.appendChild(Z)})}function E(){let O=I().find(j=>!j.ariaDisabled),z=O==null?void 0:O.getAttribute(Tu);S.setState("value",z||void 0)}function C(){if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=i.current.size;return}r.current.filtered.groups=new Set;let O=0;for(let z of i.current){let j=o.current.get(z),K=x(j);r.current.filtered.items.set(z,K),K>0&&O++}for(let[z,j]of s.current)for(let K of j)if(r.current.filtered.items.get(K)>0){r.current.filtered.groups.add(z);break}r.current.filtered.count=O}function M(){var O,z,j;let K=P();K&&(((O=K.parentElement)==null?void 0:O.firstChild)===K&&((j=(z=K.closest(Qy))==null?void 0:z.querySelector(ETn))==null||j.scrollIntoView({block:"nearest"})),K.scrollIntoView({block:"nearest"}))}function P(){return t.current.querySelector(`${wSe}[aria-selected="true"]`)}function I(){return Array.from(t.current.querySelectorAll(fte))}function N(O){let z=I()[O];z&&S.setState("value",z.getAttribute(Tu))}function T(O){var z;let j=P(),K=I(),Z=K.findIndex(pe=>pe===j),te=K[Z+O];(z=l.current)!=null&&z.loop&&(te=Z+O<0?K[K.length-1]:Z+O===K.length?K[0]:K[Z+O]),te&&S.setState("value",te.getAttribute(Tu))}function R(O){let z=P(),j=z==null?void 0:z.closest(Qy),K;for(;j&&!K;)j=O>0?DTn(j,Qy):NTn(j,Qy),K=j==null?void 0:j.querySelector(fte);K?S.setState("value",K.getAttribute(Tu)):T(O)}let A=()=>N(I().length-1),L=O=>{O.preventDefault(),O.metaKey?A():O.altKey?R(1):T(1)},F=O=>{O.preventDefault(),O.metaKey?N(0):O.altKey?R(-1):T(-1)};return v.createElement("div",{ref:P1([t,e]),...m,"cmdk-root":"",onKeyDown:O=>{var z;if((z=m.onKeyDown)==null||z.call(m,O),!O.defaultPrevented)switch(O.key){case"n":case"j":{O.ctrlKey&&L(O);break}case"ArrowDown":{L(O);break}case"p":case"k":{O.ctrlKey&&F(O);break}case"ArrowUp":{F(O);break}case"Home":{O.preventDefault(),N(0);break}case"End":{O.preventDefault(),A();break}case"Enter":{O.preventDefault();let j=P();if(j){let K=new Event(LL);j.dispatchEvent(K)}}}}},v.createElement("label",{"cmdk-label":"",htmlFor:w.inputId,id:w.labelId,style:LTn},c),v.createElement(ESe.Provider,{value:S},v.createElement($Se.Provider,{value:w},u)))}),MTn=v.forwardRef((n,e)=>{let t=v.useId(),r=v.useRef(null),i=v.useContext(CSe),s=O1(),o=TSe(n);oy(()=>s.item(t,i),[]);let a=_Se(t,r,[n.value,n.children,r]),l=Cj(),c=h0(y=>y.value&&y.value===a.current),u=h0(y=>s.filter()===!1?!0:y.search?y.filtered.items.get(t)>0:!0);v.useEffect(()=>{let y=r.current;if(!(!y||n.disabled))return y.addEventListener(LL,d),()=>y.removeEventListener(LL,d)},[u,n.onSelect,n.disabled]);function d(){var y,k;(k=(y=o.current).onSelect)==null||k.call(y,a.current)}function f(){l.setState("value",a.current,!0)}if(!u)return null;let{disabled:h,value:p,onSelect:m,...g}=n;return v.createElement("div",{ref:P1([r,e]),...g,"cmdk-item":"",role:"option","aria-disabled":h||void 0,"aria-selected":c||void 0,"data-selected":c||void 0,onPointerMove:h?void 0:f,onClick:h?void 0:d},n.children)}),TTn=v.forwardRef((n,e)=>{let{heading:t,children:r,...i}=n,s=v.useId(),o=v.useRef(null),a=v.useRef(null),l=v.useId(),c=O1(),u=h0(f=>c.filter()===!1?!0:f.search?f.filtered.groups.has(s):!0);oy(()=>c.group(s),[]),_Se(s,o,[n.value,n.heading,a]);let d=v.createElement(CSe.Provider,{value:s},r);return v.createElement("div",{ref:P1([o,e]),...i,"cmdk-group":"",role:"presentation",hidden:u?void 0:!0},t&&v.createElement("div",{ref:a,"cmdk-group-heading":"","aria-hidden":!0,id:l},t),v.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?l:void 0},d))}),_Tn=v.forwardRef((n,e)=>{let{alwaysRender:t,...r}=n,i=v.useRef(null),s=h0(o=>!o.search);return!t&&!s?null:v.createElement("div",{ref:P1([i,e]),...r,"cmdk-separator":"",role:"separator"})}),ATn=v.forwardRef((n,e)=>{let{onValueChange:t,...r}=n,i=n.value!=null,s=Cj(),o=h0(l=>l.search),a=O1();return v.useEffect(()=>{n.value!=null&&s.setState("search",n.value)},[n.value]),v.createElement("input",{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.listId,"aria-labelledby":a.labelId,id:a.inputId,type:"text",value:i?n.value:o,onChange:l=>{i||s.setState("search",l.target.value),t==null||t(l.target.value)}})}),ITn=v.forwardRef((n,e)=>{let{children:t,...r}=n,i=v.useRef(null),s=v.useRef(null),o=O1();return v.useEffect(()=>{if(s.current&&i.current){let a=s.current,l=i.current,c,u=new ResizeObserver(()=>{c=requestAnimationFrame(()=>{let d=a.getBoundingClientRect().height;l.style.setProperty("--cmdk-list-height",d.toFixed(1)+"px")})});return u.observe(a),()=>{cancelAnimationFrame(c),u.unobserve(a)}}},[]),v.createElement("div",{ref:P1([i,e]),...r,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:o.listId,"aria-labelledby":o.inputId},v.createElement("div",{ref:s,"cmdk-list-sizer":""},t))}),RTn=v.forwardRef((n,e)=>{let{open:t,onOpenChange:r,container:i,...s}=n;return v.createElement(dTn,{open:t,onOpenChange:r},v.createElement(fTn,{container:i},v.createElement(hTn,{"cmdk-overlay":""}),v.createElement(pTn,{"aria-label":n.label,"cmdk-dialog":""},v.createElement(MSe,{ref:e,...s}))))}),OTn=v.forwardRef((n,e)=>{let t=v.useRef(!0),r=h0(i=>i.filtered.count===0);return v.useEffect(()=>{t.current=!1},[]),t.current||!r?null:v.createElement("div",{ref:e,...n,"cmdk-empty":"",role:"presentation"})}),PTn=v.forwardRef((n,e)=>{let{progress:t,children:r,...i}=n;return v.createElement("div",{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},v.createElement("div",{"aria-hidden":!0},r))}),Ip=Object.assign(MSe,{List:ITn,Item:MTn,Input:ATn,Group:TTn,Separator:_Tn,Dialog:RTn,Empty:OTn,Loading:PTn});function DTn(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function NTn(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function TSe(n){let e=v.useRef(n);return oy(()=>{e.current=n}),e}var oy=typeof window>"u"?v.useEffect:v.useLayoutEffect;function Jm(n){let e=v.useRef();return e.current===void 0&&(e.current=n()),e}function P1(n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function h0(n){let e=Cj(),t=()=>n(e.snapshot());return v.useSyncExternalStore(e.subscribe,t,t)}function _Se(n,e,t){let r=v.useRef(),i=O1();return oy(()=>{var s;let o=(()=>{var a;for(let l of t){if(typeof l=="string")return l.trim();if(typeof l=="object"&&"current"in l&&l.current)return(a=l.current.textContent)==null?void 0:a.trim()}})();i.value(n,o),(s=e.current)==null||s.setAttribute(Tu,o),r.current=o}),r}var FTn=()=>{let[n,e]=v.useState(),t=Jm(()=>new Map);return oy(()=>{t.current.forEach(r=>r()),t.current=new Map},[n]),(r,i)=>{t.current.set(r,i),e({})}},LTn={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const zTn=v.forwardRef(({className:n,...e},t)=>_(Ip,{ref:t,className:Ce("bg-background-50 text-foreground-900 flex h-full w-full flex-col overflow-hidden rounded-md",n),...e})),BTn=v.forwardRef(({className:n,...e},t)=>de("div",{className:"border-primary-100 flex items-center border-b px-3","cmdk-input-wrapper":"",children:[_(Oqe,{size:"14",className:"text-foreground-700 mr-2 shrink-0"}),_(Ip.Input,{ref:t,className:Ce("placeholder:text-foreground-700 flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none disabled:cursor-not-allowed disabled:opacity-50",n),...e})]}));v.forwardRef(({className:n,...e},t)=>_(Ip.List,{ref:t,className:Ce("max-h-xs overflow-y-auto overflow-x-hidden",n),...e}));const jTn=v.forwardRef((n,e)=>_(Ip.Empty,{ref:e,className:"py-6 text-center text-sm",...n})),VTn=v.forwardRef(({className:n,...e},t)=>_(Ip.Group,{ref:t,className:Ce("text-foreground-900 [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",n),...e}));v.forwardRef(({className:n,...e},t)=>_(Ip.Separator,{ref:t,className:Ce("bg-primary-100 -mx-1 h-px",n),...e}));const qTn=v.forwardRef(({className:n,...e},t)=>_(Ip.Item,{ref:t,className:Ce("aria-selected:bg-primary-100 aria-selected:text-primary-600 relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...e})),Mj=v.createContext({open:!1,values:[],setValues:()=>{}}),ASe=n=>{const[e,t]=v.useState(n.open??!1),[r,i]=v.useState(n.multiselect?n.defaultValues??[]:!n.multiselect&&n.defaultValue?[n.defaultValue]:[]),s=a=>{var l;t(a),(l=n.onOpenChange)==null||l.call(n,a)},o=a=>{var l,c;typeof a=="function"?i(u=>{var f,h;const d=a(u);return n.multiselect?(f=n.onValuesChange)==null||f.call(n,d):(h=n.onValueChange)==null||h.call(n,d[0]),d}):(i(a),n.multiselect?(l=n.onValuesChange)==null||l.call(n,a):(c=n.onValueChange)==null||c.call(n,a[0]))};return v.useEffect(()=>{t(n.open??!1)},[n.open]),v.useEffect(()=>{n.multiselect?n.values&&i(n.values):n.value&&i([n.value])},[n.multiselect,n.value,n.values,n.onValueChange,n.onValuesChange]),_(Mj.Provider,{value:{open:e,onOpenChange:s,values:r,setValues:o,multiselect:n.multiselect},children:_(uMn,{...n,open:e,onOpenChange:s})})},KTn=dMn,UTn=n=>{const{values:e,multiselect:t}=v.useContext(Mj);return e.length===0?_(ls,{children:n.placeholder??"Select..."}):n.renderValue?_(ls,{children:n.renderValue(e[0])}):n.renderValues?_(ls,{children:n.renderValues(e)}):_(ls,{children:t?e.join(", "):e[0]})},HTn=v.forwardRef((n,e)=>_(fMn,{...n,ref:e,sideOffset:n.sideOffset??4,children:_(zTn,{...n.commandProps,children:n.children})})),WTn=BTn,GTn=jTn,JTn=VTn,ISe=v.createContext({selected:!1}),QTn=v.forwardRef((n,e)=>{const{onOpenChange:t,values:r,setValues:i,multiselect:s}=v.useContext(Mj);return _(ISe.Provider,{value:{selected:r.includes(n.value)},children:_(qTn,{...n,ref:e,onSelect:o=>{var a;(a=n.onSelect)==null||a.call(n,o),i(l=>{if(l.includes(o))return l.filter(u=>u!==o);const c=new Set(s?[...l,o]:[o]);return Array.from(c)}),s||t==null||t(!1)}})})}),YTn=n=>{const{selected:e}=v.useContext(ISe);return _("div",{...n,className:Ce(n.className,e&&n.selectedClassName)})},XTn=n=>{const e=typeof n.error=="object"?n.error.message:n.error;return de("label",{className:Ce("flex flex-col gap-1",n.fullWidth&&"w-full"),children:[n.label&&_("div",{className:"text-foreground-900 text-base font-medium",children:n.label}),_(JA,{...n,render:({field:t})=>{var r;return _(ASe,{...n.comboboxProps,...n.multiselect||(r=n.comboboxProps)!=null&&r.multiselect?{multiselect:!0,value:t.value,onValuesChange:i=>{var s,o;t.onChange(i),(o=(s=n.comboboxProps)==null?void 0:s.onValuesChange)==null||o.call(s,i)}}:{value:t.value,onValueChange:i=>{var s,o;t.onChange(i),(o=(s=n.comboboxProps)==null?void 0:s.onValueChange)==null||o.call(s,i)}},onOpenChange:i=>{var s,o;!i&&t.onBlur(),(o=(s=n.comboboxProps)==null?void 0:s.onOpenChange)==null||o.call(s,i)},children:n.children})}}),e&&_("div",{className:"text-negative-600 text-sm",children:e})]})};function Nk(){return Nk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Nk.apply(this,arguments)}const RSe="Checkbox",[ZTn,G2n]=Jo(RSe),[e_n,t_n]=ZTn(RSe),n_n=v.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,...u}=n,[d,f]=v.useState(null),h=at(e,b=>f(b)),p=v.useRef(!1),m=d?!!d.closest("form"):!0,[g=!1,y]=Qc({prop:i,defaultProp:s,onChange:c}),k=v.useRef(g);return v.useEffect(()=>{const b=d==null?void 0:d.form;if(b){const S=()=>y(k.current);return b.addEventListener("reset",S),()=>b.removeEventListener("reset",S)}},[d,y]),v.createElement(e_n,{scope:t,state:g,disabled:a},v.createElement(qe.button,Nk({type:"button",role:"checkbox","aria-checked":Fh(g)?"mixed":g,"aria-required":o,"data-state":OSe(g),"data-disabled":a?"":void 0,disabled:a,value:l},u,{ref:h,onKeyDown:me(n.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:me(n.onClick,b=>{y(S=>Fh(S)?!0:!S),m&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})})),m&&v.createElement(s_n,{control:d,bubbles:!p.current,name:r,value:l,checked:g,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),r_n="CheckboxIndicator",i_n=v.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,s=t_n(r_n,t);return v.createElement(Qo,{present:r||Fh(s.state)||s.state===!0},v.createElement(qe.span,Nk({"data-state":OSe(s.state),"data-disabled":s.disabled?"":void 0},i,{ref:e,style:{pointerEvents:"none",...n.style}})))}),s_n=n=>{const{control:e,checked:t,bubbles:r=!0,...i}=n,s=v.useRef(null),o=Oxe(t),a=t8(e);return v.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==t&&d){const f=new Event("click",{bubbles:r});l.indeterminate=Fh(t),d.call(l,Fh(t)?!1:t),l.dispatchEvent(f)}},[o,t,r]),v.createElement("input",Nk({type:"checkbox","aria-hidden":!0,defaultChecked:Fh(t)?!1:t},i,{tabIndex:-1,ref:s,style:{...n.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function Fh(n){return n==="indeterminate"}function OSe(n){return Fh(n)?"indeterminate":n?"checked":"unchecked"}const o_n=n_n,a_n=i_n,PSe=v.forwardRef(({className:n,...e},t)=>_(o_n,{...e,ref:t,className:Ce("border-foreground-700 focus-visible:border-primary-600 data-[state=checked]:bg-primary-600 data-[state=checked]:text-primary-50 peer h-4 w-4 shrink-0 rounded-sm border shadow focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",e.hasError&&"border-negative-600 hover:border-negative-600 focus-visible:border-negative-600",n),children:_(a_n,{className:"flex items-center justify-center text-current",children:_(Wh,{size:16})})})),DSe=v.forwardRef(({label:n,...e},t)=>de("label",{className:"flex items-start gap-2",children:[_("div",{className:"pt-px",children:_(PSe,{...e,ref:t})}),n&&_("div",{className:Ce("text-foreground-900 text-base",e.hasError&&"text-negative-600"),children:n})]})),l_n=n=>{const e=typeof n.error=="object"?n.error.message:n.error;return de("div",{className:"flex flex-col items-start gap-1",children:[_(JA,{...n,render:({field:t})=>{var r,i,s;return _(DSe,{...t,...n.checkboxProps,name:t.name,label:n.label||((r=n.checkboxProps)==null?void 0:r.label),value:t.value,required:n.required||((i=n.checkboxProps)==null?void 0:i.required),disabled:n.disabled||((s=n.checkboxProps)==null?void 0:s.disabled),onCheckedChange:o=>{var a,l;t.onChange(o),(l=(a=n.checkboxProps)==null?void 0:a.onCheckedChange)==null||l.call(a,o)}})}}),e&&_("div",{className:"text-negative-600 text-sm",children:e})]})},c_n=v.createContext(null),zD={didCatch:!1,error:null};let u_n=class extends v.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=zD}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];(t=(r=this.props).onReset)===null||t===void 0||t.call(r,{args:s,reason:"imperative-api"}),this.setState(zD)}}componentDidCatch(e,t){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&t.error!==null&&d_n(e.resetKeys,i)){var s,o;(s=(o=this.props).onReset)===null||s===void 0||s.call(o,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(zD)}}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:i}=this.props,{didCatch:s,error:o}=this.state;let a=e;if(s){const l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")a=t(l);else if(r)a=v.createElement(r,l);else if(i===null||v.isValidElement(i))a=i;else throw o}return v.createElement(c_n.Provider,{value:{didCatch:s,error:o,resetErrorBoundary:this.resetErrorBoundary}},a)}};function d_n(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==e.length||n.some((t,r)=>!Object.is(t,e[r]))}const NSe=n=>_(u_n,{...n}),FSe=ee.forwardRef((n,e)=>_("textarea",{...n,ref:e,className:Ce("ring-primary-200 placeholder:text-foreground-700 text-foreground-900 disabled:bg-background-300/50 disabled:ring-none hover:ring-primary-300 focus:ring-primary-500 w-full rounded-md px-3 py-2 text-sm outline-none ring transition-colors duration-300 ease-in-out",n.hasError&&"ring-negative-600 hover:ring-negative-600 focus:ring-negative-600 placeholder:text-negative-600",n.className)})),f_n=v.forwardRef((n,e)=>{const t=typeof n.error=="object"?n.error.message:n.error;return de("label",{className:"flex flex-col gap-1",children:[n.label&&_("div",{className:"text-foreground-900 text-base font-medium",children:n.label}),typeof n.description=="string"?_("div",{className:"text-foreground-700 text-sm",children:n.description}):n.description,_(FSe,{...n,ref:e,hasError:!!t||n.hasError}),t&&_("div",{className:"text-negative-600 text-sm",children:t})]})}),h_n=n=>({serverOrigin:"",pluginSlug:n,React:ee,tw:Ce,clsx:Ce,cn:Ce,components:{Button:Kl,NoteEditor:s1n,Day:B$n,DayContent:exe,TaskCard:M1e,ItemCard:gj,Lists:nEn,TaskTitleInput:ej,TaskDurationButtonDropdown:T1e,Input:$xe,FormInput:lEn,Textarea:FSe,FormTextarea:f_n,FormSelect:JCn,FormCombobox:XTn,FormCheckbox:l_n,Checkbox:PSe,CheckboxWithLabel:DSe,Select:zxe,SelectGroup:ECn,SelectValue:CCn,SelectTrigger:MCn,SelectContent:TCn,SelectLabel:_Cn,SelectItem:ACn,SelectSeparator:ICn,DropdownMenu:p1e,DropdownMenuGroup:$Sn,DropdownMenuPortal:ESn,DropdownMenuSub:CSn,DropdownMenuRadioGroup:MSn,DropdownMenuTrigger:m1e,DropdownMenuSubContent:TSn,DropdownMenuContent:g1e,DropdownMenuItem:_Sn,DropdownMenuCheckboxItem:y1e,DropdownMenuRadioItem:ASn,DropdownMenuLabel:v1e,DropdownMenuSeparator:b1e,DropdownMenuShortcut:ISn,Badge:NT,CardActionButton:zu,Combobox:ASe,ComboboxContent:HTn,ComboboxEmpty:GTn,ComboboxGroup:JTn,ComboboxInput:WTn,ComboboxItem:QTn,ComboboxSelected:YTn,ComboboxTrigger:KTn,ComboboxValue:UTn,ErrorBoundary:NSe,TooltipProvider:gce,Tooltip:Jh,TooltipTrigger:Qh,TooltipContent:Yh},hooks:{useAsyncLoader:l8,useDebounce:rEn,useAsyncEffect:Tp},store:oEn(n),operations:aEn(n),getDays:r1n,getDaysMax10:i1n,createItem:iEn,createTask:sEn,framerMotion:wQe,tiptap:n1n,dayjs:Qn,reactHookForm:{useForm:GCn,useFormContext:I1,useFieldArray:zCn,useFormState:Hxe,useWatch:Gxe,useController:Qxe,Controller:JA},toast:Ar});const Tj=async n=>{try{const t=(n.installedPlugins??await LSe())[n.pluginSlug];if(!t)return{_error:"PLUGIN_NOT_INSTALLED"};if(!t.hasWebRuntime)return{_error:"PLUGIN_HAS_NO_WEB_RUNTIME"};const r=await Go(()=>import(`${t.url}/web.js`),[]),{plugin:i}=r.default;return i(h_n(n.pluginSlug))}catch(e){return console.log(e),{_error:"PLUGIN_LOAD_ERROR"}}},p_n=async()=>{const n=await LSe();if(Object.keys(n).length===0)return{};const e={};for(const t in n){if(!n[t].hasWebRuntime)continue;const i=await Tj({pluginSlug:t,installedPlugins:n});if("_error"in i){console.log(`Plugin ${t} failed to load: ${i._error}`);continue}e[t]=i}return e},LSe=async()=>{const n=await $0(Ja,$ce,{},{fetchPolicy:"store-or-network"}).toPromise(),e=(n==null?void 0:n.installedPlugins)??[];return Object.fromEntries(e.map(t=>[t.slug,t]))},ZA=()=>{const[n,e]=v.useState({}),[t,r]=v.useState(!0),i=ot.useLazyLoadQuery(Ece,{},{fetchPolicy:"store-or-network"});return Tp(async()=>{r(!0);const s={...n};for(const o of i.installedPlugins){if(!o.hasWebRuntime||o.slug in n)continue;const a=await Tj({pluginSlug:o.slug});if("_error"in a){console.log(`Error loading plugin ${o.slug}: ${a._error}`);continue}s[o.slug]=a}e(s),r(!1)},[i.installedPlugins.map(s=>s.slug).join(",")]),{plugins:n,loading:t}},m_n=()=>_(Z1e,{}),g_n=n=>{const e=ot.useFragment(wce,n.step),[t,r]=v.useState(()=>m_n);v.useEffect(()=>{(async()=>{var a;const o=await Tj({pluginSlug:e.pluginSlug});if("_error"in o){console.log(o._error);return}else if((a=o.routineSteps)!=null&&a[e.stepSlug].component)r(()=>{var l;return(l=o.routineSteps)==null?void 0:l[e.stepSlug].component});else{console.log(`Plugin ${e.pluginSlug} does not have the requested routine step.`);return}})()},[n.step]);const i=async o=>{await(o==null?void 0:o()),n.onNext()},s=async o=>{await(o==null?void 0:o()),n.onBack()};return _("div",{className:"max-h-screen overflow-auto",children:_(t,{onNext:n.onNext,onBack:n.onBack,NextButton:o=>_(Kl,{...o,secondary:!0,onClick:()=>i(o.onClick),children:n.hasNext?"Next":"Done"}),BackButton:o=>_(Kl,{...o,secondary:!0,onClick:()=>s(o.onClick),children:n.hasPrevious?"Back":"Cancel"}),ArrowNextButton:o=>_(Kl,{...o,secondary:!0,onClick:()=>i(o.onClick),children:_($qe,{})}),ArrowBackButton:o=>_(Kl,{...o,secondary:!0,onClick:()=>s(o.onClick),children:_(wqe,{})})})})},y_n=n=>{const[e,...t]=n.split("_"),r=t.join("_");return!e||!r?null:{typename:e,id:r}},zSe=yce,v_n=()=>{const n=nie(),{queryRef:e}=ZBe(zSe,{previousDayId:`Day_${Qn().subtract(1,"day").format("YYYY-MM-DD")}`,currentDayId:`Day_${Qn().format("YYYY-MM-DD")}`,routineId:`Routine_${n.routineId}`});return e?_(b_n,{queryRef:e}):null},b_n=n=>{const e=ot.usePreloadedQuery(zSe,n.queryRef),t=nie(),r=eie(),[i,s]=v.useState(0),{noSteps:o,stepsLeft:a}=v.useMemo(()=>{var g,y,k,b,S,w,x,$,E,C;if(!((y=(g=e.routine)==null?void 0:g.steps)!=null&&y.length))return{noSteps:!0,stepsLeft:[]};const u=e.routine.steps.findIndex(M=>t.routineStep&&`${M.pluginSlug}_${M.stepSlug}`.includes(t.routineStep)),d=(b=(k=e.currentDay)==null?void 0:k.routines)==null?void 0:b.findIndex(M=>M.id===e.routine.id),f=(x=(w=(S=e.currentDay)==null?void 0:S.routines)==null?void 0:w[d-1])==null?void 0:x.done,h=(C=(E=($=e.previousDay)==null?void 0:$.routines)==null?void 0:E[e.previousDay.routines.length-1])==null?void 0:C.done,p=!!f||!!h;return{stepsLeft:e.routine.steps.slice(u===-1?0:u).filter(M=>!(p&&M.shouldSkip))}},[e]);if(o)return _("div",{children:"This routine has no steps. Please add some in your settings."});if(a.length===0)return _("div",{children:"You have completed all the steps in this routine (some may have been skipped because you already completed them in a previous routine)."});const l=()=>{s(u=>u===0?u:u-1)},c=()=>{s(u=>{if(u===a.length-1)return u;const d=a[u+1];return r(`/routine/${t.routineId}/${d.pluginSlug}_${d.stepSlug}`,{replace:!1}),u+1})};return _(g_n,{step:a[i],onBack:l,onNext:c,hasPrevious:i>0,hasNext:i<a.length-1})},_j=async()=>{var o,a,l,c,u;const n=await $0(Ja,vce,{todayDayId:`Day_${Qn().format("YYYY-MM-DD")}`},{fetchPolicy:"store-or-network"}).toPromise(),e=((a=(o=n==null?void 0:n.today)==null?void 0:o.routines)==null?void 0:a.map(d=>d==null?void 0:d.time))??[],t=e.reduce((d,f)=>{const h=Math.abs(Qn(d).diff(Qn(),"minute")),p=Math.abs(Qn(f).diff(Qn(),"minute"));return h<p?d:f}),r=e.indexOf(t),i=(c=(l=n==null?void 0:n.today)==null?void 0:l.routines)==null?void 0:c[r];if(!i)return null;const s=i.steps[0];return{path:`/routine/${(u=y_n(i.id))==null?void 0:u.id}/${s.pluginSlug}_${s.stepSlug}`,name:i.name}},k_n=Object.freeze(Object.defineProperty({__proto__:null,default:v_n,getClosestRoutineRoutePathAndName:_j},Symbol.toStringTag,{value:"Module"})),x_n=n=>{if(n.to==="/")return Kk().pathname==="/";const t=bCe().filter(i=>{var s;return((s=i.pathname)==null?void 0:s.split("/").length)-1===n.level}),r=t[t.length-1];return(r==null?void 0:r.pathname.slice(-5))===n.to.slice(-5)},S_n=()=>{const[n]=l8(async()=>await _j());return de("div",{className:"bg-background-50 z-50 flex h-screen flex-shrink-0 flex-col justify-between gap-4 p-2 shadow-xl",children:[de("div",{className:"flex flex-col gap-2",children:[_(B4,{to:"/",className:"flex h-11 w-11 cursor-pointer items-center justify-center",children:_(bqe,{})}),_(mw,{to:"/",tooltip:"Kanban view",children:_(Iqe,{size:"16px"})}),_(mw,{to:(n==null?void 0:n.path)??"/routine",tooltip:`Do your ${(n==null?void 0:n.name)??"latest"}${n!=null&&n.name.includes("routine")?"":" routine"}`,level:n?3:1,children:_(Aqe,{})})]}),de("div",{className:"flex flex-col gap-2",children:[_(mw,{to:"/browse-plugins",tooltip:"Browse plugins",children:_(Tqe,{})}),_(mw,{to:"/settings",tooltip:"Settings",children:_(Mqe,{})})]})]})},mw=n=>{const e=x_n({to:n.to,level:n.level??1});return de(Jh,{children:[_(Qh,{children:_(B4,{to:n.to,className:Ce("flex h-11 w-11 items-center justify-center rounded-full",e?"bg-primary-100 text-primary-600":"text-foreground-700 hover:bg-background-200 bg-transparent"),children:n.children})}),_(Yh,{side:"right",children:n.tooltip})]})},w_n=n=>_(h7e,{children:_(gce,{children:de(nE.Provider,{value:{size:"20px"},children:[n.children,_(XBe,{position:"bottom-center"})]})})}),hte=n=>_(NSe,{fallbackRender:({error:e})=>{var i;const t=(i=e.cause)==null?void 0:i.find(s=>{var o;return((o=s.extensions)==null?void 0:o.code)==="UNAUTHENTICATED"}),r=e.message.split(`
`).map(s=>_("p",{className:"text-gray-500",children:s}));return t&&window.localStorage.removeItem(P_),_("div",{className:"flex h-screen w-full items-center justify-center",children:_("div",{className:"text-center",children:t?de(ls,{children:[_("h1",{className:"text-2xl font-bold",children:"Hmm... seems you're logged out!"}),r,_("div",{className:"mt-4",children:_(B4,{to:"/login",children:_(Kl,{lg:!0,children:"Login"})})})]}):de(ls,{children:[_("h1",{className:"text-2xl font-bold",children:"Something went wrong"}),r]})})})},children:n.children});U7e({autoPrefix:!0,defaults:KVe});const $_n=ee.lazy(()=>Go(()=>import("./IndexView-be807d36.js"),[])),E_n=ee.lazy(()=>Go(()=>import("./SettingsView-d5a7674a.js"),[])),pte=ee.lazy(()=>Go(()=>import("./GeneralSettingsView-c11fe89e.js"),[])),C_n=ee.lazy(()=>Go(()=>import("./TaskSettingsView-66efcdad.js"),[])),M_n=ee.lazy(()=>Go(()=>import("./RoutineSettingsView-bacdf354.js"),[])),mte=ee.lazy(()=>Go(()=>import("./BrowsePluginsView-45df75e5.js"),[])),T_n=ee.lazy(()=>Go(()=>import("./PluginSettingsView-574f2a65.js"),[])),__n=ee.lazy(()=>Go(()=>Promise.resolve().then(()=>k_n),void 0)),A_n=ee.lazy(()=>Go(()=>import("./LoginView-d54ed73d.js"),[])),I_n=ee.lazy(()=>Go(()=>import("./TestView-127034e8.js"),[])),gte=ee.lazy(()=>Go(()=>import("./NotFoundView-244cde1e.js"),[])),R_n=ACe([{path:"/",element:_(Pee,{children:_(sq,{})}),children:[{path:"",loader:()=>{const n=window.localStorage.getItem(P_);return n?(console.info(`Authenticated with token: ${n}`),null):I2("/login")},element:_(hte,{children:de("div",{className:"flex",children:[_(S_n,{}),_(hte,{children:_(Pee,{children:_(sq,{})})})]})}),children:[{path:"",element:_($_n,{})},{path:"browse-plugins",element:_(mte,{})},{path:"settings",element:_(E_n,{}),children:[{path:"",element:_(pte,{})},{path:"general",element:_(pte,{})},{path:"tasks",element:_(C_n,{})},{path:"routines",element:_(M_n,{})},{path:"browse-plugins",element:_(mte,{})},{path:"plugin/:pluginSlug",element:_(T_n,{})},{path:"*",element:_(gte,{})}]},{path:"routine/:routineId/:routineStep",element:_(__n,{})},{path:"routine",loader:async()=>{const n=await _j();return I2(n?n.path:"/routine/1/1")}}]}]},{path:"/login",element:_(v.Suspense,{fallback:_(ls,{}),children:_(A_n,{})})},{path:"/test",element:_(I_n,{})},{path:"*",element:_(gte,{})}]);BD.createRoot(document.getElementById("root")).render(_(ee.StrictMode,{children:_(w_n,{children:_(zCe,{router:R_n})})}));export{KL as $,j_n as A,Kl as B,PSe as C,B$n as D,V_n as E,lEn as F,Oqe as G,dMn as H,$xe as I,z_n as J,fMn as K,nEn as L,N_n as M,nie as N,sq as O,uMn as P,P_n as Q,t1n as R,Pee as S,Jh as T,f_n as U,hte as V,l_n as W,JCn as X,MCn as Y,TCn as Z,ACn as _,v as a,Za as a0,X1e as a1,Xu as a2,sde as a3,B_n as a4,L_n as a5,ASe as a6,KTn as a7,UTn as a8,HTn as a9,WTn as aa,GTn as ab,JTn as ac,QTn as ad,YTn as ae,Wh as af,ls as ag,jle as ah,ZBe as b,de as c,Qn as d,x_n as e,B4 as f,l8 as g,Tj as h,Ga as i,_ as j,GCn as k,eie as l,P_ as m,Ar as n,ZA as o,Y$ as p,NT as q,ot as r,F_n as s,Ce as t,D_n as u,Qh as v,Yh as w,rEn as x,JA as y,mj as z};
