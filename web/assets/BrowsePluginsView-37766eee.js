import{$ as D,l as I,a as t,m as U,o as M,p as T,q as O,s as V,_ as g,v as _,w as B,x as K,y as L,z as h,A as j,C as G,E as q,F as z,G as H,H as J,j as r,t as W,b as d,T as w,B as E,h as Z,I as Q,J as C,K as F,M as X,n as Y,N as ee}from"./index-7daf0cae.js";import{u as te,F as ne,I as oe}from"./FormInput-b9efab16.js";const R=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"url"}],a=[{fields:[{kind:"Literal",name:"override",value:!0},{kind:"Variable",name:"url",variableName:"url"}],kind:"ObjectValue",name:"input"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"BrowsePluginsViewInstallFromUrlMutation",selections:[{alias:null,args:a,concreteType:"PluginInstallation",kind:"LinkedField",name:"installPlugin",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"SettingsView_pluginInstallation"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"BrowsePluginsViewInstallFromUrlMutation",selections:[{alias:null,args:a,concreteType:"PluginInstallation",kind:"LinkedField",name:"installPlugin",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}]},params:{cacheID:"cc161f5cb3b1562ceae17bd8c16f6493",id:null,metadata:{},name:"BrowsePluginsViewInstallFromUrlMutation",operationKind:"mutation",text:`mutation BrowsePluginsViewInstallFromUrlMutation(
  $url: String!
) {
  installPlugin(input: {url: $url, override: true}) {
    ...SettingsView_pluginInstallation
  }
}

fragment PluginSettingsView_pluginInstallation on PluginInstallation {
  slug
  url
  ...UpdatePluginButton_pluginInstallation
}

fragment SettingsView_pluginInstallation on PluginInstallation {
  slug
  ...PluginSettingsView_pluginInstallation
}

fragment UpdatePluginButton_pluginInstallation on PluginInstallation {
  url
}
`}}}();R.hash="4f4f74d2ecc6236cbafeef37e811c839";const N="Popover",[k,Ie]=D(N,[I]),P=I(),[ae,b]=k(N),re=e=>{const{__scopePopover:a,children:n,open:i,defaultOpen:l,onOpenChange:o,modal:c=!1}=e,s=P(a),f=t.useRef(null),[u,m]=t.useState(!1),[$=!1,p]=U({prop:i,defaultProp:l,onChange:o});return t.createElement(M,s,t.createElement(ae,{scope:a,contentId:T(),triggerRef:f,open:$,onOpenChange:p,onOpenToggle:t.useCallback(()=>p(x=>!x),[p]),hasCustomAnchor:u,onCustomAnchorAdd:t.useCallback(()=>m(!0),[]),onCustomAnchorRemove:t.useCallback(()=>m(!1),[]),modal:c},n))},ce="PopoverTrigger",le=t.forwardRef((e,a)=>{const{__scopePopover:n,...i}=e,l=b(ce,n),o=P(n),c=_(a,l.triggerRef),s=t.createElement(H.button,g({type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":S(l.open)},i,{ref:c,onClick:h(e.onClick,l.onOpenToggle)}));return l.hasCustomAnchor?s:t.createElement(J,g({asChild:!0},o),s)}),y="PopoverPortal",[se,ie]=k(y,{forceMount:void 0}),de=e=>{const{__scopePopover:a,forceMount:n,children:i,container:l}=e,o=b(y,a);return t.createElement(se,{scope:a,forceMount:n},t.createElement(O,{present:n||o.open},t.createElement(V,{asChild:!0,container:l},i)))},v="PopoverContent",ue=t.forwardRef((e,a)=>{const n=ie(v,e.__scopePopover),{forceMount:i=n.forceMount,...l}=e,o=b(v,e.__scopePopover);return t.createElement(O,{present:i||o.open},o.modal?t.createElement(fe,g({},l,{ref:a})):t.createElement(pe,g({},l,{ref:a})))}),fe=t.forwardRef((e,a)=>{const n=b(v,e.__scopePopover),i=t.useRef(null),l=_(a,i),o=t.useRef(!1);return t.useEffect(()=>{const c=i.current;if(c)return B(c)},[]),t.createElement(K,{as:L,allowPinchZoom:!0},t.createElement(A,g({},e,{ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h(e.onCloseAutoFocus,c=>{var s;c.preventDefault(),o.current||(s=n.triggerRef.current)===null||s===void 0||s.focus()}),onPointerDownOutside:h(e.onPointerDownOutside,c=>{const s=c.detail.originalEvent,f=s.button===0&&s.ctrlKey===!0,u=s.button===2||f;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:h(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})))}),pe=t.forwardRef((e,a)=>{const n=b(v,e.__scopePopover),i=t.useRef(!1),l=t.useRef(!1);return t.createElement(A,g({},e,{ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c;if((c=e.onCloseAutoFocus)===null||c===void 0||c.call(e,o),!o.defaultPrevented){var s;i.current||(s=n.triggerRef.current)===null||s===void 0||s.focus(),o.preventDefault()}i.current=!1,l.current=!1},onInteractOutside:o=>{var c,s;(c=e.onInteractOutside)===null||c===void 0||c.call(e,o),o.defaultPrevented||(i.current=!0,o.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const f=o.target;((s=n.triggerRef.current)===null||s===void 0?void 0:s.contains(f))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&l.current&&o.preventDefault()}}))}),A=t.forwardRef((e,a)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEscapeKeyDown:s,onPointerDownOutside:f,onFocusOutside:u,onInteractOutside:m,...$}=e,p=b(v,n),x=P(n);return j(),t.createElement(G,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:o},t.createElement(q,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:m,onEscapeKeyDown:s,onPointerDownOutside:f,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1)},t.createElement(z,g({"data-state":S(p.open),role:"dialog",id:p.contentId},x,$,{ref:a,style:{...$.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function S(e){return e?"open":"closed"}const ge=re,me=le,be=de,$e=ue,ve=ge,he=me,xe=t.forwardRef((e,a)=>r(be,{children:r($e,{...e,ref:a,className:W("bg-background-50 ring-0.5 ring-primary-100 animate-fade-in animate-duration-100 z-50 rounded-md p-2 shadow-md outline-none",e.className)})})),Pe=[{iconUrl:"FlowIcon.svg",name:"Essentials",description:"The official and default plugin for Flow containing essential features such as a morning routine and a shutdown routine.",installUrl:"https://cdn.jsdelivr.net/npm/@flowdev/essentials@0.1.0/out",version:"0.1.0",authors:[{name:"Flow",avatarUrl:"FlowIcon.svg"}]},{iconUrl:"https://ssl.gstatic.com/calendar/images/dynamiclogo_2020q4/calendar_19_2x.png",name:"Google Calendar",description:"Official Google Calendar plugin for Flow.",installUrl:"https://cdn.jsdelivr.net/npm/@flowdev/google-calendar@0.1.0/out",version:"0.1.0",authors:[{name:"Flow",avatarUrl:"FlowIcon.svg"}]}],Oe=()=>{const[e,a]=t.useState(!1);return d("div",{className:"max-w-1488px mx-auto flex w-full flex-col gap-8 p-16",children:[d("div",{className:"flex w-full flex-col gap-2",children:[r("div",{className:"w-full text-center text-3xl font-extrabold",children:"Browse plugins"}),r("div",{className:"w-full text-center text-base",children:"Sprinkle a little magic in your day"})]}),d("div",{className:"flex flex-col gap-4",children:[d("div",{className:"bg-background-50 flex items-center justify-between gap-3 rounded-md p-3",children:[d(w,{delayDuration:100,children:[r(C,{children:r(oe,{disabled:!0,placeholder:"Search...",leftIcon:r(Q,{})})}),r(F,{side:"bottom",children:"Search is not yet implemented"})]}),d(ve,{open:e,onOpenChange:a,children:[r(he,{children:d(w,{children:[r(C,{asChild:!0,children:r("button",{className:"hover:bg-background-200 text-foreground-700 rounded p-2",children:r(X,{})})}),r(F,{side:"bottom",children:"Install a plugin from a URL"})]})}),r(xe,{align:"end",className:"w-96",children:r(we,{onClose:()=>a(!1)})})]})]}),r("div",{className:"grid grid-cols-3 gap-4",children:Pe.map(n=>d("div",{className:"bg-background-50 min-w-xs flex flex-col gap-2 rounded p-4 shadow-md",children:[d("div",{className:"flex flex-col gap-1",children:[d("div",{className:"flex items-center justify-between",children:[d("div",{className:"flex items-center gap-2",children:[r("img",{src:n.iconUrl,className:"h-5 w-5"}),r("div",{className:"text-base font-medium",children:n.name})]}),r(E,{secondary:!0,children:"Install"})]}),r("div",{className:"text-foreground-700 text-sm",children:n.description})]}),r("div",{className:"text-foreground-700 flex items-center gap-4 text-sm",children:d("div",{className:"flex gap-2",children:["v",n.version]})}),d("div",{className:"text-foreground-900 flex items-center gap-2 text-sm",children:[n.authors[0].avatarUrl&&r("img",{src:n.authors[0].avatarUrl,className:"ring-primary-100 inline-block h-5 w-5 rounded-full ring"}),n.authors[0].name,n.authors.length>1&&` & ${n.authors.length-1} more`]})]},n.name))})]})]})},we=e=>{const{register:a,formState:n,handleSubmit:i,setError:l}=te(),[o,c]=Z(R);return d("form",{onSubmit:i(f=>{o({variables:f,updater:u=>{const m=u.getPluralRootField("installPlugin");u.getRoot().setLinkedRecords(m,"installedPlugins")},onCompleted:u=>{Y.success("Plugin installed"),e.onClose()},onError:u=>l("url",{message:u.message})})}),className:"flex gap-2 break-all",children:[r(ne,{...a("url",{required:"A URL is required"}),placeholder:"https://cdn.jsdelivr.net/npm/package@version/dist",error:n.errors.url,fullWidth:!0}),r("div",{className:"flex-grow-0",children:r(E,{loading:c,className:"py-2.5",children:r(ee,{size:"16px"})})})]})};export{Oe as default};
