import{d as x,j as n,I as h,t as r,r as y,o as b,s as p,B as v,L as w}from"./index-CsdgJ7iF.js";import{d as j,e as L,u as k,i as I}from"./index.esm-BZpB19gc.js";const s=function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"isFullySetup",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LoginViewQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"LoginViewQuery",selections:e},params:{cacheID:"fa89581ab8d8a86e7596ffc054e1c8dd",id:null,metadata:{},name:"LoginViewQuery",operationKind:"query",text:`query LoginViewQuery {
  isFullySetup
}
`}}}();s.hash="def3319b8c35e8ce35ce561d88a973b2";const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:"token",args:[{kind:"Variable",name:"input",variableName:"input"}],kind:"ScalarField",name:"login",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LoginViewLoginMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LoginViewLoginMutation",selections:t},params:{cacheID:"738d0d10c797d9ce46a7ab3069eaf5f2",id:null,metadata:{},name:"LoginViewLoginMutation",operationKind:"mutation",text:`mutation LoginViewLoginMutation(
  $input: MutationLoginInput!
) {
  token: login(input: $input)
}
`}}}();o.hash="15e201db0c055adbb6ccd570fc56a855";const N=x.forwardRef((e,t)=>n.jsx(h.Provider,{value:{size:"16px"},children:n.jsxs("div",{className:r("text-foreground-700 relative flex items-center",e.fullWidth&&"w-full",e.hasError&&"text-negative-600"),children:[e.leftIcon&&n.jsx("div",{className:"absolute pl-3",children:e.leftIcon}),n.jsx("input",{...e,ref:t,className:r("ring-primary-200 placeholder:text-foreground-700 text-foreground-900 disabled:bg-background-300/50 disabled:ring-none hover:ring-primary-300 focus:ring-primary-500 w-full rounded-md px-3 py-2 text-sm outline-none ring-2 transition-colors duration-300 ease-in-out",e.leftIcon&&"pl-10",e.rightIcon&&"pr-10",e.hasError&&"ring-negative-600 hover:ring-negative-600 focus:ring-negative-600 placeholder:text-negative-600",e.className)}),e.rightIcon&&n.jsx("div",{className:"absolute right-0 pr-3",children:e.rightIcon})]})})),V=y.forwardRef((e,t)=>{const a=typeof e.error=="object"?e.error.message:e.error;return n.jsxs("label",{className:r("flex flex-col gap-1",e.fullWidth&&"w-full"),children:[e.label&&n.jsx("div",{className:"text-foreground-900 text-base font-medium",children:e.label}),typeof e.description=="string"?n.jsx("div",{className:"text-foreground-700 text-sm",children:e.description}):e.description,n.jsx(N,{...e,ref:t,hasError:!!a||e.hasError}),a&&n.jsx("div",{className:"text-negative-600 text-sm",children:a})]})}),l=s,K=()=>{const{queryRef:e}=j(l);return e?n.jsx(E,{queryRef:e}):null},E=e=>b.usePreloadedQuery(l,e.queryRef).isFullySetup?n.jsx(F,{}):n.jsx("div",{children:"You have not set up your Flow yet. Please use a laptop to first set it up. (I honestly think setting it up on a phone is a bad idea)"}),F=()=>{const e=p(),{register:t,handleSubmit:a,formState:u,setError:d}=L(),[c,g]=k(o),m=f=>{c({variables:{input:{password:f.password}},onError:i=>d("password",{message:i.message}),onCompleted:i=>{window.localStorage.setItem(w,i.token),e("/")}})};return n.jsx("div",{className:"flex h-dvh p-4",children:n.jsxs("div",{className:"bg-background-50 flex max-w-md flex-col gap-8 rounded-lg p-10 justify-center",children:[n.jsx("h1",{className:"text-center text-3xl font-semibold",children:"Welcome back!"}),n.jsxs("form",{onSubmit:a(m),className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("p",{children:"Your Flow has been protected. Please input your password."}),n.jsx(V,{leftIcon:n.jsx(I,{}),type:"password",placeholder:"Password",fullWidth:!0,...t("password",{required:"Please enter your password.",minLength:{value:8,message:"Your password must be at least 8 characters long."}}),error:u.errors.password})]}),n.jsx(v,{fullWidth:!0,loading:g,children:"Login"})]})]})})};export{F as LoginForm,K as default};
